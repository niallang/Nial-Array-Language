<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Nial Dictionary - Nial Array Language</title>
<meta name="description" content="Nial Community Site">


  <meta name="author" content="John Gibbons">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Nial Array Language">
<meta property="og:title" content="Nial Dictionary">
<meta property="og:url" content="https://www.nial-array-language.org/ndocs/old/NialDict.html">


  <meta property="og:description" content="Nial Community Site">











  

  


<link rel="canonical" href="https://www.nial-array-language.org/ndocs/old/NialDict.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "John Gibbons",
      "url": "https://www.nial-array-language.org/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- Favicons from https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="theme-color" content="#ffffff">




<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/Longboat.png" alt="Nial Array Language"></a>
        
        <a class="site-title" href="/">
          Nial Array Language
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/download/">Download</a>
            </li><li class="masthead__menu-item">
              <a href="/examples/">Examples</a>
            </li><li class="masthead__menu-item">
              <a href="/ndocs/">Documentation</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/ndocs" itemprop="item"><span itemprop="name">Ndocs</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/old" itemprop="item"><span itemprop="name">Old</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Nial Dictionary</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>A-Z Listing</h3>
      <ul>
  <li>“<a href="#abs">abs</a>”</li>
</ul>

      
    
    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Nial Dictionary">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://www.nial-array-language.org/ndocs/old/NialDict.html" class="u-url" itemprop="url">Nial Dictionary
</a>
          </h1>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#topics">Topics</a><ul><li><a href="#concepts">Concepts</a><ul><li><a href="#address">address</a></li><li><a href="#argument">argument</a></li><li><a href="#array">array</a></li><li><a href="#by-variable">by-variable</a></li><li><a href="#canonical">canonical</a></li><li><a href="#clear-workspace">clear workspace</a></li><li><a href="#conform">conform</a></li><li><a href="#curried-operation">curried operation</a></li><li><a href="#debugging">debugging</a></li><li><a href="#definition">definition</a></li><li><a href="#dimensions">dimensions</a></li><li><a href="#equations">equations</a></li><li><a href="#expression">expression</a></li><li><a href="#extent">extent</a></li><li><a href="#fault-triggering">fault triggering</a></li><li><a href="#fault-values">fault values</a></li><li><a href="#functions-in-nial">functions in nial</a></li><li><a href="#global-environment">global environment</a></li><li><a href="#indexing">indexing</a></li><li><a href="#interrupt">interrupt</a></li><li><a href="#invocation-of-qnial">invocation of QNial</a></li><li><a href="#item">item</a></li><li><a href="#level">level</a></li><li><a href="#local-environment">local environment</a></li><li><a href="#nested-definition">nested definition</a></li><li><a href="#numeric-type-hierarchy">numeric type hierarchy</a></li><li><a href="#operation">operation</a></li><li><a href="#operation-composition">operation composition</a></li><li><a href="#overflow">overflow</a></li><li><a href="#pervasive">pervasive</a></li><li><a href="#prelattice-of-atoms">prelattice of atoms</a></li><li><a href="#profiling">profiling</a></li><li><a href="#program-fragment">program fragment</a></li><li><a href="#role">role</a></li><li><a href="#scope-of-a-variable">scope of a variable</a></li><li><a href="#standard-definitions">standard definitions</a></li><li><a href="#top-level-loop">top level loop</a></li><li><a href="#transformer">transformer</a></li></ul></li><li><a href="#syntax">Syntax</a><ul><li><a href="#action">action</a></li><li><a href="#assign-expression">assign expression</a></li><li><a href="#atlas">atlas</a></li><li><a href="#block">block</a></li><li><a href="#bracket-comma-notation">bracket-comma notation</a></li><li><a href="#cast">cast</a></li><li><a href="#comment">comment</a></li><li><a href="#expression-sequence">expression sequence</a></li><li><a href="#external-declaration">external declaration</a></li><li><a href="#infix-notation">infix notation</a></li><li><a href="#juxtaposition">juxtaposition</a></li><li><a href="#operation-form">operation form</a></li><li><a href="#prefix-notation">prefix notation</a></li><li><a href="#reserved-words">reserved words</a></li><li><a href="#strand-notation">strand notation</a></li><li><a href="#synonym">synonym</a></li><li><a href="#transformer-form">transformer form</a></li><li><a href="#variable">variable</a></li></ul></li><li><a href="#control-structures">Control Structures</a><ul><li><a href="#case-expr">case-expr</a></li><li><a href="#for-loop">for-loop</a></li><li><a href="#if-expr">if-expr</a></li><li><a href="#repeat-loop">repeat-loop</a></li><li><a href="#while-loop">while-loop</a></li></ul></li><li><a href="#operation-properties">Operation Properties</a><ul><li><a href="#binary">binary</a></li><li><a href="#binary-pervasive">binary pervasive</a></li><li><a href="#multi-pervasive">multi pervasive</a></li><li><a href="#predicate">predicate</a></li><li><a href="#reductive">reductive</a></li><li><a href="#unary-pervasive">unary pervasive</a></li></ul></li><li><a href="#logging-feature">Logging Feature</a><ul><li><a href="#log-file">log file</a></li></ul></li><li><a href="#constant-expressions">Constant Expressions</a><ul><li><a href="#false">false</a></li><li><a href="#null">null</a></li><li><a href="#pi">pi</a></li><li><a href="#true">true</a></li></ul></li><li><a href="#file-expressions">File Expressions</a><ul><li><a href="#filestatus">filestatus</a></li></ul></li><li><a href="#profiling-expressions">Profiling Expressions</a><ul><li><a href="#clearprofile">clearprofile</a></li><li><a href="#profiletable">profiletable</a></li><li><a href="#profiletree">profiletree</a></li></ul></li><li><a href="#system-expressions">System Expressions</a><ul><li><a href="#break">break</a></li><li><a href="#breaklist">breaklist</a></li><li><a href="#bye">bye</a></li><li><a href="#callstack">callstack</a></li><li><a href="#exprs">exprs</a></li><li><a href="#no_expr">no_expr</a></li><li><a href="#ops">ops</a></li><li><a href="#status">status</a></li><li><a href="#time">time</a></li><li><a href="#timestamp">timestamp</a></li><li><a href="#trs">trs</a></li><li><a href="#vars">vars</a></li><li><a href="#watchlist">watchlist</a></li></ul></li><li><a href="#user-defined-expression">User defined expression</a><ul><li><a href="#latent">latent</a></li></ul></li><li><a href="#arithmetic-operations">Arithmetic operations</a></li><li><a href="#array-generation-operations">Array generation operations</a></li><li><a href="#comparison-operations">Comparison operations</a></li><li><a href="#construction-operations">Construction operations</a></li><li><a href="#control-flow-operation">Control flow operation</a></li><li><a href="#conversion-operations">Conversion operations</a></li><li><a href="#data-rearrangement-operations">Data rearrangement operations</a></li><li><a href="#evaluation-operations">Evaluation operations</a></li><li><a href="#file-operations">File operations</a></li><li><a href="#insertion-operations">Insertion operations</a></li><li><a href="#interactive-io-operations">Interactive i/o operations</a></li><li><a href="#linear-algebra-operations">Linear algebra operations</a></li><li><a href="#logic-operations">Logic operations</a></li><li><a href="#measurement-operations">Measurement operations</a></li><li><a href="#nesting-restructuring-operations">Nesting restructuring operations</a></li><li><a href="#nial-direct-access-file-operations">Nial direct access file operations</a></li><li><a href="#picture-operations">Picture operations</a></li><li><a href="#profiling-operations">Profiling operations</a></li><li><a href="#reshaping-operations">Reshaping operations</a></li><li><a href="#scientific-operations">Scientific operations</a></li><li><a href="#search-operations">Search operations</a></li><li><a href="#selection-operations">Selection operations</a></li><li><a href="#set-like-operations">Set-like operations</a></li><li><a href="#structure-testing-operations">Structure testing operations</a></li><li><a href="#sorting-operations">Sorting operations</a></li><li><a href="#system-operations">System operations</a></li><li><a href="#host-direct-access-file-operations">Host direct access file operations</a></li><li><a href="#applicative-transformers">Applicative transformers</a></li><li><a href="#apply-by-partition-transformers">Apply-by-partition transformers</a></li><li><a href="#control-flow-transformer">Control flow transformer</a></li><li><a href="#control-structure-transformers">Control structure transformers</a></li><li><a href="#distributive-transformers">Distributive transformers</a></li><li><a href="#recursion-transformers">Recursion transformers</a></li><li><a href="#reduction-transformers">Reduction transformers</a></li><li><a href="#selection-transformer">Selection transformer</a></li><li><a href="#sorting-transformers">Sorting transformers</a></li><li><a href="#system-transformer">System transformer</a></li><li><a href="#system-variables">System variables</a></li><li><a href="#system-constants">System constants</a></li><li><a href="#debugging-commands">Debugging commands</a></li></ul></li><li><a href="#a-z-listing">A-Z Listing</a><ul><li><a href="#abs">abs</a></li><li><a href="#accumulate">accumulate</a></li><li><a href="#across">across</a></li><li><a href="#allbools">allbools</a></li><li><a href="#allchars">allchars</a></li><li><a href="#allin">allin</a></li><li><a href="#allints">allints</a></li><li><a href="#allnumeric">allnumeric</a></li><li><a href="#allreals">allreals</a></li><li><a href="#and">and</a></li><li><a href="#append">append</a></li><li><a href="#appendfile">appendfile</a></li><li><a href="#apply">apply</a></li><li><a href="#arccos">arccos</a></li><li><a href="#arcsin">arcsin</a></li><li><a href="#arctan">arctan</a></li><li><a href="#assign">assign</a></li><li><a href="#atomic">atomic</a></li><li><a href="#axes">axes</a></li><li><a href="#blend">blend</a></li><li><a href="#breakin">breakin</a></li><li><a href="#bycols">bycols</a></li><li><a href="#bykey">bykey</a></li><li><a href="#byrows">byrows</a></li><li><a href="#cart">cart</a></li><li><a href="#catch">catch</a></li><li><a href="#catenate">catenate</a></li><li><a href="#ceiling">ceiling</a></li><li><a href="#char">char</a></li><li><a href="#charrep">charrep</a></li><li><a href="#choose">choose</a></li><li><a href="#close">close</a></li><li><a href="#cols">cols</a></li><li><a href="#content">content</a></li><li><a href="#converse">converse</a></li><li><a href="#cos">cos</a></li><li><a href="#cosh">cosh</a></li><li><a href="#count">count</a></li><li><a href="#cull">cull</a></li><li><a href="#cut">cut</a></li><li><a href="#cutall">cutall</a></li><li><a href="#deepplace">deepplace</a></li><li><a href="#deepupdate">deepupdate</a></li><li><a href="#deparse">deparse</a></li><li><a href="#depth">depth</a></li><li><a href="#descan">descan</a></li><li><a href="#diagram">diagram</a></li><li><a href="#display">display</a></li><li><a href="#diverse">diverse</a></li><li><a href="#divide">divide</a></li><li><a href="#down">down</a></li><li><a href="#drop">drop</a></li><li><a href="#dropright">dropright</a></li><li><a href="#each">each</a></li><li><a href="#eachall">eachall</a></li><li><a href="#eachboth">eachboth</a></li><li><a href="#eachleft">eachleft</a></li><li><a href="#eachright">eachright</a></li><li><a href="#edit">edit</a></li><li><a href="#empty">empty</a></li><li><a href="#equal">equal</a></li><li><a href="#erase">erase</a></li><li><a href="#eraserecord">eraserecord</a></li><li><a href="#eval">eval</a></li><li><a href="#except">except</a></li><li><a href="#execute">execute</a><ul><li><a href="#exp">exp</a></li></ul></li><li><a href="#fault">fault</a></li><li><a href="#filelength">filelength</a></li><li><a href="#filetally">filetally</a></li><li><a href="#filter">filter</a></li><li><a href="#find">find</a></li><li><a href="#findall">findall</a></li><li><a href="#first">first</a></li><li><a href="#flip">flip</a></li><li><a href="#floor">floor</a></li><li><a href="#fold">fold</a></li><li><a href="#fork">fork</a></li><li><a href="#fromraw">fromraw</a></li><li><a href="#front">front</a></li><li><a href="#fuse">fuse</a></li><li><a href="#gage">gage</a></li><li><a href="#getdef">getdef</a></li><li><a href="#getfile">getfile</a></li><li><a href="#getname">getname</a></li><li><a href="#getsyms">getsyms</a></li><li><a href="#grade">grade</a></li><li><a href="#gradeup">gradeup</a></li><li><a href="#grid">grid</a></li><li><a href="#gt">gt</a></li><li><a href="#gte">gte</a></li><li><a href="#hitch">hitch</a></li><li><a href="#host">host</a></li><li><a href="#in">in</a></li><li><a href="#inner">inner</a></li><li><a href="#innerproduct">innerproduct</a></li><li><a href="#inverse">inverse</a></li><li><a href="#isboolean">isboolean</a></li><li><a href="#ischar">ischar</a></li><li><a href="#isfault">isfault</a></li><li><a href="#isinteger">isinteger</a></li><li><a href="#isphrase">isphrase</a></li><li><a href="#isreal">isreal</a></li><li><a href="#isstring">isstring</a></li><li><a href="#iterate">iterate</a></li><li><a href="#laminate">laminate</a></li><li><a href="#last">last</a></li><li><a href="#leaf">leaf</a></li><li><a href="#libpath">libpath</a></li><li><a href="#library">library</a></li><li><a href="#like">like</a></li><li><a href="#link">link</a></li><li><a href="#list">list</a></li><li><a href="#ln">ln</a></li><li><a href="#load">load</a></li><li><a href="#loaddefs">loaddefs</a></li><li><a href="#log">log</a></li><li><a href="#lower">lower</a></li><li><a href="#lt">lt</a></li><li><a href="#lte">lte</a></li><li><a href="#match">match</a></li><li><a href="#mate">mate</a></li><li><a href="#max">max</a></li><li><a href="#min">min</a></li><li><a href="#minus">minus</a></li><li><a href="#mix">mix</a></li><li><a href="#mod">mod</a></li><li><a href="#mold">mold</a></li><li><a href="#next">next</a></li><li><a href="#no_op">no_op</a></li><li><a href="#no_tr">no_tr</a></li><li><a href="#no_value">no_value</a></li><li><a href="#not">not</a></li><li><a href="#notin">notin</a></li><li><a href="#numeric">numeric</a></li><li><a href="#open">open</a></li><li><a href="#opposite">opposite</a></li><li><a href="#or">or</a></li><li><a href="#outer">outer</a></li><li><a href="#pack">pack</a></li><li><a href="#pair">pair</a></li><li><a href="#parse">parse</a></li><li><a href="#partition">partition</a></li><li><a href="#pass">pass</a></li><li><a href="#paste">paste</a></li><li><a href="#phrase">phrase</a></li><li><a href="#pick">pick</a></li><li><a href="#picture">picture</a></li><li><a href="#place">place</a></li><li><a href="#placeall">placeall</a></li><li><a href="#plus">plus</a></li><li><a href="#positions">positions</a></li><li><a href="#post">post</a></li><li><a href="#power">power</a></li><li><a href="#product">product</a></li><li><a href="#profile">profile</a></li><li><a href="#putfile">putfile</a></li><li><a href="#quiet_fault">quiet_fault</a></li><li><a href="#quotient">quotient</a></li><li><a href="#raise">raise</a></li><li><a href="#random">random</a></li><li><a href="#rank">rank</a></li><li><a href="#reach">reach</a></li><li><a href="#read">read</a></li><li><a href="#readarray">readarray</a></li><li><a href="#readfield">readfield</a></li><li><a href="#readfile">readfile</a></li><li><a href="#readrecord">readrecord</a></li><li><a href="#readscreen">readscreen</a></li><li><a href="#reciprocal">reciprocal</a></li><li><a href="#recur">recur</a></li><li><a href="#reduce">reduce</a></li><li><a href="#reducecols">reducecols</a></li><li><a href="#reducerows">reducerows</a></li><li><a href="#reshape">reshape</a></li><li><a href="#rest">rest</a></li><li><a href="#resume">resume</a></li><li><a href="#reverse">reverse</a></li><li><a href="#rotate">rotate</a></li><li><a href="#rows">rows</a></li><li><a href="#save">save</a></li><li><a href="#scan">scan</a></li><li><a href="#second">second</a></li><li><a href="#see">see</a></li><li><a href="#seed">seed</a></li><li><a href="#seek">seek</a></li><li><a href="#seeprimcalls">seeprimcalls</a></li><li><a href="#seeusercalls">seeusercalls</a></li><li><a href="#set">set</a></li><li><a href="#setdeftrace">setdeftrace</a></li><li><a href="#setformat">setformat</a></li><li><a href="#setinterrupts">setinterrupts</a></li><li><a href="#setlogname">setlogname</a></li><li><a href="#setprofile">setprofile</a></li><li><a href="#setprompt">setprompt</a></li><li><a href="#settrigger">settrigger</a></li><li><a href="#setwidth">setwidth</a></li><li><a href="#shape">shape</a></li><li><a href="#simple">simple</a></li><li><a href="#sin">sin</a></li><li><a href="#single">single</a></li><li><a href="#sinh">sinh</a></li><li><a href="#sketch">sketch</a></li><li><a href="#solitary">solitary</a></li><li><a href="#solve">solve</a></li><li><a href="#sort">sort</a></li><li><a href="#sortup">sortup</a></li><li><a href="#split">split</a></li><li><a href="#sqrt">sqrt</a></li><li><a href="#step">step</a></li><li><a href="#stepin">stepin</a></li><li><a href="#string">string</a></li><li><a href="#string_split">string_split</a></li><li><a href="#string_translate">string_translate</a></li><li><a href="#sublist">sublist</a></li><li><a href="#sum">sum</a></li><li><a href="#symbols">symbols</a></li><li><a href="#take">take</a></li><li><a href="#takeright">takeright</a></li><li><a href="#tally">tally</a></li><li><a href="#tan">tan</a></li><li><a href="#tanh">tanh</a></li><li><a href="#team">team</a></li><li><a href="#tell">tell</a></li><li><a href="#third">third</a></li><li><a href="#times">times</a></li><li><a href="#toend">toend</a></li><li><a href="#tolower">tolower</a></li><li><a href="#tonumber">tonumber</a></li><li><a href="#toraw">toraw</a></li><li><a href="#toupper">toupper</a></li><li><a href="#transpose">transpose</a></li><li><a href="#twig">twig</a></li><li><a href="#type">type</a></li><li><a href="#unequal">unequal</a></li><li><a href="#up">up</a></li><li><a href="#update">update</a></li><li><a href="#updateall">updateall</a></li><li><a href="#throw">throw</a></li><li><a href="#vacate">vacate</a></li><li><a href="#valence">valence</a></li><li><a href="#value">value</a></li><li><a href="#void">void</a></li><li><a href="#watch">watch</a></li><li><a href="#write">write</a></li><li><a href="#writearray">writearray</a></li><li><a href="#writechars">writechars</a></li><li><a href="#writefield">writefield</a></li><li><a href="#writefile">writefile</a></li><li><a href="#writerecord">writerecord</a></li><li><a href="#writescreen">writescreen</a></li></ul></li></ul>

            </nav>
          </aside>
        
        
<h1 id="topics">Topics</h1>
<h2 id="concepts">Concepts</h2>

<h3 id="address">address</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#array">array</a>, <a href="#pick">pick</a>, <a href="#indexing">indexing</a></li>
</ul>

<p>An <strong>address</strong> is an integer or a list of integers describing the
location of an item in an array. An address uses 0-origin counting, i.e.
the first position in a list is at address 0. All the addresses of an
array can be stored in an array of the same rectangular structure as the
array itself. Such an array is called the <strong>grid</strong> of an array. Consider
the following example:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>             <span class="kp">GRID</span> <span class="nv">OF</span> <span class="nv">THE</span> <span class="nv">ARRAY</span>                 <span class="nv">ARRAY</span>
<span class="o">+-----+-----+-----+-----+-----+-----+</span> <span class="o">+---+---+---+---+---+---+</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span> <span class="o">|</span><span class="mi">499</span><span class="o">|</span><span class="mi">434</span><span class="o">|</span><span class="mi">122</span><span class="o">|</span><span class="mi">770</span><span class="o">|</span><span class="mi">733</span><span class="o">|</span><span class="mi">890</span><span class="o">|</span>
<span class="o">||</span><span class="mi">0</span><span class="o">|</span><span class="mi">0</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">1</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">2</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">3</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">4</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">5</span><span class="o">||</span> <span class="o">+---+---+---+---+---+---+</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span> <span class="o">|</span><span class="mi">660</span><span class="o">|</span><span class="mi">160</span><span class="o">|</span> <span class="mi">32</span><span class="o">|</span><span class="mi">808</span><span class="o">|</span><span class="mi">240</span><span class="o">|</span><span class="mi">584</span><span class="o">|</span>
<span class="o">+-----+-----+-----+-----+-----+-----+</span> <span class="o">+---+---+---+---+---+---+</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span> <span class="o">|</span><span class="mi">473</span><span class="o">|</span><span class="mi">235</span><span class="o">|</span><span class="mi">164</span><span class="o">|</span><span class="mi">496</span><span class="o">|</span><span class="mi">808</span><span class="o">|</span><span class="mi">966</span><span class="o">|</span>
<span class="o">||</span><span class="mi">1</span><span class="o">|</span><span class="mi">0</span><span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">1</span><span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">3</span><span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">4</span><span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">5</span><span class="o">||</span> <span class="o">+---+---+---+---+---+---+</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span> <span class="o">|</span><span class="mi">156</span><span class="o">|</span><span class="mi">205</span><span class="o">|</span> <span class="mi">34</span><span class="o">|</span><span class="mi">576</span><span class="o">|</span><span class="mi">236</span><span class="o">|</span><span class="mi">454</span><span class="o">|</span>
<span class="o">+-----+-----+-----+-----+-----+-----+</span> <span class="o">+---+---+---+---+---+---+</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span>
<span class="o">||</span><span class="mi">2</span><span class="o">|</span><span class="mi">0</span><span class="o">|||</span><span class="mi">2</span><span class="o">|</span><span class="mi">1</span><span class="o">|||</span><span class="mi">2</span><span class="o">|</span><span class="mi">2</span><span class="o">|||</span><span class="mi">2</span><span class="o">|</span><span class="mi">3</span><span class="o">|||</span><span class="mi">2</span><span class="o">|</span><span class="mi">4</span><span class="o">|||</span><span class="mi">2</span><span class="o">|</span><span class="mi">5</span><span class="o">||</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span>
<span class="o">+-----+-----+-----+-----+-----+-----+</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span>
<span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">0</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">1</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">2</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">3</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">5</span><span class="o">||</span>
<span class="o">|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|+-+-+|</span>
<span class="o">+-----+-----+-----+-----+-----+-----+</span>
</code></pre></div></div>

<p>The array on the right is a 4 by 6 table of numbers. It has 24 items
arranged along two directions of length 4 and 6 respectively. The
address of 496 is [2,3].</p>

<p>The addresses of a <code class="language-nial highlighter-rouge"><span class="kp">list</span></code> are integers: 0, 1, etc. For convenience, in
situations where an address of a list is expected, a solitary integer is
treated as an integer.</p>

<p>The address of a <code class="language-nial highlighter-rouge"><span class="kp">single</span></code> is the empty list <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<hr />

<h3 id="argument">argument</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#operation">operation</a></li>
</ul>

<p>An <strong>argument</strong> is an array value supplied to an operation. All
operations in Nial take a single array as the argument, but binary
operations expect that argument to be a pair. When an operation is used
in infix syntax, then the two array values on the left and right are
combined into a pair to be supplied as the argument to the operation.</p>

<p>The argument to an operation-form is treated specially. If the
operation-form has only one formal parameter then the argument is
assigned to the parameter. If it has two or more formal parameters, then
the argument is checked to see if it has the same number of items as
there are parameters. If so, the items are assigned to the parameters.
If not, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?op_parameter</span></code>.</p>

<hr />

<h3 id="array">array</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#item">item</a>, <a href="#address">address</a>, <a href="#dimensions">dimensions</a></li>
</ul>

<p>The data objects of Nial are nested rectangular arrays. Atomic data
objects such as numbers and characters are included within this
description by virtue of an atom being considered as a self-containing
array object with no dimensions.</p>

<p><strong>Atomic Arrays</strong></p>

<p>There are six types of atoms in Nial. They are <code class="language-nial highlighter-rouge"><span class="nv">boolean</span></code>, integer, real,
character, phrase and <code class="language-nial highlighter-rouge"><span class="kp">fault</span></code>. The first three are <strong>numeric</strong> types and
are used for arithmetic operations. The last three are <strong>literal</strong> types
and are used for text and symbol manipulation. All six types of atoms
are used in comparisons.</p>

<p><strong>Rectangularity Structure</strong></p>

<p>An <strong>array</strong> is a collection of data objects having its <strong>items</strong> held
at locations in a rectangular structure. The items are viewed as being
at locations that are positioned relative to a set of directions at
right angles to each other. The items may be arranged along zero, one,
two or more directions. For example, the following array is a 4 by 6
table of numbers. It has 24 items arranged along two directions of
length 4 and 6 respectively.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                   <span class="o">+---+---+---+---+---+---+</span>
                   <span class="o">|</span><span class="mi">499</span><span class="o">|</span><span class="mi">434</span><span class="o">|</span><span class="mi">122</span><span class="o">|</span><span class="mi">770</span><span class="o">|</span><span class="mi">733</span><span class="o">|</span><span class="mi">890</span><span class="o">|</span>
                   <span class="o">+---+---+---+---+---+---+</span>
                   <span class="o">|</span><span class="mi">660</span><span class="o">|</span> <span class="mi">32</span><span class="o">|</span><span class="mi">808</span><span class="o">|</span> <span class="mi">24</span><span class="o">|</span>  <span class="mi">5</span><span class="o">|</span><span class="mi">473</span><span class="o">|</span>
                   <span class="o">+---+---+---+---+---+---+</span>
                   <span class="o">|</span><span class="mi">499</span><span class="o">|</span><span class="mi">434</span><span class="o">|</span><span class="mi">122</span><span class="o">|</span><span class="mi">770</span><span class="o">|</span><span class="mi">733</span><span class="o">|</span><span class="mi">890</span><span class="o">|</span>
                   <span class="o">+---+---+---+---+---+---+</span>
                   <span class="o">|</span><span class="mi">660</span><span class="o">|</span> <span class="mi">32</span><span class="o">|</span><span class="mi">808</span><span class="o">|</span> <span class="mi">24</span><span class="o">|</span>  <span class="mi">5</span><span class="o">|</span><span class="mi">473</span><span class="o">|</span>
                   <span class="o">+---+---+---+---+---+---+</span>
</code></pre></div></div>

<p>The items of an array are themselves arrays. Thus, an array can have an
arbitrarily deep nesting structure.</p>

<hr />

<h3 id="by-variable">by-variable</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#argument">argument</a>, <a href="#assign">assign</a></li>
</ul>

<p>One use of the operation <code class="language-nial highlighter-rouge"><span class="kp">assign</span></code> is to mimic a <strong>by-variable</strong> form of
parameter passing in place of Nial’s by-value form. The result depends
on what kind of name is provided, a phrase or a cast. If the name is
provided as a phrase, the variable that is selected is determined by
<code class="language-nial highlighter-rouge"><span class="kp">assign</span></code> when it does the assignment by looking first in the local
environment and then in the surrounding ones. If the name is provided as
a cast, the variable selected is the one that exists at the point where
the cast is formed. Thus, by-variable parameter passing is achieved by
using the cast of the variable as an argument in the call. In the body
of the operation the formal parameter is assigned using <code class="language-nial highlighter-rouge"><span class="kp">assign</span></code> and
evaluated using <code class="language-nial highlighter-rouge"><span class="kp">value</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">foo</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">A</span> <span class="nv">Nm</span> <span class="p">{</span><span class="err">­</span>
       <span class="nv">B</span> <span class="p">:=</span> <span class="nv">A</span> <span class="o">+</span> <span class="kp">value</span> <span class="nv">Nm</span><span class="p">;</span>
       <span class="nv">Nm</span> <span class="kp">assign</span> <span class="p">(</span><span class="nv">B</span> <span class="o">+</span> <span class="kp">sum</span> <span class="kp">count</span> <span class="mi">5</span><span class="p">);</span> <span class="p">}</span>

     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">100</span><span class="p">;</span>
     <span class="nv">foo</span> <span class="mi">1000</span> <span class="ss">"X</span><span class="p">;</span>
     <span class="nv">X</span>
<span class="mi">1115</span>
</code></pre></div></div>

<h3 id="canonical">canonical</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#descan">descan</a>, <a href="#execute">execute</a></li>
</ul>

<p>There is a <strong>canonical</strong> way of displaying program text in Nial. This is
done automatically by the routines <code class="language-nial highlighter-rouge"><span class="kp">descan</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> used by <code class="language-nial highlighter-rouge"><span class="kp">see</span></code>.
The canonical form sets the case of all identifiers used in Nial program
text according to their role in order to assist visual parsing of Nial
text. The following table summarizes the rules:</p>

<table>
  <thead>
    <tr>
      <th>Role</th>
      <th>Case rule</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Variable</td>
      <td>first letter upper case, the rest lower case</td>
    </tr>
    <tr>
      <td>Expression</td>
      <td>first letter upper case, the rest lower case</td>
    </tr>
    <tr>
      <td>Operation</td>
      <td>all lower case</td>
    </tr>
    <tr>
      <td>Transformer</td>
      <td>all upper case</td>
    </tr>
    <tr>
      <td>Reserved Word</td>
      <td>all upper case</td>
    </tr>
  </tbody>
</table>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">canonical</span> <span class="k">IS</span> <span class="kp">link</span> <span class="kp">descan</span> <span class="kp">deparse</span> <span class="kp">parse</span> <span class="kp">scan</span>
</code></pre></div></div>

<h3 id="clear-workspace">clear workspace</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#standard-definitions">standard definitions</a>, <a href="#save">save</a>,
<a href="#load">load</a>, <a href="#symbols">symbols</a></li>
</ul>

<p>Q’Nial organizes the data and code objects available for use into a
logical structure called a <strong>workspace</strong> . It consists of a symbol table
to hold associations between names and the predefined and user defined
objects, a heap to store data and parse trees, a stack used to hold
values temporarily during execution, and an atom table for uniquely
storing phrases and faults.</p>

<p>When Q’Nial is invoked for interactive use it starts the session with a
clear workspace unless a specific saved workspace is requested. The
clear workspace is created by an initialization process.</p>

<h3 id="conform">conform</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#pack">pack</a>, <a href="#binary-pervasive">binary pervasive</a>, <a href="#multi-pervasive">multi
pervasive</a></li>
</ul>

<p>The operation pack is used in evaluating binary pervasive and multi
pervasive operations. Its task is to interchange the top two levels of
the argument to such operations if the items of the argument <strong>conform</strong>
. For the binary case there are two items; they conform if the items
have the same shape, or if one or both items have only one item. In the
latter case, the item with only one item is replicated to the shape of
the other item.</p>

<p>For the multi pervasive case, all the items that do not have only one
item must be of the same shape and all the items with one item are
replicated to that shape.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">pack</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">,</span><span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="p">]</span>
<span class="o">+----+----+----+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">10</span><span class="o">|</span><span class="mi">3</span> <span class="mi">11</span><span class="o">|</span><span class="mi">4</span> <span class="mi">12</span><span class="o">|</span>
<span class="o">+----+----+----+</span>

     <span class="kp">pack</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span><span class="p">,</span><span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="p">]</span>
<span class="gr">?conform</span>

     <span class="kp">pack</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="p">,[</span><span class="mi">4</span><span class="p">]]</span>
<span class="o">+--------+--------+--------+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">4</span><span class="o">|</span><span class="mi">4</span> <span class="mi">3</span> <span class="mi">11</span> <span class="mi">4</span><span class="o">|</span><span class="mi">5</span> <span class="mi">3</span> <span class="mi">12</span> <span class="mi">4</span><span class="o">|</span>
<span class="o">+--------+--------+--------+</span>

     <span class="kp">pack</span> <span class="p">[</span><span class="kp">tell</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">,</span><span class="kp">count</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">+---------+---------+---------+---------+---------+</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">4</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">4</span><span class="o">|</span><span class="mi">1</span> <span class="mi">5</span><span class="o">||</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">+---------+---------+---------+---------+---------+</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span><span class="mi">2</span> <span class="mi">4</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">4</span><span class="o">|</span><span class="mi">2</span> <span class="mi">5</span><span class="o">||</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">+---------+---------+---------+---------+---------+</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">||</span><span class="mi">2</span> <span class="mi">0</span><span class="o">|</span><span class="mi">3</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">3</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">3</span> <span class="mi">3</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">||</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">+---------+---------+---------+---------+---------+</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">||</span><span class="mi">3</span> <span class="mi">0</span><span class="o">|</span><span class="mi">4</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">3</span> <span class="mi">1</span><span class="o">|</span><span class="mi">4</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">3</span> <span class="mi">2</span><span class="o">|</span><span class="mi">4</span> <span class="mi">3</span><span class="o">|||</span><span class="mi">3</span> <span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">4</span><span class="o">|||</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span><span class="o">||</span>
<span class="o">|+---+---+|+---+---+|+---+---+|+---+---+|+---+---+|</span>
<span class="o">+---------+---------+---------+---------+---------+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">conform</span> <span class="k">IS</span> <span class="k">OP</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
         <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span>
           <span class="p">(</span><span class="kp">not</span> <span class="p">(</span><span class="nb">EACH</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">match</span> <span class="mi">1</span><span class="p">)</span> <span class="kp">sublist</span> <span class="nv">A</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="curried-operation">curried operation</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#apply">apply</a>, <a href="#operation-composition">operation composition</a></li>
</ul>

<p>A <code class="language-nial highlighter-rouge"><span class="nv">curried</span><span class="o">-</span><span class="kp">operation</span></code> is an operation in which the left item of a
two-item argument is combined with a given operation to form an
operation expression. Examples are: <code class="language-nial highlighter-rouge"><span class="mi">1</span><span class="o">+</span></code> and <code class="language-nial highlighter-rouge"><span class="mi">3</span> <span class="kp">reshape</span></code>.</p>

<p>A curried operation can be named or grouped in parentheses as an
argument to a transformer.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">incr</span> <span class="k">IS</span> <span class="mi">1</span><span class="o">+</span>

     <span class="nb">EACH</span> <span class="p">(</span><span class="mi">5</span> <span class="kp">take</span><span class="p">)</span> <span class="nv">Lines</span>
</code></pre></div></div>

<p>In general, the syntax of a curried operation is:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       <span class="nv">curried</span><span class="o">-</span><span class="kp">operation</span> <span class="p">::=</span> <span class="kp">simple</span><span class="o">-</span><span class="kp">expression</span> <span class="kp">simple</span><span class="o">-</span><span class="kp">operation</span>
</code></pre></div></div>

<p>The result of applying a curried-operation is determined by applying the
simple-operation to the pair formed from the simple-expression and the
argument to the curried-operation. Thus,</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="p">)</span> <span class="mi">5</span>
<span class="mi">6</span>
</code></pre></div></div>

<p>is interpreted as</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">6</span>
</code></pre></div></div>

<h3 id="debugging">debugging</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#breakin">breakin</a>, <a href="#watch">watch</a></li>
</ul>

<p><strong>Debugging Definitions</strong></p>

<p>The Q’Nial system provides an optional debugging facility that aids
interactive debugging of definitions. It is active by default, but can
be turned off for running production applications. See the detailed
documentation for the various versions on how to turn off debugging.</p>

<p>The debugging system is based on the idea of placing breaks in the code
and stepping through the program code in a number of different ways. Due
to constraints in the way Q’Nial is implemented, debugging is always
done in the context of an expression sequence. A break point occurs
either before the execution of the expression sequence in a definition,
or at an explicit break expression within an expression sequence. There
is also a watch mechanism that executes a defined action whenever the
value of a variable changes, and an ability monitor all use of user
defined objects and of the predefined operations.</p>

<p><strong>Defining a Break Point</strong></p>

<p>There are two ways to cause a break in a Nial definition: by using the
expression <code class="language-nial highlighter-rouge"><span class="kp">Break</span></code> in an expression sequence, or by using the operation
<code class="language-nial highlighter-rouge"><span class="kp">breakin</span></code> to set a break on entry to the operation. The following table
summarizes the break related
primitives:</p>

<table>
  <thead>
    <tr>
      <th>Expression</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Break</td>
      <td>Suspend evaluation of the expression and pass control to an evaluation loop in the environment at the point of the break. Variables accessible at that point can be displayed. This loop recognizes a number of commands described below.</td>
    </tr>
    <tr>
      <td>breakin Nm [M]</td>
      <td>Set or rest an internal break flag for the definition of <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> . If the boolean value <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> is omitted, the flag is toggled. If set, a break occurs before the execution of the expression sequence of the definition. The <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> must be the name of a defined expression or a defined operation using the operation form style of operation expression.</td>
    </tr>
    <tr>
      <td>Breaklist</td>
      <td>Display the list of names of definitions with break flag set.</td>
    </tr>
  </tbody>
</table>

<h3 id="definition">definition</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#expression">expression</a>, <a href="#operation">operation</a>,
<a href="#transformer">transformer</a></li>
</ul>

<p>A <strong>definition</strong> in Nial is a syntactic construct that names a program
fragment. The syntax is one of the three forms:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>  <span class="k">IS</span>  <span class="o">&lt;</span><span class="nv">array</span> <span class="kp">expression</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>  <span class="k">IS</span>  <span class="o">&lt;</span><span class="kp">operation</span> <span class="kp">expression</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>  <span class="k">IS</span>  <span class="o">&lt;</span><span class="kp">transformer</span> <span class="kp">expression</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>A definition is used to associate a name (identifier) with a program
fragment that is an array expression, an operation expression or a
transformer expression. If the definition appears within a block, the
association is made in the local environment. Otherwise, the association
is made in the global environment and assigns a role to the name as
representing that kind of expression.</p>

<p>If the program fragment is syntactically correct, the name is associated
with the program fragment in the environment and no result is given. If
a syntax error is detected in the analysis of the program fragment, an
explanatory fault message is returned and the name association is not
made.</p>

<p>If the name being associated in a definition is already in use, the new
definition must be for a construct of the same role and the earlier
definition is replaced. The use of a defined name always refers to its
most recent definition.</p>

<h3 id="dimensions">dimensions</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#valence">valence</a>, <a href="#axes">axes</a></li>
</ul>

<p>The number of axes of an array is referred to as its dimensionality. In
array theory terminology the dimensionality is called the <strong>valence</strong> of
the array. The following terms describe arrays by their valence:</p>

<table>
  <thead>
    <tr>
      <th>Valence</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>single</td>
    </tr>
    <tr>
      <td>1</td>
      <td>list, vector</td>
    </tr>
    <tr>
      <td>2</td>
      <td>table, matrix</td>
    </tr>
    <tr>
      <td>2 or more</td>
      <td>multivalent</td>
    </tr>
  </tbody>
</table>

<h3 id="equations">equations</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
</ul>

<p>The equations in the Nial Dictionary and in the on-line help provide an
abbreviated way of stating properties of the term or object being
described. They could be expanded into an explanation in English but
that would lengthen the manual considerably.</p>

<p>The equations use variables such as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>,<code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">C</span></code> that take on array
values; and variables such as <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>, g and <code class="language-nial highlighter-rouge"><span class="nv">h</span></code> that denote operations that
map arrays to arrays. An equation holds for all arrays and for all
computable operations without side effects, unless a specific
qualification is made. Thus, the equation:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="p">(</span><span class="nb">EACH</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">EACH</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span>
</code></pre></div></div>

<p>says that for all operations <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> and all arrays <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the use of
the <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> transform of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> on the result of the use of the <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code>
transform of <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> on <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has the same value as the use of the <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code>
transform of the composition of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> on <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. In mathematical
terms, the <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> transformer distributes over operation composition.</p>

<p>The symbol <code class="language-nial highlighter-rouge"><span class="o">=</span></code> is used in its mathematical sense in equations and
separates two Nial expressions. The symbol <code class="language-nial highlighter-rouge"><span class="o">=</span></code> has higher precedence
than the two expressions it is separating. Where the Nial equivalent to
<code class="language-nial highlighter-rouge"><span class="o">=</span></code> is needed to state the equation, the term <code class="language-nial highlighter-rouge"><span class="kp">equal</span></code> is used.</p>

<p>To test an equation using Q’Nial, in order to force the correct parsing
of the equation as a Nial expression, it may be necessary to replace</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>               <span class="nv">Expr1</span> <span class="o">=</span> <span class="nv">Expr2</span>
</code></pre></div></div>

<p>with</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>               <span class="nv">Expr1</span> <span class="o">=</span> <span class="p">(</span> <span class="nv">Expr2</span> <span class="p">)</span>
</code></pre></div></div>

<p>The equality used in equations assumes that both sides of the equations
compute without triggering a fault and produce equal arrays; or both
produce the same fault value if fault triggering is off. In some cases,
the equality is inexact due to roundoff errors.</p>

<p>The symbol <code class="language-nial highlighter-rouge"><span class="o">=</span><span class="nv">f</span><span class="o">=</span></code> is used to denote an equality where both sides produce
the same non-fault value; but in some cases one or both of the sides may
fault and the equality is no longer valid.</p>

<p>Some of the equations are qualified by a constraint on the variables.
The constraint is written in English or as a conditional expression in
Nial that must hold for the equation to be true. In a statement of the
form</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>               <span class="nv">Expr</span> <span class="o">==&gt;</span> <span class="nv">Eqn</span>
</code></pre></div></div>

<p>Expr is the qualification written as a Nial boolean expression, the
symbol ==&gt; is used for “implies”, and Eqn is the equation that holds
under the qualification.</p>

<p>The symbol &lt;==&gt; denotes an if and only if implication. Thus a
statement of the form</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>              <span class="nv">Expr1</span> <span class="o">&lt;==&gt;</span> <span class="nv">Expr2</span>
</code></pre></div></div>

<p>states that both expressions have the same truth value; either both are
true or both are false.</p>

<p><strong>Reading the Equations</strong></p>

<p>The equations related to <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code>, the operation that finds the absolute
value of a number, are:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">abs</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">abs</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="kp">abs</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">abs</span> <span class="kp">abs</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">abs</span> <span class="nv">A</span>
</code></pre></div></div>

<p>The first two come from the property that <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code> is <code class="language-nial highlighter-rouge"><span class="nv">unary</span> <span class="nv">pervasive</span></code>.
The first one says that applying <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code> to an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the same as
applying <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code> to the items of array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. It also implies that the shape
of the result of <code class="language-nial highlighter-rouge"><span class="kp">abs</span> <span class="nv">A</span></code> is the same as shape of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> since <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code>
transforms always preserve shape. The second equation says that the
shape of the result of <code class="language-nial highlighter-rouge"><span class="kp">abs</span> <span class="nv">A</span></code> is the same as the shape of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The
third equation indicates that subsequent applications of <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code> after the
first do not change the result.</p>

<p>The equations related to <code class="language-nial highlighter-rouge"><span class="kp">minus</span></code>, denoted by <code class="language-nial highlighter-rouge"><span class="o">-</span></code>, are:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="o">-</span> <span class="nv">B</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="o">-</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="nv">B</span>
   <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="o">-</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="o">-</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="o">+</span> <span class="kp">opposite</span> <span class="nv">B</span>
</code></pre></div></div>

<p>The first equation says that pair of arrays <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are packed at
each level of nesting to bring corresponding items together. Then, the
items are subtracted.</p>

<p>The second equation states that the shape of the result of subtracting
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code> from <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is the shape formed by packing <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The third
equation states that subtracting <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> from <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is equivalent to adding
the opposite of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>The equations related to <code class="language-nial highlighter-rouge"><span class="kp">hitch</span></code> are as follows:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kp">list</span> <span class="nv">B</span>
   <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span>
</code></pre></div></div>

<p>The first says that <code class="language-nial highlighter-rouge"><span class="kp">hitch</span></code> treats its right argument as though it were
a list, and the second states that the result of <code class="language-nial highlighter-rouge"><span class="kp">hitch</span></code> is a list.</p>

<p>The following equations illustrate the use of qualifications:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="kp">rows</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">diverse</span> <span class="nv">A</span> <span class="o">&lt;==&gt;</span> <span class="kp">cull</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
</code></pre></div></div>

<p>The first equation says that if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is atomic, the single of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is
equal to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. That is, the single of an atom is the atom. The second
equation says that if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not empty, forming the rows of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and
applying <code class="language-nial highlighter-rouge"><span class="kp">mix</span></code> to recombine them, results in the original array. The
third equation says that if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is diverse, the cull of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is equal to
the list of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>; and that if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not diverse, the cull of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not
equal to the list of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>There are many identities that hold for all arrays in Nial. Three
general equations are the following:</p>

<p>A unary pervasive operation f satisfies the equation:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<p>A binary pervasive operation f satisfies the equation:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span>
</code></pre></div></div>

<p>A multi pervasive operation f satisfies the equations:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACHALL</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h3 id="expression">expression</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#operation">operation</a>, <a href="#transformer">transformer</a></li>
</ul>

<p>The term <strong>expression</strong> is used in its most general sense to describe a
program fragment that denotes one of the three primary objects of Nial:
an <code class="language-nial highlighter-rouge"><span class="nv">array</span></code>, an <code class="language-nial highlighter-rouge"><span class="kp">operation</span></code>, or a <code class="language-nial highlighter-rouge"><span class="kp">transformer</span></code>. However, in most
contexts we use the term as an abbreviation of an <code class="language-nial highlighter-rouge"><span class="nv">array</span> <span class="kp">expression</span></code>.</p>

<p>An array expression denotes an array value. That is, it is a program
fragment that when evaluated in the proper context will produce an
array. The predefined expressions of Q’Nial either produce a constant
value, or they carry out some system action and return the fault value
<code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>.</p>

<p>The control constructs of Nial are array expressions made up of
keywords, simple-expressions and expression-sequences.</p>

<p>A named expression is either a predefined expression or an expression
that has been given an explicit name using the <code class="language-nial highlighter-rouge"><span class="k">IS</span></code> definition
mechanism.</p>

<h3 id="extent">extent</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#shape">shape</a></li>
</ul>

<p>The term <strong>extent</strong> is used to describe the length of an axis of an
array in a particular dimension. Thus a 4 by 6 table is said to have
extent 4 in the first dimension and extent 6 in the second dimension.</p>

<h3 id="fault-triggering">fault triggering</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#fault-values">fault values</a>, <a href="#settrigger">settrigger</a>,
<a href="#quiet-fault">quiet_fault</a></li>
</ul>

<p>Nial assumes that every computation that terminates results in an array
value. However, there are many cases where a computation does not have a
sensible answer. If division by zero occurs, for example, there is no
suitable number to return. Nial uses special atomic arrays called faults
to indicate such results. For division by zero it is ?div.</p>

<p>Q’Nial has two ways of handling a fault: either a trigger mechanism is
executed that causes an interruption when a fault is created, or during
execution of a defined operation, expression or transformer the fault is
treated as a normal atomic array.</p>

<p>When Q’Nial is invoked for interactive execution with the -i option, the
fault triggering mechanism is turned on by default. When it is invoked
for execution only the fault triggering capbility is turned off. During
interactive execution, the state of the triggering mechanism can be
turned on or off using the operation <code class="language-nial highlighter-rouge"><span class="kp">settrigger</span></code>. The operation
<code class="language-nial highlighter-rouge"><span class="kp">quiet_fault</span></code> can be used to create a fault without causing fault
triggering.</p>

<p>If fault triggering is set and a fault is generated during execution of
a defined operation, execution is interrupted. On an interruption caused
by a fault, a display message appears giving the call stack of
definitions currently executing and the line of text that caused the
fault. For example, the definition:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">foo</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="o">/</span> <span class="nv">B</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>
</code></pre></div></div>

<p>followed by the evaluation of the expression</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">foo</span> <span class="mi">3</span> <span class="mi">0</span>
</code></pre></div></div>

<p>results in the output:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">-------------------------------------------------------------</span>
    <span class="kp">Fault</span> <span class="nv">interruption</span> <span class="nv">loop</span><span class="p">:</span>  <span class="nv">enter</span> <span class="nv">expressions</span> <span class="kp">or</span>
      <span class="kp">type</span><span class="p">:</span> <span class="o">&lt;</span><span class="nv">Return</span><span class="o">&gt;</span>   <span class="nv">to</span> <span class="nv">jump</span> <span class="nv">to</span> <span class="nv">top</span> <span class="nv">level</span>
    <span class="nv">current</span> <span class="nv">call</span> <span class="nv">stack</span> <span class="p">:</span>
<span class="nv">foo</span>
      <span class="gr">?div</span> <span class="nv">triggered</span> <span class="kp">in</span> <span class="p">:</span> <span class="o">...</span> <span class="nv">A</span> <span class="o">/</span> <span class="nv">B</span>
<span class="o">-------------------------------------------------------------</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div></div>

<p>where the string ‘&gt;&gt;&gt;’ is a special prompt indicating that a fault
has occurred and execution has been interrupted. The prompt permits you
to query the value of variables in the expression and its surrounding
computation or to view the operation that has triggered the fault. The
above session might continue as:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kp">see</span> <span class="ss">"foo</span>
<span class="nv">foo</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span>
    <span class="nv">A</span> <span class="o">/</span> <span class="nv">B</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">A</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">B</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div></div>

<p>A variable in a definition that called the current one can be referenced
by preceding the variables name by the definition name and a colon, e.g.
<code class="language-nial highlighter-rouge"><span class="nv">G</span><span class="p">:</span><span class="nv">X</span></code> denotes variable <code class="language-nial highlighter-rouge"><span class="nv">X</span></code> in definition <code class="language-nial highlighter-rouge"><span class="nv">G</span></code>. You can execute any
expressions you want at the prompt. A useful thing to do is to see the
definition that has interrupted. When you are ready to resume, reply to
the prompt with a Return and control returns to the interactive loop.</p>

<h3 id="fault-values">fault values</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
</ul>

<p>The Role of Faults</p>

<p>A <strong>fault</strong> is a special kind of atomic value used by Q’Nial to signal
special values or to indicate that an operation has been given an
argument it cannot handle in a normal way. The special value faults are:</p>

<table>
  <thead>
    <tr>
      <th>Fault</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>?noexpr</td>
      <td>indicates that no answer is expected</td>
    </tr>
    <tr>
      <td>?eof</td>
      <td>end of file indication</td>
    </tr>
    <tr>
      <td>?I</td>
      <td>Zenith which is greater than all atoms</td>
    </tr>
    <tr>
      <td>?O</td>
      <td>Nadir which is less than all atoms</td>
    </tr>
  </tbody>
</table>

<h3 id="functions-in-nial">functions in nial</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#operation">operation</a>, <a href="#transformer">transformer</a></li>
</ul>

<p>A function is a mathematical name for an object that maps an argument in
a given domain to a result in a given range. In Nial, an <strong>operation</strong>
is an object in the set of functions from the domain of Nial arrays to
the range of Nial arrays. Thus, an operation always applies to an array
and returns an array.</p>

<p>A <strong>transformer</strong> in Nial is also a function. It domain is Nial
operations and its range is also Nial operations. Since its argument is
itself a function, a transformer is said to be a <code class="language-nial highlighter-rouge"><span class="kp">second</span> <span class="nv">order</span></code>
function. A transformer always applies to an operation and results in an
operation.</p>

<p>Definitions in which the associated object is a simple-expression are
used to name program fragments that return an array value but which do
not need parameters. The resulting named-expression behaves like a
function having no parameters.</p>

<p>Nial is considered to be a functional language, but it is not purely
functional in that it has assignments, loops and other non-functional
concepts.</p>

<h3 id="global-environment">global environment</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#local-environment">local environment</a></li>
</ul>

<p>The <strong>global environment</strong> is the set of associations between names and
objects formed in the workspace that are either predefined in Nial or
have been created by actions that have taken place during a session.</p>

<h3 id="indexing">indexing</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#address">address</a>, <a href="#pick">pick</a>, <a href="#choose">choose</a>,
<a href="#reach">reach</a></li>
</ul>

<p>The term <strong>indexing</strong> is used to describe notations that can be used to
<code class="language-nial highlighter-rouge"><span class="nv">select</span> <span class="k">from</span></code> or <code class="language-nial highlighter-rouge"><span class="nv">insert</span> <span class="nv">into</span></code> a variable.</p>

<p>There are four indexing methods in Nial: <code class="language-nial highlighter-rouge"><span class="nv">at</span></code>, <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">all</span></code>, <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">path</span></code> and
<code class="language-nial highlighter-rouge"><span class="nv">slice</span></code> represented by <code class="language-nial highlighter-rouge"><span class="o">@</span></code>, <code class="language-nial highlighter-rouge"><span class="o">#</span></code>, <code class="language-nial highlighter-rouge"><span class="o">@@</span></code> and <code class="language-nial highlighter-rouge"><span class="o">|</span></code> respectively. The
different indexing methods return different subsets of the array. The
following is a summary of the indexing methods:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Name</th>
      <th>Description</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>@</td>
      <td>at</td>
      <td>indexes one item</td>
      <td> </td>
    </tr>
    <tr>
      <td>#</td>
      <td>at all</td>
      <td>indexes several items</td>
      <td> </td>
    </tr>
    <tr>
      <td>@@</td>
      <td>at path</td>
      <td>indexes a part at depth</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>slice</td>
      <td>indexes cross-section of items</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Cities</span> <span class="p">:=</span> <span class="ss">"London</span> <span class="ss">"Washington</span> <span class="ss">"Ottawa</span> <span class="ss">"Moscow</span> <span class="ss">"Paris</span> <span class="p">;</span>
     <span class="nv">Cities</span><span class="o">@</span><span class="mi">0</span>
<span class="nv">London</span>
     <span class="nv">Cities</span><span class="cm">#[2,3]
Ottawa Moscow

</span>     <span class="nv">Alpha</span> <span class="p">:=</span> <span class="mi">5</span> <span class="mi">5</span> <span class="kp">reshape</span> <span class="s1">'ABCDEFGHIJKLMNOPQRSTUVWXY'</span>
<span class="nv">ABCDE</span>
<span class="nv">FGHIJ</span>
<span class="nv">KLMNO</span>
<span class="nv">PQRST</span>
<span class="nv">UVWXY</span>

     <span class="nv">Alpha</span><span class="o">@</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="nv">C</span>

     <span class="nv">Alpha</span><span class="o">|</span><span class="p">[</span><span class="mi">1</span><span class="p">,]</span>
<span class="nv">FGHIJ</span>

     <span class="nv">Alpha</span><span class="o">|</span><span class="p">[,</span><span class="mi">1</span><span class="p">]</span>
<span class="nv">BGLQV</span>

     <span class="nv">Alpha</span><span class="o">|</span><span class="p">[,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
<span class="nv">BD</span>
<span class="nv">GI</span>
<span class="kp">LN</span>
<span class="nv">QS</span>
<span class="nv">VX</span>
</code></pre></div></div>

<p>The following example shows the slightly different structure which
occurs when a comma is either present or missing before the last item.
The library operation <code class="language-nial highlighter-rouge"><span class="nv">findpaths</span></code> is used to indicate the path to the
integer 10 in each case.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"diagram</span> <span class="p">;</span> <span class="nv">Nest1</span> <span class="p">:=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">+-+-+-----------------+--+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|+-+-+-+-----+-+-+|</span><span class="mi">10</span><span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|+-+-+|</span><span class="mi">8</span><span class="o">|</span><span class="mi">9</span><span class="o">||</span>  <span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">6</span><span class="o">|</span><span class="mi">7</span><span class="o">||</span> <span class="o">|</span> <span class="o">||</span>  <span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+|</span> <span class="o">|</span> <span class="o">||</span>  <span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+-+-----+-+-+|</span>  <span class="o">|</span>
<span class="o">+-+-+-----------------+--+</span>

     <span class="kp">set</span> <span class="ss">"diagram</span> <span class="p">;</span> <span class="nv">Nest2</span> <span class="p">:=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="mi">10</span><span class="p">]</span>
<span class="o">+-+-+----------------------+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|+-----------------+--+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||+-+-+-+-----+-+-+|</span><span class="mi">10</span><span class="o">||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|+-+-+|</span><span class="mi">8</span><span class="o">|</span><span class="mi">9</span><span class="o">||</span>  <span class="o">||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|||</span> <span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">6</span><span class="o">|</span><span class="mi">7</span><span class="o">||</span> <span class="o">|</span> <span class="o">||</span>  <span class="o">||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|||</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+|</span> <span class="o">|</span> <span class="o">||</span>  <span class="o">||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||+-+-+-+-----+-+-+|</span>  <span class="o">||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|+-----------------+--+|</span>
<span class="o">+-+-+----------------------+</span>

     <span class="nv">findpaths</span> <span class="mi">10</span> <span class="nv">Nest1</span>
<span class="o">+---+</span>
<span class="o">|+-+|</span>
<span class="o">||</span><span class="mi">3</span><span class="o">||</span>
<span class="o">|+-+|</span>
<span class="o">+---+</span>

     <span class="nv">findpaths</span> <span class="mi">10</span> <span class="nv">Nest2</span>
<span class="o">+-----+</span>
<span class="o">|+-+-+|</span>
<span class="o">||</span><span class="mi">2</span><span class="o">|</span><span class="mi">1</span><span class="o">||</span>
<span class="o">|+-+-+|</span>
<span class="o">+-----+</span>

     <span class="p">(</span><span class="nv">Nest2</span><span class="o">@@</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="mi">6</span>

     <span class="p">(</span><span class="nv">Nest2</span><span class="o">@@</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="mi">8</span>
</code></pre></div></div>

<p><strong>Address Validity</strong></p>

<p>The index used in selecting a part of an array must be an expression
that evaluates to a valid address. An invalid index returns a fault as
follows:</p>

<table>
  <thead>
    <tr>
      <th>Indexing Method</th>
      <th>Fault</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A@I</td>
      <td>?address</td>
      <td> </td>
    </tr>
    <tr>
      <td>A#I</td>
      <td>?addresses</td>
      <td> </td>
    </tr>
    <tr>
      <td>A@@P</td>
      <td>?path</td>
      <td> </td>
    </tr>
    <tr>
      <td>A</td>
      <td>I</td>
      <td>?slice</td>
    </tr>
  </tbody>
</table>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> works the same as the <code class="language-nial highlighter-rouge"><span class="nv">at</span></code> method of indexing. If
the index is invalid, <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>. Similarly,
<code class="language-nial highlighter-rouge"><span class="kp">choose</span></code> works the same as <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">all</span></code> indexing.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">pick</span> <span class="nv">Cities</span>
<span class="nv">Moscow</span>

     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">choose</span> <span class="nv">Cities</span>
<span class="nv">Ottawa</span> <span class="nv">Moscow</span>

     <span class="mi">10</span> <span class="kp">pick</span> <span class="nv">Cities</span>
<span class="gr">?address</span>

     <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="kp">choose</span> <span class="nv">Cities</span>
<span class="nv">Paris</span> <span class="gr">?address</span> <span class="gr">?address</span>
</code></pre></div></div>

<h3 id="interrupt">interrupt</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#fault-triggering">fault triggering</a>,
<a href="#setinterrupts">setinterrupts</a></li>
</ul>

<p>An <strong>interrupt</strong> is an event that causes the operating system to suspend
its operation and address a requirement of higher priority. Typically,
interrupts occur to handle input/output. However, an interrupt also
occurs when a fault is detected.</p>

<p>In the default mode of operation of Q’Nial, most fault values are not
created. Rather, an interrupt is triggered. A description of the fault
triggering mechanism is given under <code class="language-nial highlighter-rouge"><span class="kp">fault</span> <span class="nv">triggering</span></code>.</p>

<p>The user can interrupt execution by pressing <code class="language-nial highlighter-rouge"><span class="o">&lt;</span><span class="nv">Ctrl</span><span class="o">-</span><span class="nv">c</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nv">Return</span><span class="o">&gt;</span></code> at the
keyboard in console versions, or clicking on the <code class="language-nial highlighter-rouge"><span class="nv">STOP</span></code> button in the
GUI version. This capability can be turned off using <code class="language-nial highlighter-rouge"><span class="nv">setinterrrupts</span></code>.</p>

<h3 id="invocation-of-qnial">invocation of QNial</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
</ul>

<p>QNial is invoked using the following syntax:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">SYNTAX</span><span class="p">:</span> <span class="nv">nial</span>  <span class="p">[(</span><span class="o">+|-</span><span class="p">)</span><span class="nv">size</span> <span class="nv">Wssize</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="nv">defs</span> <span class="nv">Filename</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="nv">i</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="nv">h</span><span class="p">]</span>
    
    <span class="o">-</span><span class="nv">size</span> <span class="nv">Wssize</span>     <span class="k">Begin</span> <span class="k">with</span> <span class="nv">a</span> <span class="nv">workspace</span> <span class="nv">size</span> <span class="nv">of</span> <span class="nv">Wssize</span> <span class="nv">words</span><span class="o">.</span>
    <span class="nv">M</span> <span class="kp">or</span> <span class="nv">K</span> <span class="nv">can</span> <span class="nv">be</span> <span class="nv">used</span> <span class="nv">to</span> <span class="nv">indicate</span> <span class="nv">millions</span> <span class="kp">or</span> <span class="nv">thousands</span> <span class="nv">respectively</span><span class="o">.</span>
    <span class="nv">The</span> <span class="nv">workspace</span> <span class="nv">expands</span> <span class="k">if</span> <span class="nv">space</span> <span class="k">is</span> <span class="nv">available</span><span class="o">.</span>
    
    <span class="o">+</span><span class="nv">size</span> <span class="nv">Wssize</span>  <span class="nv">Fix</span> <span class="nv">the</span> <span class="nv">workspace</span> <span class="nv">size</span> <span class="nv">at</span> <span class="nv">Wssize</span> <span class="nv">words</span> <span class="k">with</span> <span class="nv">no</span> <span class="nv">expansion</span><span class="o">.</span>
    
    <span class="o">-</span><span class="nv">defs</span> <span class="nv">Filenm</span>  <span class="nv">After</span> <span class="nv">loading</span> <span class="nv">the</span> <span class="nv">initial</span> <span class="nv">workspace</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">Filenm</span><span class="o">.</span><span class="nv">ndf</span>
    <span class="k">is</span> <span class="nv">loaded</span> <span class="nv">using</span> <span class="kp">loaddefs</span> <span class="nv">without</span> <span class="nv">displaying</span> <span class="nv">it</span><span class="o">.</span>
    
    <span class="o">-</span><span class="nv">lws</span> <span class="nv">Wsname</span>   <span class="nv">A</span> <span class="nv">previously</span> <span class="nv">saved</span> <span class="nv">workspace</span> <span class="nv">file</span> <span class="k">is</span> <span class="nv">loaded</span> <span class="nv">on</span> <span class="nv">startup</span><span class="o">.</span>
    
    <span class="o">-</span><span class="nv">i</span>    <span class="kp">Execute</span> <span class="kp">in</span> <span class="nv">interactive</span> <span class="nv">mode</span> <span class="k">with</span> <span class="nv">a</span> <span class="nv">top</span> <span class="nv">level</span> <span class="nv">loop</span><span class="o">.</span>
    
    <span class="o">-</span><span class="nv">h</span>    <span class="kp">Display</span> <span class="nv">command</span> <span class="nv">line</span> <span class="nv">syntax</span><span class="o">.</span>
    
    <span class="nv">Examples</span><span class="p">:</span>
    
    <span class="nv">nial</span> <span class="o">-</span><span class="nv">i</span>
    
    <span class="nv">nial</span> <span class="o">-</span><span class="nv">defs</span> <span class="nv">app</span><span class="o">.</span><span class="nv">ndf</span>
    
    <span class="nv">nial</span> <span class="o">+</span><span class="nv">size</span> <span class="mi">50</span><span class="nv">M</span> <span class="o">-</span><span class="nv">defs</span> <span class="nv">newfns</span>
    
</code></pre></div></div>

<h3 id="item">item</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#array">array</a>, <a href="#address">address</a></li>
</ul>

<p>An array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is said to be an <strong>item</strong> of array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> holds <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> at
one or more locations. The term is a relative one; we cannot speak of
item except in reference to the array that holds it. The items of an
array A are the objects at the locations at the top level.</p>

<p>The number of items in an array is called the tally of the array.
Because an array is rectangular, the tally is the product of the shape.</p>

<p>The following names are give to common array structures:</p>

<table>
  <thead>
    <tr>
      <th># of items</th>
      <th># of axes</th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>empty list</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>single</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>solitary</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2</td>
      <td>1 by 1 table</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1</td>
      <td>pair</td>
    </tr>
    <tr>
      <td>3</td>
      <td>1</td>
      <td>triple</td>
    </tr>
    <tr>
      <td>4</td>
      <td>1</td>
      <td>quadruple</td>
    </tr>
  </tbody>
</table>

<p>The arrays of Nial are a recursive data type. That is, the items of an
array are also arrays. Since an array has arrays as items, it may
contain data at lower levels than the top one. A <strong>path</strong> is a list of
addresses that describes a data object at some depth within the array.</p>

<p>An array is said to be <strong>simple</strong> if all its items are atomic.</p>

<p>A <strong>part</strong> of an array is a data object that is contained at some level
within the array. The atomic parts of an array are called the <strong>leaves</strong>
of the array. The simple parts are called <strong>twigs</strong> . The term <strong>level</strong>
is used informally to describe the relative position of a part within
the nesting structure of an array. An item is at the first or top level,
an item of an item is at the second level, etc.</p>

<p>An <strong>empty</strong> array is one that has no items.</p>

<h3 id="level">level</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#item">item</a></li>
</ul>

<p>The term <strong>level</strong> is used informally to describe the relative position
of a part within the nesting structure of an array. An item is at the
first or top level, an item of an item is at the second level, etc.</p>

<p>An atom is viewed in two ways. As an indivisible data object it is
viewed as having no levels and cannot be broken into subarrays. As an
array data structure it is viewed as a single holding itself and
therefore has an infinity of levels. This view is necessary for atomic
arrays to fit the theory of nested array mathematics.</p>

<p>The number of levels to reach an atom along each path need not be the
same. For example, in the following array, the phrase “hello is at the
first level, the integer 23 is at the second level and the character `b
is at the third level.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">[</span> <span class="mi">23</span> <span class="s1">'abc'</span><span class="p">,</span> <span class="ss">"hello</span> <span class="p">,</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">2</span> <span class="p">]</span>
<span class="o">+------------+-----+-------------+</span>
<span class="o">|+--+-------+|</span><span class="nv">hello</span><span class="o">|+-----+-----+|</span>
<span class="o">||</span><span class="mi">23</span><span class="o">|+-+-+-+||</span>     <span class="o">||+-+-+|+-+-+||</span>
<span class="o">||</span>  <span class="o">||</span><span class="nv">a</span><span class="o">|</span><span class="nv">b</span><span class="o">|</span><span class="nv">c</span><span class="o">|||</span>     <span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">0</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">1</span><span class="o">|||</span>
<span class="o">||</span>  <span class="o">|+-+-+-+||</span>     <span class="o">||+-+-+|+-+-+||</span>
<span class="o">|+--+-------+|</span>     <span class="o">|+-----+-----+|</span>
<span class="o">|</span>            <span class="o">|</span>     <span class="o">||+-+-+|+-+-+||</span>
<span class="o">|</span>            <span class="o">|</span>     <span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">0</span><span class="o">|||</span><span class="mi">1</span><span class="o">|</span><span class="mi">1</span><span class="o">|||</span>
<span class="o">|</span>            <span class="o">|</span>     <span class="o">||+-+-+|+-+-+||</span>
<span class="o">|</span>            <span class="o">|</span>     <span class="o">|+-----+-----+|</span>
<span class="o">+------------+-----+-------------+</span>
</code></pre></div></div>

<p>Some of the operations of Nial that operate on simple arrays are
extended to arbitrarily nested arrays by being applied to the atoms at
the deepest level. These are called <code class="language-nial highlighter-rouge"><span class="nv">pervasive</span></code> operations.</p>

<h3 id="local-environment">local environment</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#global-environment">global environment</a>, <a href="#scope-of-a-variable">scope of a
variable</a></li>
</ul>

<p>A <strong>local environment</strong> is a collection of associations that are known
within a limited section of program text. These limited sections are
formed by blocks, operation-forms and transformer-forms as discussed in
the relevant sections below. A name that has a local association in one
of these forms is said to have local scope.</p>

<p>Program fragments in which local variables are being assigned can be
nested, so that one local scope surrounds another. A local association
is not visible outside the construct in which it is defined; and a name
with local scope can hide associations that the name has in surrounding
scopes.</p>

<p>At any point in a program fragment, there is a current environment
consisting of all names whose associations are visible. It includes the
names having local scope in the program fragment being executed, names
that are visible in the surrounding scopes and names that have global
scope.</p>

<p>In program text, the scope of all names is determined by the static
structure of the program text. The one exception is text that has the
operation execute applied to it under program control.</p>

<p>In a local environment, a variable identifier can be chosen the same as
a predefined or user-defined global definition name. Such a choice makes
the global use of the name unavailable in the local context.</p>

<p>In any context, an identifier can name only one of: a variable, an
array- expression, an operation-expression, or a transformer-expression.
During one session, the role of a name, i.e. the class of syntactic
object it names, cannot be changed.</p>

<p>If a block is used as a primary-expression, the local environment
created by a block is determined by the block itself. If it is the body
of an operation-form, the local environment includes the formal
parameter names of the operation-form as variables.</p>

<p>A block delimits a local environment. It allows new uses of names which
do not interfere with uses of those names outside the block. For
example, within a block, a predefined operation name can be redefined
and used for a different purpose. Only the reserved words of Q’Nial
cannot be reused in this fashion. Definitions that appear within the
block have local scope. That is, the definitions can be referenced only
in the body of the block. Variables assigned within the block may or may
not have local scope, depending on the appearance of a local and/or a
nonlocal declaration. If there is no declaration, all assigned variables
have local scope. Declaring some variables as local does not change the
effect on undeclared variables that are used on the left of assignment.
They are automatically localized.</p>

<p>If a nonlocal declaration is used, an assigned name that is on the
nonlocal list is sought in surrounding scopes. If the name is not found,
a variable is created in the global environment.</p>

<p>During the parse of the assign-expression appearing in a block, each
name on the variable list is sought in the local environment. If the
name exists in the local environment, the assignment affects the local
association. If a name does not exist in the local environment and no
reference has been made to a nonlocal variable with the same name, a
local variable is created in the block. An assign-expression parsed in
the global environment creates a global variable if a variable with that
name does not already exist.</p>

<p>An operation-form defines a local environment. The formal parameter
names are names of local variables. If the body of the operation form is
a block, the local environment of the block is extended to include the
formal parameters. When the operation is applied, the formal parameter
names are assigned from the value of the actual argument. If there is
only one formal parameter, the actual argument is assigned to it as a
whole; otherwise, the items of the actual argument are assigned to the
formal parameters in corresponding order. If there is a length mismatch
between the list of formal parameter names and the values of the actual
argument, the fault <code class="language-nial highlighter-rouge"><span class="gr">?op_parameter</span></code> is returned.</p>

<p>The value of the application of the operation is the value of the body
of the operation-form, which is evaluated with the local variables in
the parameter list assigned as described above. In determining the
association for a name that appears in the body of an operation form,
Q’Nial looks for the name in the local environment. If the name is not
found locally, the name is sought in surrounding environments until it
is found or until the global environment is searched. If it is not
found, a fault <code class="language-nial highlighter-rouge"><span class="gr">?unknown</span> <span class="nv">identifier</span><span class="p">:</span></code> is given when the operation-form
is analyzed (parsed).</p>

<p>Operation-forms are most frequently used in definitions where they are
given an associated name. However, an operation-form can appear directly
in an expression provided it is enclosed in parentheses. In this usage,
it can be an argument to a transformer name or can be applied to an
array argument.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">execute</span></code> can be used within the execution of a block to
make an assignment to variables or to invoke the definition mechanism.
If <code class="language-nial highlighter-rouge"><span class="kp">execute</span></code> is used to make a new definition or to create a new
variable, the resulting variable or definition is placed in the global
environment. However, if the block has local variables or local
definitions, execute can be used to change a local version dynamically.
A similar situation occurs with dynamic alteration of variables using
<code class="language-nial highlighter-rouge"><span class="kp">assign</span></code>.</p>

<h3 id="nested-definition">nested definition</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#block">block</a>, <a href="#definition">definition</a></li>
</ul>

<p>A <strong>nested definition</strong> is one that appears in a definition sequence
within a block. Its name is a local definition name. If the name is also
used outside the block, the external meaning is not known in the block.</p>

<p>Nested definitions can be used to encapsulate support definitions within
a larger definition that is to be made available to other users. This
avoids cluttering up the name space with names that might interfere with
the user’s other work. It is often easier to develop the large
definition without encapsulation and package it in encapsulated form
once the design is completed.</p>

<h3 id="numeric-type-hierarchy">numeric type hierarchy</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#sum">sum</a>, <a href="#or">or</a></li>
</ul>

<p>The three numeric types: boolean, integer and real, are organized in a
hierarchy in the order mentioned. For arithmetic and comparative binary
operations, if the types of arguments are both numeric but differ in
type, they are coerced to the higher of the two types. For example, if
you add an integer to a real number, say 3 + 4.5, the integer is coerced
to 3.0 and a real number addition is done. Boolean atoms are always
coerced to integers if they are used with arithmetic operations.</p>

<p>There are six types of atoms in Nial. They are boolean, integer, real,
character, phrase and fault. The first three are numeric types and are
used for arithmetic operations. The last three are literal types and are
used for symbol manipulation. All six types of atoms are used in
comparisons.</p>

<p>A boolean atom is the result of a comparison of array values; or the
result of a test relating to a characteristic of an array or the content
of an array. There are two boolean atoms: true and false, denoted by l
and o respectively. When booleans are treated as numbers, true
corresponds to one and false to zero.</p>

<p>An integer atom is a positive or negative whole number representing a
quantity of units. A dash symbol (-) immediately preceding the integer
denotes a negative integer. No space is permitted between the dash and
the number, otherwise the dash is interpreted as the arithmetical
operation of subtraction. Conversely, a space is required when
subtraction is intended. An integer is represented by an internal form
that limits its range of values in the Q’Nial implementation of Nial.</p>

<p>A real atom is a number which can represent any position on the real
line. It may be written with a fractional part and/or with a decimal
exponent. It is represented internally by a floating point number.</p>

<h3 id="operation">operation</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#expression">expression</a>, <a href="#transformer">transformer</a></li>
</ul>

<p>An <strong>operation</strong> is a functional object that is given an argument array
and returns a result array. The process of executing an operation by
giving it an argument value is called an <code class="language-nial highlighter-rouge"><span class="kp">operation</span> <span class="nv">call</span></code> or an
<code class="language-nial highlighter-rouge"><span class="kp">operation</span> <span class="nv">application</span></code>.</p>

<p>An operation can be constructed by defining one or more parameters and
giving an algorithm to compute the result in terms of the parameters. An
operation is usually given a name when it is defined. There are also
program fragments that construct unnamed operations by composing
operations, forming a list of operations or modifying an operation by
use of a transformer.</p>

<p>A named operation is either a predefined operation or an operation that
has been given an explicit name using the <code class="language-nial highlighter-rouge"><span class="k">IS</span></code> definition mechanism.</p>

<h3 id="operation-composition">operation composition</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#curried-operation">curried operation</a></li>
</ul>

<p>A sequence of simple-operation denotations forms an operation-sequence
in the syntax of Nial. Its meaning is the same as the composition of the
operations in the sequence which is explained by its effect when
applied.</p>

<p>The result of applying an operation-sequence to an argument is
determined by applying the simple-operations in the sequence in
right-to-left order. The simple-operation on the right is applied to the
argument giving an intermediate result. Then the simple-operation to the
immediate left is applied to the result of the first application.
Subsequent simple-operations are applied to the results in turn.</p>

<p>An example of this concept is the expression</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="kp">first</span> <span class="kp">rest</span><span class="p">)</span> <span class="mi">8</span> <span class="mi">7</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">3</span>
<span class="mi">7</span>
</code></pre></div></div>

<p>The expression sequence <code class="language-nial highlighter-rouge"><span class="kp">first</span> <span class="kp">rest</span></code> is evaluated by applying <code class="language-nial highlighter-rouge"><span class="kp">rest</span></code> to
the argument resulting in 7 2 5 3 and then <code class="language-nial highlighter-rouge"><span class="kp">first</span></code> is applied giving 7.</p>

<p>The relationship can be described by the equations:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">g</span> <span class="nv">A</span><span class="p">)</span>
   <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span> <span class="nv">h</span><span class="p">)</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">g</span> <span class="p">(</span><span class="nv">h</span> <span class="nv">A</span><span class="p">))</span>
   <span class="nv">etc</span><span class="o">.</span>
</code></pre></div></div>

<p>which is mathematically known as the rule of <strong>function composition</strong> .</p>

<h3 id="overflow">overflow</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
</ul>

<p>The term <strong>integer overflow</strong> is used to describe the situation when an
integer that is too big for the internal representation of integers is
generated. Q’Nial uses 32 bit integers and checks for overflow during
computations. If an arithmetic computation produces an overflow, a fault
value is produced.</p>

<p>An overflow can also develop during computation with real numbers. The
computer hardware detects such a problem and an interrupt occurs which
causes Q’Nial to jump to top level.</p>

<h3 id="pervasive">pervasive</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#unary-pervasive">unary pervasive</a>, <a href="#binary-pervasive">binary
pervasive</a>, <a href="#multi-pervasive">multi pervasive</a></li>
</ul>

<p>Some of the operations of Nial that operate on simple arrays are
extended to arbitrarily nested arrays by being applied to the atoms at
the deepest level. These are called <strong>pervasive</strong> operations.</p>

<p>There are three classes of pervasive operations: <code class="language-nial highlighter-rouge"><span class="nv">unary</span> <span class="nv">pervasive</span></code>,
binary pervasive and <code class="language-nial highlighter-rouge"><span class="nv">multi</span> <span class="nv">pervasive</span></code>. The first class applies the
operations to the atoms of the array. The second class are binary
operations that apply to pairs of atoms from corresponding positions in
the pair of arguments. The third class applies the operation to the
simple arrays formed from atoms in corresponding positions in the items
of the argument, reducing the simple array to a single atom.</p>

<h3 id="prelattice-of-atoms">prelattice of atoms</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#lte">lte</a>, <a href="#up">up</a>, <a href="#max">max</a></li>
</ul>

<p>The ordering sequence of the characters for sorting purposes is fixed
for each Q’Nial version.</p>

<p>The binary and multi pervasive comparative operations of Nial organize
the atoms of Nial in a <strong>prelattice</strong> or sorting sequence. The operation
<code class="language-nial highlighter-rouge"><span class="kp">lte</span></code> (or <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code>) does a less than or equal comparison between atoms. The
numeric atoms are comparable, with a coercion being done if the
arguments are of different numeric type. The <code class="language-nial highlighter-rouge"><span class="nv">nadir</span></code>, represented by the
fault <code class="language-nial highlighter-rouge"><span class="gr">?O</span></code>, is less than or equal to all atoms. The <code class="language-nial highlighter-rouge"><span class="nv">zenith</span></code>, ?I , is
greater than or equal to all atoms. Except for these two special cases,
literal atoms are incomparable with atoms of different type. However,
they can be compared within the same type using a character collating
sequence that is version specific.</p>

<p>Phrases are compared lexicographically, such that <code class="language-nial highlighter-rouge"><span class="ss">"apple</span></code> is after
<code class="language-nial highlighter-rouge"><span class="ss">"ape</span></code> but before <code class="language-nial highlighter-rouge"><span class="ss">"apt</span></code>. Strings, being character lists, produce a list
of results when compared.</p>

<p>Comparisons are of two forms: binary pervasive predicates which return
boolean values and multi pervasive predicates that obtain the largest or
smallest item in a list. If two atoms are incomparable, the predicates
return <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>, whereas <code class="language-nial highlighter-rouge"><span class="kp">max</span></code> returns the <code class="language-nial highlighter-rouge"><span class="nv">zenith</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">min</span></code> returns the
<code class="language-nial highlighter-rouge"><span class="nv">nadir</span></code>.</p>

<p>These rules were chosen so that the following laws hold for all arrays
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">max</span> <span class="nv">A</span> <span class="o">&lt;=</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="o">&lt;=</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">A</span> <span class="o">&lt;=</span> <span class="kp">min</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="o">&lt;=</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<p>See the entry for <code class="language-nial highlighter-rouge"><span class="kp">up</span></code> for a discussion of the lexicographic ordering in
Q’Nial.</p>

<h3 id="profiling">profiling</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#setprofile">setprofile</a>, <a href="#profile">profile</a></li>
</ul>

<p><strong>Q’Nial Profiling Facility</strong></p>

<p>Q’Nial has a profiling capability that is used to gather relative
execution times for operations, transformers and defined expressions
written in Nial. The profiling capability has the following
features:</p>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>setprofile A</td>
      <td>turns on or off the internal routines that collect the statistics</td>
    </tr>
    <tr>
      <td>profile Fnm</td>
      <td>that displays the profile data to the screen or writes it to a file</td>
    </tr>
    <tr>
      <td>Clearprofile</td>
      <td>clears the current profile information and reinitializes the profiling system</td>
    </tr>
    <tr>
      <td>Profiletable</td>
      <td>provides the profile information as a table</td>
    </tr>
    <tr>
      <td>Profiletree</td>
      <td>provides the detailed profile information in terms of the call tree</td>
    </tr>
  </tbody>
</table>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setprofile</span></code> is called with argument <code class="language-nial highlighter-rouge"><span class="mb">l</span></code> to turn on the
collection of data for a profiling session. It is called with argument
<code class="language-nial highlighter-rouge"><span class="mb">o</span></code> to suspend gathering statistics for a session. Both calls to
<code class="language-nial highlighter-rouge"><span class="kp">setprofile</span></code> should be in the same scope, and cannot be nested. Only one
profiling session can be underway at a time.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">profile</span></code> is called with a text argument (string or
phrase) that is used as the file name for the profile information. If an
empty string is the argument, the output is sent directly to the screen.
It computes the statistics on the profiling session underway, prepares
the output, and writes it to the file.</p>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Clearprofile</span></code> clears the two internal data structures
that are built as execution is profiled so that a new profiling session
can be started.</p>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Profiletree</span></code> provides the summary data that is displayed
in the output produced by <code class="language-nial highlighter-rouge"><span class="kp">profile</span></code>, but stores it in a Nial array.</p>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Profiletree</span></code> provides a dynamic call tree of the
execution with related times. This provides a more detailed breakdown of
the profile data. The following session illustrates the use of the
profiling capability:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="kp">setwidth</span> <span class="mi">60</span><span class="p">;</span>

     <span class="nv">test</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">n</span> <span class="p">{</span><span class="err">­</span>
       <span class="nv">z</span> <span class="p">:=</span> <span class="kp">random</span> <span class="nv">n</span> <span class="nv">n</span><span class="p">;</span>
       <span class="kp">max</span> <span class="kp">abs</span> <span class="p">(</span><span class="nv">z</span> <span class="o">-</span> <span class="kp">inv</span> <span class="kp">inv</span> <span class="nv">z</span><span class="p">)</span> <span class="p">}</span>

     <span class="nv">tryit</span> <span class="k">is</span>  <span class="k">op</span> <span class="nv">N</span> <span class="p">{</span><span class="err">­</span> <span class="nv">test</span> <span class="nv">N</span> <span class="p">}</span>

     <span class="nv">again</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">M</span> <span class="nv">N</span> <span class="p">{</span><span class="err">­</span> <span class="kp">sum</span> <span class="nb">EACH</span> <span class="nv">tryit</span> <span class="p">(</span><span class="nv">M</span> <span class="kp">reshape</span> <span class="nv">N</span><span class="p">)</span> <span class="p">}</span>

     <span class="nv">fact</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">n</span> <span class="p">{</span><span class="err">­</span>
       <span class="k">IF</span> <span class="nv">n</span><span class="o">&lt;=</span><span class="mi">1</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="nv">n</span> <span class="o">*</span> <span class="nv">fact</span> <span class="p">(</span><span class="nv">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">ENDIF</span> <span class="p">}</span>

<span class="cm"># first profiling session

</span>     <span class="kp">setprofile</span> <span class="mb">l</span>
<span class="mb">o</span>

     <span class="nv">test</span> <span class="mi">20</span>
<span class="mf">3.86843e-15</span>

     <span class="nv">tryit</span> <span class="mi">50</span>
<span class="mf">2.83107e-14</span>

     <span class="nv">again</span> <span class="mi">10</span> <span class="mi">75</span>
<span class="mf">6.72483e-13</span>

     <span class="kp">setprofile</span> <span class="mb">o</span>
<span class="mb">l</span>

     <span class="kp">profile</span> <span class="s1">''</span>

<span class="nv">Total</span> <span class="nv">execution</span> <span class="kp">time</span> <span class="nv">of</span> <span class="kp">profile</span> <span class="nv">session</span><span class="p">:</span>         <span class="mf">4.780000</span>
<span class="nv">Total</span> <span class="nv">execution</span> <span class="kp">time</span> <span class="kp">in</span> <span class="nv">top</span> <span class="nv">level</span> <span class="nv">calls</span><span class="p">:</span>          <span class="mf">4.420000</span>

<span class="k">op</span> <span class="nv">name</span><span class="p">[</span><span class="o">.</span><span class="k">tr</span> <span class="nv">arg</span><span class="p">]</span>                 <span class="nv">calls</span><span class="p">[</span><span class="nv">rec</span><span class="p">]</span>    <span class="kp">time</span> <span class="kp">time</span><span class="o">/</span><span class="nv">call</span>  <span class="err">%</span> <span class="kp">time</span>
<span class="nv">test</span><span class="o">..........................</span>   <span class="mi">12</span>           <span class="mf">4.42</span>   <span class="mf">0.3683</span>    <span class="mf">100.0</span><span class="o">&lt;</span>

<span class="nv">tryit</span><span class="o">.........................</span>   <span class="mi">11</span>           <span class="mf">4.31</span>   <span class="mf">0.3918</span>     <span class="mf">97.5</span><span class="o">&lt;</span>
 <span class="nv">test</span><span class="o">.........................</span>   <span class="mi">11</span>           <span class="mf">4.31</span>   <span class="mf">0.3918</span>   <span class="mf">100.00</span>

<span class="nv">again</span><span class="o">.........................</span>    <span class="mi">1</span>           <span class="mf">4.04</span>   <span class="mf">4.0400</span>     <span class="mf">91.4</span><span class="o">&lt;</span>
 <span class="nv">tryit</span><span class="o">........................</span>   <span class="mi">10</span>           <span class="mf">4.04</span>   <span class="mf">0.4040</span>   <span class="mf">100.00</span>



        <span class="kp">profiletree</span>
<span class="o">+--------+-+----+-------------------------------------------</span>
<span class="o">|</span><span class="kp">TOPLEVEL</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">4.78</span><span class="o">|+--------------+---------------------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----++|+-----+-+----+-------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.11</span><span class="o">||||</span><span class="nv">tryit</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.27</span><span class="o">|+------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----++||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.27</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|+------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">|+-----+-+----+-------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">|+--------------+---------------------------</span>
<span class="o">+--------+-+----+-------------------------------------------</span>

<span class="o">--------------------------------------------------------+</span>
<span class="o">----+--------------------------------------------------+|</span>
<span class="o">---+|+-----+-+----+-----------------------------------+||</span>
<span class="o">--+|||</span><span class="nv">again</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">4.04</span><span class="o">|+---------------------------------+|||</span>
<span class="o">++||||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+-----+--+----+-----------------+||||</span>
<span class="o">||||||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">tryit</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span><span class="mf">4.04</span><span class="o">|+---------------+|||||</span>
<span class="o">++||||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">||+----+--+----++||||||</span>
<span class="o">--+|||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span><span class="mf">4.04</span><span class="o">||||||||</span>
<span class="o">---+||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">||+----+--+----++||||||</span>
    <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">|+---------------+|||||</span>
    <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+-----+--+----+-----------------+||||</span>
    <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|+---------------------------------+|||</span>
    <span class="o">|+-----+-+----+-----------------------------------+||</span>
<span class="o">----+--------------------------------------------------+|</span>
<span class="o">--------------------------------------------------------+</span>

<span class="cm"># second profiling session

</span>     <span class="kp">clearprofile</span>

     <span class="kp">setprofile</span> <span class="mb">l</span>
<span class="mb">o</span>

     <span class="nv">test</span> <span class="mi">30</span>
<span class="mf">1.72085e-14</span>

     <span class="nv">fact</span> <span class="mi">4</span>
<span class="mi">24</span>

     <span class="kp">setprofile</span> <span class="mb">o</span>
<span class="mb">l</span>

     <span class="kp">profile</span> <span class="s1">''</span>

<span class="nv">Total</span> <span class="nv">execution</span> <span class="kp">time</span> <span class="nv">of</span> <span class="kp">profile</span> <span class="nv">session</span><span class="p">:</span>         <span class="mf">0.330000</span>
<span class="nv">Total</span> <span class="nv">execution</span> <span class="kp">time</span> <span class="kp">in</span> <span class="nv">top</span> <span class="nv">level</span> <span class="nv">calls</span><span class="p">:</span>          <span class="mf">0.050000</span>

<span class="k">op</span> <span class="nv">name</span><span class="p">[</span><span class="o">.</span><span class="k">tr</span> <span class="nv">arg</span><span class="p">]</span>                 <span class="nv">calls</span><span class="p">[</span><span class="nv">rec</span><span class="p">]</span>    <span class="kp">time</span> <span class="kp">time</span><span class="o">/</span><span class="nv">call</span>  <span class="err">%</span> <span class="kp">time</span>
<span class="nv">test</span><span class="o">..........................</span>    <span class="mi">1</span>           <span class="mf">0.01</span>   <span class="mf">0.0100</span>     <span class="mf">20.0</span><span class="o">&lt;</span>

<span class="nv">fact</span><span class="o">..........................</span>    <span class="mi">1</span><span class="p">[</span>    <span class="mi">3</span><span class="p">]</span>    <span class="mf">0.04</span>   <span class="mf">0.0400</span>     <span class="mf">80.0</span><span class="o">&lt;</span>



     <span class="kp">profiletree</span>
<span class="o">+--------+-+----+-------------------------------------------</span>
<span class="o">|</span><span class="kp">TOPLEVEL</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">0.33</span><span class="o">|+--------------+---------------------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----++|+----+-+----+--------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.01</span><span class="o">||||</span><span class="nv">fact</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.04</span><span class="o">|+-------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----++||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+--+--</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">fact</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.</span><span class="o">|+-</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">||+</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">|||</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">|||</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">|||</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">|||</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">|||</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">||+</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>    <span class="o">|</span> <span class="o">|</span>  <span class="o">|+-</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+--+--</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">||</span>    <span class="o">|</span> <span class="o">|</span>    <span class="o">|+-------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>              <span class="o">|+----+-+----+--------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">|+--------------+---------------------------</span>
<span class="o">+--------+-+----+-------------------------------------------</span>

<span class="o">------------------------------+</span>
<span class="o">-----------------------------+|</span>
<span class="o">----------------------------+||</span>
<span class="o">---------------------------+|||</span>
<span class="o">--------------------------+||||</span>
<span class="o">-------------------------+|||||</span>
<span class="o">----+-+--+--------------+||||||</span>
<span class="nv">fact</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.</span><span class="o">|+------------+|||||||</span>
    <span class="o">|</span> <span class="o">|</span>  <span class="o">||+----+-+--++||||||||</span>
    <span class="o">|</span> <span class="o">|</span>  <span class="o">|||</span><span class="nv">fact</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.</span><span class="o">||||||||||</span>
    <span class="o">|</span> <span class="o">|</span>  <span class="o">||+----+-+--++||||||||</span>
    <span class="o">|</span> <span class="o">|</span>  <span class="o">|+------------+|||||||</span>
<span class="o">----+-+--+--------------+||||||</span>
<span class="o">-------------------------+|||||</span>
<span class="o">--------------------------+||||</span>
<span class="o">---------------------------+|||</span>
<span class="o">----------------------------+||</span>
<span class="o">-----------------------------+|</span>
<span class="o">------------------------------+</span>

 <span class="err">%</span> <span class="k">end</span> <span class="nv">of</span> <span class="nv">session</span>
</code></pre></div></div>

<p>The profile statistics show the division of time between the various
definitions. For each definition called during the profiling session
there is a summary of the number of calls and time used. For each
definition there is also a breakdown on the time spent in other
definitions that were directly called from that definition.</p>

<p>Entries in the profile statistics that have a “&lt;” to the right of the
last value are top level calls. All other entries have been called by
these top level calls.</p>

<p>The time spent in direct recursive calls is counted in the original
call. The number of such calls is placed in brackets after the number of
top level calls.</p>

<p>The statistics do not account for local definitions within global ones;
their execution time is simply added to the time for the global
definition.</p>

<p>A feature of the profiler not shown in the above example is that when
timing a transformer definition, the time spent executing the argument
operation(s) is computed in order to understand how much of the cost of
the transformer is due to applying the argument operation(s).</p>

<p>The accuracy of the timing information is limited by the precision of
the information available through system calls to the host system. For
very small definitions the statistics may show no execution time.
Usually their effect can be estimated by considering the execution time
of the calling definition.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="kp">Profiletable</span></code> result provides the summarized profile statistics as
a quintuple consisting of the name of the definition, the number of
calls, the number of recursive calls, the time, and a list of records
for each definition it directly calls. Each of the latter records has
the same information provided for the routine itself, but does not
report on the definitions it itself calls.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="kp">Profiletree</span></code> result starts with a node indicating the toplevel and
the total execution time. It has a list of subnodes for each definition
called from the top level. Each of these has the number of calls, the
execution time and nodes for each definition it calls. A recursive call
is reported directly in a subnode and hence a deeply recursive routine
will produce a deeply nested array of profile information.</p>

<h3 id="program-fragment">program fragment</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#expression">expression</a></li>
</ul>

<p>Nial is a programming language specifically designed for use in an
interactive environment. The formal description of the language
describes the valid language constructs that can be entered in one
interaction; and explains the meaning of one such entry in terms of the
environment created by earlier interactions in the same session. The
term <strong>program fragment</strong> is used to describe a meaningful piece of
program text.</p>

<p>The rules for writing well formed program fragments in Nial are called
the <code class="language-nial highlighter-rouge"><span class="nv">syntax</span> <span class="nv">rules</span></code> of Nial. A program fragment that is well formed is
said to be syntactically correct. The syntax rules are analogous to the
rules of grammar that determine the correctness of English.</p>

<h3 id="role">role</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#global-environment">global environment</a></li>
</ul>

<p>The term <strong>role</strong> is used to describe the class of object associated
with an identifier in Nial. The possible roles are: reserved word,
variable, expression, operation or transformer. An identifier that
corresponds to a reserved word can play no other role in a workspace. An
identifier that corresponds to a predefined object in Nial cannot be
changed in the global environment, but can take on a different object
association in a local environment. In the global environment, once the
role of an identifier is established, it must keep the same role, but
may have its association changed to another object of the same role.</p>

<p>An external-declaration assigns a role to a name in the global
environment so that the name can be used in other definitions before it
is completely specified. This mechanism is useful for creating mutually
recursive definitions. An external declaration is made only in the
global environment.</p>

<p>If the name is already defined with the same role, the declaration has
no effect. If the name has another role, a fault is reported.</p>

<p>If the expression on the right of <code class="language-nial highlighter-rouge"><span class="k">IS</span></code> in a definition uses the name
being defined, the definition is assumed to be recursive. The name is
assigned a role compatible with its use on the right if it does not
already have a role.</p>

<p>If a definition appears within a block, the association between the name
of the identifier and its meaning is made in the local environment.
Otherwise, the association is made in the global environment and the
definition assigns a role to the name as representing that kind of
expression.</p>

<p>If the name being associated in a definition is already in use, the new
definition must be for a construct of the same role and the earlier
definition is replaced. The use of a defined name always refers to its
most recent definition.</p>

<h3 id="scope-of-a-variable">scope of a variable</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#local-environment">local environment</a>, <a href="#role">role</a></li>
</ul>

<p>The use of an assign-expression indicates that a name (identifier) is to
be treated as a variable in the context surrounding the
assign-expression. This context is called the <strong>scope</strong> of the variable.
The context may be global, in which case the variable may be visible at
all levels; or it may be local to some region of program text. A local
scope is created for the parameters of operation forms and for variables
created within a block.</p>

<p>Because operation forms or blocks may appear within other operation
forms or blocks, it is possible to have one scope for a name nested
within another. A name is said to be visible at a point in a program
text if it has a local meaning at that point or has a meaning in some
surrounding scope or is a global name. When a name is used in a local
scope, it is the local association in the innermost scope that is used,
instead of an association with the same name in a surrounding scope.</p>

<p>A block is a scope-creating mechanism that permits an
expression-sequence to be created so that it has local definitions and
variables which are visible only inside the block. A block may appear as
a primary-expression or as the body of an operation-form.</p>

<p>Definitions that appear within the block have local scope. That is, the
definitions can be referenced only in the body of the block. Variables
assigned within the block may or may not have local scope, depending on
the appearance of a local and/or a nonlocal declaration. If there is no
declaration, all assigned variables have local scope. Declaring some
variables as local does not change the effect on undeclared variables
that are used on the left of assignment. They are automatically
localized.</p>

<p>If a nonlocal declaration is used, an assigned name that is on the
nonlocal list is sought in surrounding scopes. If the name is not found,
a variable is created in the global environment.</p>

<h3 id="standard-definitions">standard definitions</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#clear-workspace">clear workspace</a></li>
</ul>

<p>Q’Nial has a large set of predefined expressions, operations and
transformers. Most of these are implemented directly in the interpreter.
However, there are a number of them which are defined in Nial codes as
standard definitions in the file <code class="language-nial highlighter-rouge"><span class="nv">defs</span><span class="o">.</span><span class="nv">ndf</span></code>. The definitions are brought
into the initial workspace automatically as part of the initialization
process.</p>

<p>All definitions included in this stage cannot be modified or erased and
the operation <code class="language-nial highlighter-rouge"><span class="kp">see</span></code> does not display their text.</p>

<h3 id="top-level-loop">top level loop</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#loaddefs">loaddefs</a></li>
</ul>

<p>Nial program fragments are entered during interactive input with a
process called the <strong>top level loop</strong> ; or brought into the system under
the control of a systems operation, <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code>. This systems operation
has the effect of loading a sequence of program fragments from a file as
though the fragments had been entered interactively in the order they
appear in the file.</p>

<p>The global environment is the collection of associations between names
and meanings that are known at the top level loop. Such names have
global scope in that they can be referenced by any program text. All
other names have a local scope that associates a meaning with the name
only during execution of a specific portion of a program text.</p>

<p>In direct input at the top level loop, a remark ends at the end of the
line unless a backslash symbol ( \ ) is used to extend the line. In a
definition file, a remark ends at the first blank line. A remark cannot
appear within a definition or expression-sequence.</p>

<p>The expressions in an expression-sequence are evaluated in left-to-right
order. If the sequence does not terminate with a semicolon, the array
returned is the result of the last expression. If the sequence does end
with a semicolon, the array returned is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>. At the top
level loop, if the array returned is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>, it is not
displayed.</p>

<p>In window mode for a console version of Q’Nial when a window is used
interactively from the top level loop, the terminal acts as though it
has a screen the size of the window. In particular, as the cursor
attempts to move below the bottom line of the window, the text is
scrolled one line at a time. The speed of scrolling can be changed using
the operation <code class="language-nial highlighter-rouge"><span class="nv">setscroll</span></code>.</p>

<h3 id="transformer">transformer</h3>

<ul>
  <li>Class:<br />
<a href="#concept">concept</a></li>
  <li>See Also:<br />
<a href="#expression">expression</a>, <a href="#operation">operation</a>,
<a href="#definition">definition</a></li>
</ul>

<p>A <strong>transformer</strong> is a functional object that is used to construct a new
operation from a given operation argument, usually producing a modified
version of the given operation. Most transformers used in Nial are
provided in the core language. However, there is a mechanism that
constructs a named transformer in terms of one or more operation
parameters. A user-defined transformer describes the modified operation
as a parameterized algorithm for manipulating data.</p>

<p>A transformer usually specifies a general algorithm which can have an
operation as a parameter. For example, the <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> family of transformers
generalizes a number of looping mechanisms for applying an operation to
items of arrays.</p>

<p>A user-defined transformer could provide the skeleton for processing the
records of a file and allow an arbitrary operation to be applied to each
record. Such a transformer is often called a filter.</p>

<p>The process of evaluating an operation call of an operation modified by
a transformer requires two steps. The modified operation is formed; and
then the modified operation is given the array argument which it uses to
produce the result.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">TWICE</span> <span class="k">is</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">f</span><span class="p">)</span>

     <span class="nv">TWICE</span> <span class="kp">rest</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span>
<span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span>
</code></pre></div></div>

<h2 id="syntax">Syntax</h2>

<h3 id="action">action</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#definition">definition</a>, <a href="#expression-sequence">expression
sequence</a>, <a href="#external-declaration">external
declaration</a>, <a href="#comment">comment</a></li>
</ul>

<p>An <strong>action</strong> is the construct that is entered in the interactive loop
of the Q’Nial interpreter or accepted as an input unit within the
operation loaddefs:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">action</span> <span class="p">::=</span> <span class="nv">definition</span><span class="o">-</span><span class="nv">sequence</span>
        <span class="o">|</span> <span class="kp">expression</span><span class="o">-</span><span class="nv">sequence</span>
        <span class="o">|</span> <span class="kp">external</span><span class="o">-</span><span class="nv">declaration</span>
        <span class="o">|</span> <span class="nv">remark</span>

     <span class="nv">definition</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">::=</span> <span class="nv">definition</span>
        <span class="p">{</span><span class="err">­</span> <span class="p">;</span> <span class="nv">definition</span> <span class="p">}</span> <span class="p">[</span> <span class="p">;</span> <span class="p">]</span>

     <span class="nv">remark</span> <span class="p">::=</span> <span class="o">#</span> <span class="o">&lt;</span> <span class="nv">any</span> <span class="nv">text</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>If an action is a definition-sequence, its definitions are installed in
the global environment.</p>

<p>If an action is an expression-sequence, it is executed and a value is
returned. The value returned by an expression-sequence is displayed on
the screen unless it is the fault ?noexpr.</p>

<p>An external-declaration assigns a role to a name in the global
environment so that the name can be used in other definitions before it
is completely specified.</p>

<p>A remark is an input to the Q’Nial interpreter that is not processed. It
begins with a line that has the symbol # as the first non-blank
character in the line. In direct input at the top level loop, a remark
ends at the end of the line unless a backslash symbol ( \ ) is used to
extend the line. In a definition file, a remark ends at the first blank
line. A remark cannot appear within a definition or expression-sequence.</p>

<h3 id="assign-expression">assign expression</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#variable">variable</a>, <a href="#expression">expression</a>,
<a href="#indexing">indexing</a>, <a href="#assign">assign</a></li>
</ul>

<!-- end list -->

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">assign</span><span class="o">-</span><span class="kp">expression</span> <span class="p">::=</span>
        <span class="p">{</span><span class="err">­</span> <span class="kp">variable</span> <span class="p">}</span><span class="o">+</span> <span class="p">:=</span> <span class="kp">expression</span>
        <span class="o">|</span> <span class="nv">indexed</span><span class="o">-</span><span class="kp">variable</span> <span class="p">:=</span> <span class="kp">expression</span>
</code></pre></div></div>

<p>An <strong>assign-expression</strong> assigns an array value to one or more variables
at the time of evaluation of the assign expression. The semantics of an
assign expression is interpreted in two stages: when the expression is
analyzed (parsed) and when it is executed.</p>

<p>During the parse of the assign-expression appearing in a block, each
name on the variable list is sought in the local environment. If the
name exists in the local environment, the assignment affects the local
association. If a name does not exist in the local environment and no
reference has been made to a nonlocal variable with the same name, a
local variable is created in the block. An assign-expression parsed in
the global environment creates a global variable if a variable with that
name does not already exist.</p>

<p>When an assign expression is executed, the expression on the right of
the assignment symbol ( := ) is evaluated. If the variable list on the
left has only one name, the value of the expression is assigned to that
variable. That is, the value is associated with that name.</p>

<p>If the variable list has several names, the items of the value are
assigned to the variables in the order in which they appear. If the
number of items does not match the number of variables, the fault
?assignment is returned as the value of the assign-expression.
Otherwise, the value of the assign-expression is the value of the
expression on the right.</p>

<p>When an indexed-variable is used on the left in an assign-expression,
the parts of the array associated with the variable at the locations
specified by the index are replaced by the values of the expression on
the right.</p>

<p>If the index expression for an indexed-variable assignment specifies a
number of locations (at-all or slice indexing), there are two cases: if
the value on the right is a single, the item of the single is placed in
each location; otherwise, the value on the right must have the same
number of items as the index expression indicates and the corresponding
locations are updated with the items of the array value.</p>

<h3 id="atlas">atlas</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#operation">operation</a></li>
</ul>

<!-- end list -->

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">atlas</span> <span class="p">::=</span> <span class="p">[</span> <span class="kp">operation</span><span class="o">-</span><span class="kp">expression</span> <span class="p">{</span><span class="err">­</span> <span class="p">,</span> <span class="kp">operation</span><span class="o">-</span><span class="kp">expression</span> <span class="p">}</span> <span class="p">]</span>
</code></pre></div></div>

<p>An <strong>atlas</strong> is an operation made up of a list of component operations.
The result of applying an atlas is a list of the same length as the
atlas. Each operation in the atlas is applied in turn to the argument
resulting in an array value that becomes the item of the result list in
the corresponding position. An atlas is used by the transformers <code class="language-nial highlighter-rouge"><span class="nb">FORK</span><span class="p">,</span>
<span class="nb">INNER</span></code> and <code class="language-nial highlighter-rouge"><span class="nb">TEAM</span></code>.</p>

<h3 id="block">block</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#local-environment">local environment</a>, <a href="#scope-of-a-variable">scope of a
variable</a>, <a href="#nested-definition">nested
definition</a></li>
</ul>

<!-- end list -->

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">block</span> <span class="p">::=</span>
        <span class="p">{</span><span class="err">­</span> <span class="p">[</span> <span class="nv">LOCAL</span> <span class="p">{</span><span class="err">­</span> <span class="nv">identifier</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">}</span><span class="o">+</span> <span class="p">;</span> <span class="p">]</span>
     <span class="p">[</span> <span class="kp">NONLOCAL</span> <span class="p">{</span><span class="err">­</span> <span class="nv">identifier</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">}</span><span class="o">+</span> <span class="p">;</span> <span class="p">]</span>
     <span class="p">[</span> <span class="nv">definition</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">;</span> <span class="p">]</span>
       <span class="kp">expression</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">}</span>
</code></pre></div></div>

<p>A <strong>block</strong> is a scope-creating mechanism that permits an
expression-sequence to be created so that it has local definitions and
variables which are visible only inside the block. A block may appear as
a primary-expression or as the body of an operation-form.</p>

<p>A local environment is a collection of associations that are known
within a limited section of program text. These limited sections are
formed by blocks, operation-forms and transformer-forms. A name that has
a local association in one of these forms is said to have local scope.</p>

<p>If the definition appears within a block, the association is made in the
local environment. Otherwise, the association is made in the global
environment and assigns a role to the name as representing that kind of
expression.</p>

<p>If a block is used as a primary-expression, the local environment
created by a block is determined by the block itself. If it is the body
of an operation-form, the local environment includes the formal
parameter names of the operation-form as variables.</p>

<p><strong>Local and Nonlocal Declaration</strong></p>

<p>The identifiers included in the local and nonlocal declarations are
declared to be variables. Both forms of declarations are optional, but
if both are given, local declarations must be made first. If the block
is the body of a globally defined operation-form or expression, a
nonlocal declaration effectively declares its variables as global ones.</p>

<p>A block delimits a local environment. It allows new uses of names which
do not interfere with uses of those names outside the block. For
example, within a block, a predefined operation name can be redefined
and used for a different purpose. Only the reserved words of Q’Nial
cannot be reused in this fashion.</p>

<p>Definitions that appear within the block have local scope. That is, the
definitions can be referenced only in the body of the block. Variables
assigned within the block may or may not have local scope, depending on
the appearance of a local and/or a nonlocal declaration. If there is no
declaration, all assigned variables have local scope. Declaring some
variables as local does not change the effect on undeclared variables
that are used on the left of assignment. They are automatically
localized.</p>

<p>If a nonlocal declaration is used, an assigned name that is on the
nonlocal list is sought in surrounding scopes. If the name is not found,
a variable is created in the global environment.</p>

<h3 id="bracket-comma-notation">bracket-comma notation</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#strand-notation">strand notation</a></li>
</ul>

<p>A list may be constructed directly by using <strong>bracket-comma</strong> notation.
In this notation, the items of a list are separated by commas and the
list is bounded by square brackets. If an item is omitted before or
after a comma, then the fault value <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code> is used for the value of
the missing item. The notation denotes the <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> if their are no items,
and a solitary if there is only one item.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="o">+-+---+-+</span>
<span class="o">|</span><span class="mi">2</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span>
<span class="o">+-+---+-+</span>

     <span class="p">[,</span><span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">+-------+---+</span>
<span class="o">|</span><span class="gr">?noexpr|4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+-------+---+</span>

     <span class="p">[]</span> <span class="o">=</span> <span class="kc">Null</span>
<span class="mb">l</span>

     <span class="p">[</span><span class="s1">'hello world'</span><span class="p">]</span>
<span class="o">+-----------+</span>
<span class="o">|</span><span class="nv">hello</span> <span class="nv">world</span><span class="o">|</span>
<span class="o">+-----------+</span>

     <span class="p">[</span><span class="mi">3</span><span class="p">,[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="mi">7</span><span class="p">]</span>
<span class="o">+-+-----+-+</span>
<span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span>
<span class="o">+-+-----+-+</span>
</code></pre></div></div>

<h3 id="cast">cast</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
</ul>

<p>A <code class="language-nial highlighter-rouge"><span class="nv">cast</span></code> is an array expression that denotes an internal representation
of a valid fragment of Q’Nial program text:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">cast</span> <span class="p">::=</span> <span class="o">!</span> <span class="nv">identifier</span>
        <span class="o">|</span> <span class="o">!</span> <span class="p">(</span> <span class="kp">expression</span><span class="o">-</span><span class="nv">sequence</span><span class="p">)</span>
        <span class="o">|</span> <span class="o">!</span> <span class="p">(</span> <span class="kp">operation</span><span class="o">-</span><span class="kp">expression</span> <span class="p">)</span>
        <span class="o">|</span> <span class="o">!</span> <span class="p">(</span> <span class="kp">transformer</span><span class="o">-</span><span class="kp">expression</span> <span class="p">)</span>
</code></pre></div></div>

<p>The use of the exclamation symbol <code class="language-nial highlighter-rouge"><span class="o">!</span></code> before an identifier causes Q’Nial
to select the internal representation for the identifier rather than the
value of the array associated with the identifier. Its use before a
parenthesized program fragment selects the internal representation of
the program fragment.</p>

<p>The major use of casts is in conjunction with the operations assign and
apply. These operations mimic the Q’Nial constructs for assignment to a
variable and application of an operation to an array. Casts permit
passing an argument to an operation by variable name rather than by
value. They also permit evaluation of a program fragment that has been
stored in its internal form using the operation eval rather than
requiring the use of the operation execute on the corresponding program
text stored as a string.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Salary</span> <span class="p">:=</span> <span class="mf">90000.</span>
     <span class="nv">A</span> <span class="k">gets</span> <span class="s1">'Salary &gt; 100000.'</span> <span class="p">;</span>
     <span class="nv">Rule1</span> <span class="p">:=</span> <span class="kp">execute</span> <span class="nv">A</span>
<span class="mb">o</span>
     <span class="nv">Rule1</span> <span class="p">:=</span> <span class="kp">eval</span> <span class="o">!</span><span class="nv">A</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The details of the internal representation is not specified as part of
the Nial language.</p>

<p>The cast notation <code class="language-nial highlighter-rouge"><span class="o">!</span><span class="nv">Name</span></code> is used to denote the parse tree that
represents the name. At the top level loop, parentheses must be included
around the use of the cast notation, e.g. <code class="language-nial highlighter-rouge"><span class="p">(</span><span class="o">!</span><span class="nv">Name</span><span class="p">)</span></code>, to avoid ambiguity
with the use of <code class="language-nial highlighter-rouge"><span class="o">!</span></code> to indicate a host command.</p>

<p>The cast, because it is analyzed in the context in which it appears,
refers to a variable or definition in a static way.</p>

<p>Q’Nial contains operations that mimic the underlying meaning of
variables, expressions and operations in Q’Nial. The operations use
strings, phrases or casts to represent the name of the object under
consideration (except that see and getdef do not take
casts).</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>value A</td>
      <td>Return the value of a variable named by string, phrase or cast <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> .</td>
    </tr>
    <tr>
      <td>A assign B</td>
      <td>Assign the array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> to the variable named by string, phrase or cast <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> ; return <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> .</td>
    </tr>
    <tr>
      <td>A apply B</td>
      <td>Apply the operation named by string, phrase or cast <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> ; return the result of the operation.</td>
    </tr>
    <tr>
      <td>getdef A</td>
      <td>Return the parse tree associated with the definition named by string or phrase <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> .</td>
    </tr>
    <tr>
      <td>see A</td>
      <td>Display the definition named by the string or phrase <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> .</td>
    </tr>
    <tr>
      <td>update P A B</td>
      <td>Put array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> at address <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in the variable named by the phrase, string or cast <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> ; return the new value of <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> .</td>
    </tr>
    <tr>
      <td>updateall P A B</td>
      <td>Put items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> at addresses <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in the variable named by the phrase, string or cast <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> ; return the new value of the variable named by <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> .</td>
    </tr>
    <tr>
      <td>deepupdate P A B</td>
      <td>Put array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> at path <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in variable named by the string, phrase or cast <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> ; return new value of the variable named by <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> .</td>
    </tr>
  </tbody>
</table>

<h3 id="comment">comment</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#action">action</a></li>
</ul>

<!-- end list -->

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">comment</span> <span class="p">::=</span>
        <span class="cm">% &lt;any text excluding a semicolon&gt; ;</span>

     <span class="nv">remark</span> <span class="p">::=</span> <span class="o">#</span> <span class="o">&lt;</span> <span class="nv">any</span> <span class="nv">text</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>A <strong>comment</strong> is a brief section of text included in a program fragment
to assist readability. Comments may be placed anywhere in a block before
or after declarations, definitions or expressions. Their purpose is to
provide an explanation of the program fragment for the programmer who
may be required to modify the program at a later date. The value of a
comment as an expression is the <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code> fault. Comments are retained
when a definition is translated into internal form and they appear in
its creation in the canonical form used by the operations see and
defedit.</p>

<p>A <strong>remark</strong> is an input to the Q’Nial interpreter that is not
processed. It begins with a line that has the symbol # as the first
non-blank character in the line. In direct input at the top level loop,
a remark ends at the end of the line unless a backslash symbol ( \ ) is
used to extend the line. In a definition file, a remark ends at the
first blank line. A remark cannot appear within a definition or
expression-sequence.</p>

<h3 id="expression-sequence">expression sequence</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#expression">expression</a></li>
</ul>

<p>An <strong>expression-sequence</strong> is the main construct used for program text
that produces a value. It consists of one or more expressions separated
by semi-colons and possible followed by a semi-colon.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">expression</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">::=</span> <span class="kp">expression</span>
        <span class="p">{</span><span class="err">­</span> <span class="p">;</span> <span class="kp">expression</span> <span class="p">}</span> <span class="p">[</span> <span class="p">;</span> <span class="p">]</span>
</code></pre></div></div>

<p>The expressions in an expression-sequence are evaluated in left-to-right
order. If the sequence does not terminate with a semicolon, the array
returned is the result of the last expression. If the sequence does end
with a semicolon, the array returned is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>. At the top
level loop, if the array returned is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>, it is not
displayed.</p>

<h3 id="external-declaration">external declaration</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#action">action</a>, <a href="#role">role</a></li>
</ul>

<!-- end list -->

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">external</span><span class="o">-</span><span class="nv">declaration</span> <span class="p">::=</span> <span class="nv">identifier</span> <span class="k">IS</span>
        <span class="kp">EXTERNAL</span> <span class="p">(</span> <span class="kp">EXPRESSION</span>
                         <span class="o">|</span> <span class="kp">OPERATION</span>
                         <span class="o">|</span> <span class="kp">TRANSFORMER</span>
                         <span class="o">|</span> <span class="kp">VARIABLE</span> <span class="p">)</span>
</code></pre></div></div>

<p>An external declaration assigns a role to a name, allowing it to be used
in a definition before its own definition is given. This mechanism is
useful for creating mutually recursive definitions. An external
declaration is made only in the global environment.</p>

<p>If the name is already defined with the same role, the declaration has
no effect. If the name has another role, a fault is reported. If the
name is not currently defined, a default object is associated with it.</p>

<h3 id="infix-notation">infix notation</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#prefix-notation">prefix notation</a></li>
</ul>

<p>In Nial an operation-expression may be placed between two
array-expressions.This is called an <strong>infix</strong> use of the
operation-expression.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">7</span> <span class="o">+</span> <span class="mi">5</span>
<span class="mi">12</span>

     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
</code></pre></div></div>

<p>In using the infix notation, one must understand that if a sequence of
operations are placed between two array arguments, all but the first
operation are applied to the second argument.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="o">+</span> <span class="kp">reverse</span> <span class="kp">tell</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span>

     <span class="mi">2</span> <span class="p">(</span><span class="o">+</span> <span class="kp">reverse</span> <span class="kp">tell</span><span class="p">)</span> <span class="mi">3</span>
<span class="mi">3</span> <span class="mi">6</span>

     <span class="mi">2</span> <span class="p">(</span><span class="o">+</span> <span class="kp">reverse</span><span class="p">)</span> <span class="kp">tell</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
</code></pre></div></div>

<h3 id="juxtaposition">juxtaposition</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
</ul>

<p>The syntax rules for simple-expressions show three uses of the
side-by-side or juxtapositional notation of Nial: strand formation,
prefix operation application and infix operation application. There are
no syntactic restrictions as to whether or not a particular operation
may be applied in infix or prefix form. A fault is returned at run time
if an operation is used inappropriately.</p>

<p><strong>Summary of Juxtapositional Syntax</strong></p>

<p>The following table illustrates the uses of juxtaposition in Nial, where
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are array-expressions, <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> are
operation-expressions, and <code class="language-nial highlighter-rouge"><span class="nv">T</span></code> is a transformer:</p>

<table>
  <thead>
    <tr>
      <th>Form</th>
      <th>Name</th>
      <th>Object</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A B</td>
      <td>strand</td>
      <td>array</td>
    </tr>
    <tr>
      <td>A f</td>
      <td>currying</td>
      <td>operation</td>
    </tr>
    <tr>
      <td>f A</td>
      <td>prefix use</td>
      <td>array</td>
    </tr>
    <tr>
      <td>f g</td>
      <td>composition</td>
      <td>operation</td>
    </tr>
    <tr>
      <td>T f</td>
      <td>transform</td>
      <td>operation</td>
    </tr>
    <tr>
      <td>A f B</td>
      <td>infix use</td>
      <td>array</td>
    </tr>
    <tr>
      <td>T f A</td>
      <td>transform use</td>
      <td>array</td>
    </tr>
  </tbody>
</table>

<h3 id="operation-form">operation form</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#operation">operation</a>, <a href="#definition">definition</a></li>
</ul>

<p>An <strong>operation-form</strong> is the syntactic structure used to describe an
operation in terms of a parameterized expression-sequence. The
identifiers following the keyword operation are called the <strong>formal
parameters</strong> . The body of an operation-form is normally a block but it
may be an expression-sequence without automatic localization.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">operation</span><span class="o">-</span><span class="nv">form</span> <span class="p">::=</span>
        <span class="kp">OPERATION</span> <span class="p">{</span><span class="err">­</span> <span class="nv">identifiers</span> <span class="p">}</span><span class="o">+</span> <span class="nv">block</span>
        <span class="o">|</span> <span class="kp">OPERATION</span> <span class="p">{</span><span class="err">­</span> <span class="nv">identifiers</span> <span class="p">}</span><span class="o">+</span>
          <span class="p">(</span> <span class="kp">expression</span><span class="o">-</span><span class="nv">sequence</span> <span class="p">)</span>
</code></pre></div></div>

<p>An operation-form defines a local environment. The formal parameter
names are names of local variables. If the body of the operation form is
a block, the local environment of the block is extended to include the
formal parameters. When the operation is applied, the formal parameter
names are assigned from the value of the actual argument. If there is
only one formal parameter, the actual argument is assigned to it as a
whole; otherwise, the items of the actual argument are assigned to the
formal parameters in corresponding order. If there is a length mismatch
between the list of formal parameter names and the values of the actual
argument, the fault <code class="language-nial highlighter-rouge"><span class="gr">?op_parameter</span></code> is returned.</p>

<p>The value of the application of the operation is the value of the body
of the operation-form, which is evaluated with the local variables in
the parameter list assigned as described above. In determining the
association for a name that appears in the body of an operation form,
Q’Nial looks for the name in the local environment. If the name is not
found locally, the name is sought in surrounding environments until it
is found or until the global environment is searched. If it is not
found, a fault <code class="language-nial highlighter-rouge"><span class="gr">?unknown</span> <span class="nv">identifier</span><span class="p">:</span></code> is given when the operation-form
is analyzed (parsed).</p>

<p>Operation-forms are most frequently used in definitions where they are
given an associated name. However, an operation-form can appear directly
in an expression provided it is enclosed in parentheses. In this usage,
it can be an argument to a transformer name or can be applied to an
array argument.</p>

<h3 id="prefix-notation">prefix notation</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#infix-notation">infix notation</a></li>
</ul>

<p>An operation-expression can precede an array-expression. This is called
a <strong>prefix</strong> use of the operation expression.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="o">+</span> <span class="mi">7</span> <span class="mi">5</span>
<span class="mi">12</span>

     <span class="kp">reshape</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span><span class="p">,</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
</code></pre></div></div>

<h3 id="reserved-words">reserved words</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
</ul>

<p>A <strong>reserved word</strong> or <strong>keyword</strong> is one that has a special usage in a
Nial construct and must be used only for that purpose. A <code class="language-nial highlighter-rouge"><span class="nv">block</span></code>
delimits a local environment. It allows new uses of names which do not
interfere with uses of those names outside the block. For example,
within a block, a predefined operation name can be redefined and used
for a different purpose. Only the reserved words of Q’Nial cannot be
reused in this fashion.</p>

<p>An identifier, which is spelled the same, ignoring case, as any of the
reserved words given below cannot be used to name a variable or a
definition. In a local environment, an identifier can be chosen that is
the same as a predefined or user-defined global definition name. Such a
choice makes the global use of the name unavailable in the local
context.</p>

<p>A reserved word is displayed in upper case in canonical form.</p>

<table>
  <thead>
    <tr>
      <th>Reserved Word</th>
      <th>Construct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BEGIN</td>
      <td>Synonym for {­ in block</td>
    </tr>
    <tr>
      <td>CASE</td>
      <td>case-expression</td>
    </tr>
    <tr>
      <td>DO</td>
      <td>for-expression, while-expression</td>
    </tr>
    <tr>
      <td>ELSE</td>
      <td>if-expression, case-expression</td>
    </tr>
    <tr>
      <td>ELSEIF</td>
      <td>if-expression</td>
    </tr>
    <tr>
      <td>END</td>
      <td>case-expression, synonym for } in block</td>
    </tr>
    <tr>
      <td>ENDCASE</td>
      <td>case_expression</td>
    </tr>
    <tr>
      <td>ENDFOR</td>
      <td>for-expression</td>
    </tr>
    <tr>
      <td>ENDIF</td>
      <td>if-expression</td>
    </tr>
    <tr>
      <td>ENDREPEAT</td>
      <td>repeat-expression</td>
    </tr>
    <tr>
      <td>ENDWHILE</td>
      <td>while-expression</td>
    </tr>
    <tr>
      <td>EXIT</td>
      <td>exit-expression</td>
    </tr>
    <tr>
      <td>EXPRESSION</td>
      <td>declaration</td>
    </tr>
    <tr>
      <td>EXTERNAL</td>
      <td>declaration</td>
    </tr>
    <tr>
      <td>FOR</td>
      <td>for-expression</td>
    </tr>
    <tr>
      <td>FROM</td>
      <td>case-expression</td>
    </tr>
    <tr>
      <td>GETS</td>
      <td>assign-expression</td>
    </tr>
    <tr>
      <td>IF</td>
      <td>if-expression</td>
    </tr>
    <tr>
      <td>IS</td>
      <td>definition</td>
    </tr>
    <tr>
      <td>LOCAL</td>
      <td>declaration</td>
    </tr>
    <tr>
      <td>NONLOCAL</td>
      <td>declaration</td>
    </tr>
    <tr>
      <td>OP</td>
      <td>synonym for operation</td>
    </tr>
    <tr>
      <td>OPERATION</td>
      <td>operation-form, declaration</td>
    </tr>
    <tr>
      <td>REPEAT</td>
      <td>repeat-expression</td>
    </tr>
    <tr>
      <td>THEN</td>
      <td>if-expression</td>
    </tr>
    <tr>
      <td>TR</td>
      <td>synonym for transformer</td>
    </tr>
    <tr>
      <td>TRANSFORMER</td>
      <td>transformer-form, declaration</td>
    </tr>
    <tr>
      <td>UNTIL</td>
      <td>repeat-expression</td>
    </tr>
    <tr>
      <td>VARIABLE</td>
      <td>declaration</td>
    </tr>
    <tr>
      <td>WHILE</td>
      <td>while-expression</td>
    </tr>
    <tr>
      <td>WITH</td>
      <td>for-expression</td>
    </tr>
  </tbody>
</table>

<h3 id="strand-notation">strand notation</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#bracket-comma-notation">bracket-comma notation</a></li>
</ul>

<p>A primary-sequence of length two or greater is called a <strong>strand</strong> . The
value of a strand is a list of values. Each item of the list has the
value of the primary-expression in the corresponding position in the
primary-sequence.</p>

<p>The elements of the primary-sequence can be constants, parenthesized
expressions or lists in bracket-comma notation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span>
<span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span>

     <span class="mi">8</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="mi">18</span>
<span class="o">+-+-----+--+</span>
<span class="o">|</span><span class="mi">8</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">|</span><span class="mi">18</span><span class="o">|</span>
<span class="o">+-+-----+--+</span>

     <span class="mi">8</span> <span class="s1">'abc'</span> <span class="ss">"apple</span>
<span class="o">+-+---+-----+</span>
<span class="o">|</span><span class="mi">8</span><span class="o">|</span><span class="nv">abc</span><span class="o">|</span><span class="nv">apple</span><span class="o">|</span>
<span class="o">+-+---+-----+</span>

     <span class="mi">6</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span> <span class="mi">10</span>
<span class="o">+-+-----+--+</span>
<span class="o">|</span><span class="mi">6</span><span class="o">|</span><span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span>
<span class="o">+-+-----+--+</span>
</code></pre></div></div>

<h3 id="synonym">synonym</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
</ul>

<p>A <strong>synonym</strong> is an alternate symbol or name that represents a Nial
term. For example, the symbol</p>

<p>The list of all synonyms in Nial follows:</p>

<table>
  <thead>
    <tr>
      <th>div</th>
      <th>operation</th>
      <th>divide</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Falsehood, o</td>
      <td>expression</td>
      <td>False</td>
    </tr>
    <tr>
      <td>inv</td>
      <td>operation</td>
      <td>inverse</td>
    </tr>
    <tr>
      <td>ip</td>
      <td>operation</td>
      <td>innerproduct</td>
    </tr>
    <tr>
      <td>istruthvalue</td>
      <td>operation</td>
      <td>isboolean</td>
    </tr>
    <tr>
      <td>opp</td>
      <td>operation</td>
      <td>opposite</td>
    </tr>
    <tr>
      <td>prod</td>
      <td>operation</td>
      <td>product</td>
    </tr>
    <tr>
      <td>recip</td>
      <td>operation</td>
      <td>reciprocal</td>
    </tr>
    <tr>
      <td>Truth, l</td>
      <td>expression</td>
      <td>True</td>
    </tr>
    <tr>
      <td>vacate</td>
      <td>operation</td>
      <td>Null first</td>
    </tr>
    <tr>
      <td>void</td>
      <td>operation</td>
      <td>Null first</td>
    </tr>
    <tr>
      <td>+</td>
      <td>operation</td>
      <td>sum</td>
    </tr>
    <tr>
      <td>-</td>
      <td>operation</td>
      <td>minus</td>
    </tr>
    <tr>
      <td>*</td>
      <td>operation</td>
      <td>product</td>
    </tr>
    <tr>
      <td>/</td>
      <td>operation</td>
      <td>divide</td>
    </tr>
  </tbody>
</table>

<p>The following synonyms are available for keywords or delimiters used in
the syntax rules:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[</td>
      <td>&lt;&lt;</td>
    </tr>
    <tr>
      <td>]</td>
      <td>&gt;&gt;</td>
    </tr>
    <tr>
      <td>:=</td>
      <td>GETS</td>
    </tr>
    <tr>
      <td>{­</td>
      <td>BEGIN</td>
    </tr>
    <tr>
      <td>}</td>
      <td>END</td>
    </tr>
    <tr>
      <td>OPERATION</td>
      <td>OP</td>
    </tr>
    <tr>
      <td>TRANSFORMER</td>
      <td>TR</td>
    </tr>
  </tbody>
</table>

<h3 id="transformer-form">transformer form</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#transformer">transformer</a>, <a href="#definition">definition</a></li>
</ul>

<p>A <strong>transformer-form</strong> is the syntactic structure used to describe a
transformer in terms of an operation expression involving formal
operation parameters. The names that follow the keyword transformer in
the transformer-form are called formal operation parameters. The body of
a transformer-form is the operation-expression which uses these names.
The first rule requires that the operation-expression be an
operation-form; the second allows any operation- expression to be used.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">transformer</span><span class="o">-</span><span class="nv">form</span> <span class="p">::=</span> <span class="kp">TRANSFORMER</span>
        <span class="p">{</span><span class="err">­</span> <span class="nv">identifier</span> <span class="p">}</span><span class="o">+</span> <span class="kp">operation</span><span class="o">-</span><span class="nv">form</span>
        <span class="o">|</span> <span class="kp">TRANSFORMER</span> <span class="p">{</span><span class="err">­</span> <span class="nv">identifier</span> <span class="p">}</span><span class="o">+</span>
          <span class="p">(</span> <span class="kp">operation</span><span class="o">-</span><span class="kp">expression</span> <span class="p">)</span>
</code></pre></div></div>

<p>The effect of applying a transformer-form to an operation-expression is
the effect of an operation formed in the body of the transformer, such
that wherever one of the formal operation parameters occurs, it is
replaced with the corresponding argument operation-expression.</p>

<p>On the other hand, if the formal operation parameters consist of only
one name, the operation formed is associated with the argument
operation-expression. If the operation formed has two or more names, the
operation-expression must denote an atlas of the same length; and the
formal operation parameters are associated with the operations of the
atlas in their sequence.</p>

<p>The associations are made with the argument operation-expression in the
environment where the transformer is applied. If there is a mismatch
between the number of formal operation parameters and the argument, the
result of applying the transform is the fault <code class="language-nial highlighter-rouge"><span class="gr">?tr_parameter</span></code>.</p>

<h3 id="variable">variable</h3>

<ul>
  <li>Class:<br />
<a href="#syntax">syntax</a></li>
  <li>See Also:<br />
<a href="#assign-expression">assign expression</a>, <a href="#local-environment">local
environment</a>, <a href="#vars">vars</a>, <a href="#role">role</a>,
<a href="#indexing">indexing</a>, <a href="#scope-of-a-variable">scope of a variable</a></li>
</ul>

<p>A <strong>variable</strong> is a name associated with an array value. Its syntactic
form is that of an identifier.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">variable</span> <span class="p">::=</span> <span class="nv">identifier</span>

     <span class="nv">indexed</span><span class="o">-</span><span class="kp">variable</span> <span class="p">::=</span>
          <span class="kp">variable</span> <span class="o">@</span> <span class="nv">primary</span><span class="o">-</span><span class="kp">expression</span>
        <span class="o">|</span> <span class="kp">variable</span> <span class="o">@@</span> <span class="nv">primary</span><span class="o">-</span><span class="kp">expression</span>
        <span class="o">|</span> <span class="kp">variable</span> <span class="o">#</span> <span class="nv">primary</span><span class="o">-</span><span class="kp">expression</span>
        <span class="o">|</span> <span class="kp">variable</span> <span class="o">|</span> <span class="nv">primary</span><span class="o">-</span><span class="kp">expression</span>
</code></pre></div></div>

<p>A variable is given an association with an array value by its use on the
left side of an assign-expression, its appearance in a local or nonlocal
declaration, its designation as a variable in an external-declaration or
its use as the first argument of the operation assign.</p>

<p>When a variable is used as a primary-expression, its meaning is the
array value associated with the identifier. If the variable exists but
has not been assigned, it will have as its default value the fault
<code class="language-nial highlighter-rouge"><span class="gr">?no_value</span></code>. If an identifier is mentioned as a primary-expression but
has not yet been given an association, a parse error will occur with the
fault <code class="language-nial highlighter-rouge"><span class="gr">?undefined</span> <span class="nv">identifier</span><span class="p">:</span></code>.</p>

<p><strong>Role of a Variable</strong></p>

<p>A variable gives a name to the result of a computation. If the same
result is needed later in the program, the named variable can be used,
thereby avoiding the necessity of repeating the computation. A variable
can be assigned different array values throughout the computation.</p>

<p>Although an identifier can be of any length up to 80 characters, a
compromise is usually made between choosing explicit variable names and
choosing brief names to avoid unnecessary typing. An identifier used as
a variable cannot be a Q’Nial reserved word. In a local environment, a
variable identifier can be chosen the same as a predefined or
user-defined global definition name. Such a choice makes the global use
of the name unavailable in the local context.</p>

<p>In any context, an identifier can name only one of: a variable, an
array- expression, an operation-expression, or a transformer-expression.
During one session, the role of a name, i.e. the class of syntactic
object it names, cannot be changed.</p>

<p><strong>Indexed Variable</strong></p>

<p>An <strong>indexed variable</strong> is a variable for which a part of the associated
array value is referenced. An <strong>index</strong> is the value of the
primary-expression within an indexed-variable which specifies the
location or locations of the part or parts of the array that are
selected.</p>

<h2 id="control-structures">Control Structures</h2>

<h3 id="case-expr">case-expr</h3>

<ul>
  <li>Class:<br />
<a href="#control-structure">control structure</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="k">CASE</span> <span class="kp">expression</span> <span class="k">FROM</span> <span class="nv">C1</span><span class="p">:</span> <span class="nv">ES1</span> <span class="k">END</span> <span class="o">...</span> <span class="nv">Cn</span><span class="p">:</span> <span class="nv">ESn</span> <span class="k">END</span> <span class="k">ELSE</span> <span class="nv">ESx</span> <span class="k">ENDCASE</span></code></li>
  <li>See Also:<br />
<a href="#if-expr">if-expr</a>, <a href="#fork">fork</a></li>
</ul>

<p>The expression following case is evaluated. If the result matches one of
the constants, C1 … Cn, the corresponding expression sequence is
executed. If the result does not match any constant, the expression
sequence following else is executed.</p>

<p><strong>Example:</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Month</span> <span class="p">:=</span> <span class="mi">3</span> <span class="p">;</span>
     <span class="k">CASE</span> <span class="nv">Month</span> <span class="k">FROM</span>
        <span class="mi">1</span><span class="p">:</span>   <span class="nv">Mname</span> <span class="p">:=</span> <span class="s1">'January'</span><span class="p">;</span> <span class="k">END</span>
        <span class="mi">2</span><span class="p">:</span>   <span class="nv">Mname</span> <span class="p">:=</span> <span class="s1">'February'</span><span class="p">;</span> <span class="k">END</span>
        <span class="mi">3</span><span class="p">:</span>   <span class="nv">Mname</span> <span class="p">:=</span> <span class="s1">'March'</span><span class="p">;</span> <span class="k">END</span>
     <span class="k">ELSE</span>   <span class="nv">Mname</span> <span class="p">:=</span> <span class="s1">'Year End'</span><span class="p">;</span>
     <span class="k">ENDCASE</span> <span class="p">;</span>
     <span class="nv">Mname</span>
<span class="nv">March</span>
</code></pre></div></div>

<h3 id="for-loop">for-loop</h3>

<ul>
  <li>Class:<br />
<a href="#control-structure">control structure</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="k">FOR</span> <span class="nv">Var</span> <span class="k">WITH</span> <span class="kp">Exp</span> <span class="k">DO</span> <span class="nv">ExpSeq</span> <span class="k">ENDFOR</span></code></li>
  <li>See Also:<br />
<a href="#repeat-loop">repeat-loop</a>, <a href="#while-loop">while-loop</a>,
<a href="#iterate">iterate</a>, <a href="#each">each</a></li>
</ul>

<p>The <code class="language-nial highlighter-rouge"><span class="k">FOR</span><span class="o">-</span><span class="nv">loop</span></code> control structure is used to execute the expression
sequence <code class="language-nial highlighter-rouge"><span class="nv">ExpSeq</span></code> repeatedly while variable <code class="language-nial highlighter-rouge"><span class="nv">Var</span></code> takes on the values
specified as items in the simple expression <code class="language-nial highlighter-rouge"><span class="kp">Exp</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="k">FOR</span> <span class="nv">X</span> <span class="k">WITH</span> <span class="mf">1.</span> <span class="mf">2.</span> <span class="mf">3.</span> <span class="k">DO</span>
        <span class="kp">write</span> <span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="p">(</span><span class="nv">X</span><span class="o">*</span><span class="nv">X</span><span class="p">)</span> <span class="p">(</span><span class="nv">X</span> <span class="kp">power</span> <span class="nv">X</span><span class="p">)</span> <span class="p">;</span>
     <span class="k">ENDFOR</span>
<span class="mf">1.</span> <span class="mf">1.</span> <span class="mf">1.</span>
<span class="mf">2.</span> <span class="mf">4.</span> <span class="mf">4.</span>
<span class="mf">3.</span> <span class="mf">9.</span> <span class="mf">27.</span>
</code></pre></div></div>

<p>In the example, X takes on the values 1., 2. and 3. in successive loops
and the values of X, X squared and X to the power X are displayed.</p>

<h3 id="if-expr">if-expr</h3>

<ul>
  <li>Class:<br />
<a href="#control-structure">control structure</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="k">IF</span> <span class="nv">C1</span> <span class="k">THEN</span> <span class="nv">Es1</span> <span class="k">ELSEIF</span> <span class="nv">C2</span> <span class="k">THEN</span> <span class="nv">Es2</span> <span class="o">...</span> <span class="k">ELSEIF</span> <span class="nv">Cn</span> <span class="k">THEN</span> <span class="nv">Esn</span> <span class="k">ELSE</span> <span class="nv">Esx</span>
<span class="k">ENDIF</span></code></li>
  <li>See Also:<br />
<a href="#case-expr">case-expr</a>, <a href="#fork">fork</a></li>
</ul>

<p>The <code class="language-nial highlighter-rouge"><span class="k">IF</span><span class="o">-</span><span class="nv">expr</span></code> construct is a notation for executing one of a number of
possible expression sequences <code class="language-nial highlighter-rouge"><span class="nv">Es1</span></code>, Es2 , … <code class="language-nial highlighter-rouge"><span class="nv">Esn</span></code>. The sequence
selected depends on the result of the conditional expressions <code class="language-nial highlighter-rouge"><span class="nv">C1</span></code>, C2 ,
… <code class="language-nial highlighter-rouge"><span class="nv">Cn</span></code>. In the general case, whichever condition is first found to
return <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> specifies the expression sequence to be performed. If all
the conditional expressions return <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>, expression sequence <code class="language-nial highlighter-rouge"><span class="nv">Esx</span></code> is
selected. The <code class="language-nial highlighter-rouge"><span class="k">ELSEIF</span></code> and <code class="language-nial highlighter-rouge"><span class="k">ELSE</span></code> clauses are optional.</p>

<p>In the following example, the result is one of phrase <code class="language-nial highlighter-rouge"><span class="nv">Adult</span></code>, Minor or
<code class="language-nial highlighter-rouge"><span class="nv">Juvenile</span></code>, depending on the value of <code class="language-nial highlighter-rouge"><span class="nv">Age</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Age</span> <span class="p">:=</span> <span class="mi">17</span><span class="p">;</span>
     <span class="k">IF</span> <span class="nv">Age</span> <span class="o">&gt;</span> <span class="mi">18</span> <span class="k">THEN</span>
        <span class="ss">"Adult</span>
     <span class="k">ELSEIF</span> <span class="nv">Age</span> <span class="o">&lt;</span> <span class="mi">16</span> <span class="k">THEN</span>
        <span class="ss">"Minor</span>
     <span class="k">ELSE</span>
        <span class="ss">"Juvenile</span>
     <span class="k">ENDIF</span>
<span class="nv">Juvenile</span>
</code></pre></div></div>

<h3 id="repeat-loop">repeat-loop</h3>

<ul>
  <li>Class:<br />
<a href="#control-structure">control structure</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="k">REPEAT</span> <span class="nv">expression_sequence</span> <span class="k">UNTIL</span> <span class="nv">conditional_expression</span> <span class="k">ENDREPEAT</span></code></li>
  <li>See Also:<br />
<a href="#while-loop">while-loop</a>, <a href="#for-loop">for-loop</a></li>
</ul>

<p>The <code class="language-nial highlighter-rouge"><span class="k">REPEAT</span><span class="o">-</span><span class="nv">loop</span></code> notation is used when executing an expression sequence
repeatedly until a conditional expression returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">F</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">Filenm</span> <span class="ss">"r</span><span class="p">;</span>
     <span class="nv">Lines</span> <span class="p">:=</span> <span class="s1">''</span><span class="p">;</span>
     <span class="nv">Done</span> <span class="p">:=</span> <span class="mb">o</span><span class="p">;</span>
     <span class="k">REPEAT</span>
       <span class="nv">Line</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">F</span><span class="p">;</span>
       <span class="k">IF</span> <span class="kp">isfault</span> <span class="nv">Line</span> <span class="k">THEN</span>
         <span class="nv">Done</span> <span class="p">:=</span> <span class="mb">l</span><span class="p">;</span>
       <span class="k">ELSE</span>
         <span class="nv">Lines</span> <span class="p">:=</span> <span class="nv">Lines</span> <span class="kp">append</span> <span class="nv">Line</span><span class="p">;</span>
       <span class="k">ENDIF</span><span class="p">;</span>
     <span class="k">UNTIL</span> <span class="nv">Done</span> <span class="k">ENDREPEAT</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="while-loop">while-loop</h3>

<ul>
  <li>Class:<br />
<a href="#control-structure">control structure</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="k">WHILE</span> <span class="nv">conditional</span> <span class="kp">expression</span> <span class="k">DO</span> <span class="kp">expression</span> <span class="nv">sequence</span> <span class="k">ENDWHILE</span></code></li>
  <li>See Also:<br />
<a href="#repeat-loop">repeat-loop</a>, <a href="#for-loop">for-loop</a></li>
</ul>

<p>The <code class="language-nial highlighter-rouge"><span class="k">WHILE</span><span class="o">-</span><span class="nv">loop</span></code> notation is used for executing an expression sequence
repeatedly as long as a conditional expression returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">F</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">Filenm</span> <span class="ss">"r</span><span class="p">;</span>
     <span class="nv">Lines</span> <span class="p">:=</span> <span class="s1">''</span><span class="p">;</span>
     <span class="nv">Line</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">F</span><span class="p">;</span>
     <span class="k">WHILE</span> <span class="kp">not</span> <span class="kp">isfault</span> <span class="nv">Line</span> <span class="k">DO</span>
       <span class="nv">Lines</span> <span class="p">:=</span> <span class="nv">Lines</span> <span class="kp">append</span> <span class="nv">Line</span><span class="p">;</span>
       <span class="nv">Line</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">F</span><span class="p">;</span>
     <span class="k">ENDWHILE</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="operation-properties">Operation Properties</h2>

<h3 id="binary">binary</h3>

<ul>
  <li>Class:<br />
<a href="#operation-property">operation property</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
</ul>

<p>An operation is said to <code class="language-nial highlighter-rouge"><span class="nv">binary</span></code> if it must have exactly two items in
its argument. Many of the built-in operations of Nial are binary. They
can be used in both an infix and prefix manner. If a binary operation
<code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is used in infix syntax then the arguments on each side of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> are
treated as the two items of its argument.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">reshape</span> <span class="mi">5</span>
</code></pre></div></div>

<p>In prefix usage, <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> can precede a single array with two items, or an
explicit pair formed with strand notation or bracket-comma notation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">;</span>
     <span class="kp">reshape</span> <span class="nv">X</span>
<span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>

     <span class="kp">reshape</span> <span class="mi">3</span> <span class="mi">5</span>
<span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>

     <span class="kp">reshape</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span>
</code></pre></div></div>

<h3 id="binary-pervasive">binary pervasive</h3>

<ul>
  <li>Class:<br />
<a href="#operation-property">operation property</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#binary">binary</a>, <a href="#unary-pervasive">unary pervasive</a>, <a href="#multi-pervasive">multi
pervasive</a>, <a href="#pervasive">pervasive</a>,
<a href="#eachboth">eachboth</a>, <a href="#pack">pack</a></li>
</ul>

<p>Each operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> in this class maps a pair of atoms to an atom.</p>

<p>A binary pervasive operation maps two arrays having identical structure
to one with the same structure, mapping each pair of corresponding atoms
by the function’s behaviour on pairs of atoms.</p>

<p>All of the binary operations of arithmetic and logic are binary
pervasive.</p>

<p>If a binary pervasive operation is applied to a pair of arrays that do
not have the same shape, the effect is to build a conformable pair by
replicating an atom or solitary item of the pair to the shape of the
other item. If both items are of unequal shape and if both items are
made up of more than one item, the fault <code class="language-nial highlighter-rouge"><span class="gr">?conform</span></code> is returned. The
replication of an argument with one item provides binary pervasive
operations with a scalar extension capability. For example,</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="o">-</span> <span class="mi">5</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="o">-</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span><span class="p">)</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>If a binary pervasive operation is applied to an array that is not a
pair, a fault is returned.</p>

<p>The following table lists the binary pervasive operations.</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>divide</td>
      <td>division of numbers</td>
    </tr>
    <tr>
      <td>gt</td>
      <td>greater than comparison</td>
    </tr>
    <tr>
      <td>gte</td>
      <td>greater than or equal comparison</td>
    </tr>
    <tr>
      <td>lt</td>
      <td>less than comparison</td>
    </tr>
    <tr>
      <td>lte</td>
      <td>less than or equal comparison</td>
    </tr>
    <tr>
      <td>match</td>
      <td>equality of atoms without type coercion</td>
    </tr>
    <tr>
      <td>mate</td>
      <td>equality of atoms with type coercion</td>
    </tr>
    <tr>
      <td>minus</td>
      <td>subtraction of numbers</td>
    </tr>
    <tr>
      <td>mod</td>
      <td>remainder on division of integers</td>
    </tr>
    <tr>
      <td>plus</td>
      <td>addition of numbers</td>
    </tr>
    <tr>
      <td>quotient</td>
      <td>quotient on division of integers</td>
    </tr>
    <tr>
      <td>times</td>
      <td>multiplication of numbers divide division of numbers</td>
    </tr>
  </tbody>
</table>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">pack</span> <span class="nv">B</span><span class="p">)</span>
   <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="nv">B</span>
</code></pre></div></div>

<h3 id="multi-pervasive">multi pervasive</h3>

<ul>
  <li>Class:<br />
<a href="#operation-property">operation property</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">f</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span> <span class="o">...</span> <span class="nv">C</span></code></li>
  <li>See Also:<br />
<a href="#unary-pervasive">unary pervasive</a>, <a href="#binary-pervasive">binary
pervasive</a>, <a href="#pervasive">pervasive</a>,
<a href="#reductive">reductive</a>, <a href="#eachall">eachall</a>, <a href="#reduce">reduce</a>,
<a href="#pack">pack</a></li>
</ul>

<p>Each operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> in this class reduces a simple array (an array of
atoms) to an atom.</p>

<p>A multi pervasive operation maps an array having items of identical
structure to one with the same structure, applying the operation to the
simple arrays formed from all the atoms in corresponding positions in
the atoms.</p>

<p>There are six operations in this class. They are the <strong>reductive</strong>
operations of arithmetic and logic.</p>

<p>If a multi pervasive operation is applied to an array that does not have
items of the same shape, the effect is to build a conformable pair by
replicating an atom or solitary item of the array to the common shape of
the other items. If two or more of the items have tally different from
one and are of unequal shape, the fault <code class="language-nial highlighter-rouge"><span class="gr">?conform</span></code> is returned. On a
pair, a multi pervasive operation behaves the same way as a binary
pervasive operation does.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sum</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="p">,</span> <span class="mi">5</span> <span class="p">,</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">15</span> <span class="mi">17</span> <span class="mi">19</span> <span class="mi">21</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The following table describes the multi pervasive operations.</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>and</td>
      <td>logical “and” of a boolean array</td>
    </tr>
    <tr>
      <td>max</td>
      <td>highest item in the array</td>
    </tr>
    <tr>
      <td>min</td>
      <td>lowest item in the array</td>
    </tr>
    <tr>
      <td>or</td>
      <td>logical “or” of a boolean array</td>
    </tr>
    <tr>
      <td>product</td>
      <td>arithmetic product of an array of numbers</td>
    </tr>
    <tr>
      <td>sum</td>
      <td>arithmetic sum of an array of numbers</td>
    </tr>
  </tbody>
</table>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACHALL</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">pack</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="kp">pack</span> <span class="nv">A</span>
   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h3 id="predicate">predicate</h3>

<ul>
  <li>Class:<br />
<a href="#operation-property">operation property</a></li>
</ul>

<p>A <strong>predicate</strong> is an operation that tests a condition and returns true
if the condition holds and false otherwise. A predicate is not
pervasive.</p>

<p>The predefined predicate operations include:</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>allin</td>
      <td>set-like inclusion</td>
    </tr>
    <tr>
      <td>atomic</td>
      <td>an array is an atom</td>
    </tr>
    <tr>
      <td>diverse</td>
      <td>all items differ</td>
    </tr>
    <tr>
      <td>empty</td>
      <td>an array has no items</td>
    </tr>
    <tr>
      <td>equal</td>
      <td>all items are equal</td>
    </tr>
    <tr>
      <td>isboolean</td>
      <td>arg is a boolean atom</td>
    </tr>
    <tr>
      <td>ischar</td>
      <td>arg is a character atom</td>
    </tr>
    <tr>
      <td>isfault</td>
      <td>arg is a fault symbol</td>
    </tr>
    <tr>
      <td>isinteger</td>
      <td>arg is a integer number</td>
    </tr>
    <tr>
      <td>isphrase</td>
      <td>arg is a symbol</td>
    </tr>
    <tr>
      <td>isreal</td>
      <td>arg is a real number</td>
    </tr>
    <tr>
      <td>isstring</td>
      <td>arg is a list of characters</td>
    </tr>
    <tr>
      <td>like</td>
      <td>two arrays contain same items</td>
    </tr>
    <tr>
      <td>simple</td>
      <td>all items are atoms</td>
    </tr>
    <tr>
      <td>unequal</td>
      <td>items are not all equal</td>
    </tr>
    <tr>
      <td>up</td>
      <td>lexical ordering</td>
    </tr>
  </tbody>
</table>

<h3 id="reductive">reductive</h3>

<ul>
  <li>Class:<br />
<a href="#operation-property">operation property</a></li>
  <li>See Also:<br />
<a href="#multi-pervasive">multi pervasive</a>, <a href="#reduce">reduce</a></li>
</ul>

<p>A <strong>reductive</strong> operation is one that extends a functional capability
normally defined on a pair to a list, reducing the result by pairwise
application of the function.</p>

<p>The predefined reductive operations include:</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>and</td>
      <td>logical “and” of a boolean array</td>
    </tr>
    <tr>
      <td>link</td>
      <td>the list of all the items of the items in the array</td>
    </tr>
    <tr>
      <td>max</td>
      <td>highest item in the array</td>
    </tr>
    <tr>
      <td>min</td>
      <td>lowest item in the array</td>
    </tr>
    <tr>
      <td>or</td>
      <td>logical “or” of a boolean array</td>
    </tr>
    <tr>
      <td>product</td>
      <td>arithmetic product of an array of numbers</td>
    </tr>
    <tr>
      <td>sum</td>
      <td>arithmetic sum of an array of numbers</td>
    </tr>
  </tbody>
</table>

<p>All of the above operations except <code class="language-nial highlighter-rouge"><span class="kp">link</span></code> are also multi pervasive.</p>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">REDUCE</span></code> can be used to produce a reductive operation
from a binary one.</p>

<h3 id="unary-pervasive">unary pervasive</h3>

<ul>
  <li>Class:<br />
<a href="#operation-property">operation property</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#binary-pervasive">binary pervasive</a>, <a href="#multi-pervasive">multi
pervasive</a>, <a href="#pervasive">pervasive</a>, <a href="#each">each</a></li>
</ul>

<p>A <strong>unary pervasive</strong> operation maps an array to another array with
identical structure, mapping each atom by the function’s behaviour on
atoms. All of the scientific operations and the unary operations of
arithmetic and logic are unary pervasive.</p>

<p>The scientific operations are implemented using the library routines
provided with the C compiler used to construct Q’Nial. The accuracy of
the result is determined by the precision of the floating point number
system of the computer and the accuracy of the library routine
approximation.</p>

<p>The following table describes the unary pervasive operations:</p>

<table>
  <thead>
    <tr>
      <th>Operation</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>abs</td>
      <td>absolute value</td>
    </tr>
    <tr>
      <td>arccos</td>
      <td>inverse cosine function</td>
    </tr>
    <tr>
      <td>arcsin</td>
      <td>inverse sine function</td>
    </tr>
    <tr>
      <td>arctan</td>
      <td>inverse tangent function</td>
    </tr>
    <tr>
      <td>ceiling</td>
      <td>lowest integer above a real number</td>
    </tr>
    <tr>
      <td>char</td>
      <td>integer to character conversion</td>
    </tr>
    <tr>
      <td>charrep</td>
      <td>character to integer conversion</td>
    </tr>
    <tr>
      <td>cos</td>
      <td>cosine function</td>
    </tr>
    <tr>
      <td>cosh</td>
      <td>hyperbolic cosine function</td>
    </tr>
    <tr>
      <td>exp</td>
      <td>exponential function</td>
    </tr>
    <tr>
      <td>floor</td>
      <td>next higher integer above a real number</td>
    </tr>
    <tr>
      <td>ln</td>
      <td>natural logarithm</td>
    </tr>
    <tr>
      <td>log</td>
      <td>logarithm base 10</td>
    </tr>
    <tr>
      <td>not</td>
      <td>opposite of a boolean value</td>
    </tr>
    <tr>
      <td>opposite</td>
      <td>opposite of a number</td>
    </tr>
    <tr>
      <td>reciprocal</td>
      <td>reciprocal of a number</td>
    </tr>
    <tr>
      <td>sin</td>
      <td>sine function</td>
    </tr>
    <tr>
      <td>sinh</td>
      <td>hyperbolic sine function</td>
    </tr>
    <tr>
      <td>sqrt</td>
      <td>square root of a number</td>
    </tr>
    <tr>
      <td>tan</td>
      <td>tangent function</td>
    </tr>
    <tr>
      <td>tanh</td>
      <td>hyperbolic tangent function</td>
    </tr>
    <tr>
      <td>type</td>
      <td>representative atom of same type</td>
    </tr>
  </tbody>
</table>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="logging-feature">Logging Feature</h2>

<h3 id="log-file">log file</h3>

<ul>
  <li>Class:<br />
<a href="#feature">feature</a></li>
  <li>See Also:<br />
<a href="#setlogname">setlogname</a></li>
</ul>

<p>Q’Nial provides a facility to record the actions in a session in a text
file. The default name for the log file is <code class="language-nial highlighter-rouge"><span class="nv">auto</span><span class="o">.</span><span class="nv">nlg</span></code>. Logging is
initiated by:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"log</span>
<span class="nv">nolog</span>
</code></pre></div></div>

<p>Logging is ended by:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"nolog</span>
<span class="kp">log</span>
</code></pre></div></div>

<p>The log file name can be changed using:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setlogname</span> <span class="ss">"newname</span>
<span class="nv">auto</span><span class="o">.</span><span class="nv">nlg</span>
</code></pre></div></div>

<p>A log file is opened and closed on each usage by the internal logging
routine. As a result, the log file is always available if the session is
terminated unexpectedly. If a file with the name of the log file exists
when <code class="language-nial highlighter-rouge"><span class="kp">set</span> <span class="ss">"log</span></code> is executed, the logging information is appended at the
end.</p>

<h2 id="constant-expressions">Constant Expressions</h2>

<h3 id="false">false</h3>

<ul>
  <li>Class:<br />
<a href="#constant-expression">constant expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kc">False</span></code></li>
  <li>See Also:<br />
<a href="#true">true</a>, <a href="#isboolean">isboolean</a></li>
</ul>

<p>The constant expression <code class="language-nial highlighter-rouge"><span class="kc">False</span></code> denotes the boolean atom for <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>,
which Nial also denotes by <code class="language-nial highlighter-rouge"><span class="mb">o</span></code>. It is the result of comparing two arrays
that are not identical for equality.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kc">False</span> <span class="p">(</span><span class="kp">not</span> <span class="kc">False</span><span class="p">)</span>
<span class="mb">ol</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="kc">False</span> <span class="o">=</span> <span class="mi">1</span>
   <span class="kp">shape</span> <span class="kc">False</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">single</span> <span class="kc">False</span> <span class="o">=</span> <span class="kc">False</span>
   <span class="kp">not</span> <span class="kc">False</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></div>

<h3 id="null">null</h3>

<ul>
  <li>Class:<br />
<a href="#constant-expression">constant expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kc">Null</span></code></li>
  <li>See Also:<br />
<a href="#empty">empty</a>, <a href="#atomic">atomic</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> denotes the empty list. It is the array returned
as the shape of a single and is equal to the empty string. The empty
list notation ` [ ]<code class="language-nial highlighter-rouge"> <span class="nv">also</span> <span class="nv">denotes</span> <span class="nv">the</span> <span class="kp">empty</span> <span class="kp">list</span> </code>Null`.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kc">Null</span> <span class="o">=</span> <span class="kp">shape</span> <span class="mi">5</span>
<span class="mb">l</span>
     <span class="kc">Null</span> <span class="o">=</span> <span class="p">[]</span>
<span class="mb">l</span>
     <span class="kc">Null</span> <span class="o">=</span> <span class="s1">''</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>Since there is an empty array for each shape containing a zero, unless
you are certain <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a list, the test: <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span></code> should not be used
in place of <code class="language-nial highlighter-rouge"><span class="kp">empty</span> <span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"sketch</span><span class="p">;</span> <span class="kc">Null</span>

     <span class="kp">set</span> <span class="ss">"diagram</span><span class="p">;</span> <span class="kc">Null</span>
<span class="o">+</span>
<span class="o">|</span>
<span class="o">+</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> is not displayed when sketch display mode is set. In diagram mode
it is displayed as the left border of a list diagram.</p>

<p>A selection operation such as <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> or <code class="language-nial highlighter-rouge"><span class="kp">first</span></code> applied to <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>
results in the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kc">Null</span> <span class="k">IS</span> <span class="kp">shape</span> <span class="mi">0</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">shape</span> <span class="kc">Null</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h3 id="pi">pi</h3>

<ul>
  <li>Class:<br />
<a href="#constant-expression">constant expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kc">Pi</span></code></li>
  <li>See Also:<br />
<a href="#random">random</a>, <a href="#ln">ln</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kc">Pi</span></code> returns the real number which is the ratio of the
circumference of a circle to its diameter. <code class="language-nial highlighter-rouge"><span class="kc">Pi</span></code> is useful in scientific
computing.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setformat</span> <span class="s1">'%15.12f'</span> <span class="p">;</span> <span class="kc">Pi</span>
 <span class="mf">3.141592653590</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kc">Pi</span> <span class="o">=</span> <span class="kp">arccos</span> <span class="mi">-1</span> <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="true">true</h3>

<ul>
  <li>Class:<br />
<a href="#constant-expression">constant expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kc">True</span></code></li>
  <li>See Also:<br />
<a href="#false">false</a>, <a href="#isboolean">isboolean</a></li>
</ul>

<p>The constant expression <code class="language-nial highlighter-rouge"><span class="kc">True</span></code> denotes the boolean atom for <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>,
which Nial also denotes by <code class="language-nial highlighter-rouge"><span class="mb">l</span></code>. It is the result of comparing two
identical arrays for equality.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kc">True</span> <span class="k">IS</span> <span class="p">(</span><span class="mi">0</span> <span class="kp">equal</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="kc">True</span> <span class="o">=</span> <span class="mi">1</span>
   <span class="kp">shape</span> <span class="kc">True</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">single</span> <span class="kc">True</span> <span class="o">=</span> <span class="kc">True</span>
   <span class="kp">not</span> <span class="kc">True</span> <span class="o">=</span> <span class="kc">False</span>
   <span class="kp">max</span> <span class="kc">True</span> <span class="o">=</span> <span class="kc">True</span>
   <span class="kp">abs</span> <span class="kc">True</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<h2 id="file-expressions">File Expressions</h2>

<h3 id="filestatus">filestatus</h3>

<ul>
  <li>Class:<br />
<a href="#file-expression">file expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Filestatus</span></code></li>
  <li>See Also:<br />
<a href="#status">status</a>, <a href="#open">open</a>, <a href="#close">close</a>,
<a href="#filetally">filetally</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Filestatus</span></code> gives information on the files currently
open in a Q’Nial session. It returns a list of triples, one for each
open file, giving the file number as an integer, the filename as a
phrase and the mode as a character.</p>

<p>The modes are <code class="language-nial highlighter-rouge"><span class="nv">r</span></code>, w, a, d, pr, pw and <code class="language-nial highlighter-rouge"><span class="nv">c</span></code>, standing for <code class="language-nial highlighter-rouge"><span class="kp">read</span></code>, write,
append, direct, pipe_read, pipe_write and <code class="language-nial highlighter-rouge"><span class="nv">communications</span></code>
respectively.</p>

<p>The files for standard input, standard output and standard error are
opened with modes of r, w and w respectively using file numbers 0, 1 and
2.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Fnum</span> <span class="p">:=</span> <span class="kp">open</span> <span class="ss">"F</span> <span class="ss">"a</span><span class="p">;</span>
     <span class="kp">Filestatus</span>
<span class="o">+---------+----------+----------+-----+</span>
<span class="o">|</span><span class="mi">0</span> <span class="nv">stdin</span> <span class="nv">r</span><span class="o">|</span><span class="mi">1</span> <span class="nv">stdout</span> <span class="nv">w</span><span class="o">|</span><span class="mi">2</span> <span class="nv">stderr</span> <span class="nv">w</span><span class="o">|</span><span class="mi">3</span> <span class="nv">F</span> <span class="nv">a</span><span class="o">|</span>
<span class="o">+---------+----------+----------+-----+</span>
</code></pre></div></div>

<h2 id="profiling-expressions">Profiling Expressions</h2>

<h3 id="clearprofile">clearprofile</h3>

<ul>
  <li>Class:<br />
<a href="#profiling-expression">profiling expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Clearprofile</span></code></li>
  <li>See Also:<br />
<a href="#profile">profile</a>, <a href="#setprofile">setprofile</a>,
<a href="#profiletable">profiletable</a>, <a href="#profiletree">profiletree</a>,
<a href="#profiling">profiling</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Clearprofile</span></code> is used to clear the internal data
structures that are used in the gathering of profiling statistics. It
should be called when one profiling session has been completed and
<code class="language-nial highlighter-rouge"><span class="kp">profile</span></code> has been called, before starting another one.</p>

<p>A detailed explanation of the profiling mechanism is given in the help
entry on profiling.</p>

<p><strong>Example</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Clearprofile</span>
</code></pre></div></div>

<h3 id="profiletable">profiletable</h3>

<ul>
  <li>Class:<br />
<a href="#profiling-expression">profiling expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Profiletable</span></code></li>
  <li>See Also:<br />
<a href="#profile">profile</a>, <a href="#setprofile">setprofile</a>,
<a href="#clearprofile">clearprofile</a>, <a href="#profiling">profiling</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Profiletable</span></code> is used to summarize the internal data
structures that are used in the gathering of profiling statistics to
produce the same information that is displayed by the operation
<code class="language-nial highlighter-rouge"><span class="kp">profile</span></code>. It produces a list of entries, one for each definition that
has been encountered during execution with profiling on. Each entry
includes the name, the number of direct calls, the number of recursive
calls, the execution time, and a list of subentries for the definitions
directly called by the definition. The subentries summarize the
information for the called definitions in the same format except that no
further breakdown is given on definitions they call.</p>

<p>A detailed example of the output of <code class="language-nial highlighter-rouge"><span class="kp">Profiletable</span></code> is given in the help
entry on profiling.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Profiletable</span>
<span class="o">+-----------------+-------------------------------------+---</span>
<span class="o">|+----+--+-+----++|+-----+--+-+----+-------------------+|+--</span>
<span class="o">||</span><span class="nv">test</span><span class="o">|</span><span class="mi">12</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">4.12</span><span class="o">||||</span><span class="nv">tryit</span><span class="o">|</span><span class="mi">11</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">4.12</span><span class="o">|+-----------------+|||</span><span class="nv">ag</span>
<span class="o">|+----+--+-+----++||</span>     <span class="o">|</span>  <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+--+-+----++||||</span>
<span class="o">|</span>                 <span class="o">||</span>     <span class="o">|</span>  <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">11</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">4.12</span><span class="o">||||||</span>
<span class="o">|</span>                 <span class="o">||</span>     <span class="o">|</span>  <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+--+-+----++||||</span>
<span class="o">|</span>                 <span class="o">||</span>     <span class="o">|</span>  <span class="o">|</span> <span class="o">|</span>    <span class="o">|+-----------------+|||</span>
<span class="o">|</span>                 <span class="o">|+-----+--+-+----+-------------------+|+--</span>
<span class="o">+-----------------+-------------------------------------+---</span>

<span class="o">----------------------------------+</span>
<span class="o">---+-+-+----+--------------------+|</span>
<span class="nv">ain</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">3.96</span><span class="o">|+------------------+||</span>
   <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>    <span class="o">||+-----+--+-+----++|||</span>
   <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">tryit</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">3.96</span><span class="o">|||||</span>
   <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>    <span class="o">||+-----+--+-+----++|||</span>
   <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>    <span class="o">|+------------------+||</span>
<span class="o">---+-+-+----+--------------------+|</span>
<span class="o">----------------------------------+</span>
</code></pre></div></div>

<h3 id="profiletree">profiletree</h3>

<ul>
  <li>Class:<br />
<a href="#profiling-expression">profiling expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Profiletree</span></code></li>
  <li>See Also:<br />
<a href="#profile">profile</a>, <a href="#setprofile">setprofile</a>,
<a href="#clearprofile">clearprofile</a>, <a href="#profiletable">profiletable</a>,
<a href="#profiling">profiling</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Profiletree</span></code> is used to display the detailed information
from the internal data structures that are used in the gathering of
profiling statistics. It produces a nested list of entries showing the
calling dynamic calling sequence from top level, with the amount of time
and number of calls at each level. Each entry includes the name, the
number of direct calls, the execution time, and a list of subentries for
the definitions directly called by the definition. The subentries
provide the same information for the called definitions in the same
format including entries on all the definitions that they call in turn.</p>

<p>A detailed example of the output of <code class="language-nial highlighter-rouge"><span class="kp">Profiletable</span></code> is given in the help
entry on profiling.</p>

<p>Example of use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Profiletree</span>
<span class="o">+--------+-+----+-------------------------------------------</span>
<span class="o">|</span><span class="kp">TOPLEVEL</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">4.18</span><span class="o">|+------------+-----------------------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+--++|+-----+-+----+---------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.</span><span class="o">||||</span><span class="nv">tryit</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.16</span><span class="o">|+--------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+--++||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----++</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">0.16</span><span class="o">||</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+----+-+----++</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|+--------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">|+-----+-+----+---------------</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">||</span>            <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="o">|</span>    <span class="o">|+------------+-----------------------------</span>
<span class="o">+--------+-+----+-------------------------------------------</span>

<span class="o">------------------------------------------------------+</span>
<span class="o">--+--------------------------------------------------+|</span>
<span class="o">-+|+-----+-+----+-----------------------------------+||</span>
<span class="o">+|||</span><span class="nv">again</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mf">3.96</span><span class="o">|+---------------------------------+|||</span>
<span class="o">||||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+-----+--+----+-----------------+||||</span>
<span class="o">||||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span><span class="nv">tryit</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span><span class="mf">3.96</span><span class="o">|+---------------+|||||</span>
<span class="o">||||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">||+----+--+----++||||||</span>
<span class="o">+|||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">|||</span><span class="nv">test</span><span class="o">|</span><span class="mi">10</span><span class="o">|</span><span class="mf">3.96</span><span class="o">||||||||</span>
<span class="o">-+||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">||+----+--+----++||||||</span>
  <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|||</span>     <span class="o">|</span>  <span class="o">|</span>    <span class="o">|+---------------+|||||</span>
  <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">||+-----+--+----+-----------------+||||</span>
  <span class="o">||</span>     <span class="o">|</span> <span class="o">|</span>    <span class="o">|+---------------------------------+|||</span>
  <span class="o">|+-----+-+----+--------------------</span>
<span class="o">---------------+||</span>
<span class="o">--+--------------------------------------------------+|</span>
<span class="o">------------------------------------------------------+</span>
</code></pre></div></div>

<h2 id="system-expressions">System Expressions</h2>

<h3 id="break">break</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Break</span></code></li>
  <li>See Also:<br />
<a href="#breakin">breakin</a>, <a href="#debugging">debugging</a>,
<a href="#callstack">callstack</a>, <a href="#step">step</a>, <a href="#next">next</a>,
<a href="#resume">resume</a></li>
</ul>

<p>The execution of <code class="language-nial highlighter-rouge"><span class="kp">Break</span></code> causes the interpreter to interrupt normal
execution in an expression sequence and to display the current
callstack. It then prompts for input with the prompt <code class="language-nial highlighter-rouge"><span class="o">--&gt;</span></code> followed by
the default command in brackets. The visible environment is that of the
expression in which the break occurs. Thus, it is possible to examine
the values of local variables in break mode.</p>

<p>At a break you can type any expression to inspect the value of a
variable or to see a portion of its value. The operation <code class="language-nial highlighter-rouge"><span class="kp">see</span></code> can also
be used to view any of the definitions in the environment.</p>

<p>The debugging capability allows one to step forward in expression
sequences using commands <code class="language-nial highlighter-rouge"><span class="nv">step</span></code>, stepin, next or <code class="language-nial highlighter-rouge"><span class="nv">toend</span></code> to control
whether you step into or over other definitions or to the end of a loop
or a definition. The command <code class="language-nial highlighter-rouge"><span class="nv">resume</span></code> ends the break and normal
execution is restarted.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">foo</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">Break</span><span class="p">;</span> <span class="nv">A</span> <span class="p">}</span>
     <span class="nv">foo</span> <span class="mi">3</span>
<span class="o">-------------------------------------------------------------</span>
    <span class="kp">Break</span> <span class="nv">debug</span> <span class="nv">loop</span><span class="p">:</span> <span class="nv">enter</span> <span class="nv">debug</span> <span class="nv">commands</span><span class="p">,</span> <span class="nv">expressions</span> <span class="kp">or</span>
      <span class="kp">type</span><span class="p">:</span> <span class="nv">resume</span>    <span class="nv">to</span> <span class="kp">exit</span> <span class="nv">debug</span> <span class="nv">loop</span>
      <span class="o">&lt;</span><span class="nv">Return</span><span class="o">&gt;</span> <span class="nv">executes</span> <span class="nv">the</span> <span class="nv">indicated</span> <span class="nv">debug</span> <span class="nv">command</span>
    <span class="nv">current</span> <span class="nv">call</span> <span class="nv">stack</span> <span class="p">:</span>
<span class="nv">foo</span>
<span class="o">-------------------------------------------------------------</span>
<span class="gr">?..</span> <span class="nv">A</span>
<span class="o">--&gt;</span><span class="p">[</span><span class="nv">stepv</span><span class="p">]</span>
</code></pre></div></div>

<p>In the example, the operation <code class="language-nial highlighter-rouge"><span class="nv">foo</span></code> has a <code class="language-nial highlighter-rouge"><span class="kp">Break</span></code> which is executed when
<code class="language-nial highlighter-rouge"><span class="nv">foo</span></code> is applied to 3. If <code class="language-nial highlighter-rouge"><span class="nv">Return</span></code> is pressed at the prompt the
expression <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is evaluated and 3 is displayed followed by another
prompt.</p>

<h3 id="breaklist">breaklist</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Breaklist</span></code></li>
  <li>See Also:<br />
<a href="#break">break</a>, <a href="#breakin">breakin</a>, <a href="#debugging">debugging</a></li>
</ul>

<p>The execution of <code class="language-nial highlighter-rouge"><span class="kp">Breaklist</span></code> prints out a list of the definition names
for which the breakin flag has been set.</p>

<p>Its main use is to assist in clearing the breaks as debugging proceeds.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Breaklist</span>
<span class="nv">labeltable</span>
</code></pre></div></div>

<p>To clear all breaks use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">breakin</span> <span class="kp">Breaklist</span>
</code></pre></div></div>

<h3 id="bye">bye</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Bye</span></code></li>
  <li>See Also:<br />
<a href="#save">save</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Bye</span></code> is used to terminate a session of Q’Nial and to
return to the host environment. The current workspace is not saved.</p>

<h3 id="callstack">callstack</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Callstack</span></code></li>
  <li>See Also:<br />
<a href="#break">break</a>, <a href="#debugging">debugging</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Callstack</span></code> displays the sequence of active definition
calls at the point it is invoked. It is usually used in conjunction with
<code class="language-nial highlighter-rouge"><span class="kp">Break</span></code>. <code class="language-nial highlighter-rouge"><span class="kp">Callstack</span></code> can be used to see the execution path by which the
computation reached the current state while computation is suspended
during a break.</p>

<h3 id="exprs">exprs</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Exprs</span></code></li>
  <li>See Also:<br />
<a href="#symbols">symbols</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Exprs</span></code> returns a list of phrases giving the names of all
user defined expressions in the workspace.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Exprs</span> <span class="k">IS</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Names</span> <span class="nv">Roles</span> <span class="p">:=</span> <span class="kp">pack</span> <span class="kp">symbols</span> <span class="mi">0</span><span class="p">;</span>
        <span class="ss">"expr</span> <span class="kp">match</span> <span class="nv">Roles</span> <span class="kp">sublist</span> <span class="nv">Names</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="no_expr">no_expr</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">No_expr</span></code></li>
  <li>See Also:<br />
<a href="#no-value">no_value</a>, <a href="#no-op">no_op</a>, <a href="#no-tr">no_tr</a></li>
</ul>

<p>The expression No_expr returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?missing_expr</span></code>. It is the
default value for an expression name declared to be <code class="language-nial highlighter-rouge"><span class="kp">external</span></code> or that
has been erased.</p>

<h3 id="ops">ops</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">Ops</span></code></li>
  <li>See Also:<br />
<a href="#symbols">symbols</a>, <a href="#exprs">exprs</a>, <a href="#trs">trs</a>, <a href="#vars">vars</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="nv">Ops</span></code> returns a list of phrases giving the names of all
user defined operations in the workspace.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Ops</span> <span class="k">IS</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Names</span> <span class="nv">Roles</span> <span class="p">:=</span> <span class="kp">pack</span> <span class="kp">symbols</span> <span class="mi">0</span><span class="p">;</span>
        <span class="ss">"op</span> <span class="kp">match</span> <span class="nv">Roles</span> <span class="kp">sublist</span> <span class="nv">Names</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="status">status</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Status</span></code></li>
  <li>See Also:<br />
<a href="#filestatus">filestatus</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">status</span></code> provides seven integers indicating the use of
memory by Q’Nial. In order of display, the items are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Index</th>
      <th>Quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Number of free words in the workspace</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Number of words in the largest free block</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Number of free blocks</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Total number of words in workspace</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Stack size in words</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Atom table size in words</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Internal buffer size</td>
    </tr>
  </tbody>
</table>

<p>The first entry is an indication of how full the workspace is when
compared with the fourth entry. A word can contain an integer, a
reference to an array item, or 4 characters. The second entry gives an
upper limit to the number of integers that can be in a largest size
array. The third item is a measure of the fragmentation of memory. The
number of free words divided by the number of free blocks gives the
average block size. The fourth item gives the current size of the
workspace. It can grow provided the system has space available. The
remaining entries give the sizes of internal areas that can grow as
necessary.</p>

<p>The starting workspace size can be specified as a parameter to the
<code class="language-nial highlighter-rouge"><span class="nv">nial</span></code> command that starts a session in console versions or in a dialog
box in a GUI version. The workspace and the other areas can grow in size
provided there is sufficient space and workspace growth is allowed (the
default).</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">status</span>
<span class="mi">64198</span> <span class="mi">63828</span> <span class="mi">5</span> <span class="mi">100000</span> <span class="mi">4000</span> <span class="mi">6000</span> <span class="mi">1000</span>
</code></pre></div></div>

<h3 id="time">time</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Time</span></code></li>
  <li>See Also:<br />
<a href="#timestamp">timestamp</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Time</span></code> returns a real number giving the time in seconds
spent in executing Q’Nial since the beginning of the session. On systems
permitting multi-processing, the time represents central processor time
in seconds.</p>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Time</span></code> is useful for estimating the relative costs of
Q’Nial operations in terms of processor time.</p>

<h3 id="timestamp">timestamp</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Timestamp</span></code></li>
  <li>See Also:<br />
<a href="#time">time</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Timestamp</span></code> gives the current date and time in the
standard format for the host system. The details of this expression are
implementation dependent.</p>

<p>The result is reported as a string giving the date and time. <code class="language-nial highlighter-rouge"><span class="kp">Timestamp</span></code>
is useful for dating reports and messages.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Timestamp</span>
<span class="nv">Mon</span> <span class="nv">Jan</span> <span class="mi">27</span> <span class="mi">14</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">37</span> <span class="mi">1997</span>
</code></pre></div></div>

<h3 id="trs">trs</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Trs</span></code></li>
  <li>See Also:<br />
<a href="#symbols">symbols</a>, <a href="#exprs">exprs</a>, <a href="#ops">ops</a>, <a href="#vars">vars</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Trs</span></code> returns a list of phrases giving the names of all
user defined transformers in the workspace.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Trs</span> <span class="k">IS</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Names</span> <span class="nv">Roles</span> <span class="p">:=</span> <span class="kp">pack</span> <span class="kp">symbols</span> <span class="mi">0</span><span class="p">;</span>
        <span class="ss">"tr</span> <span class="kp">match</span> <span class="nv">Roles</span> <span class="kp">sublist</span> <span class="nv">Names</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="vars">vars</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Vars</span></code></li>
  <li>See Also:<br />
<a href="#symbols">symbols</a>, <a href="#exprs">exprs</a>, <a href="#ops">ops</a>, <a href="#trs">trs</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="kp">Vars</span></code> returns a list of phrases giving the names of all
user variables in the workspace.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Vars</span> <span class="k">IS</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Names</span> <span class="nv">Roles</span> <span class="p">:=</span> <span class="kp">pack</span> <span class="kp">symbols</span> <span class="mi">0</span><span class="p">;</span>
        <span class="ss">"var</span> <span class="kp">match</span> <span class="nv">Roles</span> <span class="kp">sublist</span> <span class="nv">Names</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="watchlist">watchlist</h3>

<ul>
  <li>Class:<br />
<a href="#system-expression">system expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Watchlist</span></code></li>
  <li>See Also:<br />
<a href="#watch">watch</a>, <a href="#debugging">debugging</a></li>
</ul>

<p>The execution of <code class="language-nial highlighter-rouge"><span class="kp">Watchlist</span></code> prints out a list of the variable watches
that are in effect.</p>

<p>Its main use is to assist in clearing the watches as debugging proceeds.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Watchlist</span>
<span class="o">+-----------------------------+----------------------------------------+</span>
<span class="o">|+--+------------------------+|+------+-------------------------------+|</span>
<span class="o">||!</span><span class="nv">X</span><span class="o">|</span><span class="kp">write</span> <span class="s1">'X changed to: '</span> <span class="nv">X</span><span class="o">|||!</span><span class="nv">FOO</span><span class="p">:</span><span class="nv">B</span><span class="o">|</span><span class="kp">write</span> <span class="s1">'B in foo changed to: '</span> <span class="nv">B</span><span class="o">||</span>
<span class="o">|+--+------------------------+|+------+-------------------------------+|</span>
<span class="o">+-----------------------------+----------------------------------------+</span>

     <span class="kp">watch</span> <span class="o">!</span><span class="nv">x</span> <span class="s1">''</span>
<span class="o">+------------------+------------------------+</span>
<span class="o">|+---+------------+|</span><span class="kp">write</span> <span class="s1">'X changed to: '</span> <span class="nv">X</span><span class="o">|</span>
<span class="o">||</span><span class="mi">100</span><span class="o">|</span><span class="mi">2</span> <span class="mi">7926</span> <span class="mi">42354</span><span class="o">||</span>                        <span class="o">|</span>
<span class="o">|+---+------------+|</span>                        <span class="o">|</span>
<span class="o">+------------------+------------------------+</span>

     <span class="kp">watchlist</span>
<span class="o">+----------------------------------------+</span>
<span class="o">|+------+-------------------------------+|</span>
<span class="o">||!</span><span class="nv">FOO</span><span class="p">:</span><span class="nv">B</span><span class="o">|</span><span class="kp">write</span> <span class="s1">'B in foo changed to: '</span> <span class="nv">B</span><span class="o">||</span>
<span class="o">|+------+-------------------------------+|</span>
<span class="o">+----------------------------------------+</span>
</code></pre></div></div>

<p>To clear all watches use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">first</span> <span class="kp">Watchlist</span> <span class="nb">EACHLEFT</span> <span class="kp">watch</span> <span class="s1">''</span>
</code></pre></div></div>

<h2 id="user-defined-expression">User defined expression</h2>

<h3 id="latent">latent</h3>

<ul>
  <li>Class:<br />
<a href="#user-defined-expression">user defined expression</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code></li>
  <li>See Also:<br />
<a href="#load">load</a>, <a href="#save">save</a></li>
</ul>

<p>The expression <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code> is used to name an expression to be executed
without user intervention when the workspace is loaded. <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code> is used
in closed applications so that an application can be started when the
workspace is loaded. <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code> can establish any default or initial
conditions desired.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Latent</span> <span class="k">IS</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">settrigger</span> <span class="mb">o</span><span class="p">;</span>
        <span class="kp">set</span> <span class="ss">"log</span><span class="p">;</span>
        <span class="nv">StartApp</span><span class="p">;</span>
        <span class="kp">Bye</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<p>In the example, <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code> is defined to turn of triggering of faults, to
turn on session logging, to start the application and then to terminate
the session.</p>

<h2 id="arithmetic-operations">Arithmetic operations</h2>

<ul>
  <li><a href="#abs">abs</a></li>
  <li><a href="#ceiling">ceiling</a></li>
  <li><a href="#divide">divide</a></li>
  <li><a href="#floor">floor</a></li>
  <li><a href="#minus">minus</a></li>
  <li><a href="#mod">mod</a></li>
  <li><a href="#opposite">opposite</a></li>
  <li><a href="#plus">plus</a></li>
  <li><a href="#power">power</a></li>
  <li><a href="#product">product</a></li>
  <li><a href="#quotient">quotient</a></li>
  <li><a href="#reciprocal">reciprocal</a></li>
  <li><a href="#sum">sum</a></li>
  <li><a href="#times">times</a></li>
</ul>

<h2 id="array-generation-operations">Array generation operations</h2>

<ul>
  <li><a href="#count">count</a></li>
  <li><a href="#grid">grid</a></li>
  <li><a href="#random">random</a></li>
  <li><a href="#seed">seed</a></li>
  <li><a href="#tell">tell</a></li>
</ul>

<h2 id="comparison-operations">Comparison operations</h2>

<ul>
  <li><a href="#gt">gt</a></li>
  <li><a href="#gte">gte</a></li>
  <li><a href="#lt">lt</a></li>
  <li><a href="#lte">lte</a></li>
  <li><a href="#match">match</a></li>
  <li><a href="#mate">mate</a></li>
  <li><a href="#max">max</a></li>
  <li><a href="#min">min</a></li>
  <li><a href="#up">up</a></li>
</ul>

<h2 id="construction-operations">Construction operations</h2>

<ul>
  <li><a href="#append">append</a></li>
  <li><a href="#cart">cart</a></li>
  <li><a href="#catenate">catenate</a></li>
  <li><a href="#hitch">hitch</a></li>
  <li><a href="#laminate">laminate</a></li>
  <li><a href="#link">link</a></li>
  <li><a href="#pair">pair</a></li>
  <li><a href="#single">single</a></li>
  <li><a href="#solitary">solitary</a></li>
</ul>

<h2 id="control-flow-operation">Control flow operation</h2>

<ul>
  <li><a href="#throw">throw</a></li>
</ul>

<h2 id="conversion-operations">Conversion operations</h2>

<ul>
  <li><a href="#char">char</a></li>
  <li><a href="#charrep">charrep</a></li>
  <li><a href="#fault">fault</a></li>
  <li><a href="#fromraw">fromraw</a></li>
  <li><a href="#gage">gage</a></li>
  <li><a href="#phrase">phrase</a></li>
  <li><a href="#quiet-fault">quiet_fault</a></li>
  <li><a href="#string">string</a></li>
  <li><a href="#tolower">tolower</a></li>
  <li><a href="#tonumber">tonumber</a></li>
  <li><a href="#toraw">toraw</a></li>
  <li><a href="#toupper">toupper</a></li>
</ul>

<h2 id="data-rearrangement-operations">Data rearrangement operations</h2>

<ul>
  <li><a href="#flip">flip</a></li>
  <li><a href="#fuse">fuse</a></li>
  <li><a href="#pack">pack</a></li>
  <li><a href="#reverse">reverse</a></li>
  <li><a href="#rotate">rotate</a></li>
  <li><a href="#transpose">transpose</a></li>
</ul>

<h2 id="evaluation-operations">Evaluation operations</h2>

<ul>
  <li><a href="#apply">apply</a></li>
  <li><a href="#assign">assign</a></li>
  <li><a href="#deepupdate">deepupdate</a></li>
  <li><a href="#deparse">deparse</a></li>
  <li><a href="#descan">descan</a></li>
  <li><a href="#eval">eval</a></li>
  <li><a href="#execute">execute</a></li>
  <li><a href="#getdef">getdef</a></li>
  <li><a href="#getname">getname</a></li>
  <li><a href="#getsyms">getsyms</a></li>
  <li><a href="#parse">parse</a></li>
  <li><a href="#scan">scan</a></li>
  <li><a href="#update">update</a></li>
  <li><a href="#updateall">updateall</a></li>
  <li><a href="#value">value</a></li>
</ul>

<h2 id="file-operations">File operations</h2>

<ul>
  <li><a href="#appendfile">appendfile</a></li>
  <li><a href="#close">close</a></li>
  <li><a href="#getfile">getfile</a></li>
  <li><a href="#open">open</a></li>
  <li><a href="#putfile">putfile</a></li>
  <li><a href="#readfile">readfile</a></li>
  <li><a href="#writefile">writefile</a></li>
</ul>

<h2 id="insertion-operations">Insertion operations</h2>

<ul>
  <li><a href="#deepplace">deepplace</a></li>
  <li><a href="#place">place</a></li>
  <li><a href="#placeall">placeall</a></li>
</ul>

<h2 id="interactive-io-operations">Interactive i/o operations</h2>

<ul>
  <li><a href="#read">read</a></li>
  <li><a href="#readscreen">readscreen</a></li>
  <li><a href="#write">write</a></li>
  <li><a href="#writechars">writechars</a></li>
  <li><a href="#writescreen">writescreen</a></li>
</ul>

<h2 id="linear-algebra-operations">Linear algebra operations</h2>

<ul>
  <li><a href="#innerproduct">innerproduct</a></li>
  <li><a href="#inverse">inverse</a></li>
  <li><a href="#solve">solve</a></li>
</ul>

<h2 id="logic-operations">Logic operations</h2>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">-</span> <span class="p">[</span><span class="kp">and</span><span class="p">](</span><span class="o">#</span><span class="kp">and</span><span class="p">)</span>
  <span class="o">-</span> <span class="p">[</span><span class="kp">diverse</span><span class="p">](</span><span class="o">#</span><span class="kp">diverse</span><span class="p">)</span>
  <span class="o">-</span> <span class="p">[</span><span class="kp">equal</span><span class="p">](</span><span class="o">#</span><span class="kp">equal</span><span class="p">)</span>
  <span class="o">-</span> <span class="p">[</span><span class="kp">not</span><span class="p">](</span><span class="o">#</span><span class="kp">not</span><span class="p">)</span>
  <span class="o">-</span> <span class="p">[</span><span class="kp">or</span><span class="p">](</span><span class="o">#</span><span class="kp">or</span><span class="p">)</span>
  <span class="o">-</span> <span class="p">[</span><span class="kp">unequal</span><span class="p">](</span><span class="o">#</span><span class="kp">unequal</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="measurement-operations">Measurement operations</h2>

<ul>
  <li><a href="#allbools">allbools</a></li>
  <li><a href="#allchars">allchars</a></li>
  <li><a href="#allints">allints</a></li>
  <li><a href="#allnumeric">allnumeric</a></li>
  <li><a href="#allreals">allreals</a></li>
  <li><a href="#axes">axes</a></li>
  <li><a href="#depth">depth</a></li>
  <li><a href="#isboolean">isboolean</a></li>
  <li><a href="#ischar">ischar</a></li>
  <li><a href="#isfault">isfault</a></li>
  <li><a href="#isinteger">isinteger</a></li>
  <li><a href="#isphrase">isphrase</a></li>
  <li><a href="#isreal">isreal</a></li>
  <li><a href="#isstring">isstring</a></li>
  <li><a href="#numeric">numeric</a></li>
  <li><a href="#shape">shape</a></li>
  <li><a href="#tally">tally</a></li>
  <li><a href="#type">type</a></li>
  <li><a href="#valence">valence</a></li>
</ul>

<h2 id="nesting-restructuring-operations">Nesting restructuring operations</h2>

<ul>
  <li><a href="#blend">blend</a></li>
  <li><a href="#cols">cols</a></li>
  <li><a href="#content">content</a></li>
  <li><a href="#lower">lower</a></li>
  <li><a href="#mix">mix</a></li>
  <li><a href="#raise">raise</a></li>
  <li><a href="#rows">rows</a></li>
  <li><a href="#split">split</a></li>
</ul>

<h2 id="nial-direct-access-file-operations">Nial direct access file operations</h2>

<ul>
  <li><a href="#eraserecord">eraserecord</a></li>
  <li><a href="#filetally">filetally</a></li>
  <li><a href="#readarray">readarray</a></li>
  <li><a href="#readrecord">readrecord</a></li>
  <li><a href="#writearray">writearray</a></li>
  <li><a href="#writerecord">writerecord</a></li>
</ul>

<h2 id="picture-operations">Picture operations</h2>

<ul>
  <li><a href="#diagram">diagram</a></li>
  <li><a href="#display">display</a></li>
  <li><a href="#paste">paste</a></li>
  <li><a href="#picture">picture</a></li>
  <li><a href="#positions">positions</a></li>
  <li><a href="#setformat">setformat</a></li>
  <li><a href="#sketch">sketch</a></li>
</ul>

<h2 id="profiling-operations">Profiling operations</h2>

<ul>
  <li><a href="#profile">profile</a></li>
  <li><a href="#setprofile">setprofile</a></li>
</ul>

<h2 id="reshaping-operations">Reshaping operations</h2>

<ul>
  <li><a href="#list">list</a></li>
  <li><a href="#mold">mold</a></li>
  <li><a href="#pass">pass</a></li>
  <li><a href="#post">post</a></li>
  <li><a href="#reshape">reshape</a></li>
  <li><a href="#vacate">vacate</a></li>
  <li><a href="#void">void</a></li>
</ul>

<h2 id="scientific-operations">Scientific operations</h2>

<ul>
  <li><a href="#arccos">arccos</a></li>
  <li><a href="#arcsin">arcsin</a></li>
  <li><a href="#arctan">arctan</a></li>
  <li><a href="#cos">cos</a></li>
  <li><a href="#cosh">cosh</a></li>
  <li><a href="#exp">exp</a></li>
  <li><a href="#ln">ln</a></li>
  <li><a href="#log">log</a></li>
  <li><a href="#sin">sin</a></li>
  <li><a href="#sinh">sinh</a></li>
  <li><a href="#sqrt">sqrt</a></li>
  <li><a href="#tan">tan</a></li>
  <li><a href="#tanh">tanh</a></li>
</ul>

<h2 id="search-operations">Search operations</h2>
<ul>
  <li><a href="#find">find</a></li>
  <li><a href="#findall">findall</a></li>
  <li><a href="#in">in</a></li>
  <li><a href="#notin">notin</a></li>
  <li><a href="#seek">seek</a></li>
</ul>

<h2 id="selection-operations">Selection operations</h2>

<ul>
  <li><a href="#choose">choose</a></li>
  <li><a href="#cull">cull</a></li>
  <li><a href="#cut">cut</a></li>
  <li><a href="#cutall">cutall</a></li>
  <li><a href="#drop">drop</a></li>
  <li><a href="#dropright">dropright</a></li>
  <li><a href="#except">except</a></li>
  <li><a href="#first">first</a></li>
  <li><a href="#front">front</a></li>
  <li><a href="#last">last</a></li>
  <li><a href="#pick">pick</a></li>
  <li><a href="#reach">reach</a></li>
  <li><a href="#rest">rest</a></li>
  <li><a href="#second">second</a></li>
  <li><a href="#sublist">sublist</a></li>
  <li><a href="#take">take</a></li>
  <li><a href="#takeright">takeright</a></li>
  <li><a href="#third">third</a></li>
</ul>

<h2 id="set-like-operations">Set-like operations</h2>

<ul>
  <li><a href="#allin">allin</a></li>
  <li><a href="#like">like</a></li>
</ul>

<h2 id="structure-testing-operations">Structure testing operations</h2>

<ul>
  <li><a href="#atomic">atomic</a></li>
  <li><a href="#empty">empty</a></li>
  <li><a href="#simple">simple</a></li>
</ul>

<h2 id="sorting-operations">Sorting operations</h2>

<ul>
  <li><a href="#gradeup">gradeup</a></li>
  <li><a href="#sortup">sortup</a></li>
</ul>

<h2 id="system-operations">System operations</h2>

<ul>
  <li><a href="#breakin">breakin</a></li>
  <li><a href="#edit">edit</a></li>
  <li><a href="#erase">erase</a></li>
  <li><a href="#host">host</a></li>
  <li><a href="#library">library</a></li>
  <li><a href="#load">load</a></li>
  <li><a href="#loaddefs">loaddefs</a></li>
  <li><a href="#no-op">no_op</a></li>
  <li><a href="#save">save</a></li>
  <li><a href="#see">see</a></li>
  <li><a href="#seeprimcalls">seeprimcalls</a></li>
  <li><a href="#seeusercalls">seeusercalls</a></li>
  <li><a href="#set">set</a></li>
  <li><a href="#setdeftrace">setdeftrace</a></li>
  <li><a href="#setinterrupts">setinterrupts</a></li>
  <li><a href="#setlogname">setlogname</a></li>
  <li><a href="#setprompt">setprompt</a></li>
  <li><a href="#settrigger">settrigger</a></li>
  <li><a href="#setwidth">setwidth</a></li>
  <li><a href="#symbols">symbols</a></li>
  <li><a href="#watch">watch</a></li>
</ul>

<h2 id="host-direct-access-file-operations">Host direct access file operations</h2>

<ul>
  <li><a href="#filelength">filelength</a></li>
  <li><a href="#readfield">readfield</a></li>
  <li><a href="#writefield">writefield</a></li>
</ul>

<h2 id="applicative-transformers">Applicative transformers</h2>

<ul>
  <li><a href="#bykey">bykey</a></li>
  <li><a href="#converse">converse</a></li>
  <li><a href="#fold">fold</a></li>
  <li><a href="#inner">inner</a></li>
  <li><a href="#outer">outer</a></li>
  <li><a href="#team">team</a></li>
</ul>

<h2 id="apply-by-partition-transformers">Apply-by-partition transformers</h2>

<ul>
  <li><a href="#bycols">bycols</a></li>
  <li><a href="#byrows">byrows</a></li>
  <li><a href="#partition">partition</a></li>
  <li><a href="#rank">rank</a></li>
  <li><a href="#reducecols">reducecols</a></li>
  <li><a href="#reducerows">reducerows</a></li>
</ul>

<h2 id="control-flow-transformer">Control flow transformer</h2>

<ul>
  <li><a href="#catch">catch</a></li>
</ul>

<h2 id="control-structure-transformers">Control structure transformers</h2>

<ul>
  <li><a href="#fork">fork</a></li>
  <li><a href="#iterate">iterate</a></li>
</ul>

<h2 id="distributive-transformers">Distributive transformers</h2>

<ul>
  <li><a href="#each">each</a></li>
  <li><a href="#eachall">eachall</a></li>
  <li><a href="#eachboth">eachboth</a></li>
  <li><a href="#eachleft">eachleft</a></li>
  <li><a href="#eachright">eachright</a></li>
  <li><a href="#leaf">leaf</a></li>
  <li><a href="#twig">twig</a></li>
</ul>

<h2 id="recursion-transformers">Recursion transformers</h2>

<ul>
  <li><a href="#across">across</a></li>
  <li><a href="#down">down</a></li>
  <li><a href="#recur">recur</a></li>
</ul>

<h2 id="reduction-transformers">Reduction transformers</h2>

<ul>
  <li><a href="#accumulate">accumulate</a></li>
  <li><a href="#reduce">reduce</a></li>
</ul>

<h2 id="selection-transformer">Selection transformer</h2>

<ul>
  <li><a href="#filter">filter</a></li>
</ul>

<h2 id="sorting-transformers">Sorting transformers</h2>

<ul>
  <li><a href="#grade">grade</a></li>
  <li><a href="#sort">sort</a></li>
</ul>

<h2 id="system-transformer">System transformer</h2>

<ul>
  <li><a href="#no-tr">no_tr</a></li>
</ul>

<h2 id="system-variables">System variables</h2>

<ul>
  <li><a href="#libpath">libpath</a></li>
</ul>

<h2 id="system-constants">System constants</h2>

<ul>
  <li><a href="#no-value">no_value</a></li>
</ul>

<h2 id="debugging-commands">Debugging commands</h2>

<ul>
  <li><a href="#next">next</a></li>
  <li><a href="#resume">resume</a></li>
  <li><a href="#step">step</a></li>
  <li><a href="#stepin">stepin</a></li>
  <li><a href="#toend">toend</a></li>
</ul>

<h1 id="a-z-listing">A-Z Listing</h1>

<h2 id="abs">abs</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">abs</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#opposite">opposite</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code> produces the following results when applied to atoms
of the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>corresponding integer</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>absolute value</td>
    </tr>
    <tr>
      <td>real</td>
      <td>absolute value</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<p>If the argument is the largest negative integer for the computer, the
result is the corresponding positive real number because the
corresponding positive integer is too large for representation as an
integer.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">abs</span>  <span class="mb">l</span>  <span class="mi">-2</span>  <span class="mf">3.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mf">3.5</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">abs</span></code> can be used to convert a boolean value to an
integer. Its primary use is in the numeric domains, where it is used to
give a positive number measuring the size of a number.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">abs</span> <span class="kp">abs</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">abs</span> <span class="nv">A</span>
   <span class="kp">abs</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">abs</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="accumulate">accumulate</h2>

<ul>
  <li>Class:<br />
<a href="#reduction-transformer">reduction transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">ACCUMULATE</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reduce">reduce</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">accumulate</span></code> is similar to the concept of scan in APL.
It computes the partial reductions of the initial lists of the items of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, using <code class="language-nial highlighter-rouge"><span class="nb">reduce</span> <span class="nv">f</span></code> (a right-to-left reduction) to compute each
partial result. (A reductive operation is one which when applied to an
array having a number of items returns a single result.)</p>

<p>In the example below, the <strong>initial lists</strong> of <code class="language-nial highlighter-rouge"><span class="nv">Z</span></code> are:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">13</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">13</span> <span class="mi">39</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">13</span> <span class="mi">39</span> <span class="mi">92</span> <span class="mi">45</span><span class="p">];</span>
</code></pre></div></div>

<p>and the right-to-left reduction of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> on <code class="language-nial highlighter-rouge"><span class="nv">Z</span></code> is equivalent to:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">[</span><span class="nv">f</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span> <span class="nv">f</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">13</span> <span class="nv">f</span> <span class="p">(</span><span class="mi">39</span> <span class="nv">f</span> <span class="mi">92</span><span class="p">),</span> <span class="mi">13</span> <span class="nv">f</span> <span class="p">(</span><span class="mi">39</span> <span class="nv">f</span> <span class="p">(</span> <span class="mi">92</span> <span class="nv">f</span> <span class="mi">45</span><span class="p">))]</span>

     <span class="nv">Z</span> <span class="p">:=</span> <span class="mi">13</span> <span class="mi">39</span> <span class="mi">92</span> <span class="mi">45</span> <span class="p">;</span>
     <span class="nb">ACCUMULATE</span> <span class="kp">pass</span> <span class="nv">Z</span>
<span class="o">+--+-----+----------+---------------+</span>
<span class="o">|</span><span class="mi">13</span><span class="o">|</span><span class="mi">13</span> <span class="mi">39</span><span class="o">|+--+-----+|+--+----------+|</span>
<span class="o">|</span>  <span class="o">|</span>     <span class="o">||</span><span class="mi">13</span><span class="o">|</span><span class="mi">39</span> <span class="mi">92</span><span class="o">|||</span><span class="mi">13</span><span class="o">|+--+-----+||</span>
<span class="o">|</span>  <span class="o">|</span>     <span class="o">|+--+-----+||</span>  <span class="o">||</span><span class="mi">39</span><span class="o">|</span><span class="mi">92</span> <span class="mi">45</span><span class="o">|||</span>
<span class="o">|</span>  <span class="o">|</span>     <span class="o">|</span>          <span class="o">||</span>  <span class="o">|+--+-----+||</span>
<span class="o">|</span>  <span class="o">|</span>     <span class="o">|</span>          <span class="o">|+--+----------+|</span>
<span class="o">+--+-----+----------+---------------+</span>
</code></pre></div></div>

<p>The first example shows that accumulate builds the result values with a
right-to-left reduction.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">ACCUMULATE</span> <span class="kp">max</span> <span class="nv">Z</span>
<span class="mi">13</span> <span class="mi">39</span> <span class="mi">92</span> <span class="mi">92</span>

     <span class="nb">ACCUMULATE</span> <span class="kp">min</span> <span class="nv">Z</span>
<span class="mi">13</span> <span class="mi">13</span> <span class="mi">13</span> <span class="mi">13</span>

     <span class="nb">ACCUMULATE</span> <span class="kp">sum</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">10</span> <span class="mi">15</span> <span class="mi">21</span> <span class="mi">28</span> <span class="mi">36</span> <span class="mi">45</span> <span class="mi">55</span>

     <span class="nb">ACCUMULATE</span> <span class="kp">minus</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">-1</span> <span class="mi">2</span> <span class="mi">-2</span> <span class="mi">3</span> <span class="mi">-3</span> <span class="mi">4</span> <span class="mi">-4</span> <span class="mi">5</span> <span class="mi">-5</span>
</code></pre></div></div>

<p>Useful applications of <code class="language-nial highlighter-rouge"><span class="nb">accumulate</span></code> include the <code class="language-nial highlighter-rouge"><span class="nb">accumulate</span> <span class="kp">sum</span></code>
transform used to compute a running sum, and the <code class="language-nial highlighter-rouge"><span class="nb">accumulate</span> <span class="kp">minus</span></code>
transform which gives an alternating sum.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">ACCUMULATE</span> <span class="kp">or</span> <span class="mb">oollooll</span>
<span class="mb">oollllll</span>

     <span class="nv">S</span> <span class="p">:=</span> <span class="s1">'  black and white'</span>
  <span class="nv">black</span> <span class="kp">and</span> <span class="nv">white</span>

     <span class="nv">B</span> <span class="p">:=</span> <span class="kp">not</span> <span class="p">(</span><span class="nv">S</span> <span class="kp">match</span> <span class="sc">` </span><span class="p">)</span>
<span class="mb">oolllllolllolllll</span>

     <span class="nb">ACCUMULATE</span> <span class="kp">or</span> <span class="nv">B</span> <span class="kp">sublist</span> <span class="nv">S</span>
<span class="nv">black</span> <span class="kp">and</span> <span class="nv">white</span>
</code></pre></div></div>

<p>The <code class="language-nial highlighter-rouge"><span class="nb">accumulate</span> <span class="kp">or</span></code> transform produces a bitstring that can be used with
<code class="language-nial highlighter-rouge"><span class="kp">sublist</span></code> to drop leading items that fail to meet a predicate.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">ACCUMULATE</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">heads</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
           <span class="kp">count</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="kp">take</span> <span class="kp">list</span> <span class="nv">A</span><span class="p">};</span>
        <span class="nb">EACH</span> <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="nv">heads</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">ACCUMULATE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nb">ACCUMULATE</span> <span class="nv">f</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="nv">A</span>
   <span class="nb">ACCUMULATE</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="nb">ACCUMULATE</span> <span class="nv">f</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="nb">ACCUMULATE</span> <span class="nv">f</span><span class="p">[</span><span class="nv">A</span><span class="p">,</span><span class="nv">B</span><span class="p">,</span><span class="nv">C</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="nv">A</span><span class="p">,</span><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">,</span><span class="nv">A</span> <span class="nv">f</span><span class="p">(</span><span class="nv">B</span> <span class="nv">f</span> <span class="nv">C</span><span class="p">)]</span>
</code></pre></div></div>

<h2 id="across">across</h2>

<ul>
  <li>Class:<br />
<a href="#recursion-transformer">recursion transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">ACROSS</span> <span class="p">[</span><span class="nv">endf</span><span class="p">,</span> <span class="nv">parta</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">]</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#recur">recur</a>, <a href="#down">down</a></li>
</ul>

<p>ACROSS is a general recursion transformer for traversing the length of
an array. It has three operation arguments: <code class="language-nial highlighter-rouge"><span class="nv">endf</span></code> is applied to the end
argument before starting to build the result, <code class="language-nial highlighter-rouge"><span class="nv">parta</span></code> computes the left
value from the argument, which is stacked, and <code class="language-nial highlighter-rouge"><span class="nv">joinf</span></code> combines the left
and right values as the recursion unwinds.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">ACROSS</span> <span class="p">[</span> <span class="mi">0</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">plus</span> <span class="p">]</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">18</span>
     <span class="kp">reshape</span> <span class="p">[</span> <span class="kp">shape</span><span class="p">,</span> <span class="nb">ACROSS</span>  <span class="p">[</span><span class="kp">pass</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="nb">CONVERSE</span> <span class="kp">append</span> <span class="p">]</span> <span class="p">]</span> <span class="mi">2</span> <span class="mi">15</span> <span class="mi">12</span> <span class="mi">4</span>
<span class="mi">4</span> <span class="mi">12</span> <span class="mi">15</span> <span class="mi">2</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ACROSS</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">endf</span> <span class="nv">parta</span> <span class="nv">joinf</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">A</span> <span class="p">:=</span> <span class="kp">list</span> <span class="nv">A</span><span class="p">;</span>
           <span class="nv">Res</span> <span class="p">:=</span> <span class="nv">endf</span> <span class="kp">void</span> <span class="kp">last</span> <span class="nv">A</span><span class="p">;</span>
           <span class="k">FOR</span> <span class="nv">I</span> <span class="k">WITH</span> <span class="kp">reverse</span> <span class="kp">tell</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="k">DO</span>
                     <span class="nv">Res</span> <span class="p">:=</span> <span class="nv">parta</span> <span class="nv">A</span><span class="o">@</span><span class="nv">I</span> <span class="nv">joinf</span> <span class="nv">Res</span>
           <span class="k">ENDFOR</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">ACROSS</span> <span class="p">[</span><span class="nv">endf</span><span class="p">,</span> <span class="nv">parta</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">]</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">RECUR</span> <span class="p">[</span><span class="kp">empty</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">parta</span> <span class="kp">first</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">,</span> <span class="kp">rest</span> <span class="p">]</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">sum</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">ACROSS</span> <span class="p">[</span> <span class="mi">0</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">plus</span> <span class="p">]</span> <span class="nv">A</span>
   <span class="kp">reverse</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reshape</span> <span class="p">[</span> <span class="kp">shape</span><span class="p">,</span> <span class="nb">ACROSS</span>  <span class="p">[</span><span class="kp">pass</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="nb">CONVERSE</span> <span class="kp">append</span> <span class="p">]</span> <span class="p">]</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reshape</span> <span class="p">[</span> <span class="kp">shape</span><span class="p">,</span> <span class="nb">ACROSS</span> <span class="p">[</span> <span class="kc">Null</span> <span class="kp">first</span><span class="p">,</span> <span class="nv">f</span><span class="p">,</span> <span class="kp">hitch</span> <span class="p">]</span> <span class="p">]</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="allbools">allbools</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">allbools</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#allints">allints</a>, <a href="#allreals">allreals</a>, <a href="#allchars">allchars</a>,
<a href="#allnumeric">allnumeric</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">allbools</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a nonempty array of
boolean items. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not empty and all the items
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are boolean atoms, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">allbools</span> <span class="mb">lool</span>
<span class="mb">l</span>
     <span class="kp">allbools</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="mb">o</span>
     <span class="kp">allbools</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>allbools IS OPERATION A {­ and EACH isboolean A and not empty A }</p>

<h2 id="allchars">allchars</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">allchars</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#allbools">allbools</a>, <a href="#allints">allints</a>, <a href="#allreals">allreals</a>,
<a href="#allnumeric">allnumeric</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">allchars</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a nonempty array of
character items. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not empty and all the items
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are character atoms, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">allchars</span> <span class="s1">'apple pie'</span>
<span class="mb">l</span>
     <span class="kp">allchars</span> <span class="ss">"today</span>
<span class="mb">o</span>
     <span class="kp">allchars</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>allchars IS OPERATION A {­ and EACH ischar A and not empty A }</p>

<h2 id="allin">allin</h2>

<ul>
  <li>Class:<br />
<a href="#set-like-operation">set-like operation</a></li>
  <li>Properties:<br />
binary, predicate</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">allin</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">allin</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#in">in</a>, <a href="#like">like</a>, <a href="#notin">notin</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">allin</span></code> tests whether or not all the items of array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
are also items of array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The result is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if the test holds and
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if it does not.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span> <span class="kp">allin</span> <span class="kp">count</span> <span class="mi">10</span>
<span class="mb">l</span>
     <span class="s1">'ae'</span> <span class="kp">allin</span> <span class="s1">'where are you?'</span>
<span class="mb">l</span>
     <span class="s1">'where'</span> <span class="kp">allin</span> <span class="s1">'hear'</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are compared for exact equality, including
type. The items being compared may be atoms or they may be any other
array.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">allin</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">and</span> <span class="p">(</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="kp">in</span> <span class="nv">B</span> <span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">allin</span> <span class="nv">B</span> <span class="o">=</span> <span class="p">(</span><span class="kp">list</span> <span class="nv">A</span><span class="p">)</span> <span class="kp">allin</span> <span class="p">(</span><span class="kp">list</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="allints">allints</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">allints</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#allbools">allbools</a>, <a href="#allreals">allreals</a>, <a href="#allchars">allchars</a>,
<a href="#allnumeric">allnumeric</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">allints</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a nonempty array of
integer items. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not empty and all the items
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are integer atoms, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">allints</span> <span class="mb">lool</span>
<span class="mb">o</span>
     <span class="kp">allints</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">25</span>
<span class="mb">l</span>
     <span class="kp">allints</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>allints IS OPERATION A {­ and EACH isinteger A and not empty A }</p>

<h2 id="allnumeric">allnumeric</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">allnumeric</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#allints">allints</a>, <a href="#allreals">allreals</a>, <a href="#allbools">allbools</a>,
<a href="#numeric">numeric</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">allnumeric</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a nonempty array
with all atoms of the same numeric type. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not
empty and all items are boolean atoms, or all are integer atoms or all
are real atoms, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">allnumeric</span> <span class="mf">3.5</span> <span class="mf">-2.97</span>
<span class="mb">l</span>
     <span class="kp">allnumeric</span> <span class="mb">l</span> <span class="mi">45</span> <span class="mf">3.78</span>
<span class="mb">o</span>
     <span class="kp">allnumeric</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>allnumeric IS OPERATION A {­ allbools A or allints A or allreals A }</p>

<h2 id="allreals">allreals</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">allreals</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#allbools">allbools</a>, <a href="#allints">allints</a>, <a href="#allchars">allchars</a>,
<a href="#allnumeric">allnumeric</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">allreals</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a nonempty array of
real items. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not empty and all the items of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are real atoms, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">allreals</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="mf">47.9</span>
<span class="mb">o</span>
     <span class="kp">allreals</span> <span class="mf">2.5</span> <span class="mf">-7.8</span> <span class="mf">27.3</span>
<span class="mb">l</span>
     <span class="kp">allreals</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>allreals IS OPERATION A {­ and EACH isreal A and not empty A }</p>

<h2 id="and">and</h2>

<ul>
  <li>Class:<br />
<a href="#logic-operation">logic operation</a></li>
  <li>Properties:<br />
multi pervasive, reductive</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">and</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">and</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#or">or</a>, <a href="#not">not</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">and</span></code> applied to a boolean array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> does the boolean
product of its items. If all items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>, the result is
<code class="language-nial highlighter-rouge"><span class="kc">true</span></code>; otherwise it is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>. In binary form and implements the
and-connective of logic.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a simple array and has a non-boolean item, the result is the
logical fault <code class="language-nial highlighter-rouge"><span class="gr">?L</span></code>. The operation extends to non-simple arrays by the
multi pervasive mechanism.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mb">l</span> <span class="kp">and</span> <span class="mb">l</span>
<span class="mb">l</span>

     <span class="kp">and</span> <span class="mb">llllloll</span>
<span class="mb">o</span>

     <span class="mb">lloo</span> <span class="kp">and</span> <span class="mb">lolo</span>
<span class="mb">looo</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kp">And</span></code> is a reductive operation in that it reduces an array of booleans
to a single boolean. If its argument is a pair of bitstrings or a list
of bitstrings, <code class="language-nial highlighter-rouge"><span class="kp">and</span></code> is applied to bits in corresponding positions of
each item of the argument producing a bitstring of the same length as
one of the items of its argument.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">and</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">and</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">and</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">or</span> <span class="nb">EACH</span> <span class="kp">not</span> <span class="nv">A</span>
   <span class="kp">and</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></div>

<h2 id="append">append</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">append</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">append</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#hitch">hitch</a>, <a href="#link">link</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">append</span></code> attaches <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> to the end of the list of items of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. It returns a list of length one greater than the <code class="language-nial highlighter-rouge"><span class="kp">tally</span></code> of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="kp">append</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="o">+-+-+-+-----+</span>
<span class="o">|</span><span class="mi">2</span><span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="o">|</span>
<span class="o">+-+-+-+-----+</span>

     <span class="kp">append</span> <span class="s1">''</span> <span class="s1">'Wow'</span>
<span class="o">+---+</span>
<span class="o">|</span><span class="nv">Wow</span><span class="o">|</span>
<span class="o">+---+</span>
</code></pre></div></div>

<p>The first example shows list (5 6 7) appended to list (2 3 4). The
second example shows that if an array is appended to an empty list, the
result is the solitary of the second argument. If <code class="language-nial highlighter-rouge"><span class="kp">append</span></code> is applied to
an array that is not a pair, a fault is returned.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">append</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="kp">link</span> <span class="kp">solitary</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">append</span> <span class="nv">B</span> <span class="o">=</span> <span class="p">(</span> <span class="kp">list</span> <span class="nv">A</span> <span class="p">)</span> <span class="kp">append</span> <span class="nv">B</span>
   <span class="kc">Null</span> <span class="kp">append</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="kp">append</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">append</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="appendfile">appendfile</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">appendfile</span> <span class="nv">Filename</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#putfile">putfile</a>, <a href="#getfile">getfile</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">appendfile</span></code> writes a list of character arrays <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to the
end of the file named <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code>, using one line of the file for each
row in the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If the file does not exist, it is created by
the operation. The file must not be open.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Appendfile</span></code> is similar to operation <code class="language-nial highlighter-rouge"><span class="kp">putfile</span></code> except that <code class="language-nial highlighter-rouge"><span class="kp">putfile</span></code>
overwrites an existing file. <code class="language-nial highlighter-rouge"><span class="kp">Getfile</span></code> reads a file containing text
records.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">putfile</span> <span class="ss">"Mailing</span> <span class="p">[</span><span class="s1">'1'</span><span class="p">,</span><span class="s1">'2'</span><span class="p">,</span><span class="s1">'3'</span><span class="p">];</span>
     <span class="kp">appendfile</span> <span class="ss">"Mailing</span> <span class="p">[</span><span class="s1">'Mr. Jones'</span><span class="p">,</span><span class="s1">'123 Main St'</span><span class="p">,</span><span class="s1">'New York NY 12345'</span><span class="p">];</span>
     <span class="kp">getfile</span> <span class="ss">"Mailing</span>
<span class="o">+-+-+-+---------+-----------+-----------------+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="nv">Mr</span><span class="o">.</span> <span class="nv">Jones</span><span class="o">|</span><span class="mi">123</span> <span class="nv">Main</span> <span class="nv">St</span><span class="o">|</span><span class="nv">New</span> <span class="nv">York</span> <span class="nv">NY</span> <span class="mi">12345</span><span class="o">|</span>
<span class="o">+-+-+-+---------+-----------+-----------------+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">appendfile</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">Filename</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Fnum</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">Filename</span> <span class="ss">"a</span> <span class="p">;</span>
        <span class="nb">ITERATE</span> <span class="p">(</span><span class="nv">Fnum</span> <span class="kp">writefile</span><span class="p">)</span> <span class="p">(</span><span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">rows</span> <span class="nv">A</span><span class="p">)</span> <span class="p">;</span>
        <span class="kp">close</span> <span class="nv">Fnum</span> <span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="apply">apply</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="k">Op</span> <span class="kp">apply</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">apply</span> <span class="k">Op</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#eval">eval</a>, <a href="#execute">execute</a>, <a href="#value">value</a>, <a href="#cast">cast</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">apply</span></code> carries out the application of the operation
represented by the array <code class="language-nial highlighter-rouge"><span class="k">Op</span></code> to array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. <code class="language-nial highlighter-rouge"><span class="k">Op</span></code> may be a phrase or
string that names a predefined or user-defined operation or it may be
the <code class="language-nial highlighter-rouge"><span class="nv">cast</span></code> of an operation expression.</p>

<p>If the operation is represented by a phrase or string giving its name,
the name is sought in the environment where <code class="language-nial highlighter-rouge"><span class="kp">apply</span></code> is being used.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">apply</span> <span class="ss">"second</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">4</span>
</code></pre></div></div>

<p>The operation to be applied may also be represented by the <code class="language-nial highlighter-rouge"><span class="kp">parse</span> <span class="nv">tree</span></code>
or <code class="language-nial highlighter-rouge"><span class="nv">cast</span></code> for the operation expression. If the cast is a name, it is
sought in the environment where the cast appears. In the following
example, <code class="language-nial highlighter-rouge"><span class="o">!</span><span class="kp">first</span></code> is the cast of the operation <code class="language-nial highlighter-rouge"><span class="kp">first</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="o">!</span><span class="kp">first</span> <span class="kp">apply</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">3</span>

     <span class="kp">apply</span> <span class="o">!</span><span class="p">(</span><span class="kp">first</span> <span class="kp">rest</span><span class="p">)</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">4</span>
</code></pre></div></div>

<p>As seen in the second example, an operation expression does not have to
be named in order to be used with <code class="language-nial highlighter-rouge"><span class="kp">apply</span></code>. The entire first example is
enclosed in parentheses to avoid conflict with the notation for
executing a host command.</p>

<h2 id="arccos">arccos</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">arccos</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#cos">cos</a>, <a href="#cosh">cosh</a>, <a href="#arcsin">arcsin</a>, <a href="#pi">pi</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">arccos</span></code> is the inverse of <code class="language-nial highlighter-rouge"><span class="kp">cos</span></code> in the numeric domain. It
produces the following results when applied to atoms of the six
types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>arccosine of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>arccosine of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>the angle B in radians such that cos B = A, if A is in the range -1 to 1; otherwise the fault ?arccos</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?arccos</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?arccos</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">arccos</span> <span class="mb">l</span> <span class="mi">-2</span> <span class="mf">0.35</span>
<span class="mf">0.</span> <span class="gr">?arccos</span> <span class="mf">1.21323</span>

     <span class="kp">arccos</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="gr">?arccos</span> <span class="gr">?arccos</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">arccos</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span> <span class="kc">Pi</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="kp">arcsin</span> <span class="nv">A</span> <span class="p">)</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">cos</span> <span class="kp">arccos</span> <span class="kp">cos</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cos</span> <span class="nv">A</span> <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="arcsin">arcsin</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">arcsin</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sin">sin</a>, <a href="#sinh">sinh</a>, <a href="#arctan">arctan</a>, <a href="#pi">pi</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">arcsin</span></code> is the inverse of <code class="language-nial highlighter-rouge"><span class="kp">sin</span></code> in the numeric domain. It
produces the following results when applied to atoms of the six
types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>arcsine of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>arcsine of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>the angle B in radians such that sin B = A, if A is in the range -1 to 1; otherwise, the fault ?arcsin</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?arcsin</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?arcsin</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">arcsin</span> <span class="mb">l</span> <span class="mi">-2</span> <span class="mf">0.35</span>
<span class="mf">1.5708</span> <span class="gr">?arcsin</span> <span class="mf">0.357571</span>

     <span class="kp">arcsin</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="gr">?arcsin</span> <span class="gr">?arcsin</span> <span class="gr">?error</span>

     <span class="kp">arcsin</span> <span class="mb">l</span> <span class="mi">1</span> <span class="o">.</span><span class="mi">5</span>
<span class="mf">1.5708</span> <span class="mf">1.5708</span> <span class="mf">0.523599</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">sin</span> <span class="kp">arcsin</span> <span class="kp">sin</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sin</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="arctan">arctan</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">arctan</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tan">tan</a>, <a href="#tanh">tanh</a>, <a href="#arcsin">arcsin</a>, <a href="#pi">pi</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">arctan</span></code> is the inverse of <code class="language-nial highlighter-rouge"><span class="kp">tan</span></code> in the numeric domain. It
produces the following results when applied to atoms of the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>arctangent of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>arctangent of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>angle B in radians where tan B = A</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?arctan</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?arctan</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">arctan</span> <span class="mb">l</span> <span class="mi">-2</span> <span class="mf">0.35</span>
<span class="mf">0.785398</span> <span class="mf">-1.10715</span> <span class="mf">0.336675</span>

     <span class="kp">arctan</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="gr">?arctan</span> <span class="gr">?arctan</span> <span class="gr">?error</span>

     <span class="kp">arctan</span> <span class="mf">2.</span> <span class="mb">l</span> <span class="mi">1</span> <span class="o">.</span><span class="mi">5</span>
<span class="mf">1.10715</span> <span class="mf">0.785398</span> <span class="mf">0.785398</span> <span class="mf">0.463648</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tan</span> <span class="kp">arctan</span> <span class="kp">tan</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">tan</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="assign">assign</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">Nm</span> <span class="kp">assign</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">assign</span> <span class="nv">Nm</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#update">update</a>, <a href="#place">place</a>, <a href="#value">value</a>, <a href="#assign-expression">assign
expression</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">assign</span></code> assigns the value of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to the variable named by
<code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code>. <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> may be a phrase or string (e.g. <code class="language-nial highlighter-rouge"><span class="ss">"X</span></code> or <code class="language-nial highlighter-rouge"><span class="s1">'X'</span></code>), in which case
the named variable is sought in the current environment; or it may be
the cast of a name (e.g. <code class="language-nial highlighter-rouge"><span class="o">!</span><span class="nv">X</span></code>), in which case it is sought in the
environment in which it was cast. If the variable is found, its value is
replaced by the array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. Otherwise, a variable with that name is
created in the global environment and given <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as its value.</p>

<p>Any phrase may be used as a variable name with the operation <code class="language-nial highlighter-rouge"><span class="kp">assign</span></code>.
Thus, it is possible to assign a value to names which are invalid
identifiers. The associated value can be retrieved using the operation
<code class="language-nial highlighter-rouge"><span class="kp">value</span></code>. The result of the operation is <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">assign</span> <span class="ss">"X</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>

     <span class="p">(</span><span class="o">!</span><span class="nv">Var</span> <span class="kp">assign</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
</code></pre></div></div>

<p>In the first example, the variable <code class="language-nial highlighter-rouge"><span class="nv">X</span></code> is assigned the list 2 3 4. If
this is done in an environment where <code class="language-nial highlighter-rouge"><span class="nv">X</span></code> is a local variable, the local
variable is updated. If <code class="language-nial highlighter-rouge"><span class="nv">X</span></code> does not exist, it is created in the global
environment.</p>

<p>In the second example, a variable <code class="language-nial highlighter-rouge"><span class="nv">Var</span></code> must exist in the environment
where the cast is done. The cast can be formed in a more global
environment and passed into an operation as a parameter (This technique
is called <strong>by-variable</strong> parameter passing).</p>

<h2 id="atomic">atomic</h2>

<ul>
  <li>Class:<br />
<a href="#structure-testing-operation">structure testing operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">atomic</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#simple">simple</a>, <a href="#leaf">leaf</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">atomic</span></code> tests whether or not its argument is an atom. It
returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if it is and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if it is not.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">atomic</span> <span class="mf">3.5</span>
<span class="mb">l</span>
     <span class="kp">atomic</span> <span class="ss">"hello</span>
<span class="mb">l</span>
     <span class="kp">atomic</span> <span class="s1">'hello'</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The examples illustrate that a number and a phrase are atoms and that a
string is not an atom.</p>

<p>An atom is a primitive concept in array theory and Nial. Atoms are
distinguished from other arrays by the property that they are self
nesting. The definition of atomic is based on this property.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">atomic</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">first</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">&lt;==&gt;</span> <span class="kp">single</span> <span class="nv">A</span> <span class="kp">equal</span> <span class="nv">A</span>
   <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">simple</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="axes">axes</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">axes</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#valence">valence</a>, <a href="#tell">tell</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">axes</span></code> generates a list of axis numbers for the array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
counting from zero.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">axes</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">axes</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">tell</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">tally</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="blend">blend</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">blend</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">blend</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#split">split</a>, <a href="#mix">mix</a>, <a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">blend</span></code> combines the top two levels of an array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> into a
single level blending the axes of the second level of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> into the
combined level according to the axis numbers given in <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The items of
<code class="language-nial highlighter-rouge"><span class="nv">B</span></code> must be of the same shape.</p>

<p>If the array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is equivalent to <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">split</span> <span class="nv">C</span></code> for some array <code class="language-nial highlighter-rouge"><span class="nv">C</span></code>, the
result of <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">blend</span> <span class="nv">B</span></code> is <code class="language-nial highlighter-rouge"><span class="nv">C</span></code>.</p>

<p>The tally of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the valence of an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
indicate where the axes of the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are placed in the shape of
the result.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">C</span> <span class="p">:=</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">4</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">24</span><span class="p">)</span> <span class="p">;</span>
     <span class="nv">B</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">0</span> <span class="kp">split</span> <span class="nv">C</span>
<span class="o">+----+----+----+-----+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">13</span><span class="o">|</span><span class="mi">4</span> <span class="mi">16</span><span class="o">|</span><span class="mi">7</span> <span class="mi">19</span><span class="o">|</span><span class="mi">10</span> <span class="mi">22</span><span class="o">|</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">14</span><span class="o">|</span><span class="mi">5</span> <span class="mi">17</span><span class="o">|</span><span class="mi">8</span> <span class="mi">20</span><span class="o">|</span><span class="mi">11</span> <span class="mi">23</span><span class="o">|</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">15</span><span class="o">|</span><span class="mi">6</span> <span class="mi">18</span><span class="o">|</span><span class="mi">9</span> <span class="mi">21</span><span class="o">|</span><span class="mi">12</span> <span class="mi">24</span><span class="o">|</span>
<span class="o">+----+----+----+-----+</span>

     <span class="nv">C</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">0</span> <span class="kp">blend</span> <span class="nv">B</span>
 <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>   <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span>
 <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>   <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span>
 <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span>   <span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span>
<span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>   <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>
</code></pre></div></div>

<p>In the example, <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a list of four tables of shape 3 2 created by a
<code class="language-nial highlighter-rouge"><span class="mi">2</span> <span class="mi">0</span> <span class="kp">split</span></code>. The result of <code class="language-nial highlighter-rouge"><span class="mi">2</span> <span class="mi">0</span> <span class="kp">blend</span> <span class="nv">B</span></code> is the array of valence 3 that
is the second argument to <code class="language-nial highlighter-rouge"><span class="kp">split</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">SORT</span> <span class="o">&lt;=</span> <span class="kp">list</span> <span class="nv">I</span> <span class="o">=</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">blend</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">split</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="p">(</span><span class="kp">valence</span> <span class="nv">A</span><span class="o">+</span><span class="kp">axes</span> <span class="kp">first</span> <span class="nv">A</span><span class="p">)</span> <span class="kp">blend</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">mix</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="kp">blend</span> <span class="nv">B</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="p">[</span><span class="kc">Null</span><span class="p">,</span><span class="nv">A</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="kp">first</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="breakin">breakin</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">breakin</span> <span class="nv">Defname</span> <span class="p">[</span><span class="nv">Mode</span><span class="p">]</span></code></li>
  <li>See Also:<br />
<a href="#break">break</a>, <a href="#debugging">debugging</a>, <a href="#breaklist">breaklist</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">breakin</span></code> installs a break point prior to the first
executable expression in a definition named by the string or phrase
<code class="language-nial highlighter-rouge"><span class="nv">Defname</span></code>. The named definition must be an expression or an operation
form. The effect is that when the definition is executed a break
interrupt occurs prior to the execution of the first expression in the
expression sequence in the body of the definition.</p>

<p>The optional argument <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code> is provided to set the internal flag
explicitly. If it is omitted, the internal flag value is toggled. All
breakin flags are initially <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>. The value of the breakin flag is
retained if the definition is replaced by a <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code> so that editing a
definition and reloading it does not change its breakin status. However,
if definitions are reloaded using a <code class="language-nial highlighter-rouge"><span class="kp">restart</span></code> then the breakin status is
set to <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>.</p>

<p>The operation returns the previous setting. If the result of <code class="language-nial highlighter-rouge"><span class="kp">breakin</span></code>
is assigned to a variable, the previous setting can be restored later.
The names of definitions that have breakin set can be viewed by the
expression <code class="language-nial highlighter-rouge"><span class="kp">Breaklist</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">library</span><span class="ss">"labeltab</span>

     <span class="kp">see</span> <span class="ss">"labeltable</span>

<span class="nv">labeltable</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">Corner</span> <span class="nv">Rowlabel</span>
   <span class="nv">Columnlabel</span> <span class="nv">Table</span> <span class="p">{</span><span class="err">­</span>
   <span class="cm">% Combine the corner label with the column
      labels for first line;</span>
   <span class="nv">Firstrow</span> <span class="p">:=</span> <span class="nv">Corner</span> <span class="kp">hitch</span> <span class="nv">Columnlabel</span><span class="p">;</span>
   <span class="cm">% Hitch the row labels to the rows of
      the table;</span>
   <span class="nv">Labeledrows</span> <span class="p">:=</span> <span class="nv">Rowlabel</span> <span class="nb">EACHBOTH</span> <span class="kp">hitch</span>
      <span class="kp">rows</span> <span class="nv">Table</span><span class="p">;</span>
   <span class="cm">% Hitch the first row of labels to the labeled
      rows and mix them;</span>
   <span class="kp">mix</span> <span class="p">(</span><span class="nv">Firstrow</span> <span class="kp">hitch</span> <span class="nv">Labeledrows</span><span class="p">)</span> <span class="p">}</span>

     <span class="nv">X</span> <span class="k">gets</span> <span class="kp">count</span> <span class="mi">3</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>

<span class="cm"># execute labeltable without break;

</span>     <span class="nv">labeltable</span> <span class="ss">"TIMES</span> <span class="nv">X</span> <span class="nv">X</span> <span class="p">(</span><span class="nv">X</span> <span class="nb">OUTER</span> <span class="kp">times</span> <span class="nv">X</span><span class="p">)</span>
<span class="kp">TIMES</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
    <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
    <span class="mi">2</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span>
    <span class="mi">3</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">9</span>

<span class="cm"># set breakin and execute again

</span>     <span class="kp">breakin</span> <span class="ss">"labeltable</span>
<span class="mb">o</span>

     <span class="nv">labeltable</span> <span class="ss">"TIMES</span> <span class="nv">X</span> <span class="nv">X</span> <span class="p">(</span><span class="nv">X</span> <span class="nb">OUTER</span> <span class="kp">times</span> <span class="nv">X</span><span class="p">)</span>

<span class="o">-------------------------------------------------------------</span>
    <span class="kp">Break</span> <span class="nv">debug</span> <span class="nv">loop</span><span class="p">:</span> <span class="nv">enter</span> <span class="nv">debug</span> <span class="nv">commands</span><span class="p">,</span> <span class="nv">expressions</span> <span class="kp">or</span>
      <span class="kp">type</span><span class="p">:</span> <span class="nv">resume</span>    <span class="nv">to</span> <span class="kp">exit</span> <span class="nv">debug</span> <span class="nv">loop</span>
      <span class="o">&lt;</span><span class="nv">Return</span><span class="o">&gt;</span> <span class="nv">executes</span> <span class="nv">the</span> <span class="nv">indicated</span> <span class="nv">debug</span> <span class="nv">command</span>
    <span class="nv">current</span> <span class="nv">call</span> <span class="nv">stack</span> <span class="p">:</span>
<span class="nv">labeltable</span>
<span class="o">-------------------------------------------------------------</span>
<span class="gr">?..</span> <span class="nv">Firstrow</span> <span class="p">:=</span> <span class="nv">Corner</span> <span class="kp">hitch</span> <span class="nv">Columnlabel</span>
<span class="o">--&gt;</span><span class="p">[</span><span class="nv">stepv</span><span class="p">]</span> <span class="kp">TIMES</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="gr">?..</span>   <span class="err">%</span> <span class="kp">Hitch</span> <span class="nv">the</span> <span class="nv">row</span> <span class="nv">labels</span> <span class="nv">to</span> <span class="nv">the</span> <span class="kp">rows</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">table</span>
<span class="o">--&gt;</span><span class="p">[</span><span class="nv">stepv</span><span class="p">]</span> <span class="nv">resume</span>
<span class="kp">TIMES</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
    <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
    <span class="mi">2</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span>
    <span class="mi">3</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">9</span>
</code></pre></div></div>

<p>To clear all breaks use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">breakin</span> <span class="kp">Breaklist</span>
</code></pre></div></div>

<h2 id="bycols">bycols</h2>

<ul>
  <li>Class:<br />
<a href="#apply-by-partition-transformer">apply-by-partition transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">BYCOLS</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#rank">rank</a>, <a href="#partition">partition</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">BYCOLS</span></code> applies an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the columns of a
table <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, where <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is an operation that maps lists to lists.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setformat</span> <span class="s1">'%5.3f'</span><span class="p">;</span>
     <span class="nb">BYCOLS</span> <span class="p">(</span><span class="nb">SORT</span> <span class="o">&lt;=</span><span class="p">)</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="kp">reshape</span> <span class="kp">random</span> <span class="mi">30</span><span class="p">)</span>
<span class="mf">0.726</span> <span class="mf">0.009</span> <span class="mf">0.210</span> <span class="mf">0.385</span> <span class="mf">0.123</span> <span class="mf">0.119</span>
<span class="mf">0.851</span> <span class="mf">0.448</span> <span class="mf">0.384</span> <span class="mf">0.476</span> <span class="mf">0.193</span> <span class="mf">0.384</span>
<span class="mf">0.880</span> <span class="mf">0.449</span> <span class="mf">0.536</span> <span class="mf">0.603</span> <span class="mf">0.455</span> <span class="mf">0.498</span>
<span class="mf">0.882</span> <span class="mf">0.729</span> <span class="mf">0.631</span> <span class="mf">0.819</span> <span class="mf">0.639</span> <span class="mf">0.521</span>
<span class="mf">0.911</span> <span class="mf">0.893</span> <span class="mf">0.810</span> <span class="mf">0.961</span> <span class="mf">0.940</span> <span class="mf">0.672</span>
</code></pre></div></div>

<p>The example generates a random table and then sorts each
column.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">BYCOLS</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">transpose</span> <span class="p">(</span><span class="mi">1</span> <span class="nb">RANK</span> <span class="nv">f</span> <span class="kp">transpose</span> <span class="nv">A</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="nb">BYCOLS</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="bykey">bykey</h2>

<ul>
  <li>Class:<br />
<a href="#applicative-transformer">applicative transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">K</span> <span class="nb">BYKEY</span> <span class="nv">f</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nb">BYKEY</span> <span class="nv">f</span> <span class="nv">K</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">BYKEY</span></code> applies an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to lists gathered from
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, where each list is made up of items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> that have the same value
in the corresponding position in <code class="language-nial highlighter-rouge"><span class="nv">K</span></code>. The result is a list with as many
items as there are unique items in <code class="language-nial highlighter-rouge"><span class="nv">K</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Str</span> <span class="p">:=</span> <span class="s1">'a stitch in time saves nine'</span><span class="p">;</span>

     <span class="kp">cull</span> <span class="nv">Str</span>
<span class="nv">a</span> <span class="nv">stichnmev</span>

     <span class="nv">Str</span> <span class="nb">BYKEY</span> <span class="kp">tally</span> <span class="nv">Str</span>
<span class="mi">2</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">1</span>

     <span class="nv">Keys</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">7</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">;</span>
     <span class="nv">Data</span> <span class="p">:=</span> <span class="mf">23.1</span> <span class="mf">14.2</span> <span class="mf">13.5</span> <span class="mf">18.9</span> <span class="mf">22.</span> <span class="mf">98.</span> <span class="mf">3.5</span> <span class="mf">28.7</span> <span class="mf">19.3</span> <span class="mf">16.5</span> <span class="mf">43.2</span><span class="p">;</span>

     <span class="nv">Keys</span> <span class="nb">BYKEY</span> <span class="kp">sum</span> <span class="nv">Data</span>
<span class="mf">53.1</span> <span class="mf">112.2</span> <span class="mf">18.9</span> <span class="mf">50.7</span> <span class="mf">46.7</span> <span class="mf">19.3</span>

     <span class="nv">average</span> <span class="k">IS</span> <span class="k">OP</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">sum</span> <span class="nv">A</span> <span class="o">/</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="p">}</span>

     <span class="nv">Keys</span> <span class="nb">BYKEY</span> <span class="nv">average</span> <span class="nv">Data</span>
<span class="mf">17.7</span> <span class="mf">56.1</span> <span class="mf">18.9</span> <span class="mf">25.35</span> <span class="mf">23.35</span> <span class="mf">19.3</span>
</code></pre></div></div>

<p>In the first example <code class="language-nial highlighter-rouge"><span class="nb">BYKEY</span> <span class="kp">tally</span></code> is used to count the frequency of the
letters in the string <code class="language-nial highlighter-rouge"><span class="nv">Str</span></code>, giving the counts in the order of <code class="language-nial highlighter-rouge"><span class="kp">cull</span>
<span class="nv">Str</span></code>. In the remaining examples, the values in <code class="language-nial highlighter-rouge"><span class="nv">Data</span></code> corresponding to
equal items in <code class="language-nial highlighter-rouge"><span class="nv">Keys</span></code> are added and averaged in the two uses of <code class="language-nial highlighter-rouge"><span class="nb">BYKEY</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">BYKEY</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">K</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Keys</span> <span class="k">gets</span> <span class="kp">cull</span> <span class="nv">A</span><span class="p">;</span>
        <span class="k">IF</span> <span class="kp">simple</span> <span class="nv">Keys</span> <span class="k">THEN</span>
           <span class="nv">Patterns</span> <span class="p">:=</span> <span class="nv">Keys</span> <span class="nb">EACHLEFT</span> <span class="kp">match</span> <span class="nv">A</span><span class="p">;</span>
        <span class="k">ELSE</span>
           <span class="nv">Patterns</span> <span class="p">:=</span> <span class="nv">Keys</span> <span class="nb">EACHLEFT</span> <span class="nb">EACHRIGHT</span> <span class="o">=</span> <span class="nv">A</span><span class="p">;</span>
        <span class="k">ENDIF</span><span class="p">;</span>
        <span class="nb">EACH</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">Patterns</span> <span class="nb">EACHLEFT</span> <span class="kp">sublist</span> <span class="nv">B</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="nb">BYKEY</span> <span class="nv">f</span> <span class="nv">K</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">tally</span> <span class="kp">cull</span> <span class="nv">K</span>
   <span class="kp">valence</span> <span class="nb">BYKEY</span> <span class="nv">f</span> <span class="nv">K</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<h2 id="byrows">byrows</h2>

<ul>
  <li>Class:<br />
<a href="#apply-by-partition-transformer">apply-by-partition transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">BYROWS</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#bycols">bycols</a>, <a href="#partition">partition</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">BYROWS</span></code> applies an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the rows of a table
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, where <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is an operation that maps lists to lists.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">BYROWS</span> <span class="kp">reverse</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">30</span><span class="p">)</span>
 <span class="mi">6</span>  <span class="mi">5</span>  <span class="mi">4</span>  <span class="mi">3</span>  <span class="mi">2</span>  <span class="mi">1</span>
<span class="mi">12</span> <span class="mi">11</span> <span class="mi">10</span>  <span class="mi">9</span>  <span class="mi">8</span>  <span class="mi">7</span>
<span class="mi">18</span> <span class="mi">17</span> <span class="mi">16</span> <span class="mi">15</span> <span class="mi">14</span> <span class="mi">13</span>
<span class="mi">24</span> <span class="mi">23</span> <span class="mi">22</span> <span class="mi">21</span> <span class="mi">20</span> <span class="mi">19</span>
<span class="mi">30</span> <span class="mi">29</span> <span class="mi">28</span> <span class="mi">27</span> <span class="mi">26</span> <span class="mi">25</span>
</code></pre></div></div>

<p>The example reverses the rows of the generated table.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">BYROWS</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="mi">1</span> <span class="nb">RANK</span> <span class="nv">f</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="nb">BYROWS</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="cart">cart</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">cart</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">cart</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#outer">outer</a>, <a href="#tell">tell</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cart</span></code> corresponds to the cartesian product of set theory.
Its purpose is to form all possible combinations of the items of its
argument and return them in a structured result having as many axes as
the sum of the number of axes of the items of argument.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">cart</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">5</span><span class="o">|</span><span class="mi">2</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">4</span> <span class="mi">5</span><span class="o">|</span><span class="mi">4</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+---+---+</span>
</code></pre></div></div>

<p>In the example above, the cart of a triple with a pair yields a table of
shape 3 2 of pairs.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cart</span> <span class="p">[</span><span class="s1">'abc'</span><span class="p">,</span> <span class="mi">4</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">8</span><span class="p">]</span>
<span class="o">+---+---+</span>  <span class="o">+---+---+</span>  <span class="o">+---+---+</span>
<span class="o">|</span><span class="nv">a</span> <span class="mi">1</span><span class="o">|</span><span class="nv">a</span> <span class="mi">2</span><span class="o">|</span>  <span class="o">|</span><span class="nv">b</span> <span class="mi">1</span><span class="o">|</span><span class="nv">b</span> <span class="mi">2</span><span class="o">|</span>  <span class="o">|</span><span class="nv">c</span> <span class="mi">1</span><span class="o">|</span><span class="nv">c</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+</span>  <span class="o">+---+---+</span>  <span class="o">+---+---+</span>
<span class="o">|</span><span class="nv">a</span> <span class="mi">3</span><span class="o">|</span><span class="nv">a</span> <span class="mi">4</span><span class="o">|</span>  <span class="o">|</span><span class="nv">b</span> <span class="mi">3</span><span class="o">|</span><span class="nv">b</span> <span class="mi">4</span><span class="o">|</span>  <span class="o">|</span><span class="nv">c</span> <span class="mi">3</span><span class="o">|</span><span class="nv">c</span> <span class="mi">4</span><span class="o">|</span>
<span class="o">+---+---+</span>  <span class="o">+---+---+</span>  <span class="o">+---+---+</span>
<span class="o">|</span><span class="nv">a</span> <span class="mi">5</span><span class="o">|</span><span class="nv">a</span> <span class="mi">6</span><span class="o">|</span>  <span class="o">|</span><span class="nv">b</span> <span class="mi">5</span><span class="o">|</span><span class="nv">b</span> <span class="mi">6</span><span class="o">|</span>  <span class="o">|</span><span class="nv">c</span> <span class="mi">5</span><span class="o">|</span><span class="nv">c</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+---+---+</span>  <span class="o">+---+---+</span>  <span class="o">+---+---+</span>
<span class="o">|</span><span class="nv">a</span> <span class="mi">7</span><span class="o">|</span><span class="nv">a</span> <span class="mi">8</span><span class="o">|</span>  <span class="o">|</span><span class="nv">b</span> <span class="mi">7</span><span class="o">|</span><span class="nv">b</span> <span class="mi">8</span><span class="o">|</span>  <span class="o">|</span><span class="nv">c</span> <span class="mi">7</span><span class="o">|</span><span class="nv">c</span> <span class="mi">8</span><span class="o">|</span>
<span class="o">+---+---+</span>  <span class="o">+---+---+</span>  <span class="o">+---+---+</span>
</code></pre></div></div>

<p>In the above example, the shape of the result is 3 4 2, getting an axis
of length 3 from the first item and axes of length 4 and 2 from the
second.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">valence</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sum</span> <span class="nb">EACH</span> <span class="kp">valence</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">product</span> <span class="nb">EACH</span> <span class="kp">tally</span> <span class="nv">A</span>
   <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">True</span>
   <span class="nv">A</span> <span class="nb">OUTER</span> <span class="kp">pair</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">cart</span> <span class="nv">B</span>
   <span class="kp">cart</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">link</span> <span class="kp">cart</span> <span class="nb">EACH</span> <span class="kp">cart</span> <span class="nv">A</span>
   <span class="kp">cart</span> <span class="nb">EACH</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">cart</span> <span class="nv">A</span>
   <span class="kp">cart</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">simple</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">cart</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kp">single</span> <span class="kc">Null</span>
   <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">or</span> <span class="nb">EACH</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">empty</span> <span class="kp">cart</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="kp">first</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">first</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">first</span> <span class="nv">A</span>
   <span class="nv">isshape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">tell</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cart</span> <span class="nb">EACH</span> <span class="kp">tell</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="catch">catch</h2>

<ul>
  <li>Class:<br />
<a href="#controlflow-transformer">control flow transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">CATCH</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#throw">throw</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nv">CATCH</span></code> is used to regain control when the called
argument function <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> applied to the argument <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> terminates its
computation early by the application of the control flow function
<code class="language-nial highlighter-rouge"><span class="nv">throw</span></code>, either directly by <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>, or by a function that is called during
the execution of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> executes without applying a <code class="language-nial highlighter-rouge"><span class="nv">throw</span></code> the result of <code class="language-nial highlighter-rouge"><span class="nv">CATCH</span> <span class="nv">f</span> <span class="nv">A</span></code> is
the value computed at the completion of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>. Otherwise it is the value
of the argument to <code class="language-nial highlighter-rouge"><span class="nv">throw</span></code> in the function that executes the throw.</p>

<p>The CATCH-throw mechanism was added in Version 7 of Q’Nial to provide a
dynamic mechanism for changing the flow of control when an exceptional
situation is encountered.</p>

<h2 id="catenate">catenate</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">catenate</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">catenate</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#link">link</a>, <a href="#laminate">laminate</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">catenate</span></code> joins the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> along axis <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>. The
items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> must conform in all other axes.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">1</span> <span class="kp">catenate</span> <span class="p">(</span><span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">2</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">+---+---+---+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">4</span><span class="o">|</span><span class="mi">1</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">2</span> <span class="mi">4</span><span class="o">|</span><span class="mi">2</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+---+---+---+</span>
</code></pre></div></div>

<p>The example joins two tables along the rows. Each table has two rows.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">catenate</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">I</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="cm">% "push down" I axis of items of A;</span>
        <span class="nv">B</span> <span class="p">:=</span> <span class="nb">EACH</span> <span class="p">(</span> <span class="nv">I</span> <span class="kp">split</span> <span class="p">)</span> <span class="nv">A</span> <span class="p">;</span>
        <span class="k">IF</span> <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">B</span> <span class="k">THEN</span>
           <span class="nv">I</span> <span class="kp">blend</span> <span class="nb">EACH</span> <span class="kp">link</span> <span class="kp">pack</span> <span class="nv">B</span>
        <span class="k">ELSE</span>
           <span class="kp">fault</span> <span class="s1">'?conform error in catenate'</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="ceiling">ceiling</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">ceiling</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#floor">floor</a>, <a href="#mod">mod</a>, <a href="#quotient">quotient</a></li>
</ul>

<p>The operation ceiling produces the following results when applied to
atoms of the six
types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>corresponding integer</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>argument</td>
    </tr>
    <tr>
      <td>real</td>
      <td>next higher integer or the fault ?A, if the result is outside the range of integers</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<p><strong>Examples</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">ceiling</span>  <span class="mb">l</span>  <span class="mi">-2</span>  <span class="mf">3.5</span>
<span class="mi">1</span> <span class="mi">-2</span> <span class="mi">4</span>
     <span class="kp">ceiling</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
 <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
     <span class="kp">ceiling</span>  <span class="mf">3.5</span>  <span class="mf">-4.6</span>  <span class="mf">7.0</span>  <span class="mf">25.3e20</span>
<span class="mi">4</span> <span class="mi">-4</span> <span class="mi">7</span> <span class="gr">?A</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">ceiling</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">opposite</span> <span class="kp">floor</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="char">char</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">char</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#charrep">charrep</a>, <a href="#ischar">ischar</a>, <a href="#isinteger">isinteger</a>,
<a href="#isstring">isstring</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">char</span></code> is used to convert an integer in the range 0 to 255
to the character that has the integer as its internal representation.
The result is system dependent.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">char</span> <span class="mi">66</span>
<span class="nv">B</span>
     <span class="kp">char</span> <span class="mi">66</span> <span class="mi">67</span> <span class="mi">68</span> <span class="mi">69</span>
<span class="nv">BCDE</span>
</code></pre></div></div>

<p>The major purpose of <code class="language-nial highlighter-rouge"><span class="kp">char</span></code> is to create special characters for a
specific system. For example, the characters that control cursor motion
differ from one terminal to another. Programs using <code class="language-nial highlighter-rouge"><span class="kp">char</span></code> may not be
portable.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">N</span> <span class="kp">in</span> <span class="kp">tell</span> <span class="mi">256</span> <span class="o">==&gt;</span> <span class="kp">charrep</span> <span class="kp">char</span> <span class="nv">N</span> <span class="o">=</span> <span class="nv">N</span>
   <span class="kp">ischar</span> <span class="nv">C</span> <span class="o">==&gt;</span> <span class="kp">char</span> <span class="kp">charrep</span> <span class="nv">C</span> <span class="o">=</span> <span class="nv">C</span>
</code></pre></div></div>

<h2 id="charrep">charrep</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">charrep</span> <span class="nv">C</span></code></li>
  <li>See Also:<br />
<a href="#char">char</a>, <a href="#isinteger">isinteger</a>, <a href="#ischar">ischar</a>,
<a href="#isstring">isstring</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">charrep</span></code> is used to convert a character to its internal
representation as an integer. This operation is system dependent.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">charrep</span> <span class="sc">`A</span>
<span class="mi">65</span>
     <span class="kp">charrep</span> <span class="s1">'hello'</span>
<span class="mi">104</span> <span class="mi">101</span> <span class="mi">108</span> <span class="mi">108</span> <span class="mi">111</span>
</code></pre></div></div>

<p>The major purpose of <code class="language-nial highlighter-rouge"><span class="kp">charrep</span></code> is to permit determination of special
characters for a specific system. For example, the characters that
control cursor motion differ from one terminal to another.</p>

<p>Programs using charrep may not be portable.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">N</span> <span class="kp">in</span> <span class="kp">tell</span> <span class="mi">256</span> <span class="o">==&gt;</span> <span class="kp">charrep</span> <span class="kp">char</span> <span class="nv">N</span> <span class="o">=</span> <span class="nv">N</span>
   <span class="kp">ischar</span> <span class="nv">C</span> <span class="o">==&gt;</span> <span class="kp">char</span> <span class="kp">charrep</span> <span class="nv">C</span> <span class="o">=</span> <span class="nv">C</span>
</code></pre></div></div>

<h2 id="choose">choose</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">choose</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#pick">pick</a>, <a href="#take">take</a>, <a href="#takeright">takeright</a>,
<a href="#reach">reach</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">choose</span></code> is used to select a subarray from array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
specified by the array of addresses <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>. The result is an array of the
same shape as <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> with items chosen from <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If an item of <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is not
an address of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the corresponding position in the result is the fault
<code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">choose</span></code> is related to the <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">all</span></code> notation <code class="language-nial highlighter-rouge"><span class="nv">V</span><span class="o">#</span><span class="nv">I</span></code>, which
selects items from the array associated with the variable <code class="language-nial highlighter-rouge"><span class="nv">V</span></code>. The
differences are that <code class="language-nial highlighter-rouge"><span class="kp">choose</span></code> may select from an array that has not been
assigned to a variable and that it handles out-of-range in a different
manner.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">choose</span> <span class="s1">'range'</span>
<span class="nv">garage</span>
</code></pre></div></div>

<p>The following example shows that the <code class="language-nial highlighter-rouge"><span class="kp">valence</span></code> of the array of addresses
can be higher than that of the array from which the selection is made.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">I</span> <span class="k">gets</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">tell</span> <span class="mi">8</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
     <span class="nv">I</span> <span class="kp">choose</span> <span class="s1">'some words as a string'</span>
<span class="nv">some</span>
 <span class="nv">wor</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">choose</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">I</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nv">I</span> <span class="nb">EACHLEFT</span> <span class="kp">pick</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">I</span>
   <span class="nv">J</span> <span class="kp">choose</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nv">J</span> <span class="kp">choose</span> <span class="nv">I</span><span class="p">)</span> <span class="kp">choose</span> <span class="nv">A</span>
   <span class="kp">tell</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="p">(</span><span class="kp">list</span> <span class="nv">I</span><span class="p">)</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">EACH</span> <span class="kp">list</span> <span class="nv">I</span><span class="p">)</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">allin</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">I</span> <span class="kp">choose</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="close">close</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">close</span> <span class="nv">Fd</span></code></li>
  <li>See Also:<br />
<a href="#open">open</a>, <a href="#filestatus">filestatus</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">close</span></code> is used to close a file previously opened with the
<code class="language-nial highlighter-rouge"><span class="kp">open</span></code> operation. The argument is the file designator, an integer
returned previously by <code class="language-nial highlighter-rouge"><span class="kp">open</span></code> for that file.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">close</span></code> is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code> or a fault message
indicating an error.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Fd</span> <span class="p">:=</span> <span class="kp">open</span> <span class="ss">"foo</span> <span class="ss">"w</span>
<span class="mi">3</span>
     <span class="kp">close</span> <span class="nv">Fd</span>
     <span class="kp">close</span> <span class="nv">Fd</span>
<span class="gr">?file</span> <span class="k">is</span> <span class="kp">not</span> <span class="kp">open</span>
</code></pre></div></div>

<p>In the examples above, the first use of <code class="language-nial highlighter-rouge"><span class="kp">close</span></code> was successful. The
second attempt to close the file resulted in the fault message.</p>

<h2 id="cols">cols</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">cols</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#rows">rows</a>, <a href="#split">split</a>, <a href="#raise">raise</a>, <a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cols</span></code> rearranges the axes of a table of shape <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>
to form a list of length <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> of the columns of length <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> of the table.
<code class="language-nial highlighter-rouge"><span class="kp">Cols</span></code> is generalized to arrays of all valences as follows: if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a
list or a single, the result is <code class="language-nial highlighter-rouge"><span class="kp">single</span> <span class="nv">A</span></code>; if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has valence three or
higher, the result is an array of valence one less than the valence of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with the second last axis pushed down.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">12</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>
<span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>
<span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>

     <span class="kp">cols</span> <span class="nv">A</span>
<span class="o">+-----+------+------+------+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span><span class="o">|</span><span class="mi">2</span> <span class="mi">6</span> <span class="mi">10</span><span class="o">|</span><span class="mi">3</span> <span class="mi">7</span> <span class="mi">11</span><span class="o">|</span><span class="mi">4</span> <span class="mi">8</span> <span class="mi">12</span><span class="o">|</span>
<span class="o">+-----+------+------+------+</span>
</code></pre></div></div>

<p>If only column <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> of a table is needed, it can be selected by <code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">pick</span>
<span class="kp">cols</span> <span class="nv">A</span></code> or by <code class="language-nial highlighter-rouge"><span class="nv">A</span><span class="o">|</span><span class="p">[,</span><span class="nv">I</span><span class="p">]</span></code> using the <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">slice</span></code> indexing notation. The
second way is more efficient for large arrays because it avoids
restructuring the array. If a table <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has no columns, <code class="language-nial highlighter-rouge"><span class="kp">cols</span> <span class="nv">A</span></code> results
in the empty list <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cols</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="kp">single</span> <span class="nv">A</span>
        <span class="k">ELSE</span>
           <span class="kp">valence</span> <span class="nv">A</span> <span class="o">-</span> <span class="mi">2</span> <span class="kp">max</span> <span class="mi">0</span> <span class="kp">split</span> <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">2</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">cols</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">pack</span> <span class="kp">rows</span> <span class="nv">A</span>
   <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">2</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">cols</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">rows</span> <span class="kp">transpose</span> <span class="nv">A</span>
   <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">2</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="kp">cols</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">transpose</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="content">content</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">content</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#link">link</a>, <a href="#list">list</a>, <a href="#in">in</a>, <a href="#solitary">solitary</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">content</span></code> returns the list of atoms of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The effect of
content is to remove all structure from an array, returning a list of
the atoms in a depth first, row-major order. The effect on an atom is to
produce the solitary of the atom.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="p">(</span><span class="mi">6</span> <span class="mi">7</span><span class="p">))</span>
<span class="o">+---+---------+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|+-+-+---+|</span>
<span class="o">|</span>   <span class="o">||</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span> <span class="mi">7</span><span class="o">||</span>
<span class="o">|</span>   <span class="o">|+-+-+---+|</span>
<span class="o">+---+---------+</span>

     <span class="kp">content</span> <span class="nv">A</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">content</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">atomic</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="kp">list</span> <span class="nv">A</span>
        <span class="k">ELSE</span>
           <span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">content</span> <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">content</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="kp">content</span> <span class="nv">A</span>
   <span class="kp">content</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">content</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">content</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">content</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="converse">converse</h2>

<ul>
  <li>Class:<br />
<a href="#applicative-transformer">applicative transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">CONVERSE</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nb">CONVERSE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#fold">fold</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">CONVERSE</span></code> is used with a binary operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> and
applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the pair formed by reversing the arguments of <code class="language-nial highlighter-rouge"><span class="nb">CONVERSE</span>
<span class="nv">f</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">at</span> <span class="k">IS</span> <span class="nb">CONVERSE</span> <span class="kp">pick</span>
     <span class="s1">'abcde'</span> <span class="nv">at</span> <span class="mi">2</span>
<span class="nv">c</span>

     <span class="nv">holds</span> <span class="k">IS</span> <span class="nb">CONVERSE</span> <span class="kp">in</span>
     <span class="kp">count</span> <span class="mi">20</span> <span class="nv">holds</span> <span class="mi">5</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>In the above examples, <code class="language-nial highlighter-rouge"><span class="nv">at</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">holds</span></code> are defined in terms of <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code>
and <code class="language-nial highlighter-rouge"><span class="kp">in</span></code>, respectively. The first example shows that <code class="language-nial highlighter-rouge"><span class="s1">'abcde'</span> <span class="nv">at</span> <span class="mi">2</span></code>
gives the result expected for <code class="language-nial highlighter-rouge"><span class="mi">2</span> <span class="kp">pick</span> <span class="s1">'abcde'</span></code>. The second example shows
that <code class="language-nial highlighter-rouge"><span class="kp">count</span> <span class="mi">20</span> <span class="nv">holds</span> <span class="mi">5</span></code> gives the same result as <code class="language-nial highlighter-rouge"><span class="mi">5</span> <span class="kp">in</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">20</span><span class="p">)</span></code>.
Thus, <code class="language-nial highlighter-rouge"><span class="nv">at</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">holds</span></code> do the same work as <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">in</span></code>; the former
operations simply use their arguments in the reverse order.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">CONVERSE</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">B</span> <span class="nv">f</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="nb">CONVERSE</span> <span class="nb">CONVERSE</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="nb">EACHRIGHT</span> <span class="nb">CONVERSE</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="cos">cos</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">cos</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sin">sin</a>, <a href="#cosh">cosh</a>, <a href="#pi">pi</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cos</span></code> implements the cosine function of mathematics. It
produces the following results when applied to atoms of the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>cosine of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>cosine of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>cosine of angle A given in radians</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?cos</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?cos</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cos</span>  <span class="mb">l</span>  <span class="mi">-1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">0.54030</span> <span class="mf">0.54030</span> <span class="mf">0.87758</span> <span class="gr">?cos</span> <span class="gr">?cos</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">cos</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cos</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="cosh">cosh</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">cosh</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sinh">sinh</a>, <a href="#cos">cos</a>, <a href="#pi">pi</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cosh</span></code> implements the hyperbolic cosine function of
mathematics. It produces the following results when applied to atoms of
the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>hyperbolic cosine of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>hyperbolic cosine of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>hyperbolic cosine of angle A given in radians</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?cosh</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?cosh</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cosh</span>  <span class="mb">l</span>  <span class="mi">-1</span>  <span class="mf">0.5</span>
<span class="mf">1.54308</span> <span class="mf">1.54308</span> <span class="mf">1.12763</span>

     <span class="kp">cosh</span> <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="gr">?cosh</span> <span class="gr">?cosh</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">cosh</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cosh</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="count">count</h2>

<ul>
  <li>Class:<br />
<a href="#array-generation-operation">array generation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">count</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#tell">tell</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">count</span></code> generates a list of integers starting at 1 and
going up to and including <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. It differs from <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> by counting from 1
instead of from 0.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">count</span> <span class="mi">5</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>

     <span class="o">.</span><span class="mi">1</span> <span class="kp">times</span> <span class="kp">count</span> <span class="mi">5</span>
<span class="mf">0.1</span> <span class="mf">0.2</span> <span class="mf">0.3</span> <span class="mf">0.4</span> <span class="mf">0.5</span>
</code></pre></div></div>

<p>The first example shows <code class="language-nial highlighter-rouge"><span class="kp">count</span></code> generating the sequence of integers from
1 to 5. The second example shows how <code class="language-nial highlighter-rouge"><span class="kp">count</span></code> can be used to generate a
sequence of five real numbers with an interval of .1 between each
number.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">count</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
</code></pre></div></div>

<p>The third example shows how <code class="language-nial highlighter-rouge"><span class="kp">count</span></code> generalizes to other arguments in
the same manner as the operation <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">count</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="mi">1</span> <span class="o">+</span> <span class="kp">tell</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">isshape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="kp">count</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">isshape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">count</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cart</span> <span class="nb">EACH</span> <span class="kp">count</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="cull">cull</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">cull</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#except">except</a>, <a href="#diverse">diverse</a>, <a href="#bykey">bykey</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cull</span></code> returns a list whose items are those of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with
duplicates removed. The order of the items is maintained.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cull</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="mi">3</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">2</span>

     <span class="kp">cull</span> <span class="s1">'a few letters with duplicates'</span>
<span class="nv">a</span> <span class="nv">fewltrsihdupc</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cull</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">grid</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="kp">in</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="kp">find</span> <span class="nv">A</span><span class="p">)</span> <span class="kp">sublist</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">cull</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="kp">cull</span> <span class="nv">A</span>
   <span class="kp">diverse</span> <span class="nv">A</span> <span class="o">&lt;==&gt;</span> <span class="kp">cull</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">sortup</span> <span class="kp">cull</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cull</span> <span class="kp">sortup</span> <span class="nv">A</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cull</span></code> executes faster when a large array has been sorted,
hence if the ordering of the result is unimportant it is better to use
<code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> to order the array prior to applying <code class="language-nial highlighter-rouge"><span class="kp">cull</span></code>.</p>

<h2 id="cut">cut</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">B</span> <span class="kp">cut</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">cut</span> <span class="nv">B</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#cutall">cutall</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cut</span></code> converts an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> into a list of items formed
from the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> according to the bitstring <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The list of items
is divided where true values occur in the corresponding positions in the
bitstring <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> where the divisions occur are not
included in the items of the result and any empty segments are not
included.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="s1">'The boy stood   on the burning deck'</span> <span class="p">;</span>
     <span class="sc">` </span> <span class="kp">match</span> <span class="nv">A</span> <span class="kp">cut</span> <span class="nv">A</span>
<span class="o">+---+---+-----+--+---+-------+----+</span>
<span class="o">|</span><span class="nv">The</span><span class="o">|</span><span class="nv">boy</span><span class="o">|</span><span class="nv">stood</span><span class="o">|</span><span class="nv">on</span><span class="o">|</span><span class="nv">the</span><span class="o">|</span><span class="nv">burning</span><span class="o">|</span><span class="nv">deck</span><span class="o">|</span>
<span class="o">+---+---+-----+--+---+-------+----+</span>

     <span class="nv">B</span> <span class="p">:=</span> <span class="s1">'Formula 1: 3,5,7,,,9'</span><span class="p">;</span>

     <span class="sc">`,</span> <span class="kp">match</span> <span class="nv">B</span> <span class="kp">cut</span> <span class="nv">B</span>
<span class="o">+------------+-+-+-+</span>
<span class="o">|</span><span class="nv">Formula</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span><span class="mi">9</span><span class="o">|</span>
<span class="o">+------------+-+-+-+</span>

     <span class="nb">EACH</span> <span class="kp">equal</span> <span class="kp">tell</span> <span class="mi">4</span> <span class="mi">4</span> <span class="kp">cut</span> <span class="kp">tell</span> <span class="mi">4</span> <span class="mi">4</span>
<span class="o">+-----------------+-----------------+-----------------+</span>
<span class="o">|+---+---+---+---+|+---+---+---+---+|+---+---+---+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span><span class="mi">2</span> <span class="mi">0</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">3</span> <span class="mi">0</span><span class="o">|</span><span class="mi">3</span> <span class="mi">1</span><span class="o">|</span><span class="mi">3</span> <span class="mi">2</span><span class="o">||</span>
<span class="o">|+---+---+---+---+|+---+---+---+---+|+---+---+---+---+|</span>
<span class="o">+-----------------+-----------------+-----------------+</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kp">Cut</span></code> can be used to cut a string into a list of substrings. In the
first example, the string is cut at blank characters. Several adjacent
blanks are treated as one blank character. In the second example, the
cut is done where commas occur. The third example shows that the items
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> do not have to be atoms.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">cut</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">B</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">C</span> <span class="p">:=</span> <span class="nb">EACH</span> <span class="kp">rest</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span><span class="p">);</span>
        <span class="kp">not</span> <span class="nb">EACH</span> <span class="kp">empty</span> <span class="nv">C</span> <span class="kp">sublist</span> <span class="nv">C</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">B</span> <span class="kp">cut</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">(</span><span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">cut</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">cut</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">cut</span> <span class="nv">A</span>
   <span class="nv">B</span> <span class="kp">cut</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">cut</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="cutall">cutall</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">cutall</span> <span class="nv">B</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#cut">cut</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">cutall</span></code> converts an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> into a list of items formed
from the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> according to the bitstring <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The list of items
is divided where true values occur in the corresponding positions in the
bitstring <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The items where the divisions occur are kept as the first
item of each group.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="s1">'The boy stood on the deck'</span> <span class="p">;</span>
     <span class="sc">` </span> <span class="kp">match</span> <span class="nv">A</span> <span class="kp">cutall</span> <span class="nv">A</span>
<span class="o">+---+----+------+---+----+-----+</span>
<span class="o">|</span><span class="nv">The</span><span class="o">|</span> <span class="nv">boy</span><span class="o">|</span> <span class="nv">stood</span><span class="o">|</span> <span class="nv">on</span><span class="o">|</span> <span class="nv">the</span><span class="o">|</span> <span class="nv">deck</span><span class="o">|</span>
<span class="o">+---+----+------+---+----+-----+</span>

     <span class="nv">B</span> <span class="p">:=</span> <span class="s1">'Formula 1: 3,5,7,,,9'</span><span class="p">;</span>
     <span class="sc">`,</span> <span class="kp">match</span> <span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">B</span>
<span class="o">+------------+--+--+-+-+--+</span>
<span class="o">|</span><span class="nv">Formula</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="o">|</span><span class="p">,</span><span class="mi">5</span><span class="o">|</span><span class="p">,</span><span class="mi">7</span><span class="o">|</span><span class="p">,</span><span class="o">|</span><span class="p">,</span><span class="o">|</span><span class="p">,</span><span class="mi">9</span><span class="o">|</span>
<span class="o">+------------+--+--+-+-+--+</span>

     <span class="nb">EACH</span> <span class="kp">equal</span> <span class="kp">tell</span> <span class="mi">4</span> <span class="mi">4</span> <span class="kp">cutall</span> <span class="kp">tell</span> <span class="mi">4</span> <span class="mi">4</span>
<span class="o">+---------------------+---------------------+---------------------+-----+</span>
<span class="o">|+---+---+---+---+---+|+---+---+---+---+---+|+---+---+---+---+---+|+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span><span class="mi">2</span> <span class="mi">0</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">3</span> <span class="mi">0</span><span class="o">|</span><span class="mi">3</span> <span class="mi">1</span><span class="o">|</span><span class="mi">3</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">3</span> <span class="mi">3</span><span class="o">||</span>
<span class="o">|+---+---+---+---+---+|+---+---+---+---+---+|+---+---+---+---+---+|+---+|</span>
<span class="o">+---------------------+---------------------+---------------------+-----+</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">sum</span> <span class="p">(</span><span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">(</span><span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">cutall</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span>
   <span class="nv">B</span> <span class="kp">cutall</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">cutall</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="deepplace">deepplace</h2>

<ul>
  <li>Class:<br />
<a href="#insertion-operation">insertion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">B</span> <span class="nv">P</span> <span class="kp">deepplace</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">deepplace</span> <span class="p">(</span><span class="nv">B</span> <span class="nv">P</span><span class="p">)</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#place">place</a>, <a href="#placeall">placeall</a>, <a href="#deepupdate">deepupdate</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">deepplace</span></code> returns an array the same as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> except that
the array at path <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> is replaced by <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. It is the insertion operation
corresponding to the selection operation <code class="language-nial highlighter-rouge"><span class="kp">reach</span></code> and generalizes the
operation <code class="language-nial highlighter-rouge"><span class="kp">place</span></code> from addresses to paths.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A1</span> <span class="p">:=</span> <span class="mi">1</span> <span class="mi">2</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="p">(</span><span class="mi">7</span> <span class="p">(</span><span class="mi">8</span> <span class="mi">9</span><span class="p">))))</span>
<span class="o">+-+-+-------------------+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|+-+-+-------------+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|+-+-+-------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span><span class="o">|+-+---+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">7</span><span class="o">|</span><span class="mi">8</span> <span class="mi">9</span><span class="o">||||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+---+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+-+-------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+-------------+|</span>
<span class="o">+-+-+-------------------+</span>
     <span class="nv">A1</span> <span class="p">:=</span> <span class="ss">"M</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">0</span><span class="p">)</span> <span class="kp">deepplace</span> <span class="nv">A1</span>
<span class="o">+-+-+-------------------+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|+-+-+-------------+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|+-+-+-------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span><span class="o">|+-+---+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="nv">M</span><span class="o">|</span><span class="mi">8</span> <span class="mi">9</span><span class="o">||||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+---+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+-+-------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+-------------+|</span>
<span class="o">+-+-+-------------------+</span>
</code></pre></div></div>

<p>The array 7 is replaced with <code class="language-nial highlighter-rouge"><span class="nv">M</span></code>. Since the result of the insertion is
assigned to variable A1, the insertion of M is retained.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">deepplace</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">C</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">B</span> <span class="nv">Path</span> <span class="p">:=</span> <span class="nv">C</span> <span class="p">;</span>
        <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">Path</span> <span class="k">THEN</span>
           <span class="nv">B</span>
        <span class="k">ELSE</span>
           <span class="nv">I</span> <span class="p">:=</span> <span class="kp">first</span> <span class="nv">Path</span> <span class="p">;</span>
           <span class="p">((</span><span class="nv">B</span> <span class="p">(</span><span class="kp">rest</span> <span class="nv">Path</span><span class="p">))</span> <span class="kp">deepplace</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span><span class="p">))</span> <span class="nv">I</span> <span class="kp">place</span> <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">Path</span> <span class="nv">a</span> <span class="nv">valid</span> <span class="nv">path</span> <span class="nv">into</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="p">(</span> <span class="nv">Path</span> <span class="kp">reach</span> <span class="nv">A</span> <span class="p">)</span> <span class="nv">Path</span> <span class="kp">deepplace</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">B</span> <span class="kc">Null</span> <span class="kp">deepplace</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span><span class="p">,</span> <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">B</span> <span class="err">\</span><span class="p">[</span><span class="nv">I</span><span class="p">]</span> <span class="kp">deepplace</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span> <span class="nv">I</span> <span class="kp">place</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="deepupdate">deepupdate</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">deepupdate</span> <span class="nv">Nm</span> <span class="nv">P</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#update">update</a>, <a href="#updateall">updateall</a>, <a href="#deepplace">deepplace</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">deepupdate</span></code> provides the semantics of the <code class="language-nial highlighter-rouge"><span class="nv">Nm</span><span class="o">@@</span><span class="nv">P</span> <span class="p">:=</span> <span class="nv">A</span></code>
form of assignment expression. <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> must be an existing variable
represented by a string, phrase or a cast; <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> is the path of addresses
to the location to be updated; and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the array to be placed in the
variable.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Array1</span> <span class="p">:=</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="p">(</span><span class="mi">7</span> <span class="p">(</span><span class="mi">8</span> <span class="mi">9</span><span class="p">)))))</span>
<span class="o">+-+-+-------------------+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|+-+-+-------------+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|+-+-+-------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span><span class="o">|+-+---+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">7</span><span class="o">|</span><span class="mi">8</span> <span class="mi">9</span><span class="o">||||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+---+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+-+-------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+-------------+|</span>
<span class="o">+-+-+-------------------+</span>

     <span class="kp">deepupdate</span> <span class="ss">"Array1</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">0</span><span class="p">)</span> <span class="ss">"Tom</span>
<span class="o">+-+-+---------------------+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|+-+-+---------------+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|+-+-+---------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span><span class="o">|+-+-----+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span><span class="mi">7</span><span class="o">|</span><span class="nv">Tom</span> <span class="mi">9</span><span class="o">||||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+-----+|||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|+-+-+---------+||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|+-+-+---------------+|</span>
<span class="o">+-+-+---------------------+</span>
</code></pre></div></div>

<p>The major purpose of <code class="language-nial highlighter-rouge"><span class="kp">deepupdate</span></code> is to allow a selective update with a
path on a global variable without forcing a copy. By passing the name of
the variable to the operation that is doing the update, rather than its
value, no sharing of the internal data is made and hence the update can
be made “in place”.</p>

<h2 id="deparse">deparse</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">deparse</span> <span class="nv">Pt</span></code></li>
  <li>See Also:<br />
<a href="#descan">descan</a>, <a href="#parse">parse</a>, <a href="#scan">scan</a>, <a href="#see">see</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> is used to convert a parse tree representation
of a Nial definition or program fragment into a token stream which can
be converted into text corresponding to the Nial definition. The
argument to <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> must be either a cast or the result of <code class="language-nial highlighter-rouge"><span class="kp">parse</span></code> or
<code class="language-nial highlighter-rouge"><span class="kp">getdef</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">deparse</span> <span class="o">!</span><span class="p">(</span><span class="kc">Pi</span> <span class="o">*</span> <span class="kp">cos</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="mi">99</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">2</span> <span class="kc">Pi</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="kp">cos</span> <span class="mi">18</span> <span class="mf">0.5</span> <span class="mi">1</span> <span class="p">)</span>
</code></pre></div></div>

<p>The principal use of <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> is in displaying Nial definitions. It is
used in the definition of <code class="language-nial highlighter-rouge"><span class="nv">defedit</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">see</span></code>.</p>

<p>The token stream returned by <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> also includes indicators to
identify where new lines are to begin and to control indentation. The
tokens corresponding to identifiers are given in the canonical form,
indicating what role each token plays.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> is implementation dependent and should be viewed
as an internal representation provided as an interface to editing. It is
subject to change as Q’Nial evolves.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">Pt</span> <span class="nv">a</span> <span class="kp">parse</span> <span class="nv">tree</span> <span class="o">==&gt;</span> <span class="kp">parse</span> <span class="kp">deparse</span> <span class="nv">Pt</span> <span class="o">=</span> <span class="nv">Pt</span>
   <span class="nv">Ts</span> <span class="nv">a</span> <span class="nv">token</span> <span class="nv">stream</span> <span class="o">==&gt;</span> <span class="kp">parse</span> <span class="kp">deparse</span> <span class="kp">parse</span> <span class="nv">Ts</span> <span class="o">=</span> <span class="kp">parse</span> <span class="nv">Ts</span>
</code></pre></div></div>

<h2 id="depth">depth</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tally</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tally">tally</a>, <a href="#down">down</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">depth</span></code> returns an integer indicating the number of levels
of nesting of the array. This is called the depth of the array. The
depth of an atom is 0. The depth of a simple nonempty is 1. In general,
the depth of an array is 1 plus the maximum of the depths of the items.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">depth</span> <span class="ss">"abc</span>
<span class="mi">0</span>
     <span class="kp">depth</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">1</span>
     <span class="kp">depth</span> <span class="mi">1</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span>
<span class="mi">2</span>
     <span class="kp">depth</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="mi">8</span><span class="p">],</span><span class="mi">24</span><span class="p">]</span>
<span class="mi">3</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">depth</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span>
     <span class="p">{</span><span class="err">­</span> <span class="k">IF</span> <span class="kp">atomic</span> <span class="nv">A</span> <span class="k">THEN</span>
          <span class="mi">0</span>
       <span class="k">ELSE</span>
          <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="kp">max</span> <span class="nb">EACH</span> <span class="kp">depth</span> <span class="nv">A</span><span class="p">)</span>
       <span class="k">ENDIF</span>
     <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">depth</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kp">max</span> <span class="kc">Null</span>
   <span class="kp">tally</span> <span class="kp">depth</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">1</span>
   <span class="kp">depth</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">FORK</span> <span class="p">[</span><span class="kp">atomic</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">first</span><span class="p">,</span> <span class="mi">1</span> <span class="kp">plus</span> <span class="kp">max</span> <span class="nb">EACH</span> <span class="kp">depth</span><span class="p">]</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="descan">descan</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">descan</span> <span class="nv">Ts</span></code></li>
  <li>See Also:<br />
<a href="#scan">scan</a>, <a href="#deparse">deparse</a>, <a href="#see">see</a>,
<a href="#canonical">canonical</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">descan</span></code> converts a token stream to a list of strings that
represents the program fragment given by the token stream. The input to
<code class="language-nial highlighter-rouge"><span class="kp">descan</span></code> must be a token stream produced by <code class="language-nial highlighter-rouge"><span class="kp">scan</span></code> or <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> or an
equivalent list of tokens.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">descan</span> <span class="kp">scan</span> <span class="s1">'A + 32'</span>
<span class="o">+-------+</span>
<span class="o">|</span><span class="nv">A</span> <span class="o">+</span> <span class="mi">32</span> <span class="o">|</span>
<span class="o">+-------+</span>

     <span class="kp">descan</span> <span class="kp">deparse</span> <span class="o">!</span><span class="p">(</span><span class="kc">Pi</span> <span class="o">*</span> <span class="kp">cos</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="o">+-----------------+</span>
<span class="o">|</span><span class="p">(</span> <span class="kc">Pi</span> <span class="o">*</span> <span class="kp">cos</span> <span class="mf">0.5</span> <span class="p">)</span> <span class="o">|</span>
<span class="o">+-----------------+</span>
</code></pre></div></div>

<p>The principal use of <code class="language-nial highlighter-rouge"><span class="kp">descan</span></code> is in displaying Nial definitions. It is
used to define <code class="language-nial highlighter-rouge"><span class="nv">defedit</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">see</span></code>. The argument to <code class="language-nial highlighter-rouge"><span class="kp">descan</span></code> may also
include tokens indicating the beginning of new lines and controlling
indentation used to display a structured definition.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="nv">of</span> <span class="nv">Nial</span> <span class="nv">text</span> <span class="o">==&gt;</span> <span class="kp">scan</span> <span class="kp">link</span> <span class="kp">descan</span> <span class="kp">scan</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">scan</span> <span class="nv">S</span>
   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="nv">of</span> <span class="nv">Nial</span> <span class="nv">text</span> <span class="o">==&gt;</span> <span class="nv">canonical</span> <span class="nv">canonical</span> <span class="nv">S</span> <span class="o">=</span> <span class="nv">canonical</span> <span class="nv">S</span>
   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="nv">of</span> <span class="nv">Nial</span> <span class="nv">text</span> <span class="o">==&gt;</span> <span class="kp">execute</span> <span class="nv">canonical</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">execute</span> <span class="nv">S</span>
</code></pre></div></div>

<h2 id="diagram">diagram</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">diagram</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#display">display</a>, <a href="#paste">paste</a>, <a href="#picture">picture</a>,
<a href="#positions">positions</a>, <a href="#sketch">sketch</a>, <a href="#set">set</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">diagram</span></code> computes a character table that gives the fully
boxed picture of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with the decoration of the atoms determined by the
current setting of the decor switch. An array is displayed as a frame
with cells for each item. It is arranged in two dimensions, using
groupings of table frames to picture arrays of higher dimension. Each
cell is large enough to hold the diagram of the corresponding item of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>The diagram of an atom is a picture that indicates its value. The
diagram of a non-atomic single has an “o” in its upper left corner.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Diagram</span></code> returns the display given by the operation <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> when in
diagram mode of display.</p>

<p>The decor or nodecor mode switch controls the display of atoms. With
decor set, it gives a picture that distinguishes all atoms.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"decor</span><span class="p">;</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">diagram</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="mi">3</span> <span class="s1">'abc'</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">1</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">3</span><span class="p">)</span> <span class="ss">"apple</span> <span class="mf">8.5</span>
          <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">));</span>
     <span class="kp">set</span> <span class="ss">"nodecor</span><span class="p">;</span> <span class="nv">A</span>
<span class="o">+---+----------+</span>  <span class="o">+---+----------+</span>
<span class="o">|</span>  <span class="mi">3</span><span class="o">|+--+--+--+|</span>  <span class="o">|</span>  <span class="mi">3</span><span class="o">|+--+--+--+|</span>
<span class="o">|</span>   <span class="o">||</span><span class="sc">`a</span><span class="o">|</span><span class="sc">`b</span><span class="o">|</span><span class="sc">`c</span><span class="o">||</span>  <span class="o">|</span>   <span class="o">||</span><span class="sc">`a</span><span class="o">|</span><span class="sc">`b</span><span class="o">|</span><span class="sc">`c</span><span class="o">||</span>
<span class="o">|</span>   <span class="o">|+--+--+--+|</span>  <span class="o">|</span>   <span class="o">|+--+--+--+|</span>
<span class="o">+---+----------+</span>  <span class="o">+---+----------+</span>
<span class="o">|+-+|</span><span class="ss">"apple</span>    <span class="o">|</span>  <span class="o">|+-+|</span><span class="ss">"apple</span>    <span class="o">|</span>
<span class="o">||</span><span class="mi">1</span><span class="o">||</span>          <span class="o">|</span>  <span class="o">||</span><span class="mi">1</span><span class="o">||</span>          <span class="o">|</span>
<span class="o">|+-+|</span>          <span class="o">|</span>  <span class="o">|+-+|</span>          <span class="o">|</span>
<span class="o">||</span><span class="mi">2</span><span class="o">||</span>          <span class="o">|</span>  <span class="o">||</span><span class="mi">2</span><span class="o">||</span>          <span class="o">|</span>
<span class="o">|+-+|</span>          <span class="o">|</span>  <span class="o">|+-+|</span>          <span class="o">|</span>
<span class="o">+---+----------+</span>  <span class="o">+---+----------+</span>
<span class="o">|</span><span class="mf">8.5</span><span class="o">|+-+-+</span>     <span class="o">|</span>  <span class="o">|</span><span class="mf">8.5</span><span class="o">|+-+-+</span>     <span class="o">|</span>
<span class="o">|</span>   <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span>     <span class="o">|</span>  <span class="o">|</span>   <span class="o">||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span>     <span class="o">|</span>
<span class="o">|</span>   <span class="o">|+-+-+</span>     <span class="o">|</span>  <span class="o">|</span>   <span class="o">|+-+-+</span>     <span class="o">|</span>
<span class="o">+---+----------+</span>  <span class="o">+---+----------+</span>
</code></pre></div></div>

<p>The display of the result of a <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> operation, such as <code class="language-nial highlighter-rouge"><span class="kp">diagram</span></code>,
makes sense when it itself is pictured in sketch-nodecor mode. In other
modes, the characters making up the table would be boxed and/or
decorated.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">diagram</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Old_setting</span> <span class="p">:=</span> <span class="kp">set</span> <span class="ss">"diagram</span> <span class="p">;</span>
        <span class="nv">Result</span> <span class="p">:=</span> <span class="kp">picture</span> <span class="nv">A</span> <span class="p">;</span>
        <span class="kp">set</span> <span class="nv">Old_setting</span> <span class="p">;</span>
        <span class="nv">Result</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="display">display</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">display</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#picture">picture</a>, <a href="#execute">execute</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">display</span></code> returns a string which, when executed, returns
the value <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"decor</span><span class="p">;</span> <span class="kp">display</span> <span class="mf">23.5</span>
<span class="s1">'23.5'</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kp">Display</span></code> inserts the operation to construct values that cannot be
described directly by constants. In the example below, since the phrase
containing a blank character cannot be specified simply using the phrase
mark, display inserts the operation <code class="language-nial highlighter-rouge"><span class="kp">phrase</span></code> and the string that will
create the desired phrase <code class="language-nial highlighter-rouge"><span class="nv">An</span> <span class="nv">answer</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">display</span> <span class="ss">"Nm</span> <span class="p">(</span><span class="kp">phrase</span> <span class="s1">'An answer'</span><span class="p">)</span> <span class="s1">'Nm'</span>
<span class="s1">'["Nm,(phrase '</span><span class="nv">An</span> <span class="nv">answer</span><span class="s1">'),'</span><span class="nv">Nm</span><span class="s1">']'</span>

     <span class="nv">X</span> <span class="p">:=</span> <span class="ss">"Name</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="s1">'Queen</span><span class="se">''</span><span class="s1">s'</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">6</span><span class="p">))</span>
<span class="o">+-----+-----------------------+</span>
<span class="o">|</span><span class="ss">"Name|+-+-+---+---------+---+|</span>
<span class="o">|</span>     <span class="o">||</span><span class="mi">2</span><span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span><span class="o">|</span><span class="s1">'Queen'</span><span class="nv">s</span><span class="s1">'|1 2||
|     || | |   |         |3 4||
|     || | |   |         |5 6||
|     |+-+-+---+---------+---+|
+-----+-----------------------+

     display X
'</span><span class="p">[</span><span class="ss">"Name</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span> <span class="mi">5</span><span class="p">,</span><span class="s1">'Queen</span><span class="se">''</span><span class="s1">s'</span><span class="p">,</span><span class="mi">3</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]]</span><span class="s1">'

     execute display X = X
l
</span></code></pre></div></div>

<p>In the definition of <code class="language-nial highlighter-rouge"><span class="nv">X</span></code>, strand notation was used. In the display of
<code class="language-nial highlighter-rouge"><span class="nv">X</span></code>, brackets notation is created to represent <code class="language-nial highlighter-rouge"><span class="nv">X</span></code>. The display is seen
to be correct by the last example that shows that the <code class="language-nial highlighter-rouge"><span class="kp">execute</span></code> of the
<code class="language-nial highlighter-rouge"><span class="kp">display</span></code> of <code class="language-nial highlighter-rouge"><span class="nv">X</span></code> is <code class="language-nial highlighter-rouge"><span class="nv">X</span></code>.</p>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">execute</span> <span class="kp">display</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="diverse">diverse</h2>

<ul>
  <li>Class:<br />
<a href="#logic-operation">logic operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">diverse</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#equal">equal</a>, <a href="#in">in</a>, <a href="#cull">cull</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">diverse</span></code> tests whether or not the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are all
different. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if they are and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if they are not.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">diverse</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span>
<span class="mb">l</span>

     <span class="kp">diverse</span> <span class="s1">'hello world'</span>
<span class="mb">o</span>

     <span class="kp">diverse</span> <span class="mi">2</span> <span class="mi">3</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>In the last example, the items are all different because the last item
is a pair of items (2 3) which is not the same as 2 or 3.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">diverse</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">cull</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">diverse</span></code> executes faster when a large array has been
sorted, hence it is better to use <code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> to order a large array prior
to applying <code class="language-nial highlighter-rouge"><span class="kp">diverse</span></code>.</p>

<h2 id="divide">divide</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">divide</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">/</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">div</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">divide</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#product">product</a>, <a href="#quotient">quotient</a>, <a href="#mod">mod</a>,
<a href="#reciprocal">reciprocal</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">divide</span></code> returns the result of dividing two numeric atoms.
It coerces the type of the atoms to be real and gives a real number
result. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a numeric zero, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?div</span></code>.</p>

<p>If one argument is numeric and the other is a fault or if both arguments
are the same fault, the answer is the fault. In all other cases when one
or more of the arguments is not numeric, the result is the arithmetic
fault <code class="language-nial highlighter-rouge"><span class="gr">?A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>

     <span class="nv">R</span> <span class="nb">outer</span> <span class="kp">divide</span> <span class="nv">R</span>
    <span class="mf">1.</span>    <span class="mf">0.5</span>    <span class="mf">0.4</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
    <span class="mf">2.</span>     <span class="mf">1.</span>    <span class="mf">0.8</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
   <span class="mf">2.5</span>   <span class="mf">1.25</span>     <span class="mf">1.</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
<span class="gr">?A</span>     <span class="gr">?A</span>     <span class="gr">?A</span>     <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?A</span>
<span class="gr">?A</span>     <span class="gr">?A</span>     <span class="gr">?A</span>     <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?A</span>
<span class="gr">?error</span> <span class="gr">?error</span> <span class="gr">?error</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
</code></pre></div></div>

<p>The above example illustrates all combinations of atom types for the two
arguments to <code class="language-nial highlighter-rouge"><span class="kp">divide</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="mf">1.0</span> <span class="kp">divide</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reciprocal</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="kp">divide</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">times</span> <span class="kp">reciprocal</span> <span class="nv">B</span> <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="down">down</h2>

<ul>
  <li>Class:<br />
<a href="#recursion-transformer">recursion transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">DOWN</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">structf</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">]</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#recur">recur</a>, <a href="#across">across</a></li>
</ul>

<p>DOWN is a general transformer that recurs over the depth of an array to
some arbitrary level. DOWN has four operation arguments: <code class="language-nial highlighter-rouge"><span class="nv">test</span></code> tests
when the recursion has gone as deep as necessary, <code class="language-nial highlighter-rouge"><span class="nv">endf</span></code> is applied to
the argument that satisfies <code class="language-nial highlighter-rouge"><span class="nv">test</span></code>, <code class="language-nial highlighter-rouge"><span class="nv">structf</span></code> rearranges the argument
before recurring on each item, and <code class="language-nial highlighter-rouge"><span class="nv">joinf</span></code> combines the results of the
recursion on the items.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">DOWN</span> <span class="p">[</span> <span class="kp">atomic</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">minus</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">pass</span><span class="p">]</span>  <span class="mi">3</span> <span class="mi">-4</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">+--+-+-----+</span>
<span class="o">|</span><span class="mi">-3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">-5</span> <span class="mi">-6</span><span class="o">|</span>
<span class="o">+--+-+-----+</span>
     <span class="nb">DOWN</span> <span class="p">[</span> <span class="kp">simple</span><span class="p">,</span> <span class="nv">dosum</span><span class="p">,</span> <span class="kp">pack</span><span class="p">,</span> <span class="kp">pass</span> <span class="p">]</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">18</span>
     <span class="nb">DOWN</span> <span class="p">[</span> <span class="kp">atomic</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="mi">1</span> <span class="kp">plus</span> <span class="kp">max</span> <span class="p">]</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="mi">8</span><span class="p">],</span><span class="mi">24</span><span class="p">]</span>
<span class="mi">3</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">DOWN</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">test</span> <span class="nv">endf</span> <span class="nv">structf</span> <span class="nv">joinf</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
   <span class="nv">Candidates</span> <span class="p">:=</span> <span class="p">[</span><span class="nv">A</span><span class="p">];</span>
   <span class="nv">Results</span> <span class="p">:=</span> <span class="kc">Null</span><span class="p">;</span>
   <span class="k">WHILE</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">Candidates</span> <span class="k">DO</span>
     <span class="nv">Candidates</span> <span class="nv">B</span> <span class="p">:=</span> <span class="p">[</span><span class="kp">front</span><span class="p">,</span> <span class="kp">last</span><span class="p">]</span> <span class="nv">Candidates</span><span class="p">;</span>
     <span class="k">IF</span> <span class="nv">B</span> <span class="o">=</span> <span class="ss">"Start</span> <span class="k">THEN</span>
        <span class="nv">Candidates</span> <span class="nv">Shp</span> <span class="p">:=</span> <span class="p">[</span><span class="kp">front</span><span class="p">,</span> <span class="kp">last</span><span class="p">]</span> <span class="nv">Candidates</span><span class="p">;</span>
        <span class="nv">N</span> <span class="p">:=</span> <span class="kp">prod</span> <span class="nv">Shp</span><span class="p">;</span>
        <span class="k">IF</span> <span class="nv">N</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="nv">N</span> <span class="p">:=</span> <span class="nv">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="k">ENDIF</span><span class="p">;</span>
        <span class="nv">Results</span> <span class="nv">Items</span> <span class="p">:=</span> <span class="kp">opposite</span> <span class="nv">N</span> <span class="p">[</span><span class="kp">drop</span><span class="p">,</span> <span class="kp">take</span><span class="p">]</span> <span class="nv">Results</span><span class="p">;</span>
        <span class="nv">Results</span> <span class="p">:=</span> <span class="nv">Results</span> <span class="kp">append</span> <span class="nv">joinf</span> <span class="p">(</span><span class="nv">Shp</span> <span class="kp">reshape</span> <span class="nv">Items</span><span class="p">);</span>
     <span class="k">ELSEIF</span> <span class="nv">test</span> <span class="nv">B</span> <span class="k">THEN</span>
        <span class="nv">Results</span> <span class="p">:=</span> <span class="nv">results</span> <span class="kp">append</span> <span class="nv">endf</span> <span class="nv">B</span><span class="p">;</span>
     <span class="k">ELSE</span>
        <span class="nv">B</span> <span class="p">:=</span> <span class="nv">structf</span> <span class="nv">B</span><span class="p">;</span>
        <span class="nv">Candidates</span> <span class="p">:=</span> <span class="nv">Candidates</span> <span class="kp">link</span> <span class="p">[</span><span class="kp">shape</span> <span class="nv">B</span><span class="p">,</span> <span class="ss">"Start</span><span class="p">]</span> <span class="kp">link</span> <span class="kp">reverse</span> <span class="kp">list</span> <span class="nv">B</span><span class="p">;</span>
       <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">B</span> <span class="k">THEN</span> <span class="nv">Candidates</span> <span class="p">:=</span> <span class="nv">Candidates</span> <span class="kp">append</span> <span class="kp">first</span> <span class="nv">B</span><span class="p">;</span> <span class="k">ENDIF</span><span class="p">;</span>
<span class="k">ENDIF</span><span class="p">;</span>
   <span class="k">ENDWHILE</span><span class="p">;</span>
   <span class="kp">first</span> <span class="nv">Results</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">DOWN</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">structf</span><span class="p">,</span> <span class="nv">joinf</span> <span class="p">]</span> <span class="nv">A</span>
        <span class="o">=</span> <span class="nb">FORK</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">joinf</span> <span class="nb">EACH</span> <span class="nb">DOWN</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">structf</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">]</span> <span class="nv">structf</span> <span class="p">]</span> <span class="nv">A</span>
   <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">DOWN</span> <span class="p">[</span> <span class="kp">atomic</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">minus</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">pass</span><span class="p">]</span> <span class="nv">A</span>
   <span class="kp">sum</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">DOWN</span> <span class="p">[</span> <span class="kp">simple</span><span class="p">,</span> <span class="nv">dosum</span><span class="p">,</span> <span class="kp">pack</span><span class="p">,</span> <span class="kp">pass</span> <span class="p">]</span> <span class="nv">A</span>
   <span class="kp">depth</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">DOWN</span> <span class="p">[</span> <span class="kp">atomic</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">minus</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">pass</span><span class="p">]</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="drop">drop</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">drop</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">drop</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#take">take</a>, <a href="#rest">rest</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">drop</span></code> selects the items of an array after a specified
number of items have been dropped. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a list and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a
non-negative integer, the result is the list formed from dropping <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
items from the front of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a negative integer, the result is
formed by dropping <code class="language-nial highlighter-rouge"><span class="kp">abs</span> <span class="nv">A</span></code> items from the right end of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a table and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a pair of non-negative integers, the result
is lower right corner of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> that remains after dropping the number of
rows and columns indicated by <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> from the upper left corner of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If
one or both items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are negative, the dropping occurs from the
other end of the extent of the corresponding axis.</p>

<p>For a higher dimensional array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, tally A must equal <code class="language-nial highlighter-rouge"><span class="kp">valence</span> <span class="nv">B</span></code>; and
the result is obtained by dropping from the front or back of the extents
along each axis. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a single and <code class="language-nial highlighter-rouge"><span class="kp">product</span> <span class="nv">A</span></code> is zero, the result
is <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>; otherwise the result is an empty array with valence of tally
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="kp">drop</span> <span class="ss">"Able</span> <span class="ss">"Baker</span> <span class="ss">"Charlie</span> <span class="ss">"Dog</span>
<span class="nv">Charlie</span> <span class="nv">Dog</span>

     <span class="nv">T1</span> <span class="p">:=</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>

     <span class="mi">1</span> <span class="mi">2</span> <span class="kp">drop</span> <span class="nv">T1</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+</span>

     <span class="mi">1</span> <span class="mi">-2</span> <span class="kp">drop</span> <span class="nv">T1</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">drop</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">not</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">isinteger</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="kp">fault</span> <span class="s1">'?left arg of drop must be integers'</span>
        <span class="k">ELSEIF</span> <span class="kp">valence</span> <span class="nv">B</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span>
           <span class="k">IF</span> <span class="kp">product</span> <span class="nv">A</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">THEN</span>
              <span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="mi">0</span><span class="p">)</span> <span class="kp">reshape</span> <span class="nv">B</span>
           <span class="k">ELSE</span>
              <span class="nv">B</span>
           <span class="k">ENDIF</span>
        <span class="k">ELSEIF</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="o">~=</span> <span class="kp">valence</span> <span class="nv">B</span> <span class="k">THEN</span>
           <span class="kp">fault</span> <span class="s1">'?valence error in drop'</span>
        <span class="k">ELSE</span>
           <span class="p">((</span><span class="nv">A</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">-1</span> <span class="o">*</span> <span class="p">(</span><span class="nv">A</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="kp">shape</span> <span class="nv">B</span> <span class="o">-</span> <span class="kp">abs</span> <span class="nv">A</span> <span class="kp">max</span> <span class="mi">0</span><span class="p">)</span> <span class="kp">take</span> <span class="nv">B</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="mi">0</span> <span class="kp">times</span> <span class="kp">shape</span> <span class="nv">B</span> <span class="kp">drop</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span>
   <span class="kp">tally</span> <span class="nv">B</span> <span class="kp">drop</span> <span class="kp">list</span> <span class="nv">B</span> <span class="o">=</span> <span class="kc">Null</span>
</code></pre></div></div>

<h2 id="dropright">dropright</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">dropright</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">dropright</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#drop">drop</a>, <a href="#takeright">takeright</a>, <a href="#front">front</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">dropright</span></code> is an obsolete operation that drops items from
the ends of extents. It is provided to retain compatibility with earlier
versions of Q’Nial.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">dropright</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="kp">drop</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="each">each</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#eachall">eachall</a>, <a href="#eachboth">eachboth</a>, <a href="#eachleft">eachleft</a>,
<a href="#eachright">eachright</a>, <a href="#iterate">iterate</a>, <a href="#unary-pervasive">unary
pervasive</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> forms an operation, called the <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> transform
of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>, that applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to every item of the argument <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The shape of
the result of the application of <code class="language-nial highlighter-rouge"><span class="nb">EACH</span> <span class="nv">f</span></code> to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the same shape as
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">reverse</span> <span class="p">(</span><span class="s1">'abc'</span> <span class="s1">'def'</span> <span class="s1">'ghi'</span><span class="p">)</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="nv">cba</span><span class="o">|</span><span class="nv">fed</span><span class="o">|</span><span class="nv">ihg</span><span class="o">|</span>
<span class="o">+---+---+---+</span>

     <span class="nb">EACH</span> <span class="kp">first</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> is used to distribute an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> across an entire array
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. Its use avoids the need to explicitly allocate space for the result
and to write an explicit loop to apply <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to each item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
individually.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">EACH</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">EACH</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="p">(</span><span class="nv">f</span> <span class="kp">first</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">rest</span> <span class="nv">A</span><span class="p">)</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nv">isshape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">B</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nb">EACH</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cart</span> <span class="nb">EACH</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="eachall">eachall</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">EACHALL</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#eachboth">eachboth</a>, <a href="#eachleft">eachleft</a>,
<a href="#eachright">eachright</a>, <a href="#pack">pack</a>, <a href="#multi-pervasive">multi
pervasive</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">EACHALL</span></code> forms an operation which applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to arrays
formed by selecting the items of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in corresponding
positions, assuming that the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are all of the same shape.</p>

<p>When the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are not all the same shape, <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is examined to see
if all the items with tally greater than one have the same shape. If so,
all the items of tally 1 are replicated to that shape. If not, the fault
<code class="language-nial highlighter-rouge"><span class="gr">?conform</span></code> is returned. <code class="language-nial highlighter-rouge"><span class="nb">EACHALL</span></code> is implicitly applied in multi
pervasive operations.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">9</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="p">(</span><span class="mi">5</span><span class="o">+</span><span class="kp">tell</span> <span class="mi">16</span><span class="p">))</span>
<span class="o">+-+-+-----------+</span>
<span class="o">|</span><span class="mi">9</span><span class="o">|</span><span class="mi">2</span><span class="o">|</span> <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span><span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span><span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span><span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span><span class="o">|</span>
<span class="o">+-+-+-----------+</span>
     <span class="kp">pack</span> <span class="nv">A</span>
<span class="o">+------+------+------+------+</span>
<span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">5</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">6</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">7</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">8</span> <span class="o">|</span>
<span class="o">+------+------+------+------+</span>
<span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">9</span> <span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">10</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">11</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">12</span><span class="o">|</span>
<span class="o">+------+------+------+------+</span>
<span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">13</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">14</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">15</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">16</span><span class="o">|</span>
<span class="o">+------+------+------+------+</span>
<span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">17</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">18</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">19</span><span class="o">|</span><span class="mi">9</span> <span class="mi">2</span> <span class="mi">20</span><span class="o">|</span>
<span class="o">+------+------+------+------+</span>

     <span class="p">(</span><span class="nb">EACH</span> <span class="kp">sum</span><span class="p">)</span> <span class="kp">pack</span> <span class="nv">A</span>
<span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>
<span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span>
<span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span>
<span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span> <span class="mi">31</span>

     <span class="nb">EACHALL</span> <span class="kp">sum</span> <span class="nv">A</span>
<span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>
<span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span>
<span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span>
<span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span> <span class="mi">31</span>

     <span class="kp">sum</span> <span class="nv">A</span>
<span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>
<span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span>
<span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span>
<span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span> <span class="mi">31</span>
</code></pre></div></div>

<p>The example shows that <code class="language-nial highlighter-rouge"><span class="nb">EACHALL</span></code> is defined in terms of <code class="language-nial highlighter-rouge"><span class="kp">pack</span></code> and is
implicitly used in the multi pervasive operation <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACHALL</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">EACHALL</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="kp">pack</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nb">EACHALL</span> <span class="nv">f</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="kp">pack</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="eachboth">eachboth</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#eachall">eachall</a>, <a href="#eachleft">eachleft</a>,
<a href="#eachright">eachright</a>, <a href="#pack">pack</a>, <a href="#binary-pervasive">binary
pervasive</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">EACHBOTH</span></code> forms an operation which applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to pairs
formed by selecting the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> in corresponding positions,
assuming that <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> have the same shape.</p>

<p>When <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> do not have the same shape, if either <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> or <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> has
only one item, that item is replicated to the shape of the other
argument; otherwise, the fault <code class="language-nial highlighter-rouge"><span class="gr">?conform</span></code> is returned.</p>

<p><code class="language-nial highlighter-rouge"><span class="nb">EACHBOTH</span></code> is used implicitly in all binary pervasive operations.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">7</span> <span class="mi">2</span> <span class="mi">1</span> <span class="nb">EACHBOTH</span> <span class="kp">post</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">3</span>
<span class="o">+-+-+-+</span>
<span class="o">|</span><span class="mi">7</span><span class="o">|</span><span class="mi">2</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span>
<span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">3</span><span class="o">|</span>
<span class="o">+-+-+-+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACHBOTH</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nb">EACHALL</span> <span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">pack</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">pack</span> <span class="nv">B</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="eachleft">eachleft</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#eachall">eachall</a>, <a href="#eachboth">eachboth</a>,
<a href="#eachright">eachright</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">EACHLEFT</span></code> forms an operation which applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to pairs
formed by pairing the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The shape of the result is
the shape of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="nb">EACHLEFT</span> <span class="kp">reshape</span> <span class="mi">5</span>
<span class="o">+---+-----+-------+</span>
<span class="o">|</span><span class="mi">5</span> <span class="mi">5</span><span class="o">|</span><span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span><span class="o">|</span><span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+---+-----+-------+</span>

     <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="s1">'abcdef'</span><span class="p">)</span> <span class="nb">EACHLEFT</span> <span class="kp">hitch</span> <span class="s1">'123'</span>
<span class="o">+----+----+----+</span>
<span class="o">|</span><span class="nv">a123</span><span class="o">|</span><span class="nv">b123</span><span class="o">|</span><span class="nv">c123</span><span class="o">|</span>
<span class="o">+----+----+----+</span>
<span class="o">|</span><span class="nv">d123</span><span class="o">|</span><span class="nv">e123</span><span class="o">|</span><span class="nv">f123</span><span class="o">|</span>
<span class="o">+----+----+----+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACHLEFT</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nb">EACH</span> <span class="p">(</span><span class="nv">B</span> <span class="nb">CONVERSE</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="p">(</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span><span class="p">)</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">B</span>
   <span class="kp">single</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">single</span> <span class="p">(</span><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
   <span class="kp">solitary</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="p">(</span><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
   <span class="kp">list</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">isshape</span> <span class="nv">S</span> <span class="o">==&gt;</span> <span class="p">(</span><span class="nv">S</span> <span class="kp">reshape</span> <span class="nv">A</span><span class="p">)</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">S</span> <span class="kp">reshape</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="eachright">eachright</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#eachleft">eachleft</a>, <a href="#eachall">eachall</a>,
<a href="#eachboth">eachboth</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">EACHRIGHT</span></code> forms an operation which applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to
pairs formed by pairing <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The shape of the
result is the shape of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="nb">EACHRIGHT</span> <span class="kp">reshape</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">4</span><span class="o">|</span><span class="mi">5</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+---+---+---+</span>

     <span class="sc">`X</span> <span class="nb">EACHRIGHT</span> <span class="kp">hitch</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="s1">'ab'</span> <span class="s1">'cd'</span><span class="p">)</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="nv">Xab</span><span class="o">|</span><span class="nv">Xcd</span><span class="o">|</span><span class="nv">Xab</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="nv">Xcd</span><span class="o">|</span><span class="nv">Xab</span><span class="o">|</span><span class="nv">Xcd</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACHRIGHT</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nb">EACH</span> <span class="p">(</span> <span class="nv">A</span> <span class="nv">f</span> <span class="p">)</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">A</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">B</span><span class="p">)</span>
   <span class="kp">shape</span> <span class="p">(</span> <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">single</span> <span class="p">(</span><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="kp">solitary</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="p">(</span><span class="nv">A</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="kp">list</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">list</span><span class="p">(</span><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">fB</span><span class="p">)</span>
   <span class="nv">isshape</span> <span class="nv">S</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">S</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">S</span> <span class="kp">reshape</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="edit">edit</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">edit</span> <span class="nv">Filename</span></code></li>
  <li>See Also:<br />
<a href="#host">host</a>, <a href="#loaddefs">loaddefs</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">edit</span></code> passes control to the standard editor, requesting
it to edit the file named by the string or phrase <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code>. The editor
used is determined by the environment variable <code class="language-nial highlighter-rouge"><span class="nv">EDITOR</span></code> or by a default
chosen for each version. When the editing task is completed, the editor
returns control to Q’Nial. The result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">edit</span> <span class="ss">"test.ndf</span>
     <span class="kp">edit</span> <span class="s1">'data_records'</span>
</code></pre></div></div>

<p>If <code class="language-nial highlighter-rouge"><span class="kp">edit</span></code> is used to edit a file of Nial definitions, the operation
<code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code> must be executed on return from the editor to load the
definitions.</p>

<h2 id="empty">empty</h2>

<ul>
  <li>Class:<br />
<a href="#structure-testing-operation">structure testing operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">empty</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#null">null</a>, <a href="#in">in</a>, <a href="#simple">simple</a>, <a href="#single">single</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">empty</span></code> tests whether or not an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has any items.
If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has no items, it returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>; otherwise, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>. The
predefined expression <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> is empty as is any array with a zero in its
shape.</p>

<p>Since there are empty arrays with more than one dimension, it is better
to test for an empty array by using <code class="language-nial highlighter-rouge"><span class="kp">empty</span></code> rather than by direct
comparison with <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">empty</span> <span class="kc">Null</span>
<span class="mb">l</span>

     <span class="kp">empty</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">3</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="mi">5</span><span class="p">)</span>
<span class="mb">l</span>

     <span class="kp">empty</span> <span class="kp">solitary</span> <span class="mi">5</span>
<span class="mb">o</span>

     <span class="kp">empty</span> <span class="kp">solitary</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The last two examples show that a solitary is not empty even if the item
it contains is empty.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">empty</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">empty</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">0</span> <span class="kp">in</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="equal">equal</h2>

<ul>
  <li>Class:<br />
<a href="#logic-operation">logic operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">equal</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">equal</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#unequal">unequal</a>, <a href="#match">match</a>, <a href="#mate">mate</a>, <a href="#gte">gte</a>,
<a href="#lte">lte</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">equal</span></code> is normally used to compare two arrays <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>
to see whether or not they are identical. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if they are
equal; <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise. (Two nonempty arrays are identical if they
have identical shapes and hold identical items at each location. Two
empty arrays are identical if they have identical shapes.) <code class="language-nial highlighter-rouge"><span class="kp">Empty</span></code> is
extended to arbitrary arrays by returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if all items of an
array are identical.</p>

<p>The symbol = is a synonym for equal and can be used in both infix and
prefix application. In the <code class="language-nial highlighter-rouge"><span class="nv">Equations</span></code> sections of the dictionary
entries, the symbol = is used to separate two sides of an equation. To
test such an equation, it may be necessary to replace the expression
following = with the same expression in parentheses in order to force
correct parsing of the equation as a Nial expression.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="mb">l</span>
     <span class="kc">Null</span> <span class="o">=</span> <span class="s1">''</span>
<span class="mb">l</span>
     <span class="mi">2</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">4</span>
<span class="mb">o</span>
     <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The first example shows that a triple formed using strand notation is
identical to that formed using brackets notation. The second shows that
<code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> is equal to the empty string. The third shows that grouping items
of a list in different ways creates different arrays. The last shows the
convenience of the more general form of <code class="language-nial highlighter-rouge"><span class="kp">equal</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">equal</span> <span class="nv">B</span> <span class="o">&lt;==&gt;</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="kp">equal</span> <span class="nv">B</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="erase">erase</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">erase</span> <span class="nv">Nm</span></code></li>
  <li>See Also:<br />
<a href="#symbols">symbols</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">erase</span></code> is used to remove unwanted global definitions and
variables from the workspace. The argument <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> must be a phrase or
string giving the object to be removed. Predefined names and names in
local scopes cannot be removed.</p>

<p>When a name has been erased, it remains in the symbol table with its
original role. It can be redefined in the same role or, if a variable,
reassigned a value by a subsequent action. A name cannot change its role
once established.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">average</span> <span class="k">IS</span> <span class="kp">divide</span><span class="p">[</span><span class="kp">sum</span><span class="p">,</span><span class="kp">tally</span><span class="p">];</span>
     <span class="nv">calc</span> <span class="k">IS</span> <span class="nb">EACH</span> <span class="nv">average</span><span class="p">;</span>
     <span class="nv">Var3</span> <span class="p">:=</span> <span class="nv">calc</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="mf">3.</span> <span class="mf">6.</span>

     <span class="nb">EACH</span> <span class="kp">erase</span> <span class="ss">"average</span> <span class="s1">'Var3'</span> <span class="ss">"sum</span>
<span class="gr">?noexpr</span> <span class="gr">?noexpr</span> <span class="gr">?system</span> <span class="nv">name</span>
</code></pre></div></div>

<p>In the example above, the operation <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code> cannot be erased as it is a
predefined operation. In the next three examples below, faults are
returned because of missing variables or operations that were erased.
The effect of erasing an object is not propagated to other definitions
referring to the erased name.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Var3</span>
<span class="gr">?no_value</span>

     <span class="nv">average</span> <span class="kp">count</span> <span class="mi">10</span>
<span class="gr">?missing_op</span>

     <span class="nv">calc</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="gr">?missing_op</span> <span class="gr">?missing_op</span>

     <span class="nv">average</span> <span class="p">:=</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
<span class="gr">?invalid</span> <span class="nv">assignment</span><span class="p">:</span> <span class="nv">AVERAGE</span> <span class="p">:=</span>  <span class="o">&lt;***&gt;</span> <span class="mi">5</span> <span class="mi">6</span>
</code></pre></div></div>

<p>In the last example, an attempt is made to redefine the role of
<code class="language-nial highlighter-rouge"><span class="nv">average</span></code> and Q’Nial indicated that <code class="language-nial highlighter-rouge"><span class="nv">average</span></code> is not a suitable name for
such an assignment.</p>

<h2 id="eraserecord">eraserecord</h2>

<ul>
  <li>Class:<br />
<a href="#nial-direct-access-file-operation">nial direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">eraserecord</span> <span class="nv">Filenum</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#readrecord">readrecord</a>, <a href="#writerecord">writerecord</a>,
<a href="#readarray">readarray</a>, <a href="#writearray">writearray</a>, <a href="#open">open</a>,
<a href="#close">close</a>, <a href="#filetally">filetally</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">eraserecord</span></code> is used to erase component <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> of direct
access file designated by the number <code class="language-nial highlighter-rouge"><span class="nv">Filenum</span></code>. In a file with record
components, <code class="language-nial highlighter-rouge"><span class="kp">eraserecord</span></code> replaces the erased component with an empty
string. In a file with array components, it replaces the erased
component with the fault <code class="language-nial highlighter-rouge"><span class="gr">?missing</span></code>.</p>

<p><code class="language-nial highlighter-rouge"><span class="nv">N</span></code> may be a single record number or a list of record numbers.</p>

<p>If the last component in a file is erased, any immediately preceding
components that are empty in a record component file or contain the
fault <code class="language-nial highlighter-rouge"><span class="gr">?missing</span></code> in an array component file are also removed. The file
tally, which records the number of records in the file, is adjusted
accordingly.</p>

<p>The operation returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code> or a fault indicating improper
use of the operation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">File_num</span> <span class="p">:=</span> <span class="kp">open</span> <span class="ss">"Names</span> <span class="ss">"d</span> <span class="p">;</span>
     <span class="kp">eraserecord</span> <span class="nv">File_num</span> <span class="mi">23</span> <span class="p">;</span>
</code></pre></div></div>

<h2 id="eval">eval</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">eval</span> <span class="nv">Pt</span></code></li>
  <li>See Also:<br />
<a href="#execute">execute</a>, <a href="#scan">scan</a>, <a href="#parse">parse</a>, <a href="#value">value</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">eval</span></code> provides access to the underlying expression
evaluator of Q’Nial. The argument to <code class="language-nial highlighter-rouge"><span class="kp">eval</span></code> must be a parse tree
returned by <code class="language-nial highlighter-rouge"><span class="kp">parse</span></code> or <code class="language-nial highlighter-rouge"><span class="kp">getdef</span></code>, a named expression or a cast which
represents a Nial expression. The effect is to evaluate the expression
and return the resulting value. As seen below, the parse tree can be one
formed by using the cast mechanism or one built explicitly using
<code class="language-nial highlighter-rouge"><span class="kp">parse</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">eval</span> <span class="kp">parse</span> <span class="kp">scan</span> <span class="s1">'23 + 45'</span>
<span class="mi">68</span>

     <span class="kp">eval</span> <span class="o">!</span><span class="p">(</span><span class="mi">23</span> <span class="o">+</span> <span class="mi">45</span><span class="p">)</span>
<span class="mi">68</span>
</code></pre></div></div>

<p>The next example shows that <code class="language-nial highlighter-rouge"><span class="kp">eval</span></code> can be used to evaluate a named
expression using either the cast or the phrase of its name.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">100</span> <span class="p">;</span>
     <span class="nv">Addone</span> <span class="k">IS</span> <span class="p">(</span><span class="nv">A</span> <span class="p">:=</span> <span class="nv">A</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
     <span class="p">(</span><span class="kp">eval</span> <span class="o">!</span><span class="nv">Addone</span><span class="p">)(</span><span class="kp">eval</span> <span class="ss">"Addone</span><span class="p">)</span>
<span class="mi">101</span> <span class="mi">102</span>

     <span class="p">(</span><span class="kp">eval</span> <span class="o">!</span><span class="nv">A</span><span class="p">)(</span><span class="kp">eval</span> <span class="ss">"A</span><span class="p">)(</span><span class="kp">value</span> <span class="ss">"A</span><span class="p">)</span>
<span class="mi">102</span> <span class="gr">?not</span> <span class="nv">an</span> <span class="kp">expression</span> <span class="mi">102</span>
</code></pre></div></div>

<p>The last example shows that <code class="language-nial highlighter-rouge"><span class="kp">eval</span></code> can be used to evaluate the cast of a
variable but not a phrase naming the variable. The operation <code class="language-nial highlighter-rouge"><span class="kp">value</span></code>
should be used
instead.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="nv">holding</span> <span class="nv">a</span> <span class="nv">Nial</span> <span class="kp">expression</span> <span class="o">==&gt;</span> <span class="kp">eval</span> <span class="kp">parse</span> <span class="kp">scan</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">execute</span> <span class="nv">S</span>
   <span class="nv">Pt</span> <span class="nv">a</span> <span class="kp">parse</span> <span class="nv">tree</span> <span class="o">==&gt;</span> <span class="kp">eval</span> <span class="kp">parse</span> <span class="kp">deparse</span> <span class="nv">Pt</span> <span class="o">=</span> <span class="kp">eval</span> <span class="nv">P</span>
</code></pre></div></div>

<h2 id="except">except</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">except</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">except</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#cull">cull</a>, <a href="#sublist">sublist</a>, <a href="#notin">notin</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">except</span></code> returns the list of items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> that are not in
<code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. It corresponds to set difference if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are viewed as set
representations. The result is a list with items in the same order as in
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">count</span> <span class="mi">10</span> <span class="kp">except</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span>

     <span class="s1">'a list of words'</span> <span class="kp">except</span> <span class="s1">'aeiou'</span>
 <span class="nv">lst</span> <span class="nv">f</span> <span class="nv">wrds</span>

     <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">except</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>

     <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">except</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>
<span class="o">+---+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+---+</span>
</code></pre></div></div>

<p>The last two examples show that if the left argument has nonatomic
items, to remove a single non-atomic array, the right argument must be
made into a solitary list. Otherwise the items of the right argument are
used.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">except</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="kp">notin</span> <span class="nv">B</span> <span class="kp">sublist</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">except</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">except</span> <span class="nv">B</span>
   <span class="kp">list</span> <span class="nv">A</span> <span class="kp">except</span> <span class="kp">list</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">except</span> <span class="nv">B</span>
   <span class="p">(</span><span class="nv">A</span> <span class="kp">except</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">except</span> <span class="nv">C</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">except</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">link</span> <span class="nv">C</span><span class="p">)</span>
   <span class="nv">A</span> <span class="kp">except</span> <span class="kp">cull</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">except</span> <span class="nv">B</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">except</span></code> uses an internal sort on its arguments to reduce
the algorithmic complexity of the above definition. It executes
considerably faster if its arguments have already been sorted.</p>

<h2 id="execute">execute</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">execute</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#eval">eval</a>, <a href="#parse">parse</a>, <a href="#scan">scan</a>,
<a href="#tonumber">tonumber</a>, <a href="#apply">apply</a>, <a href="#value">value</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">execute</span></code> evaluates a Nial expression given as a string
<code class="language-nial highlighter-rouge"><span class="nv">S</span></code>. The result of the evaluation is returned. The execution of the
string takes place in the environment where execute is applied.</p>

<p>If the string contains a name, the local meaning of that name will be
used if a local meaning exists. If execution of the string results in
the creation of a new variable or defined name, the new object is placed
in the global environment.</p>

<p>If a string being executed contains an integer representation that would
be converted to an integer outside the range for the computer, the
result is converted to the corresponding real number.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">execute</span> <span class="s1">'23 + 40045'</span>
<span class="mf">40068.</span>

     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">count</span> <span class="mi">5</span><span class="p">;</span> <span class="nv">opname</span> <span class="p">:=</span> <span class="s1">'product'</span><span class="p">;</span>
     <span class="kp">execute</span> <span class="kp">link</span> <span class="nv">opname</span> <span class="s1">' A'</span>
<span class="mi">120</span>
</code></pre></div></div>

<p>The last example shows that Nial program text can be constructed under
program control and then executed. This feature is useful in
applications where responses are generated by combining text elements
based on the user input and the current state of the computation. The
technique is useful for applications involving computer assisted
instruction and knowledge based systems.</p>

<p>It is more efficient to use <code class="language-nial highlighter-rouge"><span class="kp">eval</span></code> to evaluate the cast of an expression
than to use <code class="language-nial highlighter-rouge"><span class="kp">execute</span></code> to evaluate the corresponding string. In the
former approach the <code class="language-nial highlighter-rouge"><span class="kp">scan</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">parse</span></code> is done once, whereas in the
latter it is repeated on each execution.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">execute</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">eval</span> <span class="kp">parse</span> <span class="kp">scan</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">execute</span> <span class="kp">readscreen</span> <span class="nv">Prompt</span> <span class="o">=</span> <span class="kp">read</span> <span class="nv">Prompt</span>
   <span class="nv">Txt</span><span class="p">,</span> <span class="nv">a</span> <span class="nv">Nial</span> <span class="kp">expression</span> <span class="o">==&gt;</span> <span class="kp">eval</span> <span class="o">!</span><span class="p">(</span><span class="nv">Txt</span><span class="p">)</span> <span class="o">=</span> <span class="kp">execute</span> <span class="s1">'Txt'</span>
   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="nv">holding</span> <span class="nv">a</span> <span class="nv">Nial</span> <span class="kp">expression</span> <span class="o">==&gt;</span> <span class="kp">execute</span> <span class="nv">canonical</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">execute</span> <span class="nv">S</span>
</code></pre></div></div>

<p>where <code class="language-nial highlighter-rouge"><span class="nv">canonical</span> <span class="k">IS</span> <span class="kp">link</span> <span class="kp">descan</span> <span class="kp">deparse</span> <span class="kp">parse</span> <span class="kp">scan</span><span class="o">.</span></code></p>

<h3 id="exp">exp</h3>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">exp</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#ln">ln</a>, <a href="#power">power</a>, <a href="#log">log</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">exp</span></code> implements the exponential function of mathematics.
It produces the following results when applied to atoms of the six
types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>exponential of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>exponential of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>exponential of A</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?exp</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?exp</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">exp</span>  <span class="mb">o</span>  <span class="mi">1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">1.</span> <span class="mf">2.71828</span> <span class="mf">1.64872</span> <span class="gr">?exp</span> <span class="gr">?exp</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">exp</span> <span class="kp">ln</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
   <span class="kp">exp</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">exp</span> <span class="mf">1.0</span> <span class="kp">power</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="fault">fault</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">fault</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#isfault">isfault</a>, <a href="#phrase">phrase</a>,
<a href="#quiet-fault">quiet_fault</a>, <a href="#settrigger">settrigger</a>,
<a href="#string">string</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">fault</span></code> converts a string or phrase into the fault value
with the string as its message. If the argument is not a string, phrase
or a fault, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?type</span> <span class="nv">error</span></code>.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Fault</span></code> is used to construct faults that contain blanks or other
characters than cannot appear in a literal fault or ones constructed
from a message provided from the host system.</p>

<p>By default, fault triggering is on when the interpreter is initialized.
This causes the creation of a fault to interrupt the flow of execution.
The operation <code class="language-nial highlighter-rouge"><span class="kp">quiet_fault</span></code> can be used to create a fault value without
triggering an interrupt.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">settrigger</span> <span class="mb">o</span><span class="p">;</span>
     <span class="kp">fault</span> <span class="s1">'?missing data'</span>
<span class="gr">?missing</span> <span class="nv">data</span>

     <span class="kp">fault</span> <span class="ss">"Notastring</span>
<span class="nv">Notastring</span>

     <span class="kp">fault</span> <span class="mf">3.4</span>
<span class="gr">?type</span> <span class="nv">error</span>
</code></pre></div></div>

<p>The convention is that all faults generated by Q’Nial internally begin
with the character <code class="language-nial highlighter-rouge"><span class="gr">?</span></code>. The second example shows that this is not a
requirement.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">isfault</span> <span class="nv">F</span> <span class="o">==&gt;</span> <span class="kp">fault</span> <span class="kp">string</span> <span class="nv">F</span> <span class="o">=</span> <span class="nv">F</span>
   <span class="kp">isstring</span> <span class="nv">S</span> <span class="o">==&gt;</span> <span class="kp">string</span> <span class="kp">fault</span> <span class="nv">S</span> <span class="o">=</span> <span class="nv">S</span>
</code></pre></div></div>

<h2 id="filelength">filelength</h2>

<ul>
  <li>Class:<br />
<a href="#unix-direct-access-file-operation">host direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">filelength</span> <span class="nv">Filename</span></code></li>
  <li>See Also:<br />
<a href="#readfield">readfield</a>, <a href="#writefield">writefield</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">filelength</span></code> returns the length in bytes of the host file
named by string or phrase <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code>. It is used in conjunction with
<code class="language-nial highlighter-rouge"><span class="kp">readfield</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">writefield</span></code> in processing host files.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Len</span> <span class="p">:=</span> <span class="kp">filelength</span> <span class="ss">"Myfile</span><span class="p">;</span>
     <span class="nv">Data</span> <span class="p">:=</span> <span class="kp">readfield</span> <span class="ss">"Myfile</span> <span class="mi">0</span> <span class="nv">Len</span><span class="p">;</span>
</code></pre></div></div>

<p>In the example, <code class="language-nial highlighter-rouge"><span class="kp">filelength</span></code> is used to determine the size of the file
and <code class="language-nial highlighter-rouge"><span class="kp">readfield</span></code> is used to read it in as raw byte data. If the file
corresponds to a text file, the data will include end of line
indications appropriate for the host system.</p>

<h2 id="filetally">filetally</h2>

<ul>
  <li>Class:<br />
<a href="#nial-direct-access-file-operation">Nial direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">filetally</span> <span class="nv">Filenum</span></code></li>
  <li>See Also:<br />
<a href="#open">open</a>, <a href="#readarray">readarray</a>, <a href="#writearray">writearray</a>,
<a href="#filelength">filelength</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">filetally</span></code> returns the number of records in the file
designated by <code class="language-nial highlighter-rouge"><span class="nv">Filenum</span></code>, an integer returned by an earlier call to
<code class="language-nial highlighter-rouge"><span class="kp">open</span></code>. The filetally is one higher than the highest component number of
a record or array that is written but not erased.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Fn</span> <span class="p">:=</span> <span class="kp">open</span> <span class="ss">"newfile</span> <span class="sc">`d</span><span class="p">;</span>
     <span class="kp">writearray</span> <span class="nv">Fn</span> <span class="p">(</span><span class="mi">9</span> <span class="mi">99</span><span class="p">)</span> <span class="p">(</span><span class="s1">'The'</span> <span class="s1">'End'</span><span class="p">);</span>
     <span class="kp">filetally</span> <span class="nv">Fn</span>
<span class="mi">100</span>
</code></pre></div></div>

<h2 id="filter">filter</h2>

<ul>
  <li>Class:<br />
<a href="#selection-transformer">selection transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">FILTER</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#sublist">sublist</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">FILTER</span></code> is given a predicate operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> that is used
to select items from <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The result of applying <code class="language-nial highlighter-rouge"><span class="nb">FILTER</span> <span class="nv">f</span></code> is to
produce a list of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> that satisfy the predicate <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">FILTER</span> <span class="p">(</span><span class="mi">0</span><span class="o">&lt;</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">-2</span> <span class="mi">3</span> <span class="mi">-5</span><span class="p">)</span>
<span class="mi">4</span> <span class="mi">3</span>

     <span class="nb">FILTER</span> <span class="p">(</span><span class="kp">not</span> <span class="kp">isphrase</span><span class="p">)</span> <span class="p">(</span><span class="mi">37</span> <span class="mf">4.5</span> <span class="ss">"cat</span><span class="p">)</span>
<span class="mi">37</span> <span class="mf">4.5</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">FILTER</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="kp">sublist</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="nb">FILTER</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sum</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="find">find</h2>

<ul>
  <li>Class:<br />
<a href="#search-operation">search operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">find</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">find</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#findall">findall</a>, <a href="#seek">seek</a>, <a href="#in">in</a>, <a href="#gage">gage</a>,
<a href="#sortup">sortup</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">find</span></code> returns the address of the first occurrence of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
as an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, searching <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> in row major order. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> does not
occur in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the result is the <code class="language-nial highlighter-rouge"><span class="kp">gage</span></code> of <code class="language-nial highlighter-rouge"><span class="kp">shape</span> <span class="nv">B</span></code>. The result of
<code class="language-nial highlighter-rouge"><span class="kp">find</span></code> is an integer if <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a list; and a list of integers of tally
equal to <code class="language-nial highlighter-rouge"><span class="kp">valence</span> <span class="nv">B</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"diagram</span> <span class="p">;</span>
     <span class="mi">3</span> <span class="kp">find</span> <span class="mi">56</span> <span class="mi">34</span> <span class="mi">3</span> <span class="mi">23</span> <span class="mi">3</span> <span class="mi">57</span> <span class="mi">3</span>
<span class="mi">2</span>
</code></pre></div></div>

<p>The result of find is 2.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="sc">`a</span> <span class="kp">find</span> <span class="s1">'hello world'</span>
<span class="mi">11</span>

     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">find</span> <span class="kp">count</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="o">+-+-+</span>
<span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">2</span><span class="o">|</span>
<span class="o">+-+-+</span>
</code></pre></div></div>

<p>In the second example, the character a is not in the string ‘hello
world’ and the result is the tally of ‘hello world’. In the last
example, the result is a list of two integers because the valence of
count 3 4 is
2.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">find</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">gage</span> <span class="kp">first</span> <span class="p">(</span> <span class="nv">A</span> <span class="kp">findall</span> <span class="nv">B</span> <span class="kp">append</span> <span class="kp">shape</span> <span class="nv">B</span> <span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">seek</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="p">[</span><span class="kp">in</span><span class="p">,</span><span class="kp">find</span><span class="p">]</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">find</span> <span class="nv">B</span> <span class="kp">pick</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">diverse</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span> <span class="kp">find</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">I</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">find</span></code> uses a linear search on the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> if the
array has not been sorted, or uses a binary search algorithm if it has.
The latter fact suggests that an array that is searched frequently
should be kept in lexicographical order by applying <code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> to it when
it is created or changed.</p>

<h2 id="findall">findall</h2>

<ul>
  <li>Class:<br />
<a href="#search-operation">search operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">findall</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">findall</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#find">find</a>, <a href="#choose">choose</a>, <a href="#seek">seek</a>, <a href="#in">in</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">findall</span></code> returns a list of the addresses of all
occurrences of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, searching <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> in row major order.
If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> does not occur in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the result is the empty list <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">findall</span></code> is a list of integers if <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a list and a
list of pairs if <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a table.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">findall</span> <span class="mi">56</span> <span class="mi">34</span> <span class="mi">3</span> <span class="mi">23</span> <span class="mi">3</span> <span class="mi">57</span> <span class="mi">3</span>
<span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span>

     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="mi">1</span> <span class="mi">7</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">6</span> <span class="mi">3</span>
<span class="mi">1</span> <span class="mi">7</span> <span class="mi">3</span> <span class="mi">2</span>
<span class="mi">3</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span>
<span class="mi">6</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">7</span>

     <span class="mi">3</span> <span class="kp">findall</span> <span class="nv">X</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>

     <span class="sc">`a</span> <span class="kp">findall</span> <span class="s1">'hello world'</span>

     <span class="mi">1</span> <span class="mi">1</span> <span class="kp">findall</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="o">+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+</span>
</code></pre></div></div>

<p>In the first example <code class="language-nial highlighter-rouge"><span class="kp">findall</span></code> returns the list of integers where 3 is
found in the list; in the second a list of pairs is returned. The last
example shows that if only one occurrence is found the result is a
solitary list.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">findall</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="kp">equal</span> <span class="nv">B</span> <span class="kp">sublist</span> <span class="kp">grid</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="p">(</span><span class="kp">list</span> <span class="nv">A</span><span class="p">)</span> <span class="kp">findall</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">findall</span> <span class="nv">B</span>
   <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">findall</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">findall</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">find</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">first</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">findall</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">findall</span></code> uses a linear search on the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> if the
array has not been sorted, or uses a binary search algorithm if it has.
The latter fact suggests that an array that is searched frequently
should be kept in lexicographical order by applying <code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> to it when
it is created or changed.</p>

<h2 id="first">first</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">first</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#last">last</a>, <a href="#second">second</a>, <a href="#third">third</a>, <a href="#pick">pick</a>,
<a href="#take">take</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">first</span></code> returns the first of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is
empty, it returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">first</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">4</span>

     <span class="kp">first</span> <span class="kp">count</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>

     <span class="kp">first</span> <span class="kc">Null</span>
<span class="gr">?address</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">first</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="mi">0</span> <span class="kp">pick</span> <span class="kp">list</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">first</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">first</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">first</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">first</span> <span class="nv">A</span>
   <span class="kp">first</span> <span class="p">(</span><span class="nv">S</span> <span class="kp">reshape</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">first</span> <span class="nv">A</span>
   <span class="p">(</span><span class="kp">valence</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="mi">0</span><span class="p">)</span> <span class="kp">pick</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">first</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="flip">flip</h2>

<ul>
  <li>Class:<br />
<a href="#data-rearrangement-operation">data rearrangement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">flip</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#pack">pack</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">flip</span></code> is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">pack</span></code>. It has been retained for
compatibility with earlier versions.</p>

<h2 id="floor">floor</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">floor</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#ceiling">ceiling</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">floor</span></code> produces the following results when applied to
atoms of the six
types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>corresponding integer</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>argument A</td>
    </tr>
    <tr>
      <td>real</td>
      <td>next lower integer, or the fault ?A if the result is outside the range of integers</td>
    </tr>
    <tr>
      <td>char</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">floor</span>  <span class="mb">l</span>  <span class="mi">-2</span>  <span class="mf">3.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mi">1</span> <span class="mi">-2</span> <span class="mi">3</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>

     <span class="kp">floor</span>  <span class="mf">3.5</span>  <span class="mf">-4.6</span>  <span class="mf">7.0</span>  <span class="mf">25.3e20</span>
<span class="mi">3</span> <span class="mi">-5</span> <span class="mi">7</span> <span class="gr">?A</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">floor</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="kp">ceiling</span> <span class="kp">opposite</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="fold">fold</h2>

<ul>
  <li>Class:<br />
<a href="#applicative-transformer">applicative transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">N</span> <span class="nb">FOLD</span> <span class="nv">f</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nb">FOLD</span> <span class="nv">f</span> <span class="nv">N</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#iterate">iterate</a>, <a href="#each">each</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">FOLD</span></code> modifies an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to one that takes a
pair of arguments consisting of an integer <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> and an arbitrary array
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The result of applying <code class="language-nial highlighter-rouge"><span class="nv">N</span> <span class="nb">FOLD</span> <span class="nv">A</span></code> is to apply <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>, N times,
applying it first to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and subsequently to the result of the previous
application.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="nb">FOLD</span> <span class="kp">rest</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span>
<span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span>
     <span class="mi">2</span> <span class="nb">FOLD</span> <span class="kp">sum</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="mi">27</span>
     <span class="kp">sum</span> <span class="kp">sum</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="mi">27</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">FOLD</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">N</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="nv">N</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">THEN</span>
           <span class="nv">N</span> <span class="o">-</span> <span class="mi">1</span> <span class="nb">FOLD</span> <span class="nv">f</span> <span class="p">(</span> <span class="nv">f</span> <span class="nv">A</span> <span class="p">)</span>
        <span class="k">ELSE</span>
           <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="mi">0</span> <span class="nb">FOLD</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="mi">1</span> <span class="nb">FOLD</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="mi">2</span> <span class="nb">FOLD</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="fork">fork</h2>

<ul>
  <li>Class:<br />
<a href="#control-structure-transformer">control structure transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">FORK</span> <span class="p">[</span><span class="nv">f</span><span class="p">,</span><span class="nv">g</span><span class="p">,</span><span class="nv">h</span><span class="p">]</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nb">FORK</span> <span class="p">[</span><span class="nv">f</span><span class="p">,</span><span class="nv">g</span><span class="p">,</span><span class="nv">h</span><span class="p">,</span><span class="nv">i</span><span class="p">,</span><span class="nv">j</span><span class="p">,</span><span class="o">...</span><span class="nv">z</span><span class="p">]</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#iterate">iterate</a>, <a href="#if-expr">if-expr</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">FORK</span></code> implements a conditional functional mechanism
corresponding to the if-expression. The argument to <code class="language-nial highlighter-rouge"><span class="nb">FORK</span></code> must be an
atlas of length two or more. The operation in the first position is a
predicate. If there are exactly three items in the atlas, the first is a
predicate; the second is applied to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> if the predicate returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>;
and the third is applied to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> if the predicate returns <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>. That
is, if <code class="language-nial highlighter-rouge"><span class="nv">f</span> <span class="nv">A</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>, the result is <code class="language-nial highlighter-rouge"><span class="nv">g</span> <span class="nv">A</span></code>; otherwise it is <code class="language-nial highlighter-rouge"><span class="nv">h</span> <span class="nv">A</span></code>.</p>

<p>If there are more than three operations in the atlas, they are taken in
pairs from left to right. The first of each pair must be a predicate and
is applied to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in turn until a result is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>. The result of the
transform is the result of applying the second of that pair to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If
no application results in <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> and the number of operations in the
atlas is an odd number, the last operation is evaluated. Otherwise the
result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">FORK</span> <span class="p">[</span><span class="kp">atomic</span><span class="p">,</span> <span class="kp">opposite</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span><span class="p">]</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">-4</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">))</span>
<span class="o">+-+--+-----+</span>
<span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">-3</span><span class="o">|</span><span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span><span class="o">|</span>
<span class="o">+-+--+-----+</span>

     <span class="nb">FORK</span> <span class="p">[</span><span class="kp">isreal</span><span class="p">,</span><span class="kp">floor</span><span class="p">,</span><span class="kp">simple</span><span class="p">,</span><span class="kp">sum</span><span class="p">,</span><span class="mi">5</span><span class="o">+</span><span class="p">]</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span>
<span class="mi">12</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">FORK</span> <span class="p">[</span><span class="nv">A</span> <span class="kp">first</span><span class="p">,</span> <span class="nv">B</span> <span class="kp">first</span><span class="p">,</span> <span class="nv">C</span> <span class="kp">first</span><span class="p">,</span> <span class="nv">D</span> <span class="kp">first</span><span class="p">,</span> <span class="nv">E</span> <span class="kp">first</span><span class="p">]</span> <span class="kc">Null</span> <span class="o">=</span> <span class="k">IF</span> <span class="nv">A</span> <span class="k">THEN</span> <span class="nv">B</span> <span class="k">ELSEIF</span> <span class="nv">C</span> <span class="k">THEN</span> <span class="nv">D</span> <span class="k">ELSE</span> <span class="nv">E</span> <span class="k">ENDIF</span>
</code></pre></div></div>

<h2 id="fromraw">fromraw</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">fromraw</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#toraw">toraw</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">fromraw</span></code> converts the boolean array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> to a simple array
of the same type as atom <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">fromraw</span> <span class="sc">`a</span> <span class="mb">olloooololloooloolloooll</span>
<span class="nv">abc</span>

     <span class="kp">fromraw</span> <span class="mi">0</span> <span class="mb">ooooooooooooooooooooooololollool</span>
<span class="mi">345</span>

<span class="kp">fromraw</span> <span class="mf">0.0</span> <span class="mb">olooooooolooooololoooooooooooooooooooooooooooooooooooooooooooooo</span>
<span class="mf">34.5</span>

     <span class="kp">fromraw</span> <span class="mb">l</span> <span class="mb">lollo</span>
<span class="mb">lollo</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">simple</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">and</span> <span class="p">(</span><span class="kp">type</span> <span class="nv">A</span> <span class="kp">match</span> <span class="kp">type</span> <span class="kp">first</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">fromraw</span> <span class="p">(</span><span class="kp">toraw</span> <span class="nv">A</span><span class="p">)</span> <span class="p">(</span><span class="kp">first</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Fromraw</span></code> is used to convert raw bit data into atomic data that can be
manipulated by Nial. If the data was created from Nial data using
<code class="language-nial highlighter-rouge"><span class="kp">toraw</span></code> then it will work in a system independent way. However, if raw
byte data is obtained using <code class="language-nial highlighter-rouge"><span class="kp">readfile</span></code> and then converted using <code class="language-nial highlighter-rouge"><span class="kp">toraw</span></code>
the host system byte ordering may need to be allowed for.</p>

<h2 id="front">front</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">front</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#last">last</a>, <a href="#rest">rest</a>, <a href="#first">first</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">front</span></code> returns a list of all items but the last of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.
If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a solitary or is empty, the result is the empty list <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">front</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
     <span class="kp">front</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">front</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="o">-</span> <span class="mi">1</span> <span class="kp">max</span> <span class="mi">0</span> <span class="kp">reshape</span> <span class="kp">list</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">front</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">front</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="kp">front</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">front</span> <span class="nv">A</span>
   <span class="kp">front</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">front</span> <span class="nv">A</span> <span class="kp">append</span> <span class="kp">last</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="p">(</span><span class="kp">front</span> <span class="nv">A</span> <span class="kp">append</span> <span class="kp">last</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="fuse">fuse</h2>

<ul>
  <li>Class:<br />
<a href="#data-rearrangement-operation">data rearrangement operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">fuse</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">fuse</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#transpose">transpose</a>, <a href="#blend">blend</a>, <a href="#split">split</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">fuse</span></code> is used for two distinct purposes. If <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is simple
and contains all the axes of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> without repetition, the result is an
array formed by a permutation of the axes of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>. The shape of
the result is <code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">choose</span> <span class="kp">shape</span> <span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is not simple but link <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is
simple and contains all of the axes of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> without repetition, the
result is obtained by diagonalizing along axes that are grouped
together, ordering them according to the ordering in <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>.</p>

<p>If link <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> does not contain all the axes or if there are repetitions of
the axes in link <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>, the fault <code class="language-nial highlighter-rouge"><span class="gr">?invalid</span> <span class="kp">fuse</span></code> is returned.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">24</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>   <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span>
<span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>   <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>   <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>

     <span class="mi">1</span> <span class="mi">2</span> <span class="mi">0</span> <span class="kp">fuse</span> <span class="nv">A</span>
<span class="mi">1</span> <span class="mi">13</span>   <span class="mi">5</span> <span class="mi">17</span>    <span class="mi">9</span> <span class="mi">21</span>
<span class="mi">2</span> <span class="mi">14</span>   <span class="mi">6</span> <span class="mi">18</span>   <span class="mi">10</span> <span class="mi">22</span>
<span class="mi">3</span> <span class="mi">15</span>   <span class="mi">7</span> <span class="mi">19</span>   <span class="mi">11</span> <span class="mi">23</span>
<span class="mi">4</span> <span class="mi">16</span>   <span class="mi">8</span> <span class="mi">20</span>   <span class="mi">12</span> <span class="mi">24</span>

     <span class="mi">0</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="kp">fuse</span> <span class="nv">A</span>
 <span class="mi">1</span>  <span class="mi">6</span> <span class="mi">11</span>
<span class="mi">13</span> <span class="mi">18</span> <span class="mi">23</span>
     <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span> <span class="kp">fuse</span> <span class="nv">A</span>
<span class="mi">1</span> <span class="mi">18</span>
</code></pre></div></div>

<p>The first example is an axis permutation; the last two are
diagonalizations.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">fuse</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">transpose</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">(</span> <span class="kp">reverse</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">fuse</span> <span class="nv">A</span> <span class="p">)</span>
   <span class="kp">sortup</span> <span class="nv">I</span> <span class="o">=</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span> <span class="nv">I</span> <span class="kp">fuse</span> <span class="nv">A</span> <span class="p">)</span> <span class="o">=</span> <span class="nv">I</span> <span class="kp">choose</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="gage">gage</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">gage</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#pick">pick</a>, <a href="#tell">tell</a>, <a href="#grid">grid</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">gage</span></code> is used to convert an array of integers into an
atomic integer if there is only one item or a list if there is more than
one. The integers must be non-negative otherwise the fault <code class="language-nial highlighter-rouge"><span class="gr">?gage</span></code> is
produced.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">gage</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>

     <span class="kp">gage</span> <span class="kp">find</span> <span class="mi">5</span> <span class="p">(</span><span class="kp">tell</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">6</span>

     <span class="kp">gage</span> <span class="mi">3</span> <span class="mi">-4</span> <span class="mi">5</span>
<span class="gr">?gage</span>
</code></pre></div></div>

<p>The main purpose of <code class="language-nial highlighter-rouge"><span class="kp">gage</span></code> is to express a list of non-negative integers
in the form an address takes, i.e. it converts a solitary integer to the
integer itself and leaves all other lists alone.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">gage</span> <span class="k">is</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
      <span class="k">IF</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">isinteger</span> <span class="nv">A</span> <span class="k">THEN</span>
         <span class="k">IF</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span>
            <span class="k">IF</span> <span class="kp">first</span> <span class="nv">A</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="kp">first</span> <span class="nv">A</span> <span class="k">ELSE</span> <span class="gr">??gage</span> <span class="k">ENDIF</span>
         <span class="k">ELSE</span>
            <span class="k">IF</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="p">(</span><span class="mi">0</span><span class="o">&lt;=</span><span class="p">)</span> <span class="nv">A</span> <span class="k">THEN</span> <span class="kp">list</span> <span class="nv">A</span> <span class="k">ELSE</span> <span class="gr">??gage</span> <span class="k">ENDIF</span>
         <span class="k">ENDIF</span>
      <span class="k">ELSE</span>
        <span class="gr">??gage</span>
      <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="getdef">getdef</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">getdef</span> <span class="nv">Nm</span></code></li>
  <li>See Also:<br />
<a href="#parse">parse</a>, <a href="#eval">eval</a>, <a href="#see">see</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">getdef</span></code> retrieves the parse tree associated with the
global definition named <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code>. <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> may be a phrase or a string. Only the
parse trees associated with global user definitions can be retrieved.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">foo</span> <span class="k">IS</span> <span class="kp">first</span> <span class="p">;</span> <span class="kp">getdef</span> <span class="ss">"foo</span>
<span class="o">+---+-----------------------------+</span>
<span class="o">|</span><span class="mi">100</span><span class="o">|+--+---------------+------+-+|</span>
<span class="o">|</span>   <span class="o">||</span><span class="mi">11</span><span class="o">|+--+----------+|</span><span class="mi">3</span> <span class="mi">47</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span><span class="o">||</span>
<span class="o">|</span>   <span class="o">||</span>  <span class="o">||</span><span class="mi">22</span><span class="o">|</span><span class="mi">2</span> <span class="mi">160</span> <span class="mi">7459</span><span class="o">||</span>      <span class="o">|</span> <span class="o">||</span>
<span class="o">|</span>   <span class="o">||</span>  <span class="o">|+--+----------+|</span>      <span class="o">|</span> <span class="o">||</span>
<span class="o">|</span>   <span class="o">|+--+---------------+------+-+|</span>
<span class="o">+---+-----------------------------+</span>
</code></pre></div></div>

<p>The example shows a parse tree for a simple definition. For definitions
of any reasonable size the diagram of the parse tree becomes too large
to examine easily.</p>

<p>The primary use of <code class="language-nial highlighter-rouge"><span class="kp">getdef</span></code> is to provide an interface between internal
representations and the editing facilities. It is used in <code class="language-nial highlighter-rouge"><span class="kp">see</span></code> and
<code class="language-nial highlighter-rouge"><span class="nv">defedit</span></code>. The detailed form of the parse tree is implementation
specific and may change in future releases.</p>

<h2 id="getfile">getfile</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">getfile</span> <span class="nv">Filename</span></code></li>
  <li>See Also:<br />
<a href="#putfile">putfile</a>, <a href="#appendfile">appendfile</a>, <a href="#open">open</a>,
<a href="#readfile">readfile</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">getfile</span></code> returns the records of the text file named by
the string or phrase <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> as a list of strings. The file must not
be open.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Recs</span> <span class="p">:=</span> <span class="kp">getfile</span> <span class="ss">"Myfile</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">getfile</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">Filename</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Fnum</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">Filename</span> <span class="sc">`r</span><span class="p">;</span>
        <span class="k">IF</span> <span class="kp">isfault</span> <span class="nv">Fnum</span> <span class="k">THEN</span>
           <span class="nv">Fnum</span>
        <span class="k">ELSE</span>
           <span class="nv">Lines</span> <span class="p">:=</span> <span class="s1">''</span><span class="p">;</span>
           <span class="nv">Line</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">Fnum</span><span class="p">;</span>
           <span class="k">WHILE</span> <span class="nv">Line</span> <span class="o">~=</span> <span class="gr">??eof</span> <span class="k">DO</span>
              <span class="nv">Lines</span> <span class="p">:=</span> <span class="nv">Lines</span> <span class="kp">append</span> <span class="nv">Line</span><span class="p">;</span>
              <span class="nv">Line</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">Fnum</span><span class="p">;</span>
           <span class="k">ENDWHILE</span><span class="p">;</span>
           <span class="nv">Lines</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="getname">getname</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">getname</span> <span class="nv">Triple</span></code></li>
  <li>See Also:<br />
<a href="#parse">parse</a>, <a href="#cast">cast</a>, <a href="#getdef">getdef</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">getname</span></code> retrieves the variable or definition name
associated with a name reference <code class="language-nial highlighter-rouge"><span class="nv">triple</span></code> within a parse tree. The
argument must be a triple with first item 2 that has been produced by
the Q’Nial parser. The operation is useful when analyzing the structure
of a parse tree representation. This is a specialized task and <code class="language-nial highlighter-rouge"><span class="kp">getname</span></code>
is used only with considerable knowledge of the internal workings of
Q’Nial.</p>

<h2 id="getsyms">getsyms</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">getsyms</span> <span class="nv">Nm</span></code></li>
  <li>See Also:<br />
<a href="#parse">parse</a>, <a href="#getdef">getdef</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">getsyms</span></code> retrieves the parameters and local variables of
a defined operation or expression named by <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code>. The operation is useful
when analyzing the name usage of a definition in the context of
analyzing the name interaction among a set of definitions. This is a
specialized task and <code class="language-nial highlighter-rouge"><span class="kp">getsyms</span></code> is used only with considerable knowledge
of the semantics of Q’Nial.</p>

<h2 id="grade">grade</h2>

<ul>
  <li>Class:<br />
<a href="#sorting-transformer">sorting transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">GRADE</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sort">sort</a>, <a href="#gradeup">gradeup</a>, <a href="#lte">lte</a>, <a href="#gte">gte</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">GRADE</span></code> modifies a comparator <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to produce an
operation that, when applied to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, returns an array of addresses of
the same shape as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> that orders <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> according to the comparator. The
addresses can be used to select the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> (using <code class="language-nial highlighter-rouge"><span class="kp">choose</span></code>) so
that the items are in order according to <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>.</p>

<p>A <strong>comparator</strong> is an operation that compares two arrays and returns
<code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if they are in the desired ordering or <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.
Operations <code class="language-nial highlighter-rouge"><span class="kp">lte</span></code> ( <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code>) and <code class="language-nial highlighter-rouge"><span class="kp">gte</span></code> ( <code class="language-nial highlighter-rouge"><span class="o">&gt;=</span></code>) are the most commonly used
comparators.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="k">gets</span> <span class="mi">3</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="mi">65</span> <span class="mi">77</span> <span class="mi">4</span> <span class="mi">19</span> <span class="mi">22</span> <span class="mi">11</span>
<span class="mi">65</span> <span class="mi">77</span>
 <span class="mi">4</span> <span class="mi">19</span>
<span class="mi">22</span> <span class="mi">11</span>

     <span class="nv">Addrs</span> <span class="p">:=</span> <span class="nb">GRADE</span> <span class="o">&gt;=</span> <span class="nv">A</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span>
<span class="o">+---+---+</span>

     <span class="nv">Addrs</span> <span class="kp">choose</span> <span class="nv">A</span>
<span class="mi">77</span> <span class="mi">65</span>
<span class="mi">22</span> <span class="mi">19</span>
<span class="mi">11</span>  <span class="mi">4</span>

     <span class="nb">GRADE</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="ss">"some</span> <span class="ss">"not</span> <span class="ss">"in</span> <span class="ss">"order</span><span class="p">)</span>
<span class="mi">3</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">2</span>

     <span class="nb">GRADE</span> <span class="o">&lt;=</span> <span class="p">[</span><span class="s1">'xyz'</span><span class="p">,</span><span class="s1">'abc'</span><span class="p">,</span><span class="s1">'mno'</span><span class="p">,</span><span class="s1">'cat'</span><span class="p">]</span>
<span class="gr">?invalid</span> <span class="nv">comparison</span> <span class="kp">in</span> <span class="nb">GRADE</span>

     <span class="nb">GRADE</span> <span class="kp">up</span> <span class="p">[</span><span class="s1">'xyz'</span><span class="p">,</span><span class="s1">'abc'</span><span class="p">,</span><span class="s1">'mno'</span><span class="p">,</span><span class="s1">'cat'</span><span class="p">]</span>
<span class="mi">1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">0</span>
</code></pre></div></div>

<p>The first three expressions illustrate that <code class="language-nial highlighter-rouge"><span class="nb">GRADE</span></code> returns the
addresses that re-order the items of table <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in descending order. The
next expression shows that the <code class="language-nial highlighter-rouge"><span class="nb">GRADE</span></code> transform of <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> can be applied
to a list of phrases. The second last expression shows that <code class="language-nial highlighter-rouge"><span class="nb">GRADE</span> <span class="o">&lt;=</span></code>
cannot be applied to a list of strings. This is because <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> is used
itemwise on the characters of the strings and hence the comparator
yields a bitstring rather than an atomic boolean result. The last
expression shows that the comparator <code class="language-nial highlighter-rouge"><span class="kp">up</span></code> can be used with strings.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">SORT</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">GRADE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span>
   <span class="nv">f</span> <span class="nv">a</span> <span class="nv">comparator</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="nb">GRADE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="gradeup">gradeup</h2>

<ul>
  <li>Class:<br />
<a href="#sorting-operation">sorting operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">gradeup</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sortup">sortup</a>, <a href="#grade">grade</a>, <a href="#up">up</a></li>
</ul>

<p>The operation</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">gradeup</span> <span class="mi">3</span> <span class="mi">7</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">9</span> <span class="mi">8</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">6</span> <span class="mi">10</span>
<span class="mi">7</span> <span class="mi">6</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">8</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">9</span>

     <span class="kp">gradeup</span> <span class="p">(</span><span class="ss">"some</span> <span class="ss">"words</span> <span class="ss">"not</span> <span class="ss">"in</span> <span class="ss">"order</span><span class="p">)</span>
<span class="mi">3</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">0</span> <span class="mi">1</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">gradeup</span> <span class="k">IS</span> <span class="nb">GRADE</span> <span class="kp">up</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">gradeup</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sortup</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="grid">grid</h2>

<ul>
  <li>Class:<br />
<a href="#array-generation-operation">array generation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">grid</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tell">tell</a>, <a href="#address">address</a>, <a href="#shape">shape</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">grid</span></code> returns the array of addresses of the array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.
The result has the same shape as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. Each item of the result is the
address of the corresponding item in <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The grid of a list is a list
of integers. The grid of a table is a table of pairs of integers.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">grid</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">4</span> <span class="mi">7</span> <span class="mi">4</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>

     <span class="nv">A</span> <span class="p">:=</span>  <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">6</span><span class="p">;</span> <span class="nv">A</span> <span class="p">(</span><span class="kp">grid</span> <span class="nv">A</span><span class="p">)</span>

<span class="o">+-----+-------------+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="o">|+---+---+---+|</span>
<span class="o">|</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">||</span>
<span class="o">|</span>     <span class="o">|+---+---+---+|</span>
<span class="o">|</span>     <span class="o">||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">||</span>
<span class="o">|</span>     <span class="o">|+---+---+---+|</span>
<span class="o">+-----+-------------+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">grid</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">tell</span> <span class="kp">gage</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">grid</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="gt">gt</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">gt</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">&gt;</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">gt</span> <span class="nv">A</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="o">&gt;</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#gte">gte</a>, <a href="#lt">lt</a>, <a href="#match">match</a>, <a href="#mate">mate</a>, <a href="#max">max</a>,
<a href="#sort">sort</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">gt</span></code> compares two atoms <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> with the <code class="language-nial highlighter-rouge"><span class="nv">greater</span>
<span class="nv">than</span></code> relation, returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is greater than <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>
otherwise. The symbol <code class="language-nial highlighter-rouge"><span class="o">&gt;</span></code> is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">gt</span></code>.</p>

<p>The atoms in Nial are organized as a lattice using <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> for the
ordering. The numeric atoms are comparable across types but numeric and
literal atoms are incomparable. The literal types are not comparable
across types. A comparison between incomparable objects results in
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="p">:=</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>

     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="o">&gt;</span> <span class="nv">R</span>
<span class="mb">oooooo</span>
<span class="mb">looooo</span>
<span class="mb">lloooo</span>
<span class="mb">oooooo</span>
<span class="mb">oooooo</span>
<span class="mb">oooooo</span>

     <span class="s1">'apple'</span> <span class="o">&gt;</span> <span class="s1">'above'</span>
<span class="mb">olloo</span>

     <span class="ss">"apple</span> <span class="o">&gt;</span> <span class="ss">"above</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The use of <code class="language-nial highlighter-rouge"><span class="nb">OUTER</span> <span class="o">&gt;</span></code> shows the comparisons between various atom types.
The last two examples show the difference between comparing two strings,
where the operation is distributed by its pervasive property; and
comparing the corresponding phrases.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">gt</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">gte</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">and</span> <span class="kp">not</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">mate</span> <span class="nv">B</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="gte">gte</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">gte</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">&gt;=</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">gte</span> <span class="nv">A</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="o">&gt;=</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#gt">gt</a>, <a href="#lte">lte</a>, <a href="#match">match</a>, <a href="#sort">sort</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">gte</span></code> compares two atoms <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> with the <code class="language-nial highlighter-rouge"><span class="nv">greater</span>
<span class="nv">than</span> <span class="kp">or</span> <span class="kp">equal</span></code> relation, returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is greater than or
equal to <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise. The symbol <code class="language-nial highlighter-rouge"><span class="o">&gt;=</span></code> is a synonym for
<code class="language-nial highlighter-rouge"><span class="kp">gte</span></code>.</p>

<p>The atoms in Nial are organized as a lattice using <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> for the
ordering. The numeric atoms are comparable across types but numeric and
literal atoms are incomparable. The literal types are not comparable
across types. A comparison between incomparable objects results in
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="p">:=</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>

     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="o">&gt;=</span> <span class="nv">R</span>
<span class="mb">looooo</span>
<span class="mb">lloooo</span>
<span class="mb">lllooo</span>
<span class="mb">oooloo</span>
<span class="mb">oooolo</span>
<span class="mb">oooool</span>

     <span class="s1">'apple'</span> <span class="o">&gt;=</span> <span class="s1">'above'</span>
<span class="mb">lllol</span>

     <span class="ss">"apple</span> <span class="o">&gt;=</span> <span class="ss">"above</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The use of <code class="language-nial highlighter-rouge"><span class="nb">OUTER</span> <span class="o">&gt;=</span></code> shows the comparisons between various atom types.
The last two examples show the difference between comparing two strings,
where the operation is distributed by its pervasive property; and
comparing the corresponding phrases.</p>

<p><strong>Definition</strong></p>

<p>gte IS OPERATION A B {­ B lte A }</p>

<h2 id="hitch">hitch</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">hitch</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#append">append</a>, <a href="#link">link</a>, <a href="#list">list</a>,
<a href="#solitary">solitary</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">hitch</span></code> attaches <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to the front of the list of items of
<code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. It returns a list of length one greater than the tally of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="kp">hitch</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="o">+-----+-+-+-+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">6</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span>
<span class="o">+-----+-+-+-+</span>
     <span class="mi">7</span> <span class="kp">hitch</span> <span class="mi">3</span>
<span class="mi">7</span> <span class="mi">3</span>
     <span class="kp">hitch</span> <span class="s1">'Wow'</span> <span class="s1">''</span>
<span class="o">+---+</span>
<span class="o">|</span><span class="nv">Wow</span><span class="o">|</span>
<span class="o">+---+</span>
</code></pre></div></div>

<p>The first example shows that the list 2 3 4 becomes an item on the front
of the list 5 6 7. In the next example, the right argument of <code class="language-nial highlighter-rouge"><span class="kp">hitch</span></code> is
treated as a list. The last example shows that if the right argument is
an empty list, the result is the left argument as a solitary.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">hitch</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="kp">link</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="p">(</span><span class="kp">list</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">A</span> <span class="kp">hitch</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">first</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kp">rest</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="p">(</span><span class="kp">first</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kp">rest</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="host">host</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">host</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#edit">edit</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">host</span></code> executes <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> as a host command language
instruction. The argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> is a string or a phrase. If the action
carried out by the host system produces output, the output is displayed
on the screen. In window mode, Q’Nial is unable to capture this output
and hence it may scramble the screen output. The screen is restored by
executing <code class="language-nial highlighter-rouge"><span class="nv">Refresh</span></code>.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">host</span></code> is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code> if the command has returned
normally; or a fault generated from a system dependent error message
supplied by the host operating system. At the top level loop, a line
beginning with <code class="language-nial highlighter-rouge"><span class="o">!</span></code>, the exclamation mark, is interpreted as a host
command.</p>

<h2 id="in">in</h2>

<ul>
  <li>Class:<br />
<a href="#search-operation">search operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">in</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">in</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#allin">allin</a>, <a href="#notin">notin</a>, <a href="#seek">seek</a>, <a href="#find">find</a>,
<a href="#equal">equal</a>, <a href="#sortup">sortup</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">in</span></code> returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and returns
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if it is not.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">in</span> <span class="mi">56</span> <span class="mi">34</span> <span class="mi">23</span> <span class="mi">3</span> <span class="mi">57</span> <span class="mi">3</span>
<span class="mb">l</span>
     <span class="mi">1</span> <span class="mi">1</span> <span class="kp">in</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mb">l</span>
     <span class="sc">`a</span> <span class="kp">in</span> <span class="s1">'hello world'</span>
<span class="mb">o</span>
     <span class="sc">`a</span> <span class="kp">in</span> <span class="ss">"apple</span>
<span class="mb">o</span>
     <span class="sc">`a</span> <span class="kp">in</span> <span class="kp">string</span> <span class="ss">"apple</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The fourth and fifth examples show that a letter is not an item of a
phrase but is an item of the corresponding string.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">in</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">or</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="kp">equal</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">in</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">in</span> <span class="p">(</span><span class="kp">list</span> <span class="nv">B</span><span class="p">)</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kc">False</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">True</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">hitch</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kc">True</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">append</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kc">True</span>
   <span class="nv">A</span> <span class="kp">in</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">pair</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">in</span></code> uses a linear search on the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> if the array
has not been sorted, or uses a binary search algorithm if it has. The
latter fact suggests that an array that is searched frequently should be
kept in lexicographical order by applying <code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> to it when it is
created.</p>

<h2 id="inner">inner</h2>

<ul>
  <li>Class:<br />
<a href="#applicative-transformer">applicative transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">INNER</span> <span class="p">[</span><span class="nv">f</span><span class="p">,</span><span class="nv">g</span><span class="p">]</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nb">INNER</span> <span class="p">[</span><span class="nv">f</span><span class="p">,</span><span class="nv">g</span><span class="p">]</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#outer">outer</a>, <a href="#innerproduct">innerproduct</a>, <a href="#solve">solve</a>,
<a href="#inverse">inverse</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">INNER</span></code> generalizes the inner product operation of
linear algebra. For a pair of lists <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the result is the
application of the reductive operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the result of applying the
binary pervasive operation <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. It is assumed that <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is
one of the seven reductive operations of Nial: <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code>, product, or, and,
max, min , or <code class="language-nial highlighter-rouge"><span class="kp">link</span></code> and that <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> distributes pairwise. For tables,
<code class="language-nial highlighter-rouge"><span class="nb">OUTER</span> <span class="nv">g</span></code> is applied to the rows of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and the columns of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>
is applied to each item of the outer product.</p>

<p>Thus, <code class="language-nial highlighter-rouge"><span class="nb">INNER</span> <span class="p">[</span><span class="o">+</span><span class="p">,</span><span class="o">*</span><span class="p">]</span></code> is equivalent to matrix multiplication in linear
algebra and <code class="language-nial highlighter-rouge"><span class="nb">INNER</span> <span class="p">[</span><span class="kp">or</span><span class="p">,</span><span class="kp">and</span><span class="p">]</span></code> is boolean matrix product. For higher
dimensional arrays, the lists are formed by “pushing down” the last axis
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and the first axis of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="nb">INNER</span> <span class="p">[</span><span class="o">+</span><span class="p">,</span><span class="o">*</span><span class="p">]</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">47</span>
     <span class="mb">loll</span> <span class="nb">INNER</span> <span class="p">[</span><span class="kp">or</span><span class="p">,</span><span class="kp">and</span><span class="p">]</span> <span class="mb">olol</span>
<span class="mb">l</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">8</span><span class="p">;</span>
     <span class="nv">B</span> <span class="p">:=</span> <span class="mi">4</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">tell</span> <span class="mi">8</span><span class="p">;</span>
     <span class="nv">A</span> <span class="nv">B</span>
<span class="o">+-------+-----+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">|</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span><span class="mi">6</span> <span class="mi">7</span> <span class="mi">0</span><span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+-------+-----+</span>
     <span class="nv">A</span> <span class="nb">INNER</span> <span class="p">[</span><span class="kp">sum</span><span class="p">,</span><span class="kp">times</span><span class="p">]</span> <span class="nv">B</span>
<span class="mi">28</span> <span class="mi">38</span> <span class="mi">24</span>
<span class="mi">68</span> <span class="mi">94</span> <span class="mi">64</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">INNER</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="nv">g</span> <span class="p">(</span><span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span><span class="p">)</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">rows</span> <span class="nv">A</span> <span class="nb">OUTER</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="p">(</span><span class="mi">0</span> <span class="kp">split</span> <span class="nv">B</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">INNER</span> <span class="p">[</span><span class="nv">f</span><span class="p">,</span><span class="nv">g</span><span class="p">]</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="kp">front</span> <span class="kp">shape</span> <span class="nv">A</span><span class="p">)</span> <span class="kp">link</span> <span class="p">(</span><span class="kp">rest</span> <span class="kp">shape</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="innerproduct">innerproduct</h2>

<ul>
  <li>Class:<br />
<a href="#linear-algebra-operation">linear algebra operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">innerproduct</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">ip</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">innerproduct</span> <span class="nv">A</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">ip</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#inner">inner</a>, <a href="#outer">outer</a>, <a href="#solve">solve</a>,
<a href="#inverse">inverse</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">innerproduct</span></code> computes the mathematical inner product of
real vectors and matrices using special code for efficiency. For real
matrices, it produces the same result as <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">INNER</span> <span class="p">[</span><span class="o">+</span><span class="p">,</span><span class="o">*</span><span class="p">]</span> <span class="nv">B</span></code>, but computes
the result more rapidly for large arguments. It coerces boolean and
integer arrays to reals. The name <code class="language-nial highlighter-rouge"><span class="kp">ip</span></code> is provided as an abbreviation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">8</span><span class="p">;</span>
     <span class="nv">B</span> <span class="p">:=</span> <span class="mi">4</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">tell</span> <span class="mi">8</span><span class="p">;</span>
     <span class="nv">A</span> <span class="nv">B</span>
<span class="o">+-------+-----+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">|</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span><span class="mi">6</span> <span class="mi">7</span> <span class="mi">0</span><span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+-------+-----+</span>

     <span class="nv">A</span> <span class="kp">innerproduct</span> <span class="nv">B</span>
<span class="mf">28.</span> <span class="mf">38.</span> <span class="mf">24.</span>
<span class="mf">68.</span> <span class="mf">94.</span> <span class="mf">64.</span>
</code></pre></div></div>

<p>The number of columns of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> must match the number of rows in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">B</span> <span class="kp">ip</span> <span class="nv">A</span>
<span class="gr">?conform</span> <span class="kp">in</span> <span class="kp">ip</span>
</code></pre></div></div>

<h2 id="inverse">inverse</h2>

<ul>
  <li>Class:<br />
<a href="#linear-algebra-operation">linear algebra operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">inverse</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">inverse</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#solve">solve</a>, <a href="#inner">inner</a>, <a href="#innerproduct">innerproduct</a>,
<a href="#outer">outer</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">inverse</span></code> computes the mathematical inverse of a square
matrix <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> returning a square matrix of the same shape. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is
<strong>singular</strong> within numerical limits, the result is the fault
<code class="language-nial highlighter-rouge"><span class="gr">?singular</span></code>. The name <code class="language-nial highlighter-rouge"><span class="kp">inv</span></code> is provided as an abbreviation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seed</span> <span class="mf">0.5</span><span class="p">;</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">ceiling</span> <span class="p">(</span> <span class="mf">100.</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">random</span> <span class="mi">9</span><span class="p">))</span>
<span class="mi">50</span> <span class="mi">44</span> <span class="mi">13</span>
<span class="mi">78</span> <span class="mi">74</span> <span class="mi">90</span>
<span class="mi">98</span> <span class="mi">67</span> <span class="mi">17</span>

     <span class="kp">inverse</span> <span class="nv">A</span>
<span class="mf">-0.0736442</span>  <span class="mf">0.00189821</span>  <span class="mf">0.0462669</span>
  <span class="mf">0.115652</span> <span class="mf">-0.00654341</span>  <span class="mf">-0.053798</span>
<span class="mf">-0.0312664</span>   <span class="mf">0.0148461</span> <span class="mf">0.00413593</span>

     <span class="nv">A</span> <span class="kp">innerproduct</span> <span class="kp">inverse</span> <span class="nv">A</span>
         <span class="mf">1.</span> <span class="mf">-6.93889e-18</span> <span class="mf">-7.11237e-17</span>
 <span class="mf">9.4369e-16</span>           <span class="mf">1.</span> <span class="mf">-1.97758e-16</span>
<span class="mf">3.60822e-16</span> <span class="mf">-6.93889e-18</span>           <span class="mf">1.</span>
</code></pre></div></div>

<p>The final computation shows that the result is not always an exact
inverse due to roundoff errors introduced by using floating point
arithmetic.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="nv">a</span> <span class="nv">square</span> <span class="nv">matrix</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">innerproduct</span> <span class="p">(</span><span class="kp">inverse</span> <span class="nv">A</span><span class="p">)</span> <span class="kp">innerproduct</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
   <span class="kp">inverse</span> <span class="nv">A</span> <span class="kp">innerproduct</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">solve</span> <span class="nv">B</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="isboolean">isboolean</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">isboolean</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isinteger">isinteger</a>, <a href="#isreal">isreal</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">isboolean</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a boolean atom. It
returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a boolean, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isboolean</span> <span class="kc">false</span>
<span class="mb">l</span>
     <span class="kp">isboolean</span> <span class="mb">llollool</span>
<span class="mb">o</span>
     <span class="kp">isboolean</span> <span class="mi">7</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>isboolean IS OPERATION A {­ type A = o }</p>

<h2 id="ischar">ischar</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">ischar</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isfault">isfault</a>, <a href="#isphrase">isphrase</a>,
<a href="#isstring">isstring</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">ischar</span></code> tests whether or not atom <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a character
atom. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a character, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">ischar</span> <span class="p">(</span><span class="sc">`a</span><span class="p">)</span> <span class="p">(</span><span class="s1">'a'</span><span class="p">)</span> <span class="mi">7</span>
<span class="mb">loo</span>
</code></pre></div></div>

<p>In the example <code class="language-nial highlighter-rouge"><span class="s1">'a'</span></code> is not an atom; it is a solitary holding <code class="language-nial highlighter-rouge"><span class="sc">`a</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">ischar</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">type</span> <span class="nv">A</span> <span class="o">=</span> <span class="sc">` </span><span class="p">}</span>
</code></pre></div></div>

<h2 id="isfault">isfault</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">isfault</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isphrase">isphrase</a>, <a href="#ischar">ischar</a>,
<a href="#isstring">isstring</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">isfault</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a fault. It returns
<code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a fault, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">isfault</span> <span class="p">(</span><span class="gr">??error</span><span class="p">)</span> <span class="p">(</span><span class="ss">"?error</span><span class="p">)</span>
<span class="mb">lo</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isfault</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">type</span> <span class="nv">A</span> <span class="o">=</span> <span class="gr">??</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="isinteger">isinteger</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">isinteger</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isboolean">isboolean</a>, <a href="#isreal">isreal</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">isinteger</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an integer. It
returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an integer, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">isinteger</span> <span class="p">(</span><span class="mi">7</span><span class="p">)(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)(</span><span class="sc">`3</span><span class="p">)(</span><span class="mf">3.0</span><span class="p">)</span>
<span class="mb">looo</span>

     <span class="kp">isinteger</span> <span class="p">(</span><span class="sc">`a</span> <span class="kp">find</span> <span class="s1">'whale'</span><span class="p">)</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The last example returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> because the result of <code class="language-nial highlighter-rouge"><span class="sc">`a</span> <span class="kp">find</span>
<span class="s1">'whale'</span></code> is an integer, since the second argument of <code class="language-nial highlighter-rouge"><span class="kp">find</span></code> is a list.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isinteger</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">type</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="isphrase">isphrase</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">isphrase</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isstring">isstring</a>, <a href="#isfault">isfault</a>,
<a href="#ischar">ischar</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">isphrase</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a phrase. It
returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a phrase, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isphrase</span> <span class="ss">"Mike</span>
<span class="mb">l</span>
     <span class="kp">isphrase</span> <span class="s1">'abc'</span>
<span class="mb">o</span>
     <span class="kp">isphrase</span>  <span class="sc">`a</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isphrase</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">type</span> <span class="nv">A</span> <span class="o">=</span> <span class="ss">""</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="isreal">isreal</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">isreal</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isboolean">isboolean</a>, <a href="#isinteger">isinteger</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">isreal</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a real number. It
returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a real number, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isreal</span> <span class="mf">3.5</span>
<span class="mb">l</span>

     <span class="kp">isreal</span> <span class="s1">'abc'</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isreal</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">type</span> <span class="nv">A</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="p">}</span>
</code></pre></div></div>

<h2 id="isstring">isstring</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">isstring</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#ischar">ischar</a>, <a href="#string">string</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">isstring</span></code> tests whether or not the array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a string.
It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a string, <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isstring</span> <span class="s1">'A string'</span>
<span class="mb">l</span>
     <span class="kp">isstring</span> <span class="sc">`A</span>
<span class="mb">o</span>
     <span class="kp">isstring</span> <span class="sc">`2</span> <span class="sc">`A</span> <span class="sc">`?</span>
<span class="mb">l</span>
     <span class="kp">isstring</span> <span class="s1">''</span>
<span class="mb">l</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">isstring</span> <span class="k">IS</span> <span class="k">OP</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">1</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">ischar</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">isstring</span> <span class="kp">string</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></div>

<h2 id="iterate">iterate</h2>

<ul>
  <li>Class:<br />
<a href="#control-structure-transformer">control structure transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">ITERATE</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#for-loop">for-loop</a>, <a href="#fork">fork</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">ITERATE</span></code> is used to apply the operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>
sequentially to the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in row major order. (Row major order
means across the rows moving left to right, starting at the top row and
then going down the rows. An example is given under list.) The result is
the result of applying <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the final item. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has no items, the
result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">ITERATE</span> <span class="kp">write</span> <span class="ss">"Hello</span> <span class="ss">"out</span> <span class="ss">"there.</span>
<span class="nv">Hello</span>
<span class="nv">out</span>
<span class="nv">there</span><span class="o">.</span>

     <span class="nv">A</span> <span class="k">IS</span> <span class="kp">EXTERNAL</span> <span class="kp">VARIABLE</span><span class="p">;</span>
     <span class="nv">accum</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">NONLOCAL</span> <span class="nv">A</span><span class="p">;</span> <span class="nv">A</span> <span class="p">:=</span> <span class="nv">A</span> <span class="o">+</span> <span class="nv">B</span> <span class="p">};</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">20</span><span class="p">;</span>
     <span class="nb">ITERATE</span> <span class="nv">accum</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="p">;</span> <span class="nv">A</span>
<span class="mi">32</span>
</code></pre></div></div>

<p>In the second example, the operation <code class="language-nial highlighter-rouge"><span class="nv">accum</span></code> increments variable <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> by
the argument value. The example shows <code class="language-nial highlighter-rouge"><span class="nb">ITERATE</span></code> being used to apply
<code class="language-nial highlighter-rouge"><span class="nv">accum</span></code> to the list 3 4 5, which results in <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> having the values 23, 27
and 32.</p>

<p>With <code class="language-nial highlighter-rouge"><span class="nb">ITERATE</span></code>, an operation that has a side effect can be applied to an
array of arguments sequentially in a specific sequence. On the other
hand, the order of application is undefined for <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code>.</p>

<p>A second major difference between <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> and <code class="language-nial highlighter-rouge"><span class="nb">ITERATE</span></code> is that <code class="language-nial highlighter-rouge"><span class="nb">ITERATE</span></code>
returns only the result of the last application whereas <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> returns
the array of all the results.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">ITERATE</span> <span class="k">IS</span> <span class="k">TR</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="k">FOR</span> <span class="nv">X</span> <span class="k">WITH</span> <span class="nv">A</span> <span class="k">DO</span> <span class="nv">f</span> <span class="nv">A</span> <span class="k">ENDFOR</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="laminate">laminate</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">laminate</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">laminate</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#link">link</a>, <a href="#catenate">catenate</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">laminate</span></code> merges the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> adding a new axis
before axis <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> of the items. The items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> must be of the same
shape.</p>

<p>The following example creates a three dimensional array from two tables,
placing the new axes at the front:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">0</span> <span class="kp">laminate</span> <span class="p">(</span><span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">+---+---+---+</span>  <span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span>  <span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>  <span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>  <span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>  <span class="o">+---+---+---+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">laminate</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">I</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="nv">Axesofitems</span> <span class="p">:=</span> <span class="kp">axes</span> <span class="kp">first</span> <span class="nv">A</span><span class="p">;</span>
           <span class="kp">link</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">take</span> <span class="nv">Axesofitems</span><span class="p">)</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">drop</span> <span class="nv">Axesofitems</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="kp">blend</span> <span class="nv">A</span>
        <span class="k">ELSE</span>
           <span class="kp">fault</span> <span class="s1">'?conform error in laminate'</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="last">last</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">last</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#first">first</a>, <a href="#pick">pick</a>, <a href="#take">take</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">last</span></code> returns the last of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is
empty, it returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>. The operation <code class="language-nial highlighter-rouge"><span class="kp">last</span></code> is a
special case of <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> (because <code class="language-nial highlighter-rouge"><span class="kp">first</span></code> is defined in terms of <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code>)
and its behaviour is determined by that of <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code>. Every nonempty array
has a last item.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">last</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">6</span>

     <span class="kp">last</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mi">2</span> <span class="mi">3</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">last</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">first</span> <span class="kp">reverse</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">last</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">last</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">last</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">last</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="leaf">leaf</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">LEAF</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#twig">twig</a>, <a href="#each">each</a>, <a href="#content">content</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">LEAF</span></code> modifies an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> into an operation that
applies f to every atom of the argument <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The result of applying
<code class="language-nial highlighter-rouge"><span class="nb">LEAF</span> <span class="nv">f</span></code> to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has the same shape as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> maps atoms to atoms,
the result has the same structure as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+---+</span>

     <span class="nb">LEAF</span> <span class="kp">tally</span> <span class="nv">A</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+</span>

     <span class="nv">B</span> <span class="p">:=</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+</span>

     <span class="nb">LEAF</span> <span class="kp">tell</span> <span class="nv">B</span>
<span class="o">+-----------+-------+</span>
<span class="o">|+---+-----+|+-+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">||</span>
<span class="o">|+---+-----+|+-+---+|</span>
<span class="o">+-----------+-------+</span>
</code></pre></div></div>

<p>The first example shows that the result of applying a <code class="language-nial highlighter-rouge"><span class="nb">LEAF</span></code> transform
to a table is a table of the same shape. The atoms have been mapped to 1
since the tally of an atom is 1. The second example shows that applying
a <code class="language-nial highlighter-rouge"><span class="nb">LEAF</span></code> transform to a list gives a list of the same length. However,
the structure of the result is not preserved in this example because
<code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> maps an integer to a list of integers.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">LEAF</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">atomic</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="nv">f</span> <span class="nv">A</span>
        <span class="k">ELSE</span>
           <span class="nb">EACH</span> <span class="p">(</span><span class="nb">LEAF</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">LEAF</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nv">f</span> <span class="nv">unary</span> <span class="nv">pervasive</span> <span class="o">==&gt;</span> <span class="nb">LEAF</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="p">(</span><span class="nb">LEAF</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">LEAF</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">LEAF</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span>
   <span class="nb">LEAF</span> <span class="nv">f</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nb">LEAF</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="libpath">libpath</h2>

<ul>
  <li>Class:<br />
<a href="#system-variable">system variable</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">Libpath</span> <span class="p">:=</span> <span class="nv">Paths</span></code></li>
  <li>See Also:<br />
<a href="#library">library</a></li>
</ul>

<p>The variable <code class="language-nial highlighter-rouge"><span class="kp">Libpath</span></code> is used by the operation <code class="language-nial highlighter-rouge"><span class="kp">library</span></code> as a list of
paths to directories that are to be checked for the definition file
named in the <code class="language-nial highlighter-rouge"><span class="kp">library</span></code> argument. The directories defined by <code class="language-nial highlighter-rouge"><span class="kp">Libpath</span></code>
are searched before the system dependent library directories.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Libpath</span> <span class="p">:=</span> <span class="p">[</span><span class="s1">'mydefs'</span><span class="p">,</span><span class="s1">'mylib\newdefs'</span><span class="p">];</span>
</code></pre></div></div>

<h2 id="library">library</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">library</span> <span class="nv">Nm</span></code> <code class="language-nial highlighter-rouge"><span class="kp">library</span> <span class="nv">Nm</span> <span class="nv">Sw</span></code></li>
  <li>See Also:<br />
<a href="#loaddefs">loaddefs</a>, <a href="#libpath">libpath</a>, <a href="#host">host</a>, <a href="#standard-definitions">standard
definitions</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">library</span></code> loads a definition from the Q’Nial library of
definition files. <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> is the name of a library file as a phrase or
string. The name is augmented with the path information for the library
and loaded into the workspace using <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code>.</p>

<p><code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code>, an optional argument, is either 0 (the default) or 1. If <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> is
0, there is no display of the file as it is loaded. If <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> is 1, the
file is displayed as the file is read.</p>

<p>Some of the programs in the library are grouped in definition files by
function. When such a file is specified, all the definitions in the file
are loaded. If it is desired to load only one operation from a
definition file which contains several operations, it is necessary to
edit the library file in order to isolate the desired operation in one
file.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">library</span> <span class="ss">"labeltable</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kp">Library</span></code> searches for files using paths that are provided in its
definition. Before searching for system defined directories, it searches
in the directories named in the global variable <code class="language-nial highlighter-rouge"><span class="kp">Libpath</span></code>, which is
empty by default.</p>

<p>To modify Libpath, either edit the standard definitions file <code class="language-nial highlighter-rouge"><span class="nv">defs</span><span class="o">.</span><span class="nv">ndf</span></code>,
or assign it a value dynamically.</p>

<h2 id="like">like</h2>

<ul>
  <li>Class:<br />
<a href="#set-like-operation">set-like operation</a></li>
  <li>Properties:<br />
binary, predicate</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">like</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">like</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#allin">allin</a>, <a href="#diverse">diverse</a>, <a href="#in">in</a>, <a href="#notin">notin</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">like</span></code> compares two arrays <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>
if all the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and vice versa. Otherwise it
returns <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>. The operation <code class="language-nial highlighter-rouge"><span class="kp">like</span></code> corresponds to set equality at the
first level of nesting.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">like</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">2</span>
<span class="mb">l</span>
     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">like</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="mb">o</span>
     <span class="s1">'hello world'</span> <span class="kp">like</span> <span class="s1">'whole door'</span>
<span class="mb">l</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">like</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">allin</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">allin</span> <span class="nv">A</span><span class="p">)}</span>
</code></pre></div></div>

<h2 id="link">link</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Property:<br />
<a href="#reductive">reductive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">link</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">link</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#catenate">catenate</a>, <a href="#laminate">laminate</a>, <a href="#hitch">hitch</a>,
<a href="#list">list</a>, <a href="#append">append</a>, <a href="#content">content</a>, <a href="#cull">cull</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">link</span></code> returns the list of the items of the items of its
argument. If it is applied to a pair of arrays <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the result
is the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> followed by the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<p>If link is applied to an arbitrary array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the items of the first
item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are followed by the items of the second item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, etc.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is empty, the result is <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not empty but there are
no items in all the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the result is also <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">7</span> <span class="mi">2</span> <span class="kp">link</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">7</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span>

     <span class="kp">link</span> <span class="s1">'hen'</span> <span class="s1">'hello'</span> <span class="s1">'eh'</span>
<span class="nv">henhelloeh</span>
</code></pre></div></div>

<p>The first example shows that the link of two lists of length 6 and 4 is
a list of length 10. The second example illustrates the linking of three
strings.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Link</span></code> is similar to a set-union operation, although it does not remove
duplicates in the representation. The composition of <code class="language-nial highlighter-rouge"><span class="kp">cull</span></code> with <code class="language-nial highlighter-rouge"><span class="kp">link</span></code>
may be more appropriate as a union operation.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">list</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sum</span> <span class="nb">EACH</span> <span class="kp">tally</span> <span class="nv">A</span>
   <span class="kp">link</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">link</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">cart</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">link</span> <span class="kp">cart</span> <span class="nb">EACH</span> <span class="kp">cart</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nb">EACH</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="kp">simple</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">simple</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">content</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="list">list</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">list</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reshape">reshape</a>, <a href="#link">link</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">list</span></code> returns the list of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in row major
order.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">24</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>   <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span>
<span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>   <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>   <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>

     <span class="kp">list</span> <span class="nv">A</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span>
<span class="mi">24</span>

     <span class="kp">set</span> <span class="ss">"diagram</span><span class="p">;</span> <span class="kp">list</span> <span class="ss">"abc</span>
<span class="o">+---+</span>
<span class="o">|</span><span class="nv">abc</span><span class="o">|</span>
<span class="o">+---+</span>
</code></pre></div></div>

<p>The first example shows row major order for a table. The second example
shows that the list of an atom is the solitary holding the atom.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">list</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">tally</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
</code></pre></div></div>

<h2 id="ln">ln</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">ln</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#exp">exp</a>, <a href="#log">log</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">ln</span></code> implements the natural logarithm function of
mathematics. It produces the following results when applied to atoms of
the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>natural logarithm of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>natural logarithm of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>real natural logarithm if A &gt; 0.0; ?ln if A &lt;= 0.0</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?ln</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?ln</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">ln</span>  <span class="mb">l</span>  <span class="mi">2</span>  <span class="mf">3.5</span>   <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">0.</span> <span class="mf">0.693147</span> <span class="mf">1.25276</span> <span class="gr">?ln</span> <span class="gr">?ln</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">==&gt;</span> <span class="kp">exp</span> <span class="kp">ln</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="load">load</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">load</span> <span class="nv">Wsname</span></code></li>
  <li>See Also:<br />
<a href="#save">save</a>, <a href="#loaddefs">loaddefs</a>,
<a href="#library">library</a>,<a href="#latent">latent</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">load</span></code> is used to retrieve the saved workspace named by
the phrase or string <code class="language-nial highlighter-rouge"><span class="nv">Wsname</span></code>. The convention in Q’Nial is to save
workspaces with a file name extension of the form <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">nws</span></code> to make it easy
to identify workspace files in the file system. When saving or loading a
workspace, the extension may be omitted.</p>

<p>The effect of loading a workspace is to replace the current workspace
with the saved one. To keep the contents of the current workspace,
<code class="language-nial highlighter-rouge"><span class="kp">save</span></code> should be used prior to doing a <code class="language-nial highlighter-rouge"><span class="kp">load</span></code>.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">load</span></code> may be used within a defined expression or
operation. However, in such a use, it interrupts the execution of the
operation or expression and does the load as though the operation were
entered at top level.</p>

<p>If a workspace contains an expression with the name <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code>, load
executes <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code> when the load is complete. This mechanism can be used
to have the load of a workspace automatically begin an application or to
chain execution of workspaces.</p>

<p>There is no mechanism to obtain individual objects saved in a workspace.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">load</span> <span class="ss">"mywork</span>
</code></pre></div></div>

<h2 id="loaddefs">loaddefs</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span> <span class="nv">Deffilename</span></code> <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span> <span class="nv">Deffilename</span> <span class="nv">Mode</span></code></li>
  <li>See Also:<br />
<a href="#library">library</a>, <a href="#edit">edit</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code> is used to load Nial actions (definitions or
expressions) from the file named by the phrase or string <code class="language-nial highlighter-rouge"><span class="nv">Deffilename</span></code>.
The convention in Q’Nial is to name Nial definition files with a file
name extension of the form <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndf</span></code> to make it easy to identify such files
in the file system.</p>

<p>When loading a file with <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code>, the file extension may be omitted.
The operation may have an optional second argument to specify the mode
of loading. If mode is 0 or if it is omitted, the actions are not
displayed as they are processed. If it is 1, the actions are displayed.</p>

<p>The file of actions consists of groups of lines that are treated as a
unit. These lines are separated by a blank line. If the first character
in the first line of the group is</p>

<p>Several lines, up to a blank line, are treated as one long line. No
blank spaces are inserted between the end of one line and the beginning
of another. Thus, care should be taken to ensure that identifiers are
not joined together.</p>

<p>If a syntax error is detected when a definition is being loaded, the
definition is not installed. The absence of the erroneous definition may
cause subsequent definitions in the file to fail also. If any errors are
detected, the number of errors is displayed when <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code> ends. Only
the first syntax error found in each action is reported.</p>

<p>The backslash character, ` `, which is used to continue a line of a
definition in immediate mode, must not be inserted at the end of lines
in a definition file.</p>

<p>The tab characters, if they exist in a definition file, are treated as
though they are space characters. Since some editor programs insert tabs
automatically, the display of the file on input may be different from
the display using the editor.</p>

<p>A definition file may contain uses of <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code>. For a large
application with many definition files, it is a good idea to have one
file which can construct the application by using <code class="language-nial highlighter-rouge"><span class="kp">loaddefs</span></code> to bring in
the other files in an appropriate order. <code class="language-nial highlighter-rouge"><span class="kp">Loaddefs</span></code> can also be used to
execute a script of Nial expressions. This feature is convenient when
simulating a Q’Nial session and capturing its output in a log file.</p>

<h2 id="log">log</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">log</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#power">power</a>, <a href="#ln">ln</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">log</span></code> implements the base 10 logarithm function of
mathematics. It produces the following results when applied to atoms of
the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>base 10 logarithm of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>base 10 logarithm of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>real base 10 logarithm if A &gt; 0.0; ?log if A &lt;= 0.0</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?log</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?log</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">log</span>  <span class="mb">l</span>  <span class="mi">2</span>  <span class="mf">3.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">0.</span> <span class="mf">0.30103</span> <span class="mf">0.544068</span> <span class="gr">?log</span> <span class="gr">?log</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">==&gt;</span> <span class="mf">10.</span> <span class="kp">power</span> <span class="kp">log</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span> <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="lower">lower</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">N</span> <span class="kp">lower</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">lower</span> <span class="nv">N</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#raise">raise</a>, <a href="#mix">mix</a>, <a href="#blend">blend</a>, <a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">lower</span></code> is used to partition an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> along its axes
by indicating that the last <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> axes are to become axes of the items of
the result. The remaining axes become the axes of the result. N must be
an integer in the range from 0 to <code class="language-nial highlighter-rouge"><span class="kp">valence</span> <span class="nv">A</span></code>. The result is an array of
shape given by dropping the last <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> items of <code class="language-nial highlighter-rouge"><span class="kp">shape</span> <span class="nv">A</span></code>. The items of
the result have the shape given by taking the <code class="language-nial highlighter-rouge"><span class="kp">last</span> <span class="nv">N</span></code> items of <code class="language-nial highlighter-rouge"><span class="kp">shape</span>
<span class="nv">A</span></code>. Thus, the <code class="language-nial highlighter-rouge"><span class="mi">1</span> <span class="kp">lower</span></code> of an array of shape 3 4 2 is a 3 by 4 table of
pairs. The <code class="language-nial highlighter-rouge"><span class="mi">2</span> <span class="kp">lower</span></code> of the same array is a triple of 4 by 2 tables.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="s1">'ABCDEFGHIJKLMNOPQRSTUVWX'</span>
<span class="nv">AB</span>  <span class="nv">IJ</span>  <span class="nv">QR</span>
<span class="nv">CD</span>  <span class="nv">KL</span>  <span class="nv">ST</span>
<span class="nv">EF</span>  <span class="nv">MN</span>  <span class="nv">UV</span>
<span class="nv">GH</span>  <span class="k">OP</span>  <span class="nv">WX</span>
     <span class="mi">1</span> <span class="kp">lower</span> <span class="nv">A</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">AB</span><span class="o">|</span><span class="nv">CD</span><span class="o">|</span><span class="nv">EF</span><span class="o">|</span><span class="nv">GH</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">IJ</span><span class="o">|</span><span class="nv">KL</span><span class="o">|</span><span class="nv">MN</span><span class="o">|</span><span class="k">OP</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">QR</span><span class="o">|</span><span class="nv">ST</span><span class="o">|</span><span class="nv">UV</span><span class="o">|</span><span class="nv">WX</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
     <span class="mi">2</span> <span class="kp">lower</span> <span class="nv">A</span>
<span class="o">+--+--+--+</span>
<span class="o">|</span><span class="nv">AB</span><span class="o">|</span><span class="nv">IJ</span><span class="o">|</span><span class="nv">QR</span><span class="o">|</span>
<span class="o">|</span><span class="nv">CD</span><span class="o">|</span><span class="nv">KL</span><span class="o">|</span><span class="nv">ST</span><span class="o">|</span>
<span class="o">|</span><span class="nv">EF</span><span class="o">|</span><span class="nv">MN</span><span class="o">|</span><span class="nv">UV</span><span class="o">|</span>
<span class="o">|</span><span class="nv">GH</span><span class="o">|</span><span class="k">OP</span><span class="o">|</span><span class="nv">WX</span><span class="o">|</span>
<span class="o">+--+--+--+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">lower</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">-</span> <span class="nv">N</span> <span class="kp">raise</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">N</span> <span class="nv">a</span> <span class="nv">nonnegative</span> <span class="nv">integer</span> <span class="o">&lt;=</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">lower</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">opp</span> <span class="nv">N</span> <span class="kp">drop</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="kp">first</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">drop</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">opp</span> <span class="nv">N</span> <span class="kp">take</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">lower</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="lt">lt</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">lt</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">&lt;</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">lt</span> <span class="nv">A</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="o">&lt;</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#lte">lte</a>, <a href="#gt">gt</a>, <a href="#gte">gte</a>, <a href="#match">match</a>, <a href="#mate">mate</a>,
<a href="#max">max</a>, <a href="#sort">sort</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">lt</span></code> compares two atoms <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> with the <code class="language-nial highlighter-rouge"><span class="nv">less</span> <span class="nv">than</span></code>
relation, returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is less than <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>
otherwise. Symbol <code class="language-nial highlighter-rouge"><span class="o">&lt;</span></code> is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">lt</span></code>.</p>

<p>The atoms in Nial are organized as a lattice using <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> for the
ordering. The numeric atoms are comparable across types but literal
atoms are not comparable with numeric atoms. The literal types are not
comparable across types. A comparison between incomparable objects
results in <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="p">:=</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>
     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="o">&lt;</span> <span class="nv">R</span>
<span class="mb">ollooo</span>
<span class="mb">oolooo</span>
<span class="mb">oooooo</span>
<span class="mb">oooooo</span>
<span class="mb">oooooo</span>
<span class="mb">oooooo</span>

     <span class="s1">'apple'</span> <span class="o">&lt;</span> <span class="s1">'above'</span>
<span class="mb">ooolo</span>

     <span class="ss">"apple</span> <span class="o">&lt;</span> <span class="ss">"above</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The use of <code class="language-nial highlighter-rouge"><span class="nb">OUTER</span> <span class="o">&lt;</span></code> shows the comparisons between various atom types.
The last two examples show the difference between comparing two strings,
where the operation is distributed by its pervasive property; and
comparing the corresponding phrases.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">lt</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">(</span> <span class="p">(</span> <span class="nv">A</span> <span class="kp">lte</span> <span class="nv">B</span> <span class="p">)</span> <span class="kp">and</span> <span class="kp">not</span> <span class="p">(</span> <span class="nv">A</span> <span class="kp">mate</span> <span class="nv">B</span> <span class="p">)</span> <span class="p">)</span>
</code></pre></div></div>

<h2 id="lte">lte</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">lte</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">&lt;=</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">lte</span> <span class="nv">A</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#lt">lt</a>, <a href="#gt">gt</a>, <a href="#gte">gte</a>, <a href="#match">match</a>, <a href="#mate">mate</a>,
<a href="#max">max</a>, <a href="#sort">sort</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">lte</span></code> compares two atoms <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> with the <code class="language-nial highlighter-rouge"><span class="nv">less</span> <span class="nv">than</span>
<span class="kp">or</span> <span class="kp">equal</span></code> relation, returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is less than <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>
otherwise. The symbol <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">lte</span></code>.</p>

<p>The atoms in Nial are organized as a lattice using <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> for the
ordering. The numeric atoms are comparable across types but numeric and
literal atoms are incomparable. The literal types are not comparable
across types. A comparison between incomparable objects results in
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="p">:=</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>

     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="o">&lt;=</span> <span class="nv">R</span>
<span class="mb">lllooo</span>
<span class="mb">ollooo</span>
<span class="mb">oolooo</span>
<span class="mb">oooloo</span>
<span class="mb">oooolo</span>
<span class="mb">oooool</span>

     <span class="s1">'apple'</span> <span class="o">&lt;=</span> <span class="s1">'above'</span>
<span class="mb">loolo</span>

     <span class="ss">"apple</span> <span class="o">&lt;</span> <span class="ss">"above</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The use of OUTER <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> shows the comparisons between various atom types.
The last two examples show the difference between comparing two strings,
where the operation is distributed by its pervasive property; and
comparing the corresponding phrases.</p>

<h2 id="match">match</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">match</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">match</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#mate">mate</a>, <a href="#gt">gt</a>, <a href="#gte">gte</a>, <a href="#lt">lt</a>, <a href="#lte">lte</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">match</span></code> compares two atoms <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> for exact equality,
returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is equal to <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise. <code class="language-nial highlighter-rouge"><span class="kp">Match</span></code>
cannot be used to determine the equality of atoms of different numeric
or literal type, as when comparing the real number 3.0 with the integer
3.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">match</span> <span class="mi">3</span>
<span class="mb">l</span>

     <span class="mf">3.0</span> <span class="kp">match</span> <span class="mi">3</span>
<span class="mb">o</span>

     <span class="ss">"o</span> <span class="kp">match</span> <span class="sc">`o</span>
<span class="mb">o</span>

     <span class="mf">1.0</span> <span class="kp">match</span> <span class="mb">l</span> <span class="mi">1</span> <span class="mf">1.0</span>
<span class="mb">ool</span>

     <span class="sc">` </span> <span class="kp">match</span> <span class="s1">'a list of letters'</span>
<span class="mb">olooooloolooooooo</span>

     <span class="mi">1</span> <span class="kp">match</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+--+--+--+</span>
<span class="o">|</span><span class="mb">oo</span><span class="o">|</span><span class="mb">ol</span><span class="o">|</span><span class="mb">oo</span><span class="o">|</span>
<span class="o">+--+--+--+</span>
<span class="o">|</span><span class="mb">lo</span><span class="o">|</span><span class="mb">ll</span><span class="o">|</span><span class="mb">lo</span><span class="o">|</span>
<span class="o">+--+--+--+</span>
</code></pre></div></div>

<p>The second last example shows that the binary pervasive extension of
<code class="language-nial highlighter-rouge"><span class="kp">match</span></code> allows a lists of atoms to be compared for a value, returning a
bitstring of results. The last example shows where in the structure of
tell 2 3 a 1 is held.</p>

<h2 id="mate">mate</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">mate</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">mate</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#match">match</a>, <a href="#gt">gt</a>, <a href="#gte">gte</a>, <a href="#lt">lt</a>, <a href="#lte">lte</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">mate</span></code> compares two atoms <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> for equality with
type coercion, returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is equal to or can be coerced to
<code class="language-nial highlighter-rouge"><span class="nv">B</span></code> as a number; and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise. <code class="language-nial highlighter-rouge"><span class="kp">Mate</span></code> is used to determine the
equality of atoms of different numeric type, as when comparing the real
number 3.0 with the integer 3. It cannot be used to determine equality
of literal types.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">mate</span> <span class="mi">3</span>
<span class="mb">l</span>

     <span class="mf">3.0</span> <span class="kp">mate</span> <span class="mi">3</span>
<span class="mb">l</span>

     <span class="ss">"o</span> <span class="kp">mate</span> <span class="sc">`o</span>
<span class="mb">o</span>

     <span class="mf">1.0</span> <span class="kp">mate</span> <span class="mb">l</span> <span class="mi">1</span> <span class="mf">1.0</span>
<span class="mb">lll</span>
</code></pre></div></div>

<p>The last example shows that the binary pervasive extension of <code class="language-nial highlighter-rouge"><span class="kp">mate</span></code>
allows a lists of atoms to be compared for a value, returning a
bitstring of results.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">mate</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">lte</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">lte</span> <span class="nv">A</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="max">max</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Properties:<br />
multi pervasive, reductive</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">max</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">max</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#min">min</a>, <a href="#gte">gte</a>, <a href="#sort">sort</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">max</span></code>, when applied to a simple array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, finds the least
atom that is greater than or equal to all the items. If the atoms of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
are all positive numbers, for example, <code class="language-nial highlighter-rouge"><span class="kp">max</span> <span class="nv">A</span></code> returns the biggest. If
the items are not comparable, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?I</span></code>, the atom in
the lattice of Nial atoms that is greater than or equal to all other
atoms (the zenith). If A is empty, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?O</span></code>, the
atom that is less than or equal to all other atoms (the nadir).</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Max</span></code> is extended to arbitrary arrays by its multi pervasive behaviour.
It is a reductive operation in that it reduces a simple array to a
single atom. Applied to a pair of simple arrays, it produces a simple
array with the corresponding items compared.</p>

<p>If the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are all numeric type, they are comparable. The
result is the highest numeric type represented in the array, where
boolean is the lowest numeric type and real number is the highest.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">max</span> <span class="mi">3</span> <span class="mi">45</span> <span class="mi">23</span> <span class="mi">18</span> <span class="mf">3.5</span>
<span class="mf">45.</span>
     <span class="kp">max</span> <span class="mi">3</span> <span class="ss">"abc</span>
<span class="gr">?I</span>
     <span class="kp">max</span> <span class="ss">"abc</span> <span class="ss">"def</span> <span class="ss">"c</span>
<span class="nv">def</span>
     <span class="kp">max</span> <span class="s1">'apples'</span> <span class="s1">'orange'</span>
<span class="nv">orpngs</span>
</code></pre></div></div>

<p>The first example shows that <code class="language-nial highlighter-rouge"><span class="kp">max</span></code> of a list of numbers of different
type is the maximum number, coerced to the highest type. The second
shows that the integer 3 and the phrase “abc” are incomparable and the
result is the fault ?I. The third example shows that phrases are
directly comparable. The last shows that strings are compared on a
character by character basis.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">max</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">max</span> <span class="nv">A</span>
   <span class="kp">max</span> <span class="nb">EACH</span> <span class="kp">max</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">max</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">max</span> <span class="nv">B</span> <span class="kp">lte</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">B</span> <span class="nb">EACHLEFT</span> <span class="kp">lte</span> <span class="nv">A</span><span class="p">)</span>
   <span class="kp">max</span> <span class="kc">Null</span> <span class="o">=</span> <span class="gr">??O</span>
</code></pre></div></div>

<h2 id="min">min</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Properties:<br />
multi pervasive, reductive</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">min</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">min</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#max">max</a>, <a href="#lte">lte</a>, <a href="#sort">sort</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">min</span></code>, when applied to a simple array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, finds the
greatest atom that is less than or equal to all the items. If the atoms
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are all positive numbers, for example, <code class="language-nial highlighter-rouge"><span class="kp">min</span> <span class="nv">A</span></code> returns the
smallest number. If the items are not comparable, the result is the
fault <code class="language-nial highlighter-rouge"><span class="gr">?O</span></code>, the atom in the lattice of Nial atoms that is less than or
equal to all other atoms (the nadir). If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is empty, the result is the
fault <code class="language-nial highlighter-rouge"><span class="gr">?I</span></code>, the atom that is greater than or equal to all other atoms
(the zenith).</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Min</span></code> is extended to arbitrary arrays by its multi pervasive behaviour.
It is a reductive operation in that it reduces a simple array to a
single atom. Applied to a pair of simple arrays, it produces a simple
array with the corresponding items compared.</p>

<p>If the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are all numeric type, they are comparable. The
result is the highest numeric type represented in the array, where
boolean is the lowest numeric type and real number is the highest.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">min</span> <span class="mi">3</span> <span class="mi">45</span> <span class="mi">23</span> <span class="mi">18</span> <span class="mf">3.5</span>
<span class="mf">3.</span>
     <span class="kp">min</span> <span class="mi">3</span> <span class="ss">"abc</span>
<span class="gr">?O</span>
     <span class="kp">min</span> <span class="ss">"abc</span> <span class="ss">"def</span> <span class="ss">"c</span>
<span class="nv">abc</span>
     <span class="kp">min</span> <span class="s1">'apples'</span> <span class="s1">'orange'</span>
<span class="nv">apalee</span>
</code></pre></div></div>

<p>The first example shows that <code class="language-nial highlighter-rouge"><span class="kp">min</span></code> of a list of numbers of different
type is the minimum number, coerced to the highest type. The second
shows that the integer 3 and the phrase “abc” are incomparable and the
result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?I</span></code>. The third example shows that phrases are
directly comparable. The last shows that strings are compared on a
character by character basis.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">min</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">min</span> <span class="nv">A</span>
   <span class="kp">min</span> <span class="nb">EACH</span> <span class="kp">min</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">min</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">lte</span> <span class="kp">min</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="kp">lte</span> <span class="nv">B</span><span class="p">)</span>
   <span class="kp">min</span> <span class="kc">Null</span> <span class="o">=</span> <span class="gr">??I</span>
</code></pre></div></div>

<h2 id="minus">minus</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">minus</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">-</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">minus</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#plus">plus</a>, <a href="#sum">sum</a>, <a href="#opposite">opposite</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">minus</span></code> returns the result of subtracting two numeric
atoms. It coerces the type of the atoms to be the higher type, if they
differ; or to integer, if both are boolean. The result is of the type of
the coerced arguments.</p>

<p>The symbol <code class="language-nial highlighter-rouge"><span class="o">-</span></code> is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">minus</span></code>. Care must be taken when using
this symbol because it also is used to form negative constants and the
latter use has higher priority. Thus,</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">10</span><span class="p">;</span>
     <span class="nv">A</span> <span class="o">-</span> <span class="mi">1</span>
<span class="mi">9</span>
</code></pre></div></div>

<p>does a subtraction, but</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="mi">-1</span>
<span class="mi">10</span> <span class="mi">-1</span>
</code></pre></div></div>

<p>forms a pair.</p>

<p>If one argument is numeric and the other is a fault or if both arguments
are the same fault, the answer is the fault. In all other cases when one
or more of the arguments is not numeric, the result is the arithmetic
fault <code class="language-nial highlighter-rouge"><span class="gr">?A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>

     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="kp">minus</span> <span class="nv">R</span>
     <span class="mi">0</span>      <span class="mi">-1</span>    <span class="mf">-1.5</span>   <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
     <span class="mi">1</span>       <span class="mi">0</span>    <span class="mf">-0.5</span>   <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
   <span class="mf">1.5</span>     <span class="mf">0.5</span>      <span class="mf">0.</span>   <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>       <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>       <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?error</span>   <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
</code></pre></div></div>

<p>The above example illustrates all combinations of atom types for the two
arguments to <code class="language-nial highlighter-rouge"><span class="kp">minus</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="mi">0</span> <span class="kp">minus</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="kp">minus</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">plus</span> <span class="kp">opposite</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="mix">mix</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">mix</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#blend">blend</a>, <a href="#link">link</a>, <a href="#rows">rows</a>, <a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">mix</span></code> is intended to be used on an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with items
which are all the same shape. In this case, the shape of the result is
formed by the shape of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> linked with the shape of the items. The list
of items of the result is the link of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> does not
have equally shaped items, the fault <code class="language-nial highlighter-rouge"><span class="gr">?conform</span></code> is returned.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">mix</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="mi">6</span> <span class="mi">7</span><span class="p">)</span>
<span class="mi">2</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">5</span>
<span class="mi">6</span> <span class="mi">7</span>

     <span class="nv">A</span> <span class="p">:=</span> <span class="p">(</span><span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)(</span><span class="kp">count</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">+-------------+-------------+</span>
<span class="o">|+---+---+---+|+---+---+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">||</span>
<span class="o">|+---+---+---+|+---+---+---+|</span>
<span class="o">||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">||</span>
<span class="o">|+---+---+---+|+---+---+---+|</span>
<span class="o">+-------------+-------------+</span>

     <span class="kp">mix</span> <span class="nv">A</span>
<span class="o">+---+---+---+</span>  <span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span>  <span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>  <span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>  <span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>  <span class="o">+---+---+---+</span>
</code></pre></div></div>

<p>The first example shows that the result of mixing a triple of pairs is a
3 by 2 table. The second example shows that mixing a pair of 2 by 3
tables is a 2 by 2 by 3 array, with the tables as the planes of the
array.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">mix</span></code> is the left inverse of the operations <code class="language-nial highlighter-rouge"><span class="kp">rows</span></code> and
<code class="language-nial highlighter-rouge"><span class="kp">raise</span></code> for nonempty arrays. It is often used to transform from a <code class="language-nial highlighter-rouge"><span class="kp">list</span>
<span class="nv">of</span> <span class="nv">lists</span></code> view of data to a table view of data. In practice,
transformations between the two representations on large arrays should
be avoided in Q’Nial since considerable work is involved in doing the
restructuring.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">mix</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">append</span> <span class="mi">0</span> <span class="kp">reshape</span> <span class="nv">A</span>
        <span class="k">ELSEIF</span> <span class="kp">not</span> <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="gr">??conform</span>
        <span class="k">ELSE</span>
           <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">link</span> <span class="kp">shape</span> <span class="kp">first</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="kp">link</span> <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="kp">mix</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="p">(</span><span class="kp">shape</span> <span class="nv">A</span><span class="p">)(</span><span class="kp">shape</span> <span class="kp">first</span> <span class="nv">A</span><span class="p">)</span>
   <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">list</span> <span class="kp">mix</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="kp">rows</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="p">(</span><span class="kp">axes</span> <span class="nv">A</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">raise</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="mod">mod</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">mod</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">mod</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#quotient">quotient</a>, <a href="#ceiling">ceiling</a>, <a href="#floor">floor</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">mod</span></code> returns the remainder of dividing integer <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> by
integer <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If the divisor <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is zero, the result is <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If it is
negative, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?negative</span> <span class="nv">divisor</span></code>.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">mod</span></code> coerces a boolean argument to an integer. It
produces a fault if either argument is not an integer or a boolean.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>
     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="kp">mod</span> <span class="nv">R</span>
     <span class="mi">0</span>       <span class="mi">1</span>  <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
     <span class="mi">0</span>       <span class="mi">0</span>  <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>

     <span class="p">(</span><span class="mi">5</span> <span class="kp">mod</span> <span class="mi">3</span><span class="p">)(</span><span class="mi">-5</span> <span class="kp">mod</span> <span class="mi">3</span><span class="p">)(</span><span class="mi">5</span> <span class="kp">mod</span> <span class="mi">-3</span><span class="p">)(</span><span class="mi">5</span> <span class="kp">mod</span> <span class="mi">0</span><span class="p">)</span>
<span class="mi">2</span> <span class="mi">1</span> <span class="gr">?negative</span> <span class="nv">divisor</span> <span class="mi">5</span>
</code></pre></div></div>

<p>The first example illustrates all combinations of atom types for the two
arguments to <code class="language-nial highlighter-rouge"><span class="kp">mod</span></code>.</p>

<p>The remainder on division by a positive integer <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is always a number
between 0 and <code class="language-nial highlighter-rouge"><span class="nv">B</span> <span class="o">-</span> <span class="mi">1</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is negative, the integer returned obeys
the rule of modular arithmetic as described in the definition. The
result of <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">mod</span> <span class="mi">0</span></code> is <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> rather than a fault, since that is the
preferred result in mathematics.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">mod</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">floor</span> <span class="p">(</span><span class="nv">A</span> <span class="o">-</span> <span class="p">(</span><span class="nv">B</span> <span class="o">*</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">quotient</span> <span class="nv">B</span><span class="p">))</span> <span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">isinteger</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">mod</span> <span class="mi">0</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="mold">mold</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">mold</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">mold</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#take">take</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">mold</span></code> is provided for backward compatibility with earlier
versions of Nial. The current definition is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">take</span></code>. The
previous definition was a reshaping operation that was almost always
used on lists and <code class="language-nial highlighter-rouge"><span class="kp">take</span></code> has the same effect as the previous definition
on lists.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">mold</span> <span class="k">is</span> <span class="kp">take</span>
</code></pre></div></div>

<h2 id="next">next</h2>

<ul>
  <li>Class:<br />
<a href="#debugging-command">debugging command</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">next</span></code></li>
  <li>See Also:<br />
<a href="#debugging">debugging</a>, <a href="#break">break</a>, <a href="#resume">resume</a>,
<a href="#step">step</a>, <a href="#toend">toend</a>, <a href="#stepin">stepin</a></li>
</ul>

<p>The command <code class="language-nial highlighter-rouge"><span class="nv">next</span></code> is used in debugging a definition that has been
suspended using Break or &lt;Ctrl B&gt;. The effect of <code class="language-nial highlighter-rouge"><span class="nv">next</span></code> is to execute
the next expression in an expression sequence and to suspend execution
again. If the current expression involves a call on a defined operation
or expression, execution of the entire definition is completed and
execution is suspended on the expression after the current one. If the
current expression is the last one in the expression sequence where the
break began, the effect is the same as using <code class="language-nial highlighter-rouge"><span class="nv">resume</span></code>.</p>

<p>The related command <code class="language-nial highlighter-rouge"><span class="nv">nextv</span></code> displays the result of the expression
executed on a step before displaying the next expression.</p>

<h2 id="no_op">no_op</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">no_op</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#no-value">no_value</a>, <a href="#no-expr">no_expr</a>, <a href="#no-tr">no_tr</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">no_op</span></code> returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?missing_op</span></code> when applied to
any array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. It is the default value for an operation name declared to
be external or that has been erased.</p>

<h2 id="no_tr">no_tr</h2>

<ul>
  <li>Class:<br />
<a href="#system-transformer">system transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">no_tr</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#no-value">no_value</a>, <a href="#no-expr">no_expr</a>, <a href="#no-op">no_op</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">NO_TR</span></code> transforms any operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to an operation
that returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?missing_tr</span></code> when applied to any array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. It
is the default value for a transformer name declared to be external or
that has been erased.</p>

<h2 id="no_value">no_value</h2>

<ul>
  <li>Class:<br />
<a href="#system-constant">system constant</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="gr">?no_value</span></code></li>
  <li>See Also:<br />
<a href="#no-expr">no_expr</a>, <a href="#no-op">no_op</a>, <a href="#no-tr">no_tr</a></li>
</ul>

<p>The fault <code class="language-nial highlighter-rouge"><span class="gr">?no_value</span></code> is a special fault value used as the default value
of variables that have been declared external or that have been erased.</p>

<h2 id="not">not</h2>

<ul>
  <li>Class:<br />
<a href="#logic-operation">logic operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">not</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#and">and</a>, <a href="#or">or</a>, <a href="#true">true</a>, <a href="#false">false</a>,
<a href="#isboolean">isboolean</a>, <a href="#notin">notin</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">not</span></code> reverses the value of a boolean. It returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>
if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is any other
atom, the result is the logical fault <code class="language-nial highlighter-rouge"><span class="gr">?L</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">not</span> <span class="mb">l</span>
<span class="mb">o</span>
     <span class="kp">not</span> <span class="mb">lollo</span>
<span class="mb">olool</span>
     <span class="kp">not</span> <span class="mi">2</span> <span class="ss">"abc</span> <span class="mb">o</span>
<span class="gr">?L</span> <span class="gr">?L</span> <span class="mb">l</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">not</span> <span class="kp">not</span> <span class="kp">not</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">not</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">and</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">or</span> <span class="nb">EACH</span> <span class="kp">not</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">or</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">not</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="notin">notin</h2>

<ul>
  <li>Class:<br />
<a href="#search-operation">search operation</a></li>
  <li>Properties:<br />
binary, predicate</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">notin</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">notin</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#in">in</a>, <a href="#not">not</a>, <a href="#allin">allin</a>, <a href="#unequal">unequal</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">notin</span></code> returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and
returns <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if it is.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">notin</span> <span class="mi">56</span> <span class="mi">34</span> <span class="mi">23</span> <span class="mi">3</span> <span class="mi">57</span> <span class="mi">3</span>
<span class="mb">o</span>

     <span class="mi">4</span> <span class="mi">1</span> <span class="kp">notin</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mb">l</span>

     <span class="sc">`a</span> <span class="kp">notin</span> <span class="s1">'hello world'</span>
<span class="mb">l</span>

     <span class="sc">`a</span> <span class="kp">notin</span> <span class="ss">"apple</span>
<span class="mb">l</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">notin</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">not</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">in</span> <span class="nv">B</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">notin</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">notin</span> <span class="kp">list</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="numeric">numeric</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">numeric</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#type">type</a>, <a href="#isinteger">isinteger</a>, <a href="#isreal">isreal</a>,
<a href="#ischar">ischar</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">numeric</span></code> tests whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a numeric atom. It
returns <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a boolean atom, an integer atom or a real atom,
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">numeric</span> <span class="mf">3.5</span>
<span class="mb">l</span>
     <span class="kp">numeric</span> <span class="mb">l</span> <span class="mi">45</span> <span class="mf">3.78</span>
<span class="mb">o</span>
     <span class="kp">numeric</span> <span class="kc">Null</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<p>numeric IS OPERATION A {­ isboolean A or isinteger A or isreal A }</p>

<h2 id="open">open</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">open</span> <span class="nv">Filename</span> <span class="nv">Mode</span></code></li>
  <li>See Also:<br />
<a href="#close">close</a>, <a href="#readfile">readfile</a>, <a href="#writefile">writefile</a>,
<a href="#readarray">readarray</a>, <a href="#writearray">writearray</a>,
<a href="#readrecord">readrecord</a>, <a href="#writerecord">writerecord</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">open</span></code> prepares the host file named by the phrase or
string <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> for use in one of seven possible modes. <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code> is a
character, string or phrase encoding the mode as
follows:</p>

<table>
  <thead>
    <tr>
      <th>Mode</th>
      <th>Mode Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>r</td>
      <td>read</td>
      <td>existing sequential text file, read only</td>
    </tr>
    <tr>
      <td>w</td>
      <td>write</td>
      <td>create sequential text file, write only</td>
    </tr>
    <tr>
      <td>a</td>
      <td>append</td>
      <td>existing sequential text file, write only starting at the end</td>
    </tr>
    <tr>
      <td>d</td>
      <td>direct</td>
      <td>existing or new binary file, direct access for both read and write</td>
    </tr>
    <tr>
      <td>c</td>
      <td>communication</td>
      <td>existing or new sequential text file, for both read and write</td>
    </tr>
    <tr>
      <td>pr</td>
      <td>pipe read</td>
      <td>output from the command Filename is available</td>
    </tr>
    <tr>
      <td>pw</td>
      <td>pipe write</td>
      <td>input to the command Filename is provided</td>
    </tr>
  </tbody>
</table>

<p>In <code class="language-nial highlighter-rouge"><span class="kp">read</span></code>, write, append or <code class="language-nial highlighter-rouge"><span class="nv">communication</span></code> modes, <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> must
include the file extension, if any. In direct mode, two host files are
opened, one with extension <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> and the other with extension <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code>,
standing for <code class="language-nial highlighter-rouge"><span class="nv">index</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">record</span></code>, respectively. In this mode,
<code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> is the root of the file name, without any extension.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="nv">communication</span></code> mode can be used with special forms of <code class="language-nial highlighter-rouge"><span class="kp">readfile</span></code>
and <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code> usage to access a special device or a communications
port. This mode is available only on the EXTDOS Version of Nial.</p>

<p>The pipe modes treat the <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> as a host command. The <code class="language-nial highlighter-rouge"><span class="kp">open</span></code> causes
the command to be executed. In <code class="language-nial highlighter-rouge"><span class="nv">pipe</span> <span class="kp">read</span></code>, the output from the command
is obtained using <code class="language-nial highlighter-rouge"><span class="kp">readfile</span></code>; in <code class="language-nial highlighter-rouge"><span class="nv">pipe</span> <span class="kp">write</span></code>, input to the command is
provided using <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code>.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">open</span></code> is a file designator, an integer specifying an
input/output port. This value is used in later references to the file.</p>

<p>The effect of <code class="language-nial highlighter-rouge"><span class="kp">open</span></code> may be system dependent. If the file exists and can
be opened by the user in the requested mode, the result will be the file
designator. If it cannot be opened or does not exist, the result will be
a fault message generated from the error message provided by the host
system. For portable programs, the specific fault message should not be
used in an equality test. The result of an open should be tested for a
fault value using <code class="language-nial highlighter-rouge"><span class="kp">isfault</span></code> to catch unexpected failures.</p>

<h2 id="opposite">opposite</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">opposite</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">opp</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#minus">minus</a>, <a href="#not">not</a>, <a href="#reciprocal">reciprocal</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">opposite</span></code> returns the opposite value of the integer or
real number <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The opposite value of a positive number A is the
corresponding negative value and vice versa. The operation produces the
following results when applied to atoms of the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>opposite of the corresponding integer</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>opposite integer</td>
    </tr>
    <tr>
      <td>real</td>
      <td>opposite real number</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<p>The name <code class="language-nial highlighter-rouge"><span class="kp">opp</span></code> is a synonym for <code class="language-nial highlighter-rouge"><span class="kp">opposite</span></code> used as an abbreviation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">opposite</span>  <span class="mb">l</span>  <span class="mi">-2</span>  <span class="mf">3.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??err</span>
<span class="mi">-1</span> <span class="mi">2</span> <span class="mf">-3.5</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?err</span>
</code></pre></div></div>

<p>In Nial, the symbol <code class="language-nial highlighter-rouge"><span class="o">-</span></code> is used as part of negative numbers and as a
synonym for <code class="language-nial highlighter-rouge"><span class="kp">minus</span></code>. Care must be taken to use a space after the symbol
before a constant to get the expected subtraction.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">opposite</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="mi">0</span> <span class="kp">minus</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">opposite</span> <span class="kp">opposite</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="o">-</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="o">+</span> <span class="kp">opposite</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="or">or</h2>

<ul>
  <li>Class:<br />
<a href="#logic-operation">logic operation</a></li>
  <li>Properties:<br />
multi pervasive, reductive</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">or</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">or</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#and">and</a>, <a href="#not">not</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">or</span></code> applies to a boolean array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and does the boolean
sum of its items. If any item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>, the result is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>;
otherwise it is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>. Used in binary form, it implements the usual
or-connective of logic. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a simple array but has a non-boolean
item, the result is the logical fault <code class="language-nial highlighter-rouge"><span class="gr">?L</span></code>. The operation extends to
non-simple arrays by the multi pervasive mechanism.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mb">l</span> <span class="kp">or</span> <span class="mb">o</span>
<span class="mb">l</span>

     <span class="kp">or</span> <span class="mb">oooolooo</span>
<span class="mb">l</span>

     <span class="mb">lloo</span> <span class="kp">or</span> <span class="mb">lolo</span>
<span class="mb">lllo</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kp">Or</span></code> is a reductive operation in that it reduces an array of booleans to
a single boolean. Applied to a pair of bitstrings, it produces a
bitstring resulting from applying or to the bits of its arguments in
corresponding positions.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">or</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">or</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">or</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">not</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="outer">outer</h2>

<ul>
  <li>Class:<br />
<a href="#applicative-transformer">applicative transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nb">OUTER</span> <span class="nv">f</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nb">OUTER</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#cart">cart</a>, <a href="#inner">inner</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">OUTER</span></code> transforms an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to an operation that
applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to each item of the cartesian product of its argument. In
the case where the arguments are a pair of lists <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the result
is a table of the applications of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> with every pair chosen with the
first item from <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and the second from <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="nb">OUTER</span> <span class="o">*</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="mi">2</span>  <span class="mi">4</span>  <span class="mi">6</span>  <span class="mi">8</span> <span class="mi">10</span>
<span class="mi">3</span>  <span class="mi">6</span>  <span class="mi">9</span> <span class="mi">12</span> <span class="mi">15</span>
<span class="mi">4</span>  <span class="mi">8</span> <span class="mi">12</span> <span class="mi">16</span> <span class="mi">20</span>
<span class="mi">5</span> <span class="mi">10</span> <span class="mi">15</span> <span class="mi">20</span> <span class="mi">25</span>

     <span class="mi">2</span> <span class="mi">3</span> <span class="nb">OUTER</span> <span class="kp">reshape</span> <span class="s1">'abcd'</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="nv">aa</span> <span class="o">|</span><span class="nv">bb</span> <span class="o">|</span><span class="nv">cc</span> <span class="o">|</span><span class="nv">dd</span> <span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="nv">aaa</span><span class="o">|</span><span class="nv">bbb</span><span class="o">|</span><span class="nv">ccc</span><span class="o">|</span><span class="nv">ddd</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
</code></pre></div></div>

<p>The first example shows <code class="language-nial highlighter-rouge"><span class="nb">OUTER</span> <span class="o">*</span></code> being used to generate a
multiplication table. The second shows that it can be applied to an
operation that has a non-atomic result.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">OUTER</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">cart</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">OUTER</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">and</span> <span class="nb">EACH</span> <span class="p">(</span><span class="kp">not</span> <span class="kp">empty</span><span class="p">)</span> <span class="nv">A</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="nb">OUTER</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">mix</span> <span class="p">(</span><span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="pack">pack</h2>

<ul>
  <li>Class:<br />
<a href="#data-rearrangement-operation">data rearrangement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">pack</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#eachall">eachall</a>, <a href="#eachboth">eachboth</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">pack</span></code> interchanges the top two levels of an array with
equally shaped items. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an array with items all of the same
shape, the result is an array of that shape, with items having the shape
that <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> does not have items of the same shape but all the
items that have zero items or more than one item are of the same shape,
it is modified by replicating the items with one item to that shape
before interchanging levels. Otherwise it returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?conform</span></code>.</p>

<p>The items of the result are the arrays of items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> from
corresponding positions. <code class="language-nial highlighter-rouge"><span class="kp">Pack</span></code> is used implicitly in all binary
pervasive and multi pervasive operations.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">pack</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">4</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
     <span class="kp">pack</span> <span class="s1">'ab'</span> <span class="s1">'cd'</span> <span class="s1">'ef'</span> <span class="s1">'gh'</span>
<span class="o">+----+----+</span>
<span class="o">|</span><span class="nv">aceg</span><span class="o">|</span><span class="nv">bdfh</span><span class="o">|</span>
<span class="o">+----+----+</span>
     <span class="kp">pack</span> <span class="p">(</span><span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">+---------+---------+---------+</span>
<span class="o">|+---+---+|+---+---+|+---+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">||</span>
<span class="o">|+---+---+|+---+---+|+---+---+|</span>
<span class="o">+---------+---------+---------+</span>
<span class="o">|+---+---+|+---+---+|+---+---+|</span>
<span class="o">||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">||</span>
<span class="o">|+---+---+|+---+---+|+---+---+|</span>
<span class="o">+---------+---------+---------+</span>

     <span class="kp">pack</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">5</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> <span class="s1">'abc'</span>
<span class="o">+-----------+-----------+-----------+</span>
<span class="o">|+-+-+---+-+|+-+-+---+-+|+-+-+---+-+|</span>
<span class="o">||</span><span class="mi">2</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="nv">a</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="nv">b</span><span class="o">|||</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="nv">c</span><span class="o">||</span>
<span class="o">|+-+-+---+-+|+-+-+---+-+|+-+-+---+-+|</span>
<span class="o">+-----------+-----------+-----------+</span>
</code></pre></div></div>

<p>The first example shows that <code class="language-nial highlighter-rouge"><span class="kp">pack</span></code> of a pair of triples is a triple of
pairs. The second shows that <code class="language-nial highlighter-rouge"><span class="kp">pack</span></code> of a quadruple of pairs is a pair of
quadruples. The third shows that <code class="language-nial highlighter-rouge"><span class="kp">pack</span></code> of a pair of 2 by 3 tables is a
2 by 3 table of pairs. The final example shows a case where replication
occurs. The first and last items have shape [3]. The second and third
items are an atom and a solitary and hence can be replicated.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">equal</span> <span class="nb">EACH</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">pack</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">pack</span> <span class="kp">pack</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">pack</span> <span class="nv">A</span>
   <span class="kp">pack</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">pack</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="kp">solitary</span> <span class="nv">A</span>
   <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">simple</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">pack</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="pair">pair</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">pair</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">pair</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#link">link</a>, <a href="#hitch">hitch</a>, <a href="#append">append</a>,
<a href="#reshape">reshape</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">pair</span></code> has no effect on a pair but converts all other
arrays to a pair by reshaping the array with shape 2. Used in infix
notation, it has the effect of forming a pair from the two arguments. An
explicit pair can also be achieved with list or strand notation. The
operation is useful in functional expressions where it is an argument to
a transformer.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">pair</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">+-+---+</span>
<span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+-+---+</span>
     <span class="kp">pair</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">3</span> <span class="mi">4</span>

     <span class="kp">pair</span> <span class="kp">single</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">+-----+-----+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+-----+-----+</span>
</code></pre></div></div>

<p>The major use of <code class="language-nial highlighter-rouge"><span class="kp">pair</span></code> is as an operation applied using a transformer.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">pair</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="mi">2</span> <span class="kp">reshape</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">pair</span> <span class="kp">pair</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">pair</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="nb">OUTER</span> <span class="kp">pair</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">cart</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="parse">parse</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">parse</span> <span class="nv">Tokenstream</span></code></li>
  <li>See Also:<br />
<a href="#scan">scan</a>, <a href="#deparse">deparse</a>, <a href="#descan">descan</a>,
<a href="#eval">eval</a>, <a href="#execute">execute</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">parse</span></code> carries out the internal parsing capability of the
interpreter. Its argument is a token stream produced by <code class="language-nial highlighter-rouge"><span class="kp">scan</span></code> or
<code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code>. The result is the parse tree recording the semantic intent of
the input. The parse tree is a highly encoded form of nested array
designed for efficient processing.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">parse</span> <span class="kp">scan</span> <span class="s1">'sum 23 45'</span>
<span class="o">+---+-----------------------------+</span>
<span class="o">|</span><span class="mi">100</span><span class="o">|+-+-----+-------------------+|</span>
<span class="o">|</span>   <span class="o">||</span><span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">3</span><span class="o">|+-+-------+-------+||</span>
<span class="o">|</span>   <span class="o">||</span> <span class="o">|</span>     <span class="o">||</span><span class="mi">8</span><span class="o">|</span><span class="mi">1</span> <span class="mi">23</span> <span class="mi">23</span><span class="o">|</span><span class="mi">1</span> <span class="mi">45</span> <span class="mi">45</span><span class="o">|||</span>
<span class="o">|</span>   <span class="o">||</span> <span class="o">|</span>     <span class="o">|+-+-------+-------+||</span>
<span class="o">|</span>   <span class="o">|+-+-----+-------------------+|</span>
<span class="o">+---+-----------------------------+</span>

     <span class="kp">parse</span> <span class="kp">scan</span> <span class="s1">'foo IS first'</span>
<span class="o">+---+-----------------------------+</span>
<span class="o">|</span><span class="mi">100</span><span class="o">|+--+---------------+------+-+|</span>
<span class="o">|</span>   <span class="o">||</span><span class="mi">11</span><span class="o">|+--+----------+|</span><span class="mi">3</span> <span class="mi">47</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span><span class="o">||</span>
<span class="o">|</span>   <span class="o">||</span>  <span class="o">||</span><span class="mi">22</span><span class="o">|</span><span class="mi">2</span> <span class="mi">160</span> <span class="mi">7459</span><span class="o">||</span>      <span class="o">|</span> <span class="o">||</span>
<span class="o">|</span>   <span class="o">||</span>  <span class="o">|+--+----------+|</span>      <span class="o">|</span> <span class="o">||</span>
<span class="o">|</span>   <span class="o">|+--+---------------+------+-+|</span>
<span class="o">+---+-----------------------------+</span>
</code></pre></div></div>

<p>The first example gives the parse tree corresponding to an application
of an operation to a strand of constants. The second example gives the
parse tree for the definition of <code class="language-nial highlighter-rouge"><span class="nv">foo</span></code> as the predefined operation
<code class="language-nial highlighter-rouge"><span class="kp">first</span></code>. The small integers that appear as the first items of the arrays
serve as tags to indicate the kind of node that is represented in the
parse tree. They are used by the <code class="language-nial highlighter-rouge"><span class="kp">eval</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">deparse</span></code> operations. The
representation of parse trees is implementation dependent and is not
intended for program manipulation.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">Ts</span> <span class="nv">a</span> <span class="nv">token</span> <span class="nv">stream</span> <span class="o">==&gt;</span> <span class="kp">parse</span> <span class="kp">deparse</span> <span class="kp">parse</span> <span class="nv">Ts</span> <span class="o">=</span> <span class="kp">parse</span> <span class="nv">Ts</span>
   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="o">==&gt;</span> <span class="kp">eval</span> <span class="kp">parse</span> <span class="kp">scan</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">execute</span> <span class="nv">S</span>
</code></pre></div></div>

<h2 id="partition">partition</h2>

<ul>
  <li>Class:<br />
<a href="#apply-by-partition-transformer">apply-by-partition transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span><span class="p">,</span><span class="nv">J</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="nv">f</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">I</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#rank">rank</a>, <a href="#split">split</a>, <a href="#blend">blend</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">PARTITION</span></code> is used to apply operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to partitions
of the array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, placing the results of the applications as partitions
of the result array.</p>

<p>The partitions of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are determined by the axis numbers in <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>, using (
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">split</span> <span class="nv">A</span></code>) to form them implicitly. The results of applying <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>,
viewed as an intermediate array <code class="language-nial highlighter-rouge"><span class="nv">R</span></code>, are combined into the final result,
using ( <code class="language-nial highlighter-rouge"><span class="nv">J</span> <span class="kp">blend</span> <span class="nv">R</span></code>), to place the axes of the items of <code class="language-nial highlighter-rouge"><span class="nv">R</span></code> into the
final result. If the left argument is a solitary, it is assumed to be
used as the argument to both <code class="language-nial highlighter-rouge"><span class="kp">split</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">blend</span></code> implicitly.</p>

<p>For a table <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, I = 1, f being <code class="language-nial highlighter-rouge"><span class="kp">reverse</span></code>, the effect is to reverse the
rows of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. In general, if <code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="o">=</span> <span class="nv">J</span></code> and is a single axis number and <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>
maps a list to one of the same length, the effect is to apply <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the
lists formed by pushing axis <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> down, resulting in an array of the same
shape as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. Two dimensional partitions of a three dimensional array
can be mapped using an <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> with tally 2.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="kp">reverse</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">5</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">15</span><span class="p">)</span>
 <span class="mi">5</span>  <span class="mi">4</span>  <span class="mi">3</span>  <span class="mi">2</span>  <span class="mi">1</span>
<span class="mi">10</span>  <span class="mi">9</span>  <span class="mi">8</span>  <span class="mi">7</span>  <span class="mi">6</span>
<span class="mi">15</span> <span class="mi">14</span> <span class="mi">13</span> <span class="mi">12</span> <span class="mi">11</span>

     <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="p">(</span><span class="mi">2</span> <span class="kp">rotate</span><span class="p">)</span> <span class="p">(</span><span class="mi">6</span> <span class="mi">6</span> <span class="kp">reshape</span> <span class="kp">tell</span> <span class="mi">36</span><span class="p">)</span>
<span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span>
<span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span>
<span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">28</span> <span class="mi">29</span>
<span class="mi">30</span> <span class="mi">31</span> <span class="mi">32</span> <span class="mi">33</span> <span class="mi">34</span> <span class="mi">35</span>
 <span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>
 <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span>

     <span class="kp">setformat</span> <span class="s1">'%4.2f'</span><span class="p">;</span>
     <span class="kp">seed</span> <span class="o">.</span><span class="mi">5</span> <span class="p">;</span> <span class="nv">A</span><span class="p">:=</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">random</span> <span class="mi">18</span>
<span class="mf">0.50</span> <span class="mf">0.43</span> <span class="mf">0.12</span>   <span class="mf">0.03</span> <span class="mf">0.81</span> <span class="mf">0.24</span>
<span class="mf">0.77</span> <span class="mf">0.73</span> <span class="mf">0.89</span>   <span class="mf">0.58</span> <span class="mf">0.98</span> <span class="mf">0.47</span>
<span class="mf">0.98</span> <span class="mf">0.66</span> <span class="mf">0.16</span>   <span class="mf">0.24</span> <span class="mf">0.16</span> <span class="mf">0.50</span>
     <span class="nv">B</span> <span class="k">gets</span> <span class="mi">1</span> <span class="mi">2</span> <span class="kp">split</span> <span class="nv">A</span>
<span class="o">+--------------+--------------+</span>
<span class="o">|</span><span class="mf">0.50</span> <span class="mf">0.43</span> <span class="mf">0.12</span><span class="o">|</span><span class="mf">0.03</span> <span class="mf">0.81</span> <span class="mf">0.24</span><span class="o">|</span>
<span class="o">|</span><span class="mf">0.77</span> <span class="mf">0.73</span> <span class="mf">0.89</span><span class="o">|</span><span class="mf">0.58</span> <span class="mf">0.98</span> <span class="mf">0.47</span><span class="o">|</span>
<span class="o">|</span><span class="mf">0.98</span> <span class="mf">0.66</span> <span class="mf">0.16</span><span class="o">|</span><span class="mf">0.24</span> <span class="mf">0.16</span> <span class="mf">0.50</span><span class="o">|</span>
<span class="o">+--------------+--------------+</span>
     <span class="nv">C</span> <span class="k">gets</span> <span class="nb">EACH</span> <span class="kp">inverse</span> <span class="nv">B</span>
<span class="o">+-----------------+-----------------+</span>
<span class="o">|</span><span class="mf">-7.43</span>  <span class="mf">0.18</span>  <span class="mf">4.69</span><span class="o">|</span><span class="mf">-2.51</span>  <span class="mf">2.21</span> <span class="mf">-0.90</span><span class="o">|</span>
<span class="o">|</span><span class="mf">11.78</span> <span class="mf">-0.62</span> <span class="mf">-5.55</span><span class="o">|</span> <span class="mf">1.09</span>  <span class="mf">0.25</span> <span class="mf">-0.76</span><span class="o">|</span>
<span class="o">|</span><span class="mf">-3.27</span>  <span class="mf">1.48</span>  <span class="mf">0.51</span><span class="o">|</span> <span class="mf">0.83</span> <span class="mf">-1.13</span>  <span class="mf">2.69</span><span class="o">|</span>
<span class="o">+-----------------+-----------------+</span>
     <span class="mi">1</span> <span class="mi">2</span> <span class="kp">blend</span> <span class="nv">C</span>
<span class="mf">-7.43</span>  <span class="mf">0.18</span>  <span class="mf">4.69</span>   <span class="mf">-2.51</span>  <span class="mf">2.21</span> <span class="mf">-0.90</span>
<span class="mf">11.78</span> <span class="mf">-0.62</span> <span class="mf">-5.55</span>    <span class="mf">1.09</span>  <span class="mf">0.25</span> <span class="mf">-0.76</span>
<span class="mf">-3.27</span>  <span class="mf">1.48</span>  <span class="mf">0.51</span>    <span class="mf">0.83</span> <span class="mf">-1.13</span>  <span class="mf">2.69</span>
     <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="kp">inverse</span> <span class="nv">A</span>
<span class="mf">-7.43</span>  <span class="mf">0.18</span>  <span class="mf">4.69</span>   <span class="mf">-2.51</span>  <span class="mf">2.21</span> <span class="mf">-0.90</span>
<span class="mf">11.78</span> <span class="mf">-0.62</span> <span class="mf">-5.55</span>    <span class="mf">1.09</span>  <span class="mf">0.25</span> <span class="mf">-0.76</span>
<span class="mf">-3.27</span>  <span class="mf">1.48</span>  <span class="mf">0.51</span>    <span class="mf">0.83</span> <span class="mf">-1.13</span>  <span class="mf">2.69</span>
</code></pre></div></div>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">RANK</span></code> is a simpler version of a partitioning
transformer that always pushes down the right end axes.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">PARTITION</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">Ij</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
   <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">Ij</span> <span class="kp">or</span> <span class="p">(</span><span class="kp">tally</span> <span class="nv">Ij</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">THEN</span>
      <span class="kp">fault</span> <span class="s1">'invalid left arg of PARTITION transform'</span>
   <span class="k">ELSEIF</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="k">THEN</span>
      <span class="nv">A</span>
   <span class="k">ELSE</span>
      <span class="k">IF</span> <span class="kp">tally</span> <span class="nv">Ij</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span>
         <span class="nv">I</span> <span class="p">:=</span> <span class="nv">J</span> <span class="p">:=</span> <span class="kp">first</span> <span class="nv">Ij</span><span class="p">;</span>
      <span class="k">ELSEIF</span> <span class="kp">tally</span> <span class="nv">Ij</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">THEN</span>
         <span class="nv">I</span> <span class="nv">J</span> <span class="p">:=</span> <span class="nv">Ij</span><span class="p">;</span>
      <span class="k">ENDIF</span><span class="p">;</span>
      <span class="nv">II</span> <span class="k">gets</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">except</span> <span class="nv">I</span> <span class="kp">link</span> <span class="nv">I</span><span class="p">;</span>
      <span class="nv">B</span> <span class="p">:=</span> <span class="kp">tally</span> <span class="nv">I</span> <span class="nb">RANK</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">II</span> <span class="kp">fuse</span> <span class="nv">A</span><span class="p">);</span>
      <span class="k">IF</span> <span class="nv">J</span> <span class="o">=</span> <span class="kc">Null</span> <span class="kp">and</span> <span class="p">(</span><span class="kp">shape</span> <span class="nv">B</span> <span class="o">=</span> <span class="kc">Null</span><span class="p">)</span> <span class="k">THEN</span>
         <span class="kp">first</span> <span class="nv">B</span>
      <span class="k">ELSEIF</span> <span class="kp">tally</span> <span class="nv">J</span> <span class="o">=</span> <span class="p">(</span><span class="kp">valence</span> <span class="nv">B</span> <span class="o">-</span> <span class="p">(</span><span class="kp">valence</span> <span class="nv">A</span> <span class="o">-</span> <span class="kp">tally</span> <span class="nv">I</span><span class="p">))</span> <span class="k">THEN</span>
         <span class="nv">JJ</span> <span class="k">gets</span> <span class="kp">axes</span> <span class="nv">B</span> <span class="kp">except</span> <span class="nv">J</span> <span class="kp">link</span> <span class="nv">J</span><span class="p">;</span>
         <span class="nb">GRADE</span> <span class="o">&lt;=</span> <span class="nv">JJ</span> <span class="kp">fuse</span> <span class="nv">B</span>
      <span class="k">ELSE</span>
         <span class="kp">fault</span> <span class="s1">'left arg incompatible with function in PARTITION transform'</span>
      <span class="k">ENDIF</span>
   <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">I</span> <span class="kp">split</span> <span class="nv">A</span> <span class="o">=</span> <span class="err">\</span><span class="p">[</span><span class="nv">I</span><span class="p">,</span><span class="kc">Null</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">blend</span> <span class="nv">A</span> <span class="o">=</span> <span class="err">\</span><span class="p">[</span><span class="kc">Null</span><span class="p">,</span><span class="nv">I</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="kp">first</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="err">\</span><span class="p">[</span><span class="kc">Null</span><span class="p">,</span><span class="kc">Null</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="p">(</span><span class="kp">single</span> <span class="nv">f</span> <span class="kp">first</span><span class="p">)</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="pass">pass</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">pass</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#list">list</a>, <a href="#reshape">reshape</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">pass</span></code> is the identity operation for arrays. It returns
the argument <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. <code class="language-nial highlighter-rouge"><span class="kp">Pass</span></code> is used when expressing computations in a
functional style using an atlas (a list of operations).</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">pass</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
     <span class="kp">pass</span> <span class="s1">'hello world'</span>
<span class="nv">hello</span> <span class="nv">world</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">pass</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">pass</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">first</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">pass</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">first</span> <span class="kp">solitary</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="paste">paste</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">Sw</span> <span class="kp">paste</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#picture">picture</a>, <a href="#sketch">sketch</a>, <a href="#diagram">diagram</a>,
<a href="#positions">positions</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">paste</span></code> combines character tables in a two dimensional
layout. It is used internally by <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> and can be used to create
modifications of the standard picture output to improve the display of
results. The left argument <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> has six parameters that control the
layout and the right argument <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the array of tables to be combined.
The components of argument <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> are the
following:</p>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Vertical edge spacing</td>
      <td>an integer indicating the number of blank lines to be put between the rows of items</td>
    </tr>
    <tr>
      <td>Horizontal edge spacing</td>
      <td>an integer indicating the number of blank spaces to be put between the columns of items</td>
    </tr>
    <tr>
      <td>Vertical line indicator</td>
      <td>If the value is 1, vertical lines are drawn between columns. If it is 0, they are not</td>
    </tr>
    <tr>
      <td>Horizontal line indicator</td>
      <td>If the value is 1, horizontal lines are drawn between rows. If it is 0, they are not</td>
    </tr>
    <tr>
      <td>Vertical justification indicator</td>
      <td>This is either a single integer indicating the same justification for all fields or an array of integers of the same shape as A indicating the justification for each item of A. The codes are: 0 for top justification, 1 for centered and 2 for bottom justification</td>
    </tr>
    <tr>
      <td>Horizontal justification indicator</td>
      <td>This is either a single integer indicating the same justification for all fields, or an array of integers of the same shape as A indicating the justification for each item of A. The codes are: 0 for left justification, 1 for centered and 2 for right justification</td>
    </tr>
  </tbody>
</table>

<p>If either line indicator is 1, the entire result is
boxed.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">1</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">1</span> <span class="kp">paste</span> <span class="nb">EACH</span> <span class="kp">sketch</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="s1">'some'</span> <span class="s1">'words'</span> <span class="s1">'of'</span> <span class="s1">'wisdom'</span><span class="p">)</span>
<span class="o">+--------+---------+------+----------+</span>
<span class="o">|</span>        <span class="o">|</span>         <span class="o">|</span>      <span class="o">|</span>          <span class="o">|</span>
<span class="o">|</span>  <span class="nv">some</span>  <span class="o">|</span>  <span class="nv">words</span>  <span class="o">|</span>  <span class="nv">of</span>  <span class="o">|</span>  <span class="nv">wisdom</span>  <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span>         <span class="o">|</span>      <span class="o">|</span>          <span class="o">|</span>
<span class="o">+--------+---------+------+----------+</span>
<span class="o">|</span>        <span class="o">|</span>         <span class="o">|</span>      <span class="o">|</span>          <span class="o">|</span>
<span class="o">|</span>  <span class="nv">some</span>  <span class="o">|</span>  <span class="nv">words</span>  <span class="o">|</span>  <span class="nv">of</span>  <span class="o">|</span>  <span class="nv">wisdom</span>  <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span>         <span class="o">|</span>      <span class="o">|</span>          <span class="o">|</span>
<span class="o">+--------+---------+------+----------+</span>
</code></pre></div></div>

<h2 id="phrase">phrase</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">phrase</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#string">string</a>, <a href="#fault">fault</a>, <a href="#tonumber">tonumber</a>,
<a href="#isphrase">isphrase</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">phrase</span></code> converts a string into a phrase with the same
content. It returns phrases and faults unchanged and converts other
atoms after coercing them to their string equivalents. The resulting
phrase may contain blanks. There is a one-to-one correspondence between
phrases and strings.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">phrase</span> <span class="s1">'(613) 549-2222'</span>
<span class="p">(</span><span class="mi">613</span><span class="p">)</span> <span class="mi">549-2222</span>

     <span class="kp">set</span> <span class="ss">"decor</span> <span class="p">;</span> <span class="nb">EACH</span> <span class="kp">phrase</span> <span class="mb">o</span> <span class="mi">613</span> <span class="mf">3.5</span> <span class="sc">`A</span> <span class="s1">'Now'</span> <span class="ss">"Wow</span> <span class="gr">?error</span>
<span class="ss">"o</span> <span class="ss">"613</span> <span class="ss">"3.5</span> <span class="ss">"A</span> <span class="ss">"Now</span> <span class="ss">"Wow</span> <span class="ss">"error</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">isphrase</span> <span class="nv">P</span> <span class="o">==&gt;</span> <span class="kp">phrase</span> <span class="kp">string</span> <span class="nv">P</span> <span class="o">=</span> <span class="nv">P</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The correspondence between phrases and strings is not complete in that
phrase cannot hold a null character (representation 0) and attempting to
build such a phrase using the operation <code class="language-nial highlighter-rouge"><span class="kp">phrase</span></code> will result in a
truncated phrase.</p>

<h2 id="pick">pick</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">pick</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#choose">choose</a>, <a href="#take">take</a>, <a href="#first">first</a>,
<a href="#address">address</a></li>
</ul>

<p><code class="language-nial highlighter-rouge"><span class="kp">Pick</span></code> is the fundamental selection operation for arrays. The normal use
is that <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is an address for <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The result is the item that is
located at address <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> in 0-origin addressing. If <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is a solitary
integer and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a list, <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is converted to an integer to make it an
address for a list. If <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is not a valid address for <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the result is
the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">pick</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">23</span> <span class="mi">46</span> <span class="mi">57</span> <span class="mi">25</span>
<span class="mi">46</span>

     <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="kp">pick</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">23</span> <span class="mi">46</span> <span class="mi">57</span> <span class="mi">25</span>
<span class="mi">46</span>

     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="ss">"a</span> <span class="ss">"list</span> <span class="ss">"of</span> <span class="ss">"words</span> <span class="ss">"as</span> <span class="ss">"phrases</span>
<span class="nv">a</span>     <span class="kp">list</span> <span class="nv">of</span>
<span class="nv">words</span> <span class="nv">as</span>   <span class="nv">phrases</span>

     <span class="mi">0</span> <span class="mi">2</span> <span class="kp">pick</span> <span class="nv">A</span>
<span class="nv">of</span>

     <span class="mi">5</span> <span class="mi">5</span> <span class="kp">pick</span> <span class="nv">A</span>
<span class="gr">?address</span>
</code></pre></div></div>

<p>In the first example, <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> selects the fourth item because of 0-origin
indexing. In the second example, [3] is not an address of the list
(its addresses are integers) but it is converted to integer 3. Thus, a
solitary integer can be used as an address of a list for <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code>. The
third example shows that an address for a table is a pair of integers.
The last example shows that picking out of range returns a fault.</p>

<p>The concept of picking closely corresponds to subscript notation in
mathematics. Q’Nial supports a direct notation for subscripting a
variable: <code class="language-nial highlighter-rouge"><span class="nv">Var</span><span class="o">@</span><span class="nv">I</span></code>. This notation, called the <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">notation</span></code>, can be used
on both the left and right of an assignment expression. Its use on the
right is equivalent to <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">(</span><span class="kp">list</span> <span class="nv">I</span><span class="p">)</span> <span class="kp">pick</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">I</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="p">(</span><span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span><span class="p">)</span>
   <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="kp">pick</span> <span class="nv">B</span>
   <span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span> <span class="o">=</span> <span class="err">\</span><span class="p">[</span><span class="nv">I</span><span class="p">]</span> <span class="kp">reach</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="picture">picture</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">picture</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sketch">sketch</a>, <a href="#diagram">diagram</a>, <a href="#display">display</a>,
<a href="#paste">paste</a>, <a href="#positions">positions</a>, <a href="#set">set</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> computes a character table that describes the
array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>An atom is displayed directly. A nonatomic array is displayed as a
tableau of rows and columns arranged to allow sufficient space for the
largest items. In most cases, the items of the array are displayed
within a frame diagram.</p>

<p>The operation is affected by the setting of two internal switches:
<code class="language-nial highlighter-rouge"><span class="kp">diagram</span><span class="o">/</span><span class="kp">sketch</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">decor</span><span class="o">/</span><span class="nv">nodecor</span></code>. The first controls the use of
frames in the pictures. The second controls the decoration of atoms,
solitaries, strings and empty arrays.</p>

<p>In <code class="language-nial highlighter-rouge"><span class="kp">diagram</span></code> mode, a nonatomic array is displayed with a frame and the
upper left corner has an <code class="language-nial highlighter-rouge"><span class="mb">o</span></code> if it is a single. In sketch mode, a simple
array, one having atomic items, is displayed without a frame. A
non-simple array has a frame and a nonatomic single has an <code class="language-nial highlighter-rouge"><span class="mb">o</span></code> in the
upper left corner of the frame.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="nv">decor</span><span class="o">/</span><span class="nv">nodecor</span></code> switch pictures atoms in an undecorated manner if
nodecor mode is set. If sketch mode is also set, strings and phrases
appear the same. The decor mode pictures atoms so that they can be
distinguished: characters are preceded by a grave symbol <code class="language-nial highlighter-rouge"><span class="err">`</span></code>,
phrases by a double quote <code class="language-nial highlighter-rouge"><span class="ss">"</span></code> and faults by a question mark <code class="language-nial highlighter-rouge"><span class="gr">?</span></code>. In
sketch mode with decor set, a string is enclosed in quotes and a simple
solitary is placed in brackets.</p>

<p>In sketch mode an empty array has an empty picture, whereas in diagram
mode, the picture of an empty array is one side of a frame diagram, with
no items.</p>

<p>An array of dimensionality higher than two is laid out as an arrangement
of tables. If the array has valence 3, the tables are arranged
horizontally. If it has valence 4, the first axis is placed down the
page and the second axis across the page. Thus, an array of shape 3 4 5
6 is pictured as 3 rows of 4 tables each of which is a 5 by 6 tableau. A
space is left between each of the tables. For higher dimensions, the
axes continue to alternate across and down the page with greater spacing
between arrangements.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> coincides with the output displayed by Q’Nial in
the top level loop.</p>

<p>In the top level loop, the picture is wrapped around as a whole if it is
too wide to fit on the screen.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"sketch</span><span class="p">;</span> <span class="kp">set</span> <span class="ss">"nodecor</span><span class="p">;</span>
     <span class="nv">P</span> <span class="p">:=</span> <span class="kp">picture</span> <span class="mb">l</span> <span class="mi">1</span> <span class="mi">7</span> <span class="mf">7.0</span> <span class="sc">`a</span> <span class="ss">"a</span> <span class="s1">'a'</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="kc">Null</span>
<span class="o">+-+-+-+--+-+-+-+-----++</span>
<span class="o">|</span><span class="mb">l</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span><span class="mf">7.</span><span class="o">|</span><span class="nv">a</span><span class="o">|</span><span class="nv">a</span><span class="o">|</span><span class="nv">a</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">||</span>
<span class="o">+-+-+-+--+-+-+-+-----++</span>

     <span class="kp">set</span> <span class="ss">"diagram</span><span class="p">;</span> <span class="kp">set</span> <span class="ss">"nodecor</span><span class="p">;</span> <span class="nv">P</span>
<span class="o">+-+-+-+--+-+-+---+-------+-+</span>
<span class="o">|</span><span class="mb">l</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span><span class="mf">7.</span><span class="o">|</span><span class="nv">a</span><span class="o">|</span><span class="nv">a</span><span class="o">|+-+|+-+-+-+|+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>  <span class="o">|</span> <span class="o">|</span> <span class="o">||</span><span class="nv">a</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">||||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>  <span class="o">|</span> <span class="o">|</span> <span class="o">|+-+|+-+-+-+|+|</span>
<span class="o">+-+-+-+--+-+-+---+-------+-+</span>

     <span class="kp">set</span> <span class="ss">"sketch</span><span class="p">;</span> <span class="kp">set</span> <span class="ss">"decor</span><span class="p">;</span> <span class="nv">P</span>
<span class="o">+-+-+-+--+--+--+---+-----++</span>
<span class="o">|</span><span class="mb">l</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span><span class="mf">7.</span><span class="o">|</span><span class="sc">`a</span><span class="o">|</span><span class="ss">"a|'a'|3</span> <span class="mi">4</span> <span class="mi">5</span><span class="o">||</span>
<span class="o">+-+-+-+--+--+--+---+-----++</span>

     <span class="kp">set</span> <span class="ss">"diagram</span><span class="p">;</span> <span class="kp">set</span> <span class="ss">"decor</span><span class="p">;</span> <span class="nv">P</span>
<span class="o">+-+-+-+--+--+--+----+-------+-+</span>
<span class="o">|</span><span class="mb">l</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span><span class="mi">7</span><span class="o">|</span><span class="mf">7.</span><span class="o">|</span><span class="sc">`a</span><span class="o">|</span><span class="ss">"a|+--+|+-+-+-+|+|</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">||</span><span class="sc">`a</span><span class="o">|||</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span><span class="o">|</span><span class="mi">5</span><span class="o">||||</span>
<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|+--+|+-+-+-+|+|</span>
<span class="o">+-+-+-+--+--+--+----+-------+-+</span>

     <span class="kp">set</span> <span class="ss">"diagram</span><span class="p">;</span> <span class="kp">set</span> <span class="ss">"decor</span><span class="p">;</span>
     <span class="kp">picture</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">+--+--+--+--+--+--+--+</span>
<span class="o">|</span><span class="sc">`+</span><span class="o">|</span><span class="sc">`-</span><span class="o">|</span><span class="sc">`+</span><span class="o">|</span><span class="sc">`-</span><span class="o">|</span><span class="sc">`+</span><span class="o">|</span><span class="sc">`-</span><span class="o">|</span><span class="sc">`+</span><span class="o">|</span>
<span class="o">+--+--+--+--+--+--+--+</span>
<span class="o">|</span><span class="sc">`|</span><span class="o">|</span><span class="sc">`3</span><span class="o">|</span><span class="sc">`|</span><span class="o">|</span><span class="sc">`4</span><span class="o">|</span><span class="sc">`|</span><span class="o">|</span><span class="sc">`5</span><span class="o">|</span><span class="sc">`|</span><span class="o">|</span>
<span class="o">+--+--+--+--+--+--+--+</span>
<span class="o">|</span><span class="sc">`+</span><span class="o">|</span><span class="sc">`-</span><span class="o">|</span><span class="sc">`+</span><span class="o">|</span><span class="sc">`-</span><span class="o">|</span><span class="sc">`+</span><span class="o">|</span><span class="sc">`-</span><span class="o">|</span><span class="sc">`+</span><span class="o">|</span>
<span class="o">+--+--+--+--+--+--+--+</span>
</code></pre></div></div>

<p>The first four examples illustrate the same array pictured with the four
combinations of the mode settings. The final example illustrates that if
the result of <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> is displayed at top level in diagram - decor
mode, the implicit use of <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> on the resulting character table
causes it to be decorated.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">write</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">writescreen</span> <span class="kp">picture</span> <span class="nv">A</span>
   <span class="kp">valence</span> <span class="kp">picture</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre></div></div>

<h2 id="place">place</h2>

<ul>
  <li>Class:<br />
<a href="#insertion-operation">insertion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">B</span> <span class="nv">I</span> <span class="kp">place</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">place</span> <span class="p">(</span><span class="nv">B</span> <span class="nv">I</span><span class="p">)</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#pick">pick</a>, <a href="#placeall">placeall</a>, <a href="#deepplace">deepplace</a>,
<a href="#update">update</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">place</span></code> is the fundamental insertion operation for arrays.
The normal use is that <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is the address where <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is to be placed in a
modified version of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The result is the modified array. If <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is a
solitary integer and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a list, <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is converted to an integer
before being used. If <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is not a valid address for <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the result is
the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="ss">"abc</span> <span class="mi">2</span> <span class="kp">place</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="nv">abc</span> <span class="mi">5</span> <span class="mi">6</span>
     <span class="kp">place</span> <span class="p">(</span><span class="sc">`_</span> <span class="mi">2</span><span class="p">)</span> <span class="s1">'my work'</span>
<span class="nv">my_work</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">27</span> <span class="mi">2</span> <span class="kp">place</span> <span class="nv">A</span><span class="p">;</span> <span class="nv">A</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">27</span> <span class="mi">7</span>
     <span class="mi">50</span> <span class="mi">100</span> <span class="kp">place</span> <span class="nv">A</span>
<span class="gr">?address</span>
</code></pre></div></div>

<p>The fourth example shows the use of <code class="language-nial highlighter-rouge"><span class="kp">place</span></code> in updating the value of a
variable <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The last example illustrates an out of range use of
<code class="language-nial highlighter-rouge"><span class="kp">place</span></code>.</p>

<p>Nial provides a simpler notation for updating a variable. <code class="language-nial highlighter-rouge"><span class="nv">A</span><span class="o">@</span><span class="nv">I</span></code>
(pronounced <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nv">at</span> <span class="nv">I</span></code>) can be used on the left of assignment to update
the item at location <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>. If the address is out of range a fault occurs.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span><span class="o">@</span><span class="mi">1</span> <span class="p">:=</span> <span class="mi">25</span>
<span class="mi">4</span> <span class="mi">25</span> <span class="mi">27</span> <span class="mi">7</span>
     <span class="nv">A</span><span class="o">@</span><span class="mi">5</span> <span class="p">:=</span> <span class="mi">7</span>
<span class="gr">?address</span>
     <span class="nv">A</span>
<span class="mi">4</span> <span class="mi">25</span> <span class="mi">27</span> <span class="mi">7</span>
</code></pre></div></div>

<p>The semantics of using the <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">notation</span></code> on the left in assignment can
be achieved using the operation <code class="language-nial highlighter-rouge"><span class="kp">update</span></code>. The <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">notation</span></code> and the
<code class="language-nial highlighter-rouge"><span class="kp">update</span></code> operation are usually more efficient than <code class="language-nial highlighter-rouge"><span class="kp">place</span></code> because they
avoid doing a copy of the right argument of <code class="language-nial highlighter-rouge"><span class="kp">place</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">pick</span> <span class="nv">A</span><span class="p">)</span> <span class="nv">I</span> <span class="kp">place</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">B</span> <span class="err">\</span><span class="p">[</span><span class="nv">I</span><span class="p">]</span> <span class="kp">deepplace</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span> <span class="nv">I</span> <span class="kp">place</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">in</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span><span class="kp">shape</span><span class="p">(</span><span class="nv">B</span> <span class="nv">I</span> <span class="kp">place</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="placeall">placeall</h2>

<ul>
  <li>Class:<br />
<a href="#insertion-operation">insertion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">B</span> <span class="nv">I</span> <span class="kp">placeall</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">placeall</span> <span class="p">(</span><span class="nv">B</span> <span class="nv">I</span><span class="p">)</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#place">place</a>, <a href="#deepplace">deepplace</a>, <a href="#updateall">updateall</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">placeall</span></code> generalizes the operation <code class="language-nial highlighter-rouge"><span class="kp">place</span></code> to modify a
collection of items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. It returns a modified version of array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
with the items at the addresses <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> replaced by the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. It
corresponds to the sequential use of <code class="language-nial highlighter-rouge"><span class="kp">place</span></code> with corresponding items
from <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>. If an item of <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is repeated, its last occurrence
will determine the effect on <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> has fewer items than <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>, its
items are used cyclically (the first item is used after the last and the
list repeated).</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="ss">"abc</span> <span class="ss">"def</span><span class="p">)</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="kp">placeall</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="nv">abc</span> <span class="nv">def</span> <span class="mi">6</span>

     <span class="nv">Text</span> <span class="p">:=</span> <span class="s1">'my work is fun'</span><span class="p">;</span>
     <span class="kp">placeall</span> <span class="p">(</span><span class="s1">'_'</span> <span class="p">(</span><span class="sc">` </span> <span class="kp">findall</span> <span class="nv">Text</span><span class="p">))</span> <span class="nv">Text</span>
<span class="nv">my_work_is_fun</span>

     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="p">;</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="p">(</span><span class="mi">27</span> <span class="mi">28</span><span class="p">)</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">2</span><span class="p">)</span> <span class="kp">placeall</span> <span class="nv">A</span><span class="p">;</span> <span class="nv">A</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">28</span> <span class="mi">27</span>
</code></pre></div></div>

<p>The last example shows the use of <code class="language-nial highlighter-rouge"><span class="kp">placeall</span></code> to update the value of a
variable <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>Q’Nial provides a simpler notation for updating a variable at several
locations. The notation <code class="language-nial highlighter-rouge"><span class="nv">A</span><span class="o">#</span><span class="nv">I</span></code> (pronounced <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nv">at</span> <span class="nv">all</span> <span class="nv">I</span></code>) can be used on
the left of assignment to indicate the update of the items at the
addresses given by <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>. If an item of <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is out of range, the result is
a fault but the variable is modified by the assignments done to
locations that precede the invalid one.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span><span class="o">#</span><span class="p">(</span><span class="mi">0</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:=</span> <span class="mi">25</span> <span class="mi">26</span>
<span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">7</span>
     <span class="nv">A</span><span class="o">#</span><span class="p">(</span><span class="mi">2</span> <span class="mi">100</span><span class="p">)</span> <span class="p">:=</span> <span class="mi">50</span> <span class="mi">51</span>
<span class="gr">?addresses</span>
     <span class="nv">A</span>
<span class="mi">25</span> <span class="mi">26</span> <span class="mi">50</span> <span class="mi">7</span>
</code></pre></div></div>

<p>The semantics of using the <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">all</span></code> notation on the left in assignment
can be achieved using the operation updateall.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">all</span></code> notation and the <code class="language-nial highlighter-rouge"><span class="kp">updateall</span></code> operation are usually more
efficient than <code class="language-nial highlighter-rouge"><span class="kp">placeall</span></code> as they avoid doing a copy of the entire right
argument of <code class="language-nial highlighter-rouge"><span class="kp">placeall</span></code>.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Placeall</span></code> is not the same as <code class="language-nial highlighter-rouge"><span class="p">(</span><span class="kp">pack</span> <span class="nv">B</span> <span class="nv">I</span><span class="p">)</span> <span class="nb">EACHBOTH</span> <span class="kp">place</span> <span class="nv">A</span></code>. The latter
results in an array of modifications of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, one for each item to be
replaced.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">I</span> <span class="kp">allin</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="nv">A</span><span class="p">)</span> <span class="nv">I</span> <span class="kp">placeall</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">I</span> <span class="kp">allin</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">B</span> <span class="nv">I</span> <span class="kp">placeall</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="plus">plus</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">plus</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">plus</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#sum">sum</a>, <a href="#minus">minus</a>, <a href="#mod">mod</a>, <a href="#opposite">opposite</a>,
<a href="#times">times</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">plus</span></code> is the same as <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code> except that <code class="language-nial highlighter-rouge"><span class="kp">plus</span></code> enforces
the rule that it must be applied to a pair.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Sum</span></code> is multi pervasive and can add up any number of items. The symbol</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">7</span> <span class="kp">plus</span> <span class="mi">9</span>
<span class="mi">16</span>

     <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="kp">plus</span> <span class="p">(</span><span class="mi">12</span> <span class="mi">22</span> <span class="mi">33</span><span class="p">)</span>
<span class="mi">14</span> <span class="mi">25</span> <span class="mi">37</span>

     <span class="kp">plus</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="gr">?plus</span> <span class="nv">expects</span> <span class="nv">a</span> <span class="kp">pair</span>
</code></pre></div></div>

<h2 id="positions">positions</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">positions</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sketch">sketch</a>, <a href="#diagram">diagram</a>, <a href="#picture">picture</a>,
<a href="#display">display</a>, <a href="#paste">paste</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">positions</span></code> is used in conjunction with <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> on
singles, lists or tables. For such arrays, it returns an array of the
same shape with the items being the addresses at which the pictures of
the corresponding items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> appear in the picture of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="k">gets</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="ss">"cat</span> <span class="s1">'fish'</span> <span class="mf">34.5</span> <span class="ss">"dog</span> <span class="s1">'meat'</span> <span class="mf">26.5</span>
<span class="o">+---+----+----+</span>
<span class="o">|</span><span class="nv">cat</span><span class="o">|</span><span class="nv">fish</span><span class="o">|</span><span class="mf">34.5</span><span class="o">|</span>
<span class="o">+---+----+----+</span>
<span class="o">|</span><span class="nv">dog</span><span class="o">|</span><span class="nv">meat</span><span class="o">|</span><span class="mf">26.5</span><span class="o">|</span>
<span class="o">+---+----+----+</span>

     <span class="kp">positions</span> <span class="nv">A</span>
<span class="o">+---+---+----+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">5</span><span class="o">|</span><span class="mi">1</span> <span class="mi">10</span><span class="o">|</span>
<span class="o">+---+---+----+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">1</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">10</span><span class="o">|</span>
<span class="o">+---+---+----+</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">positions</span></code> is useful in applications that do interactive
editing of data from its display on the screen.</p>

<h2 id="post">post</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">post</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reshape">reshape</a>, <a href="#list">list</a>, <a href="#pass">pass</a>, <a href="#cols">cols</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">post</span></code> restructures an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to be a table with one
column holding the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> in row major order.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">post</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>

     <span class="kp">post</span> <span class="s1">'Now is the time'</span>
          <span class="s1">'for all good men'</span>
          <span class="s1">'to come to the aid'</span>
          <span class="s1">'of the party'</span>
<span class="o">+------------------+</span>
<span class="o">|</span><span class="nv">Now</span> <span class="k">is</span> <span class="nv">the</span> <span class="kp">time</span>   <span class="o">|</span>
<span class="o">+------------------+</span>
<span class="o">|</span><span class="k">for</span> <span class="nv">all</span> <span class="nv">good</span> <span class="nv">men</span>  <span class="o">|</span>
<span class="o">+------------------+</span>
<span class="o">|</span><span class="nv">to</span> <span class="nv">come</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">aid</span><span class="o">|</span>
<span class="o">+------------------+</span>
<span class="o">|</span><span class="nv">of</span> <span class="nv">the</span> <span class="nv">party</span>      <span class="o">|</span>
<span class="o">+------------------+</span>
</code></pre></div></div>

<p>The major purpose of post is to restructure data for display.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">post</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span><span class="p">)</span> <span class="mi">1</span> <span class="kp">reshape</span> <span class="nv">A</span><span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">post</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span><span class="p">)</span> <span class="mi">1</span>
   <span class="kp">post</span> <span class="kp">post</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">post</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="power">power</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">power</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">power</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#binary-pervasive">binary pervasive</a>, <a href="#sqrt">sqrt</a>,
<a href="#divide">divide</a>, <a href="#ln">ln</a>, <a href="#exp">exp</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">power</span></code> returns the result of raising the number <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to
the power <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The result is an integer if both <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are boolean
or integer and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is non-negative. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is an integer, the power is
done by multiplication. Otherwise it uses <code class="language-nial highlighter-rouge"><span class="kp">exp</span> <span class="p">(</span><span class="nv">B</span> <span class="o">*</span> <span class="kp">ln</span> <span class="nv">A</span><span class="p">)</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>

     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="kp">power</span> <span class="nv">R</span>
     <span class="mi">1</span>        <span class="mi">1</span>        <span class="mf">1.</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
     <span class="mi">2</span>        <span class="mi">4</span>   <span class="mf">5.65685</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
   <span class="mf">2.5</span>     <span class="mf">6.25</span>   <span class="mf">9.88212</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>       <span class="gr">?A</span>        <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?A</span>      <span class="gr">?A</span>       <span class="gr">?A</span>        <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?error</span>  <span class="gr">?error</span>   <span class="gr">?error</span>    <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>

     <span class="mi">2</span> <span class="kp">power</span> <span class="mi">3</span>
<span class="mi">8</span>

     <span class="mi">2</span> <span class="kp">power</span> <span class="mi">-3</span>
<span class="mf">0.125</span>

     <span class="mi">16</span> <span class="kp">power</span> <span class="o">.</span><span class="mi">5</span>
<span class="mf">4.</span>
</code></pre></div></div>

<p>The examples show that <code class="language-nial highlighter-rouge"><span class="kp">power</span></code> has different meanings depending on the
right argument <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a positive integer, the result is <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
multiplied by itself <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> times. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a negative integer, the result
is the reciprocal of the result when <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is positive. The last case
illustrates that if <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is 0.5, the result is a real number that is a
square root of</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">isreal</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">power</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">exp</span> <span class="p">(</span><span class="nv">B</span> <span class="o">*</span> <span class="kp">ln</span> <span class="nv">A</span><span class="p">)</span>
   <span class="kp">sqrt</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">power</span> <span class="mf">0.5</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="product">product</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Properties:<br />
multi pervasive, reductive</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">product</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="o">*</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">product</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">*</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#times">times</a>, <a href="#divide">divide</a>, <a href="#sum">sum</a>, <a href="#plus">plus</a>,
<a href="#minus">minus</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">product</span></code> multiplies the items of a simple array of
numbers, reducing them to a single number that is their product. The
type of the result is the highest type of the items. The operation is
extended to non-simple arrays by the multi pervasive mechanism. The
symbol <code class="language-nial highlighter-rouge"><span class="o">*</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">prod</span></code> are synonyms for <code class="language-nial highlighter-rouge"><span class="kp">product</span></code>. The operation <code class="language-nial highlighter-rouge"><span class="kp">times</span></code>
is <code class="language-nial highlighter-rouge"><span class="kp">product</span></code> restricted to use on pairs.</p>

<p>For an empty array, the result is 1.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="nv">a</span> <span class="nv">abc</span> <span class="gr">?error</span>

     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="kp">product</span> <span class="nv">R</span>
     <span class="mi">1</span>       <span class="mi">2</span>      <span class="mf">2.5</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
     <span class="mi">2</span>       <span class="mi">4</span>       <span class="mf">5.</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
   <span class="mf">2.5</span>      <span class="mf">5.</span>     <span class="mf">6.25</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>       <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>       <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?error</span>   <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>

     <span class="kp">product</span> <span class="mf">3.</span> <span class="mf">45.</span> <span class="mf">23.</span> <span class="mf">18.</span> <span class="mf">3.5</span>
<span class="mf">195615.</span>

     <span class="kp">product</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)(</span><span class="mi">0</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">)(</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">24</span> <span class="mi">40</span>
</code></pre></div></div>

<p>The first example shows the result of <code class="language-nial highlighter-rouge"><span class="kp">product</span></code> on all combinations of
types of atoms. The last example shows that pervasive extension of
<code class="language-nial highlighter-rouge"><span class="kp">product</span></code> multiples a list of triples in an item by item fashion.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">product</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">product</span> <span class="nv">B</span>
   <span class="kp">product</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span><span class="p">(</span><span class="kp">product</span> <span class="kp">single</span><span class="p">)</span> <span class="nv">A</span>
   <span class="kp">product</span> <span class="nb">EACH</span> <span class="kp">product</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">product</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="kp">cart</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">product</span> <span class="nb">EACH</span> <span class="kp">tally</span> <span class="nv">A</span>
   <span class="kp">product</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">tally</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="profile">profile</h2>

<ul>
  <li>Class:<br />
<a href="#profiling-operation">profiling operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">profile</span> <span class="nv">Fnm</span></code></li>
  <li>See Also:<br />
<a href="#setprofile">setprofile</a>, <a href="#clearprofile">clearprofile</a>,
<a href="#profiletable">profiletable</a>, <a href="#profiletree">profiletree</a>,
<a href="#profiling">profiling</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">profile</span></code> is used to convert the profiling statistics into
a displayable form. If <code class="language-nial highlighter-rouge"><span class="nv">Fnm</span></code> is a file name, as a string or a phrase,
then the output is written to the file. If it is the empty string, then
the profiling information is displayed on the screen. If logging is on,
it will be copied to the log file. The gathering of profile statistics
must be turned off when <code class="language-nial highlighter-rouge"><span class="kp">profile</span></code> is called.</p>

<p>A detailed example of the output is given in the help entry on
profiling.</p>

<p>Examples of use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">profile</span> <span class="ss">"myprofl</span>

     <span class="kp">profile</span> <span class="s1">''</span>
</code></pre></div></div>

<h2 id="putfile">putfile</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">putfile</span> <span class="nv">Filename</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#getfile">getfile</a>, <a href="#appendfile">appendfile</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">putfile</span></code> writes the rows of items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as text records
to the file with name <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code>. It is used in conjunction with
<code class="language-nial highlighter-rouge"><span class="kp">getfile</span></code>. The file must not be open. Items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are arrays of
characters of any valence.</p>

<p>In the following example, three strings would be written to the file
Maillist.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">putfile</span> <span class="ss">"Maillist</span> <span class="p">[</span><span class="s1">'Now is the time'</span> <span class="s1">'for all good
men'</span><span class="p">,</span><span class="s1">'to come to the aid'</span><span class="p">]</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">putfile</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">File</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">not</span> <span class="kp">isfault</span> <span class="p">(</span><span class="nv">Filenum</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">File</span> <span class="ss">"w</span><span class="p">)</span> <span class="k">THEN</span>
           <span class="nb">ITERATE</span> <span class="p">(</span><span class="nv">Filenum</span> <span class="kp">writefile</span><span class="p">)</span> <span class="p">(</span><span class="kp">link</span> <span class="nb">EACH</span> <span class="kp">rows</span> <span class="nv">A</span><span class="p">)</span> <span class="p">;</span>
           <span class="kp">close</span> <span class="nv">Filenum</span> <span class="p">;</span>
        <span class="k">ELSE</span>
           <span class="nv">Filenum</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="quiet_fault">quiet_fault</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">quiet_fault</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#fault">fault</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">quiet_fault</span></code> is a version of operation <code class="language-nial highlighter-rouge"><span class="kp">fault</span></code> that turns
off fault triggering before producing the fault and restores the
triggering switch to its prior value after producing the fault.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">quiet_fault</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">Str</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Oldsetting</span> <span class="p">:=</span> <span class="kp">settrigger</span> <span class="mb">o</span><span class="p">;</span>
        <span class="nv">Res</span> <span class="p">:=</span> <span class="kp">fault</span> <span class="nv">Str</span><span class="p">;</span>
        <span class="kp">settrigger</span> <span class="nv">Oldsetting</span><span class="p">;</span>
        <span class="nv">Res</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="quotient">quotient</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">quotient</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">quotient</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#mod">mod</a>, <a href="#floor">floor</a>, <a href="#divide">divide</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">quotient</span></code> returns the quotient of dividing integer <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> by
integer <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If the divisor <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is zero, the result is zero. If it is
negative, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?negative</span> <span class="nv">divisor</span></code>. The operation
<code class="language-nial highlighter-rouge"><span class="kp">quotient</span></code> converts boolean arguments to integer but otherwise produces
a fault if either argument is not an integer.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span><span class="p">;</span>
     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="kp">quotient</span> <span class="nv">R</span>
     <span class="mi">1</span>       <span class="mi">0</span>  <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
     <span class="mi">2</span>       <span class="mi">1</span>  <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>

     <span class="p">(</span><span class="mi">5</span> <span class="kp">quotient</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="mi">-5</span> <span class="kp">quotient</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">2</span> <span class="mi">-3</span>

     <span class="p">(</span><span class="mi">5</span> <span class="kp">quotient</span> <span class="mi">-2</span><span class="p">)</span> <span class="p">(</span><span class="mi">5</span> <span class="kp">quotient</span> <span class="mi">0</span><span class="p">)</span>
<span class="gr">?negative</span> <span class="nv">divisor</span> <span class="mi">0</span>
</code></pre></div></div>

<p>The first example illustrates all combinations of atom types for the two
arguments to <code class="language-nial highlighter-rouge"><span class="kp">quotient</span></code>.</p>

<p>The quotient on division by a positive integer <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is always an integer
on the same side of the origin as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The result of <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">quotient</span> <span class="mi">0</span></code> is 0
rather than a fault since this rule is compatible with the choice that
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">mod</span> <span class="mi">0</span></code> is <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">quotient</span></code> is used in place of <code class="language-nial highlighter-rouge"><span class="kp">divide</span></code> in situations
where the result must be an integer.</p>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">isinteger</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">quotient</span> <span class="mi">0</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="kp">floor</span> <span class="p">(</span><span class="nv">A</span> <span class="o">-</span> <span class="p">(</span><span class="nv">B</span><span class="o">*</span><span class="p">(</span><span class="nv">A</span> <span class="kp">quotient</span> <span class="nv">B</span><span class="p">)))</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="nv">A</span> <span class="kp">mod</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="kp">quotient</span> <span class="nv">B</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span>  <span class="kp">floor</span> <span class="p">(</span><span class="nv">A</span> <span class="o">/</span> <span class="nv">B</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="raise">raise</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">N</span> <span class="kp">raise</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">raise</span> <span class="nv">N</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#split">split</a>, <a href="#rows">rows</a>, <a href="#cols">cols</a>, <a href="#mix">mix</a>,
<a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">raise</span></code> is used to partition an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> along its axes
by indicating that the first <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> axes are to be retained in the result.
The remaining axes become axes of the items of the result. <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> must be
an integer in the range from 0 to <code class="language-nial highlighter-rouge"><span class="kp">valence</span> <span class="nv">A</span></code>. The result is an array of
shape given by taking the first <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> items of <code class="language-nial highlighter-rouge"><span class="kp">shape</span> <span class="nv">A</span></code>. The items of the
result have the shape given by dropping the first <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> items of <code class="language-nial highlighter-rouge"><span class="kp">shape</span>
<span class="nv">A</span></code>. Thus, the <code class="language-nial highlighter-rouge"><span class="mi">2</span> <span class="kp">raise</span></code> of an array of shape 3 4 2 is a 3 by 4 table of
pairs. The <code class="language-nial highlighter-rouge"><span class="mi">1</span> <span class="kp">raise</span></code> of the same array is a triple of 4 by 2 tables.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="s1">'ABCDEFGHIJKLMNOPQRSTUVWX'</span>
<span class="nv">AB</span>  <span class="nv">IJ</span>  <span class="nv">QR</span>
<span class="nv">CD</span>  <span class="nv">KL</span>  <span class="nv">ST</span>
<span class="nv">EF</span>  <span class="nv">MN</span>  <span class="nv">UV</span>
<span class="nv">GH</span>  <span class="k">OP</span>  <span class="nv">WX</span>
     <span class="mi">2</span> <span class="kp">raise</span> <span class="nv">A</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">AB</span><span class="o">|</span><span class="nv">CD</span><span class="o">|</span><span class="nv">EF</span><span class="o">|</span><span class="nv">GH</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">IJ</span><span class="o">|</span><span class="nv">KL</span><span class="o">|</span><span class="nv">MN</span><span class="o">|</span><span class="k">OP</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">QR</span><span class="o">|</span><span class="nv">ST</span><span class="o">|</span><span class="nv">UV</span><span class="o">|</span><span class="nv">WX</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
     <span class="mi">1</span> <span class="kp">raise</span> <span class="nv">A</span>
<span class="o">+--+--+--+</span>
<span class="o">|</span><span class="nv">AB</span><span class="o">|</span><span class="nv">IJ</span><span class="o">|</span><span class="nv">QR</span><span class="o">|</span>
<span class="o">|</span><span class="nv">CD</span><span class="o">|</span><span class="nv">KL</span><span class="o">|</span><span class="nv">ST</span><span class="o">|</span>
<span class="o">|</span><span class="nv">EF</span><span class="o">|</span><span class="nv">MN</span><span class="o">|</span><span class="nv">UV</span><span class="o">|</span>
<span class="o">|</span><span class="nv">GH</span><span class="o">|</span><span class="k">OP</span><span class="o">|</span><span class="nv">WX</span><span class="o">|</span>
<span class="o">+--+--+--+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">raise</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nv">N</span> <span class="kp">drop</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">split</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">N</span> <span class="nv">a</span> <span class="nv">nonnegative</span> <span class="nv">integer</span> <span class="o">&lt;=</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">raise</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">N</span> <span class="kp">take</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="kp">first</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">raise</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">N</span> <span class="kp">drop</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">raise</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="random">random</h2>

<ul>
  <li>Class:<br />
<a href="#array-generation-operation">array generation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">random</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#seed">seed</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">random</span></code> is used to generate pseudo-random real numbers in
the range from 0. to 1. The argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> is a shape and <code class="language-nial highlighter-rouge"><span class="kp">random</span></code>
generates <code class="language-nial highlighter-rouge"><span class="kp">product</span> <span class="nv">S</span></code> numbers storing them in an array of shape <code class="language-nial highlighter-rouge"><span class="nv">S</span></code>.
<code class="language-nial highlighter-rouge"><span class="kp">Random</span></code> uses a congruential method with period 2147483647. The random
generator generates a sequence of integers using the formula: <code class="language-nial highlighter-rouge"><span class="nv">R</span>
<span class="p">:=</span> <span class="mi">16807</span> <span class="o">*</span> <span class="nv">R</span> <span class="kp">mod</span> <span class="mi">214783647</span></code> starting with R = 314159262. The result is
the real R/2147483647. The sequence can be initialized using the
operation <code class="language-nial highlighter-rouge"><span class="kp">seed</span></code> with an argument <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>, where <code class="language-nial highlighter-rouge"><span class="mf">0.</span> <span class="o">&lt;</span> <span class="nv">N</span> <span class="o">&lt;</span> <span class="mf">1.0</span></code>.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Seed</span></code> resets the random number generator to use `R = floor (R1</p>
<ul>
  <li>214783647.)`.</li>
</ul>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seed</span> <span class="mf">0.314159</span><span class="p">;</span> <span class="kp">random</span> <span class="mi">5</span>
<span class="mf">0.070</span> <span class="mf">0.743</span> <span class="mf">0.240</span> <span class="mf">0.627</span> <span class="mf">0.309</span>

     <span class="kp">floor</span> <span class="p">(</span> <span class="mf">100.</span> <span class="o">*</span> <span class="kp">random</span> <span class="mi">2</span> <span class="mi">5</span> <span class="p">)</span>
<span class="mi">98</span> <span class="mi">19</span> <span class="mi">94</span> <span class="mi">47</span> <span class="mi">36</span>
<span class="mi">88</span> <span class="mi">44</span> <span class="mi">47</span> <span class="mi">82</span> <span class="mi">38</span>
</code></pre></div></div>

<p>The first example shows the five random numbers generated after a seed
of 0.314159 is used. The second example illustrates how to use the
operation <code class="language-nial highlighter-rouge"><span class="kp">random</span></code> to generate 10 random integers between 0 and 99 and
store them in an array of shape 2 5.</p>

<h2 id="rank">rank</h2>

<ul>
  <li>Class:<br />
<a href="#apply-by-partition-transformer">apply-by-partition transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">N</span> <span class="nb">RANK</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#byrows">byrows</a>, <a href="#bycols">bycols</a>, <a href="#partition">partition</a>,
<a href="#raise">raise</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">RANK</span></code> applies an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to arrays formed from
the last <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> axes of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The results of the applications of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> must
all be the same shape and are combined to form a result array using
<code class="language-nial highlighter-rouge"><span class="kp">mix</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="nb">RANK</span> <span class="kp">reverse</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">60</span><span class="p">)</span>
<span class="mi">20</span> <span class="mi">19</span> <span class="mi">18</span> <span class="mi">17</span> <span class="mi">16</span>   <span class="mi">40</span> <span class="mi">39</span> <span class="mi">38</span> <span class="mi">37</span> <span class="mi">36</span>   <span class="mi">60</span> <span class="mi">59</span> <span class="mi">58</span> <span class="mi">57</span> <span class="mi">56</span>
<span class="mi">15</span> <span class="mi">14</span> <span class="mi">13</span> <span class="mi">12</span> <span class="mi">11</span>   <span class="mi">35</span> <span class="mi">34</span> <span class="mi">33</span> <span class="mi">32</span> <span class="mi">31</span>   <span class="mi">55</span> <span class="mi">54</span> <span class="mi">53</span> <span class="mi">52</span> <span class="mi">51</span>
<span class="mi">10</span>  <span class="mi">9</span>  <span class="mi">8</span>  <span class="mi">7</span>  <span class="mi">6</span>   <span class="mi">30</span> <span class="mi">29</span> <span class="mi">28</span> <span class="mi">27</span> <span class="mi">26</span>   <span class="mi">50</span> <span class="mi">49</span> <span class="mi">48</span> <span class="mi">47</span> <span class="mi">46</span>
 <span class="mi">5</span>  <span class="mi">4</span>  <span class="mi">3</span>  <span class="mi">2</span>  <span class="mi">1</span>   <span class="mi">25</span> <span class="mi">24</span> <span class="mi">23</span> <span class="mi">22</span> <span class="mi">21</span>   <span class="mi">45</span> <span class="mi">44</span> <span class="mi">43</span> <span class="mi">42</span> <span class="mi">41</span>

     <span class="mi">1</span> <span class="nb">RANK</span> <span class="kp">sum</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">12</span><span class="p">)</span>
<span class="mi">10</span> <span class="mi">26</span> <span class="mi">42</span>
</code></pre></div></div>

<p>The first example reverses the planes of the generated array. The second
example sums the rows of the generated matrix.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">RANK</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">N</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">mix</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">lower</span> <span class="nv">A</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="reach">reach</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">P</span> <span class="kp">reach</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">reach</span> <span class="nv">P</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#pick">pick</a>, <a href="#choose">choose</a>, <a href="#deepplace">deepplace</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">reach</span></code> is used to select an array at an arbitrary path
<code class="language-nial highlighter-rouge"><span class="nv">P</span></code> within the nested structure of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> is a list of addresses where
the first item of <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> selects an item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, the second selects an item
of that item, etc. If <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> is empty, the result is <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The operation is
implemented as an iterated <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> and hence the addresses in the path
are converted using first if they are solitary integers. If one of the
picks attempts a selection out of bounds, the result is fault <code class="language-nial highlighter-rouge"><span class="gr">?path</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="p">(</span><span class="kp">pack</span> <span class="s1">'ABCDEFGHIJKL'</span> <span class="s1">'1234567890ab'</span><span class="p">)</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">A1</span><span class="o">|</span><span class="nv">B2</span><span class="o">|</span><span class="nv">C3</span><span class="o">|</span><span class="nv">D4</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">E5</span><span class="o">|</span><span class="nv">F6</span><span class="o">|</span><span class="nv">G7</span><span class="o">|</span><span class="nv">H8</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>
<span class="o">|</span><span class="nv">I9</span><span class="o">|</span><span class="nv">J0</span><span class="o">|</span><span class="nv">Ka</span><span class="o">|</span><span class="nv">Lb</span><span class="o">|</span>
<span class="o">+--+--+--+--+</span>

     <span class="p">(</span><span class="mi">2</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">1</span> <span class="kp">reach</span> <span class="nv">A</span>
<span class="mi">9</span>
</code></pre></div></div>

<p>In the example, the path (2 0) 1 picks the item with address 1 of the
location with address 2 0.</p>

<p>Q’Nial supports a direct notation for doing a <code class="language-nial highlighter-rouge"><span class="kp">reach</span></code> into an array
associated with a variable: <code class="language-nial highlighter-rouge"><span class="nv">Var</span><span class="o">@@</span><span class="nv">I</span></code> (pronounced <code class="language-nial highlighter-rouge"><span class="nv">Var</span> <span class="nv">at</span> <span class="nv">path</span> <span class="nv">I</span></code>). The
<code class="language-nial highlighter-rouge"><span class="nv">at</span> <span class="nv">path</span></code> notation can be used on both the left and right of an
assignment expression.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">reach</span> <span class="k">IS</span> <span class="nv">P</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">P</span> <span class="k">THEN</span>
           <span class="nv">A</span>
        <span class="k">ELSE</span>
           <span class="kp">rest</span> <span class="nv">P</span> <span class="kp">reach</span> <span class="p">(</span><span class="kp">first</span> <span class="nv">P</span> <span class="kp">pick</span> <span class="nv">A</span><span class="p">)</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">P</span> <span class="kp">reach</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">(</span><span class="nb">EACH</span> <span class="kp">list</span> <span class="nv">P</span><span class="p">)</span> <span class="kp">reach</span> <span class="nv">A</span>
   <span class="nv">items</span> <span class="nv">of</span> <span class="nv">P</span> <span class="nv">are</span> <span class="nv">valid</span> <span class="nv">addresses</span> <span class="nv">where</span> <span class="nv">used</span> <span class="o">==&gt;</span> <span class="p">(</span><span class="nv">P</span> <span class="kp">reach</span> <span class="nv">A</span><span class="p">)</span> <span class="nv">P</span> <span class="kp">deepplace</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="read">read</h2>

<ul>
  <li>Class:<br />
<a href="#interactive-input-output-operation">interactive input/output
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">read</span> <span class="nv">P</span></code></li>
  <li>See Also:<br />
<a href="#readscreen">readscreen</a>, <a href="#write">write</a>,
<a href="#writescreen">writescreen</a>, <a href="#execute">execute</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">read</span></code> is used in an interaction with the user running a
program to obtain an array value from the keyboard after issuing a
prompt given by the string or character <code class="language-nial highlighter-rouge"><span class="nv">P</span></code>. After receiving the prompt,
the user types a sequence of characters and then presses the <code class="language-nial highlighter-rouge"><span class="nv">Return</span></code>
key. The sequence of characters, excluding the <code class="language-nial highlighter-rouge"><span class="nv">Return</span></code>, becomes the
string entered. The string is executed to give the result of <code class="language-nial highlighter-rouge"><span class="kp">read</span></code>. If
the string being executed contains an integer representation that would
convert to a number outside the range of integers, the corresponding
real number is returned.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">read</span> <span class="s1">'Type an expression : '</span><span class="p">;</span>
<span class="kp">Type</span> <span class="nv">an</span> <span class="kp">expression</span> <span class="p">:</span> <span class="mi">3</span> <span class="o">+</span> <span class="kp">count</span> <span class="mi">10</span>

     <span class="nv">A</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">read</span></code> is similar to operation <code class="language-nial highlighter-rouge"><span class="kp">readscreen</span></code>. The
difference is that in <code class="language-nial highlighter-rouge"><span class="kp">read</span></code> the string received from the keyboard is
evaluated, whereas in <code class="language-nial highlighter-rouge"><span class="kp">readscreen</span></code>, the string is returned.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">read</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">P</span> <span class="p">{</span><span class="err">­</span> <span class="kp">execute</span> <span class="kp">readscreen</span> <span class="nv">P</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="readarray">readarray</h2>

<ul>
  <li>Class:<br />
<a href="#nial-direct-access-file-operation">nial direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">readarray</span> <span class="nv">Fnum</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#readrecord">readrecord</a>, <a href="#writearray">writearray</a>,
<a href="#filetally">filetally</a>, <a href="#eraserecord">eraserecord</a>, <a href="#open">open</a>,
<a href="#close">close</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">readarray</span></code> is used to read the component or components
indicated by <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> from the direct access file with file port <code class="language-nial highlighter-rouge"><span class="nv">Fnum</span></code>. The
file must have been created using <code class="language-nial highlighter-rouge"><span class="kp">writearray</span></code> and must have been opened
as a direct file using <code class="language-nial highlighter-rouge"><span class="kp">open</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is an integer, the result is the array stored at record position
<code class="language-nial highlighter-rouge"><span class="nv">N</span></code> of the file.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is a list of integers, the result is a list of the corresponding
records. If there is no record at position <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>, the result is the fault
<code class="language-nial highlighter-rouge"><span class="gr">?missing</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is greater than <code class="language-nial highlighter-rouge"><span class="kp">filetally</span> <span class="nv">A</span></code>, the result is the
fault <code class="language-nial highlighter-rouge"><span class="gr">?eof</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">readarray</span> <span class="nv">Fnum</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">25</span><span class="p">];</span>
</code></pre></div></div>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is a solitary integer, the result is a solitary holding the
selected item.</p>

<h2 id="readfield">readfield</h2>

<ul>
  <li>Class:<br />
<a href="#unix-direct-access-file-operation">host direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">readfield</span> <span class="nv">Filename</span> <span class="nv">Start</span> <span class="nv">Size</span></code></li>
  <li>See Also:<br />
<a href="#writefield">writefield</a>, <a href="#filelength">filelength</a>,
<a href="#readrecord">readrecord</a>, <a href="#readarray">readarray</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">readfield</span></code> is used to read a portion of an existing host
file as a character string. The string or phrase <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> is the name
of the file, the integer <code class="language-nial highlighter-rouge"><span class="nv">Start</span></code> is the offset to the beginning of the
field to be read and integer <code class="language-nial highlighter-rouge"><span class="nv">Size</span></code> is the size of the field to be read.
The result is character string of the items read. If the logical field
extends across a line boundary the field will include the newline
indicator appropriate for the host system (either linefeed or
return-linefeed).</p>

<p><strong>Example</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">readfield</span> <span class="ss">"Myfile</span> <span class="mi">80</span> <span class="mi">20</span>
</code></pre></div></div>

<p>The result is the string beginning at offset 80 in file <code class="language-nial highlighter-rouge"><span class="nv">Myfile</span></code> of
length 20.</p>

<h2 id="readfile">readfile</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">readfile</span> <span class="nv">Fnum</span></code> <code class="language-nial highlighter-rouge"><span class="kp">readfile</span> <span class="nv">Fnum</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#writefile">writefile</a>, <a href="#getfile">getfile</a>, <a href="#open">open</a>,
<a href="#close">close</a>, <a href="#readscreen">readscreen</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">readfile</span></code> is used to read the next record from the
sequential text file designated by file port <code class="language-nial highlighter-rouge"><span class="nv">Fnum</span></code>. The file port
<code class="language-nial highlighter-rouge"><span class="nv">Fnum</span></code> is the integer returned by <code class="language-nial highlighter-rouge"><span class="kp">open</span></code>, which must have been called
before executing the <code class="language-nial highlighter-rouge"><span class="kp">readfile</span></code>.</p>

<p>A record of text in a text file is a sequence of characters up to but
excluding an end-of-line indication. The end-of-line indication is
system dependent and may be one or more characters. The interface
between Q’Nial and the host system recognizes end-of-line and, on
successive readfile requests, returns the records of the text file with
the end-of-line indications removed.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="kp">readfile</span></code> is used with a second argument <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>, it reads the next <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>
bytes of the text file and returns them as a string. In this usage,
end-of-line characters are processed as any other character and are not
removed. This second form is intended for reading information from
device drivers or a communications port, where end-of-line indications
may not be given.</p>

<p>The following example shows a text file, Myfile being opened and its
records being gathered as a list of strings. The example has the same
effect as the expression <code class="language-nial highlighter-rouge"><span class="kp">getfile</span> <span class="ss">"Myfile</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">File_number</span> <span class="p">:=</span> <span class="kp">open</span> <span class="ss">"Myfile</span> <span class="ss">"r</span> <span class="p">;</span>
     <span class="nv">Records</span> <span class="p">:=</span> <span class="s1">''</span> <span class="p">;</span>
     <span class="nv">Record</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">File_number</span> <span class="p">;</span>
     <span class="k">WHILE</span> <span class="nv">Record</span> <span class="o">~=</span> <span class="gr">??eof</span> <span class="k">DO</span>
          <span class="nv">Records</span> <span class="k">gets</span> <span class="nv">Records</span> <span class="kp">append</span> <span class="nv">Record</span> <span class="p">;</span>
          <span class="nv">Record</span> <span class="p">:=</span> <span class="kp">readfile</span> <span class="nv">File_number</span> <span class="p">;</span>
     <span class="k">ENDWHILE</span> <span class="p">;</span>
     <span class="kp">close</span> <span class="nv">File_number</span> <span class="p">;</span>
</code></pre></div></div>

<h2 id="readrecord">readrecord</h2>

<ul>
  <li>Class:<br />
<a href="#nial-direct-access-file-operation">nial direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">readrecord</span> <span class="nv">Fnum</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#readarray">readarray</a>, <a href="#writerecord">writerecord</a>,
<a href="#filetally">filetally</a>, <a href="#eraserecord">eraserecord</a>, <a href="#open">open</a>,
<a href="#close">close</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">readrecord</span></code> is used to read the component or components
indicated by <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> from the direct access file with file port <code class="language-nial highlighter-rouge"><span class="nv">Fnum</span></code>. If
<code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is an integer, the result is the string stored at component position
<code class="language-nial highlighter-rouge"><span class="nv">N</span></code> of the file. The file must have been opened as a direct file and
must have been created using <code class="language-nial highlighter-rouge"><span class="kp">writerecord</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is a list of integers, the result is a list of the corresponding
records. If there is no component at <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>, the result is the fault
<code class="language-nial highlighter-rouge"><span class="gr">?missing</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> is greater than <code class="language-nial highlighter-rouge"><span class="kp">filetally</span> <span class="nv">A</span></code>, the result is the
fault <code class="language-nial highlighter-rouge"><span class="gr">?eof</span></code>.</p>

<p>A direct access file is stored as two host system files: a <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> file
holding index information and a <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file holding the records.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">readrecord</span> <span class="nv">Fnum</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">25</span><span class="p">];</span>

     <span class="nv">convert_records</span> <span class="k">IS</span> <span class="k">OP</span> <span class="nv">Filein</span> <span class="nv">Fileout</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Fin</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">Filein</span> <span class="ss">"d</span> <span class="p">;</span>
        <span class="nv">Fout</span> <span class="p">:=</span> <span class="kp">open</span> <span class="nv">Fileout</span> <span class="ss">"d</span> <span class="p">;</span>
        <span class="nv">Num</span> <span class="p">:=</span> <span class="kp">filetally</span> <span class="nv">Fin</span> <span class="p">;</span>
        <span class="kp">writerecord</span> <span class="nv">Fout</span> <span class="p">(</span><span class="kp">tell</span> <span class="nv">Num</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">EACH</span> <span class="nv">convert_op</span> <span class="p">(</span><span class="kp">readrecord</span> <span class="nv">Fin</span> <span class="p">(</span><span class="kp">tell</span> <span class="nv">Num</span><span class="p">)));</span>
        <span class="nb">EACH</span> <span class="kp">close</span> <span class="nv">Fin</span> <span class="nv">Fout</span> <span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<p>The first example shows a call of <code class="language-nial highlighter-rouge"><span class="kp">readrecord</span></code> that returns three
records. The second example shows an operation <code class="language-nial highlighter-rouge"><span class="nv">convert_records</span></code> that
reads all the records in direct file <code class="language-nial highlighter-rouge"><span class="nv">Filein</span></code>, modifies them by
<code class="language-nial highlighter-rouge"><span class="nv">convert_op</span></code> and writes them to direct file <code class="language-nial highlighter-rouge"><span class="nv">Fileout</span></code>. For a very large
file, it may be necessary to replace the use of <code class="language-nial highlighter-rouge"><span class="nb">EACH</span></code> with a loop.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="kp">readrecord</span></code> operation can access fields of a fixed format file
created external to Q’Nial. If the component number used in a
<code class="language-nial highlighter-rouge"><span class="kp">readrecord</span></code> is beyond the end of file as indicated by the <code class="language-nial highlighter-rouge"><span class="kp">filetally</span>
<span class="nv">Fnum</span></code>, stored in the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> file, the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file is checked to see if
the host file information indicates that the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file extends beyond
the length expected for a file created by the Q’Nial operations. If so,
the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file is assumed to consist of a sequence of blocks of
records, with each block having fields of the sizes indicated by the
<code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> file. The index information for the record at <code class="language-nial highlighter-rouge"><span class="p">(</span><span class="nv">N</span> <span class="kp">mod</span> <span class="kp">filetally</span>
<span class="nv">Fnum</span><span class="p">)</span></code> is used to find the requested component within the block of
records found from <code class="language-nial highlighter-rouge"><span class="p">(</span><span class="nv">N</span> <span class="kp">quotient</span> <span class="kp">filetally</span> <span class="nv">Fnum</span><span class="p">)</span></code>.</p>

<p>To use this feature, a separate process must be followed to create the
<code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> file corresponding to one block of records in the external file.
This is done by writing a sequence of strings of the lengths of the
records to a dummy direct access file and then renaming the resulting
index file and the external file to be names expected by the Q’Nial
direct access facility.</p>

<h2 id="readscreen">readscreen</h2>

<ul>
  <li>Class:<br />
<a href="#interactive-input-output-operation">interactive input/output
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">readscreen</span> <span class="nv">P</span></code></li>
  <li>See Also:<br />
<a href="#read">read</a>,<a href="#readfile">readfile</a>, <a href="#writescreen">writescreen</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">readscreen</span></code> is used to obtain a string from the keyboard
after issuing the prompt <code class="language-nial highlighter-rouge"><span class="nv">P</span></code>. The prompt <code class="language-nial highlighter-rouge"><span class="nv">P</span></code> must be a character or a
string. After receiving the prompt, the user types a sequence of
characters and then presses the <code class="language-nial highlighter-rouge"><span class="nv">Return</span></code> key. The sequence of
characters, excluding the <code class="language-nial highlighter-rouge"><span class="nv">Return</span></code>, is the string returned as the result
of <code class="language-nial highlighter-rouge"><span class="kp">readscreen</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">Name</span> <span class="p">:=</span> <span class="kp">readscreen</span> <span class="s1">'Your name? : '</span> <span class="p">;</span>
<span class="nv">Your</span> <span class="nv">name</span><span class="gr">?</span> <span class="p">:</span> <span class="nv">Mike</span>

     <span class="nv">Name</span>
<span class="nv">Mike</span>

     <span class="nv">Answer</span> <span class="p">:=</span> <span class="kp">first</span> <span class="s1">'Do you wish to continue? y/n: '</span> <span class="p">;</span>
     <span class="k">IF</span> <span class="nv">Answer</span> <span class="kp">in</span> <span class="s1">'yY'</span> <span class="k">THEN</span> <span class="o">...</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">readscreen</span></code> is similar to the operation <code class="language-nial highlighter-rouge"><span class="kp">read</span></code>, the
difference being that in <code class="language-nial highlighter-rouge"><span class="kp">read</span></code>, the string received from the keyboard
is evaluated, whereas with <code class="language-nial highlighter-rouge"><span class="kp">readscreen</span></code>, the string is returned.</p>

<h2 id="reciprocal">reciprocal</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">reciprocal</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">recip</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#divide">divide</a>, <a href="#quotient">quotient</a>, <a href="#opposite">opposite</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">reciprocal</span></code> or <code class="language-nial highlighter-rouge"><span class="kp">recip</span></code> for short, returns a real number
which is the reciprocal value of a numeric atom.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Reciprocal</span></code> produces the following results when applied to atoms of the
six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>reciprocal of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>reciprocal of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>1.0 / A if A ~= 0.; ?div if A = 0.</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">reciprocal</span> <span class="mb">l</span> <span class="mi">-2</span> <span class="mf">3.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span>
<span class="mf">1.</span> <span class="mf">-0.5</span> <span class="mf">0.285714</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>

     <span class="kp">reciprocal</span> <span class="mi">-2</span> <span class="p">(</span><span class="mi">3</span> <span class="mf">-4.5</span><span class="p">)</span>
<span class="o">+----+------------------+</span>
<span class="o">|</span><span class="mf">-0.5</span><span class="o">|</span><span class="mf">0.333333</span> <span class="mf">-0.222222</span><span class="o">|</span>
<span class="o">+----+------------------+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">reciprocal</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="mi">1</span> <span class="kp">divide</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">divide</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="o">*</span> <span class="kp">reciprocal</span> <span class="nv">B</span>
   <span class="kp">reciprocal</span> <span class="kp">reciprocal</span> <span class="kp">reciprocal</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reciprocal</span> <span class="nv">A</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="recur">recur</h2>

<ul>
  <li>Class:<br />
<a href="#recursion-transformer">recursion transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">RECUR</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">parta</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">,</span> <span class="nv">partb</span><span class="p">]</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#across">across</a>, <a href="#down">down</a></li>
</ul>

<p>RECUR is a general recursion transformer with five operation arguments:
<code class="language-nial highlighter-rouge"><span class="nv">test</span></code> checks that the argument meets an end condition, <code class="language-nial highlighter-rouge"><span class="nv">endf</span></code> is
applied to the end argument before starting to build the result, <code class="language-nial highlighter-rouge"><span class="nv">parta</span></code>
computes the left value from the argument, which is stacked, <code class="language-nial highlighter-rouge"><span class="nv">joinf</span></code>
combines the left and right values as the recursion unwinds, and <code class="language-nial highlighter-rouge"><span class="nv">partb</span></code>
gives the value to be recurred on to produce the right value.The
recursion terminates provided the repeated application of the operation
<code class="language-nial highlighter-rouge"><span class="nv">partb</span></code> results in an array that satisfies <code class="language-nial highlighter-rouge"><span class="nv">test</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">RECUR</span> <span class="p">[</span> <span class="mi">0</span> <span class="o">=</span><span class="p">,</span> <span class="mi">1</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">product</span><span class="p">,</span> <span class="mi">-1</span> <span class="o">+</span><span class="p">]</span> <span class="mi">4</span>
<span class="mi">24</span>
     <span class="nb">RECUR</span> <span class="p">[</span> <span class="kp">empty</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">plus</span><span class="p">,</span> <span class="kp">rest</span> <span class="p">]</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">12</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">RECUR</span> <span class="k">is</span> <span class="k">TR</span> <span class="nv">test</span> <span class="nv">endf</span> <span class="nv">parta</span> <span class="nv">joinf</span> <span class="nv">partb</span> <span class="k">OP</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
    <span class="nv">Elements</span> <span class="p">:=</span> <span class="kc">Null</span><span class="p">;</span>
    <span class="k">WHILE</span> <span class="kp">not</span> <span class="nv">test</span> <span class="nv">A</span> <span class="k">DO</span>
      <span class="nv">Elements</span> <span class="p">:=</span> <span class="nv">Elements</span> <span class="kp">append</span> <span class="nv">parta</span> <span class="nv">A</span><span class="p">;</span>
      <span class="nv">A</span> <span class="p">:=</span> <span class="nv">partb</span> <span class="nv">A</span><span class="p">;</span>
    <span class="k">ENDWHILE</span><span class="p">;</span>
    <span class="nv">Res</span> <span class="p">:=</span> <span class="nv">endf</span> <span class="nv">A</span><span class="p">;</span>
    <span class="k">FOR</span> <span class="nv">E</span> <span class="k">WITH</span> <span class="kp">reverse</span> <span class="nv">Elements</span> <span class="k">DO</span>
      <span class="nv">Res</span> <span class="p">:=</span> <span class="nv">E</span> <span class="nv">joinf</span> <span class="nv">Res</span><span class="p">;</span>
    <span class="k">ENDFOR</span><span class="p">;</span>
    <span class="nv">Res</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">RECUR</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">parta</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">,</span> <span class="nv">partb</span><span class="p">]</span> <span class="nv">A</span>
         <span class="o">=</span> <span class="nb">FORK</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">joinf</span> <span class="p">[</span><span class="nv">parta</span><span class="p">,</span> <span class="nb">RECUR</span> <span class="p">[</span><span class="nv">test</span><span class="p">,</span> <span class="nv">endf</span><span class="p">,</span> <span class="nv">parta</span><span class="p">,</span> <span class="nv">joinf</span><span class="p">,</span> <span class="nv">partb</span><span class="p">]</span> <span class="nv">partb</span><span class="p">]]</span> <span class="nv">A</span>
   <span class="nb">RECUR</span> <span class="p">[</span> <span class="mi">0</span> <span class="o">=</span><span class="p">,</span> <span class="mi">1</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">pass</span><span class="p">,</span> <span class="kp">product</span><span class="p">,</span> <span class="mi">-1</span> <span class="o">+</span><span class="p">]</span> <span class="nv">N</span> <span class="o">=</span> <span class="nv">factorial</span> <span class="nv">N</span>
   <span class="nb">RECUR</span> <span class="p">[</span> <span class="kp">empty</span><span class="p">,</span> <span class="mi">0</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">first</span><span class="p">,</span> <span class="kp">plus</span><span class="p">,</span> <span class="kp">rest</span> <span class="p">]</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sum</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="reduce">reduce</h2>

<ul>
  <li>Class:<br />
<a href="#reduction-transformer">reduction transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">REDUCE</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#accumulate">accumulate</a>, <a href="#reductive">reductive</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">REDUCE</span></code> transforms an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> into an operation
which, when applied to an array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, has the same effect as evaluating
an expression in which <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is placed between the items of the array,
with grouping done in a right-to-left manner. If <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is an operation
that maps a pair of atoms to an atom, <code class="language-nial highlighter-rouge"><span class="nb">REDUCE</span> <span class="nv">f</span></code> reduces a simple array
to an atom. For the built-in reductive operations: <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code>, product, and,
or, max, min , and <code class="language-nial highlighter-rouge"><span class="kp">link</span></code>, REDUCE f is the same as <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">REDUCE</span> <span class="kp">divide</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="o">.</span><span class="mi">625</span>

     <span class="mi">3</span> <span class="kp">divide</span> <span class="p">(</span><span class="mi">4</span> <span class="kp">divide</span> <span class="p">(</span> <span class="mi">5</span> <span class="kp">divide</span> <span class="mi">6</span> <span class="p">)</span> <span class="p">)</span>
<span class="o">.</span><span class="mi">625</span>

     <span class="nb">REDUCE</span> <span class="kp">plus</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">55</span>

     <span class="nb">REDUCE</span> <span class="kp">hitch</span> <span class="s1">'abcde'</span>
<span class="nv">abcde</span>

     <span class="nb">REDUCE</span> <span class="kp">append</span> <span class="s1">'abcde'</span>
<span class="o">+-+----------+</span>
<span class="o">|</span><span class="nv">a</span><span class="o">|+-+------+|</span>
<span class="o">|</span> <span class="o">||</span><span class="nv">b</span><span class="o">|+-+--+||</span>
<span class="o">|</span> <span class="o">||</span> <span class="o">||</span><span class="nv">c</span><span class="o">|</span><span class="nv">de</span><span class="o">|||</span>
<span class="o">|</span> <span class="o">||</span> <span class="o">|+-+--+||</span>
<span class="o">|</span> <span class="o">|+-+------+|</span>
<span class="o">+-+----------+</span>

     <span class="nb">REDUCE</span> <span class="kp">pass</span> <span class="mi">73</span> <span class="mi">45</span> <span class="mi">39</span> <span class="mi">97</span>
<span class="o">+--+----------+</span>
<span class="o">|</span><span class="mi">73</span><span class="o">|+--+-----+|</span>
<span class="o">|</span>  <span class="o">||</span><span class="mi">45</span><span class="o">|</span><span class="mi">39</span> <span class="mi">97</span><span class="o">||</span>
<span class="o">|</span>  <span class="o">|+--+-----+|</span>
<span class="o">+--+----------+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">REDUCE</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="cm">% if f is reductive, apply f directly;</span>
        <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="nv">Res</span> <span class="p">:=</span> <span class="gr">??identity</span><span class="p">;</span>
        <span class="k">ELSE</span>
           <span class="nv">Res</span> <span class="p">:=</span> <span class="kp">last</span> <span class="nv">A</span><span class="p">;</span>
           <span class="k">FOR</span> <span class="nv">B</span> <span class="k">WITH</span> <span class="kp">reverse</span> <span class="kp">front</span> <span class="nv">A</span> <span class="k">DO</span>
              <span class="nv">Res</span> <span class="p">:=</span> <span class="nv">B</span> <span class="nv">f</span> <span class="nv">Res</span><span class="p">;</span>
           <span class="k">ENDFOR</span><span class="p">;</span>
        <span class="k">ENDIF</span><span class="p">;</span>
        <span class="nv">Res</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="o">=</span> <span class="nv">A</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">B</span> <span class="nv">f</span> <span class="nv">C</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="reducecols">reducecols</h2>

<ul>
  <li>Class:<br />
<a href="#apply-by-partition-transformer">apply-by-partition transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">REDUCECOLS</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reduce">reduce</a>, <a href="#reducerows">reducerows</a>, <a href="#bycols">bycols</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">REDUCECOLS</span></code> does the reduction of the columns of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
with the operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">REDUCECOLS</span> <span class="kp">sum</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">6</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">30</span><span class="p">)</span>
<span class="mi">65</span> <span class="mi">70</span> <span class="mi">75</span> <span class="mi">80</span> <span class="mi">85</span> <span class="mi">90</span>
</code></pre></div></div>

<p>The example returns the sum of the columns of the generated table.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">REDUCECOLS</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
      <span class="p">[</span><span class="kp">valence</span> <span class="nv">A</span> <span class="o">-</span> <span class="mi">2</span> <span class="kp">max</span> <span class="mi">0</span><span class="p">,</span><span class="kp">axes</span> <span class="kp">first</span> <span class="nv">A</span><span class="p">]</span> <span class="nb">PARTITION</span> <span class="nb">REDUCE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="reducerows">reducerows</h2>

<ul>
  <li>Class:<br />
<a href="#apply-by-partition-transformer">apply-by-partition transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">REDUCEROWS</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reduce">reduce</a>, <a href="#reducecols">reducecols</a>, <a href="#byrows">byrows</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">REDUCEROWS</span></code> does the reduction of the rows of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with
the operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">REDUCEROWS</span> <span class="kp">product</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">12</span><span class="p">)</span>
<span class="mi">24</span> <span class="mi">1680</span> <span class="mi">11880</span>
</code></pre></div></div>

<p>The example returns the product of the rows of the generated table.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">REDUCEROWS</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
      <span class="nb">BYROWS</span> <span class="p">(</span><span class="nb">REDUCE</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="reshape">reshape</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">reshape</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#post">post</a>, <a href="#shape">shape</a>, <a href="#tally">tally</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">reshape</span></code> is the major mechanism in Nial for creating
multivalent arrays. The operation requires <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to be a shape, either
<code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> or a list of integers. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an integer, it is converted to
the solitary holding the integer. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not a shape, the result is
the fault <code class="language-nial highlighter-rouge"><span class="gr">?shape</span></code>.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">reshape</span></code> is an array of shape <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> with items chosen from
the list of items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If the number of items to be used to fill the
result is less than the tally of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the remaining items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are
ignored. If the number is more than the tally of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>
are used cyclically. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> has no items, fault <code class="language-nial highlighter-rouge"><span class="gr">?fill</span></code> is used as the
items of the result.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="mi">4</span> <span class="mi">6</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="mi">3</span> <span class="ss">"abc</span>
<span class="o">+-+---+---+</span>
<span class="o">|</span><span class="mi">4</span><span class="o">|</span>  <span class="mi">6</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+-+---+---+</span>
<span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="nv">abc</span><span class="o">|</span>  <span class="mi">4</span><span class="o">|</span>
<span class="o">+-+---+---+</span>
     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="s1">'abcdefghij'</span>
<span class="nv">abc</span>
<span class="nv">def</span>
     <span class="mi">5</span> <span class="kp">reshape</span> <span class="kp">solitary</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
</code></pre></div></div>

<p>The last example illustrates that to replicate an arbitrary array, in
this case the pair 3 4, <code class="language-nial highlighter-rouge"><span class="kp">reshape</span></code> is applied to the solitary holding the
array.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="p">(</span><span class="kp">first</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kp">rest</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="nv">a</span> <span class="kp">shape</span> <span class="nv">implies</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="kp">reshape</span> <span class="kp">list</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="k">is</span> <span class="nv">a</span> <span class="kp">shape</span> <span class="o">==&gt;</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nb">EACH</span> <span class="nv">f</span> <span class="nv">B</span>
   <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span><span class="p">)</span> <span class="mi">1</span> <span class="kp">reshape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">post</span> <span class="nv">A</span>
   <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span> <span class="kp">reshape</span> <span class="kp">solitary</span> <span class="nv">A</span>
   <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="kp">reshape</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kc">Null</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="kp">reshape</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="rest">rest</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">rest</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#first">first</a>, <a href="#front">front</a>, <a href="#drop">drop</a>, <a href="#sublist">sublist</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">rest</span></code> returns the list of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> after dropping the first
item of the list. If the argument of <code class="language-nial highlighter-rouge"><span class="kp">rest</span></code> is not a list, it is treated
as a list.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">rest</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
     <span class="kp">rest</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
     <span class="kp">rest</span> <span class="mi">7</span> <span class="o">=</span> <span class="kc">Null</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The last example shows that the rest of an atom is the empty list
<code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">rest</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="mi">1</span> <span class="kp">drop</span> <span class="kp">list</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">rest</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">rest</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">first</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kp">rest</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">rest</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">0</span> <span class="kp">max</span> <span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
   <span class="kp">first</span> <span class="kp">rest</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">second</span> <span class="nv">A</span>
   <span class="kp">rest</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kc">Null</span>
</code></pre></div></div>

<h2 id="resume">resume</h2>

<ul>
  <li>Class:<br />
<a href="#debugging-command">debugging command</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">resume</span></code></li>
  <li>See Also:<br />
<a href="#break">break</a>, <a href="#step">step</a>, <a href="#next">next</a>, <a href="#toend">toend</a>,
<a href="#debugging">debugging</a>, <a href="#setdeftrace">setdeftrace</a></li>
</ul>

<p>When <code class="language-nial highlighter-rouge"><span class="kp">break</span> <span class="nv">debug</span> <span class="nv">mode</span></code> is initiated by means of the <code class="language-nial highlighter-rouge"><span class="kp">Break</span></code> expression
or the operation <code class="language-nial highlighter-rouge"><span class="kp">breakin</span></code> (or by using <code class="language-nial highlighter-rouge"><span class="o">&lt;</span><span class="nv">Ctrl</span> <span class="nv">b</span><span class="o">&gt;</span></code> while awaiting input
in window mode on a console version), a break loop is initiated with
output like:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">--------------------------------------------------------------</span>
    <span class="kp">Break</span> <span class="nv">debug</span> <span class="nv">loop</span><span class="p">:</span> <span class="nv">enter</span> <span class="nv">debug</span> <span class="nv">commands</span><span class="p">,</span> <span class="nv">expressions</span> <span class="kp">or</span>
      <span class="kp">type</span><span class="p">:</span> <span class="nv">resume</span>    <span class="nv">to</span> <span class="kp">exit</span> <span class="nv">debug</span> <span class="nv">loop</span>
      <span class="o">&lt;</span><span class="nv">Return</span><span class="o">&gt;</span> <span class="nv">executes</span> <span class="nv">the</span> <span class="nv">indicated</span> <span class="nv">debug</span> <span class="nv">command</span>
    <span class="nv">current</span> <span class="nv">call</span> <span class="nv">stack</span> <span class="p">:</span>
<span class="nv">foo</span>
<span class="o">-------------------------------------------------------------</span>
<span class="gr">?..</span> <span class="nv">C</span> <span class="p">:=</span> <span class="nv">A</span> <span class="o">+</span> <span class="p">(</span> <span class="o">+</span> <span class="nv">A</span> <span class="o">+</span> <span class="nv">A</span> <span class="p">)</span>
<span class="o">--&gt;</span><span class="p">[</span><span class="nv">stepv</span><span class="p">]</span>
</code></pre></div></div>

<p>In the above example the break loop awaits input with the default
command <code class="language-nial highlighter-rouge"><span class="nv">stepv</span></code> assumed. If <code class="language-nial highlighter-rouge"><span class="nv">resume</span></code> is typed then the break loop is
exited and control returns to the expression following the break point.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">Break</span>
<span class="o">--------------------------------------------------------------</span>
    <span class="kp">Break</span> <span class="nv">debug</span> <span class="nv">loop</span><span class="p">:</span> <span class="nv">enter</span> <span class="nv">debug</span> <span class="nv">commands</span><span class="p">,</span> <span class="nv">expressions</span> <span class="kp">or</span>
      <span class="kp">type</span><span class="p">:</span> <span class="nv">resume</span>    <span class="nv">to</span> <span class="kp">exit</span> <span class="nv">debug</span> <span class="nv">loop</span>
      <span class="o">&lt;</span><span class="nv">Return</span><span class="o">&gt;</span> <span class="nv">executes</span> <span class="nv">the</span> <span class="nv">indicated</span> <span class="nv">debug</span> <span class="nv">command</span>
    <span class="nv">current</span> <span class="nv">call</span> <span class="nv">stack</span> <span class="p">:</span>
<span class="o">-------------------------------------------------------------</span>
<span class="gr">?..</span> <span class="nv">C</span> <span class="p">:=</span> <span class="nv">A</span> <span class="o">+</span> <span class="p">(</span> <span class="o">+</span> <span class="nv">A</span> <span class="o">+</span> <span class="nv">A</span> <span class="p">)</span>
<span class="o">--&gt;</span><span class="p">[</span><span class="nv">stepv</span><span class="p">]</span> <span class="nv">resume</span>
</code></pre></div></div>

<h2 id="reverse">reverse</h2>

<ul>
  <li>Class:<br />
<a href="#data-rearrangement-operation">data rearrangement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">reverse</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#transpose">transpose</a>, <a href="#rotate">rotate</a>, <a href="#list">list</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">reverse</span></code> returns an array of the same shape as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> having
the items in reverse order.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">reverse</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
<span class="mi">7</span> <span class="mi">6</span> <span class="mi">5</span> <span class="mi">4</span>

     <span class="kp">reverse</span> <span class="s1">'able was I ere I saw Melba'</span>
<span class="nv">ableM</span> <span class="nv">was</span> <span class="nv">I</span> <span class="nv">ere</span> <span class="nv">I</span> <span class="nv">saw</span> <span class="nv">elba</span>
     <span class="nb">EACH</span> <span class="kp">reverse</span> <span class="s1">'This'</span> <span class="s1">'seems'</span> <span class="s1">'too'</span> <span class="s1">'wonderful'</span>
<span class="o">+----+-----+---+---------+</span>
<span class="o">|</span><span class="nv">sihT</span><span class="o">|</span><span class="nv">smees</span><span class="o">|</span><span class="nv">oot</span><span class="o">|</span><span class="nv">lufrednow</span><span class="o">|</span>
<span class="o">+----+-----+---+---------+</span>

     <span class="kp">reverse</span> <span class="kp">count</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">4</span><span class="o">|</span><span class="mi">3</span> <span class="mi">3</span><span class="o">|</span><span class="mi">3</span> <span class="mi">2</span><span class="o">|</span><span class="mi">3</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">4</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">4</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>

     <span class="kp">reverse</span> <span class="p">(</span><span class="mi">10</span> <span class="kp">take</span><span class="p">)</span> <span class="kp">reverse</span> <span class="kp">sketch</span> <span class="mf">1.23</span>
      <span class="mf">1.23</span>
</code></pre></div></div>

<p>The fourth example illustrates that the reverse of a 3 by 4 table is a 3
by 4 table with the list of items reversed. The last example shows the
use of <code class="language-nial highlighter-rouge"><span class="kp">take</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">reverse</span></code> to right-justify text in a field.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">reverse</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span> <span class="o">-</span> <span class="kp">count</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">reverse</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">reverse</span> <span class="kp">reverse</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">reverse</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="kp">reverse</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">front</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reverse</span> <span class="kp">rest</span> <span class="kp">reverse</span> <span class="nv">A</span>
   <span class="kp">last</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">first</span> <span class="kp">reverse</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="rotate">rotate</h2>

<ul>
  <li>Class:<br />
<a href="#data-rearrangement-operation">data rearrangement operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">rotate</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">rotate</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#reverse">reverse</a>, <a href="#transpose">transpose</a>, <a href="#list">list</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">rotate</span></code> shifts the items of array <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> to the left <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
places, inserting the items that drop off the front of the list on the
back. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a negative number, the shift is to the right.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="kp">rotate</span> <span class="mi">24</span> <span class="mi">35</span> <span class="mi">46</span> <span class="mi">57</span> <span class="mi">12</span> <span class="mi">24</span> <span class="mi">39</span>
<span class="mi">46</span> <span class="mi">57</span> <span class="mi">12</span> <span class="mi">24</span> <span class="mi">39</span> <span class="mi">24</span> <span class="mi">35</span>

     <span class="mi">-5</span> <span class="kp">rotate</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">5</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">0</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">2</span> <span class="mi">4</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span><span class="mi">0</span> <span class="mi">4</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span><span class="mi">1</span> <span class="mi">4</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
</code></pre></div></div>

<p>The second example shows that on a table <code class="language-nial highlighter-rouge"><span class="kp">rotate</span></code> works on the list of
items in row major order.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">rotate</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">N</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Newlist</span> <span class="p">:=</span>  <span class="kp">tally</span> <span class="nv">A</span> <span class="o">+</span> <span class="nv">N</span> <span class="o">+</span> <span class="kp">grid</span> <span class="nv">A</span> <span class="kp">mod</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="kp">list</span> <span class="nv">A</span><span class="p">;</span>
        <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">Newlist</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">N</span> <span class="nv">an</span> <span class="nv">integer</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">rotate</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nv">N</span> <span class="kp">rotate</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="p">(</span><span class="nv">N</span> <span class="kp">rotate</span> <span class="kp">list</span> <span class="nv">A</span><span class="p">)</span>
   <span class="nv">N</span> <span class="kp">rotate</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">N</span> <span class="kp">mod</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">rotate</span> <span class="nv">A</span>
   <span class="nv">N</span> <span class="kp">rotate</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span><span class="p">(</span><span class="kp">tally</span> <span class="nv">A</span><span class="o">-</span><span class="nv">N</span><span class="p">)</span> <span class="kp">rotate</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="rows">rows</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">rows</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#cols">cols</a>, <a href="#split">split</a>, <a href="#mix">mix</a>, <a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">rows</span></code> is normally used on a table <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. In this case, it
returns a list of lists, with each item being a list of items from one
row of the table. For a multidimensional array, the result is an array
of lists of length equal to the length of the last axis of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. The
valence of the result is one less than the valence of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="ss">"Bill</span> <span class="ss">"Tom</span> <span class="ss">"Mary</span> <span class="ss">"Jack</span> <span class="ss">"Dawn</span> <span class="ss">"Alice</span>
<span class="nv">Bill</span> <span class="nv">Tom</span>  <span class="nv">Mary</span>
<span class="nv">Jack</span> <span class="nv">Dawn</span> <span class="nv">Alice</span>

     <span class="kp">rows</span> <span class="nv">A</span>
<span class="o">+-------------+---------------+</span>
<span class="o">|</span><span class="nv">Bill</span> <span class="nv">Tom</span> <span class="nv">Mary</span><span class="o">|</span><span class="nv">Jack</span> <span class="nv">Dawn</span> <span class="nv">Alice</span><span class="o">|</span>
<span class="o">+-------------+---------------+</span>

     <span class="nv">A</span> <span class="p">:=</span>  <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">32</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>       <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>      <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>

<span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span>   <span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span>
<span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span>   <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>

     <span class="kp">rows</span> <span class="nv">A</span>
<span class="o">+-----+--------+</span>  <span class="o">+--------+--------+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>   <span class="o">|</span>  <span class="o">|</span><span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span><span class="o">|</span><span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span><span class="o">|</span>
<span class="o">+-----+--------+</span>  <span class="o">+--------+--------+</span>
<span class="o">|</span><span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span><span class="o">|</span><span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="o">|</span>  <span class="o">|</span><span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span><span class="o">|</span><span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span><span class="o">|</span>
<span class="o">+-----+--------+</span>  <span class="o">+--------+--------+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">rows</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">-</span> <span class="mi">1</span> <span class="kp">max</span> <span class="mi">0</span> <span class="kp">raise</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">rows</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">front</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="kp">first</span> <span class="kp">rows</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">last</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">not</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">mix</span> <span class="kp">rows</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="nv">T</span> <span class="nv">a</span> <span class="kp">variable</span> <span class="nv">associated</span> <span class="k">with</span> <span class="nv">a</span> <span class="nv">table</span> <span class="o">==&gt;</span> <span class="nv">I</span> <span class="kp">pick</span> <span class="kp">rows</span> <span class="nv">T</span> <span class="o">=</span> <span class="nv">T</span><span class="o">|</span><span class="p">[</span><span class="nv">I</span><span class="p">,]</span>
</code></pre></div></div>

<h2 id="save">save</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">save</span> <span class="nv">Wsname</span></code></li>
  <li>See Also:<br />
<a href="#load">load</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">save</span></code> is used to save a workspace with the name given by
the phrase or string <code class="language-nial highlighter-rouge"><span class="nv">Wsname</span></code>. The convention in Q’Nial is to name
workspaces with the extension <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">nws</span></code> so that they are easy to find in
the directory. When saving or loading a workspace, the extension may be
omitted.</p>

<p>The effect of saving a workspace is to place the contents of the current
workspace in the named file in an internal format. The contents of the
current workspace are unchanged by doing a <code class="language-nial highlighter-rouge"><span class="kp">save</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">save</span> <span class="ss">"mywork</span>
</code></pre></div></div>

<p>A <code class="language-nial highlighter-rouge"><span class="kp">save</span></code> operation may be executed within an operation or expression.
The effect is to interrupt the execution and do the save at the top
level.</p>

<p>If the saved workspace contains an expression with the name <code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code>,
whenever the workspace is loaded, the <code class="language-nial highlighter-rouge"><span class="kp">load</span></code> operation will execute the
<code class="language-nial highlighter-rouge"><span class="nv">Latent</span></code> expression. This can be used to have a workspace automatically
begin an application, or to set up desired default values for various
switch settings.</p>

<h2 id="scan">scan</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">scan</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#parse">parse</a>, <a href="#eval">eval</a>, <a href="#descan">descan</a>,
<a href="#deparse">deparse</a>, <a href="#execute">execute</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">scan</span></code> translates Nial program text to internal form. This
process is called tokenizing as it results in a list containing tokens.
The argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> is a string. The result is a list beginning with 99 and
followed by an alternating sequence of integer codes and phrases.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">scan</span> <span class="s1">'A := 3 * 5.2'</span>
<span class="mi">99</span> <span class="mi">2</span> <span class="nv">A</span> <span class="mi">1</span> <span class="p">:=</span> <span class="mi">16</span> <span class="mi">3</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">18</span> <span class="mf">5.2</span>

     <span class="kp">scan</span> <span class="s1">'sum 2 (35 + 42.7)'</span>
<span class="mi">99</span> <span class="mi">2</span> <span class="kp">SUM</span> <span class="mi">16</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">16</span> <span class="mi">35</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">18</span> <span class="mf">42.7</span> <span class="mi">1</span> <span class="p">)</span>

     <span class="kp">scan</span> <span class="s1">'foo IS first rest'</span>
<span class="mi">99</span> <span class="mi">2</span> <span class="nv">FOO</span> <span class="mi">1</span> <span class="k">IS</span> <span class="mi">2</span> <span class="kp">FIRST</span> <span class="mi">2</span> <span class="kp">REST</span>
</code></pre></div></div>

<p>The first example has 5 tokens, the second has 7 and the third has 4. In
a token stream, the token for an identifier is in upper case.</p>

<p>The <code class="language-nial highlighter-rouge"><span class="kp">scan</span></code> token codes are given below:</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>reserved word or delimiter</td>
    </tr>
    <tr>
      <td>2</td>
      <td>identifier</td>
    </tr>
    <tr>
      <td>14</td>
      <td>string</td>
    </tr>
    <tr>
      <td>15</td>
      <td>phrase</td>
    </tr>
    <tr>
      <td>16</td>
      <td>integer</td>
    </tr>
    <tr>
      <td>18</td>
      <td>real number</td>
    </tr>
    <tr>
      <td>22</td>
      <td>fault</td>
    </tr>
    <tr>
      <td>42</td>
      <td>atomic character</td>
    </tr>
    <tr>
      <td>40</td>
      <td>atomic boolean or bitstring</td>
    </tr>
  </tbody>
</table>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="o">==&gt;</span> <span class="kp">execute</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">eval</span> <span class="kp">parse</span> <span class="kp">scan</span> <span class="nv">S</span>
   <span class="nv">S</span> <span class="nv">a</span> <span class="kp">string</span> <span class="o">==&gt;</span> <span class="kp">scan</span> <span class="kp">descan</span> <span class="kp">scan</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">scan</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="second">second</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">second</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#first">first</a>, <a href="#third">third</a>, <a href="#pick">pick</a>, <a href="#take">take</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">second</span></code> returns the second of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
has only one item or it is empty, it returns the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">second</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">5</span>

     <span class="kp">second</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mi">0</span> <span class="mi">1</span>

     <span class="kp">second</span> <span class="kc">Null</span>
<span class="gr">?address</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">second</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="mi">1</span> <span class="kp">pick</span> <span class="kp">list</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">second</span> <span class="kp">list</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">second</span> <span class="nv">B</span>
   <span class="kp">second</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">first</span> <span class="kp">rest</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="see">see</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">see</span> <span class="nv">Defname</span></code></li>
  <li>See Also:<br />
<a href="#descan">descan</a>, <a href="#deparse">deparse</a>, <a href="#getdef">getdef</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">see</span></code> displays the definition of the user defined object
named by the phrase or string <code class="language-nial highlighter-rouge"><span class="nv">Defname</span></code>. The canonical form of the
definition appears directly on the screen. The operation cannot be used
on predefined names. The display is in <code class="language-nial highlighter-rouge"><span class="kp">sketch</span><span class="o">/</span><span class="nv">nodecor</span></code> mode regardless
of the current settings.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">foo</span> <span class="k">IS</span> <span class="kp">first</span> <span class="kp">rest</span><span class="p">;</span>
     <span class="kp">see</span> <span class="ss">"foo</span>
<span class="nv">foo</span> <span class="k">IS</span> <span class="kp">first</span> <span class="kp">rest</span>
</code></pre></div></div>

<p>It is possible to capture the display given by <code class="language-nial highlighter-rouge"><span class="kp">see</span></code> using the
composition of operations <code class="language-nial highlighter-rouge"><span class="kp">descan</span> <span class="kp">deparse</span> <span class="kp">getdef</span> <span class="nv">Defname</span></code>, which returns
the list of lines of the display. This technique is used in the
operation <code class="language-nial highlighter-rouge"><span class="nv">defedit</span></code>.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">see</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Settings</span> <span class="k">gets</span> <span class="nb">EACH</span> <span class="kp">set</span> <span class="ss">"sketch</span> <span class="ss">"decor</span><span class="p">;</span>
        <span class="nb">ITERATE</span> <span class="kp">writescreen</span> <span class="kp">descan</span> <span class="kp">deparse</span> <span class="kp">getdef</span> <span class="nv">A</span><span class="p">;</span>
        <span class="nb">EACH</span> <span class="kp">set</span> <span class="nv">Settings</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="seed">seed</h2>

<ul>
  <li>Class:<br />
<a href="#array-generation-operation">array generation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">seed</span> <span class="nv">Num</span></code></li>
  <li>See Also:<br />
<a href="#random">random</a>, <a href="#floor">floor</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">seed</span></code> sets the initial number for the random number
generator used by <code class="language-nial highlighter-rouge"><span class="kp">random</span></code>. The argument <code class="language-nial highlighter-rouge"><span class="nv">Num</span></code> is a positive decimal
fraction less than 1. <code class="language-nial highlighter-rouge"><span class="kp">Seed</span></code> is used to get predictable results from a
program that uses <code class="language-nial highlighter-rouge"><span class="kp">random</span></code>. <code class="language-nial highlighter-rouge"><span class="kp">Seed</span></code> returns the value that would have
been used to generate the next random number.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seed</span> <span class="o">.</span><span class="mi">25374</span><span class="p">;</span>
     <span class="kp">floor</span> <span class="p">(</span><span class="mf">100.</span> <span class="o">*</span> <span class="kp">random</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">60</span> <span class="mi">73</span> <span class="mi">83</span>
</code></pre></div></div>

<h2 id="seek">seek</h2>

<ul>
  <li>Class:<br />
<a href="#search-operation">search operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">seek</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">seek</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#in">in</a>, <a href="#find">find</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">seek</span></code> returns a pair of values. The first is a boolean
indicating whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The second is the
address of the first occurrence of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as an item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, searching <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>
in row major order. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> does not occur in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the second item of the
result is the gage of the shape of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. <code class="language-nial highlighter-rouge"><span class="kp">Seek</span></code> is the combination of
<code class="language-nial highlighter-rouge"><span class="kp">in</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">find</span></code> in one operation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">3</span> <span class="kp">seek</span> <span class="mi">56</span> <span class="mi">34</span> <span class="mi">3</span> <span class="mi">23</span> <span class="mi">57</span> <span class="mi">3</span>
<span class="mb">l</span> <span class="mi">2</span>

     <span class="sc">`a</span> <span class="kp">seek</span> <span class="s1">'hello world'</span>
<span class="mb">o</span> <span class="mi">11</span>
</code></pre></div></div>

<p><code class="language-nial highlighter-rouge"><span class="kp">Seek</span></code> is useful when determining whether or not <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and, if
it is, obtaining its position in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. Both results are obtained in one
internal computation rather than two separate ones.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seek</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="p">[</span><span class="kp">in</span><span class="p">,</span><span class="kp">find</span><span class="p">]</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">first</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">seek</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">in</span> <span class="nv">B</span>
   <span class="kp">second</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">seek</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">find</span> <span class="nv">B</span>
</code></pre></div></div>

<p><strong>Pragmatics</strong></p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">seek</span></code> uses a linear search on the items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> if the
array has not been sorted, or uses a binary search algorithm if it has.
The latter fact suggests that an array that is searched frequently
should be kept in lexicographical order by applying <code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> to it when
it is created or changed.</p>

<h2 id="seeprimcalls">seeprimcalls</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">seeprimcalls</span> <span class="nv">Mode</span></code></li>
  <li>See Also:<br />
<a href="#break">break</a>, <a href="#debugging">debugging</a>, <a href="#breaklist">breaklist</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">seeprimcalls</span></code> sets an internal flag to the setting of the
boolean argument <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>, subsequent execution will
monitor the use of all primitive defined expressions, operations and
transformers and will print out a message indicating when the named
primitive has completed execution. If <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> it turns off the
flag that controls monitoring.</p>

<p>This mode of execution is useful for following the execution flow during
debugging.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seeprimcalls</span> <span class="kc">True</span>
<span class="mb">o</span>
</code></pre></div></div>

<h2 id="seeusercalls">seeusercalls</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">seeusercalls</span> <span class="nv">Mode</span></code></li>
  <li>See Also:<br />
<a href="#break">break</a>, <a href="#debugging">debugging</a>, <a href="#breaklist">breaklist</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">seeusercalls</span></code> sets an internal flag to the setting of the
boolean argument <code class="language-nial highlighter-rouge"><span class="kp">Mod</span></code>. If <code class="language-nial highlighter-rouge"><span class="kp">Mod</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>, subsequent execution will
monitor the use of all user defined expressions, operations and
transformers and will print out a message indicating when definitions
are entered and executed. If <code class="language-nial highlighter-rouge"><span class="kp">Mod</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> it turns off the flag that
controls monitoring.</p>

<p>This mode of execution is useful for following the execution flow during
debugging.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seeusercalls</span> <span class="kc">True</span>
<span class="mb">o</span>
</code></pre></div></div>

<h2 id="set">set</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">set</span> <span class="nv">Sw</span></code></li>
  <li>See Also:<br />
<a href="#setdeftrace">setdeftrace</a>, <a href="#setformat">setformat</a>,
<a href="#setinterrupts">setinterrupts</a>, <a href="#setlogname">setlogname</a>,
<a href="#setprompt">setprompt</a>, <a href="#setwidth">setwidth</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">set</span></code> changes internal switches in the Q’Nial interpreter.
The switches are used to control the behaviour of a variety of optional
features of Q’Nial. The argument <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> is a string or phrase in either
case. The result of set is a phrase giving the setting of the switch as
it was prior to the execution of the set operation. The result can be
used subsequently to restore the switch to its original value. The valid
phrases and their purposes are tabulated below:</p>

<table>
  <thead>
    <tr>
      <th>Setting</th>
      <th>Description of Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>diagram</td>
      <td>set default display mode to diagram</td>
    </tr>
    <tr>
      <td>sketch</td>
      <td>set default display mode to sketch</td>
    </tr>
    <tr>
      <td>decor</td>
      <td>turn on decoration of atoms and empty arrays</td>
    </tr>
    <tr>
      <td>nodecor</td>
      <td>turn off decoration of atoms and empty arrays</td>
    </tr>
    <tr>
      <td>trace</td>
      <td>turn on tracing of expressions at the top level</td>
    </tr>
    <tr>
      <td>notrace</td>
      <td>turn off tracing of expressions at the top level</td>
    </tr>
    <tr>
      <td>log</td>
      <td>turn on the automatic logging of the session</td>
    </tr>
    <tr>
      <td>nolog</td>
      <td>turn off the automatic logging of the session</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"diagram</span> <span class="p">;</span>
     <span class="nv">displayinsketchmode</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">Result</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">A</span> <span class="p">:=</span> <span class="kp">set</span> <span class="ss">"sketch</span><span class="p">;</span> <span class="kp">write</span> <span class="kp">picture</span> <span class="nv">Result</span><span class="p">;</span> <span class="kp">set</span> <span class="nv">A</span> <span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<p>In the above definition, sketch mode is set at the beginning, saving the
previous setting in the variable <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. When the definition is ended, the
mode is reset to the value in <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>The default settings are <code class="language-nial highlighter-rouge"><span class="kp">sketch</span></code>, nodecor, notrace and <code class="language-nial highlighter-rouge"><span class="nv">nolog</span></code>.</p>

<h2 id="setdeftrace">setdeftrace</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setdeftrace</span> <span class="nv">Defname</span> <span class="nv">Mode</span></code></li>
  <li>See Also:<br />
<a href="#set">set</a>, <a href="#step">step</a>, <a href="#break">break</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setdeftrace</span></code> changes the trace mode for the user defined
expression, operation or transformer definition named by the string or
phrase <code class="language-nial highlighter-rouge"><span class="nv">Defname</span></code>. <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code> is an optional argument. If it is omitted, the
trace mode is toggled. If <code class="language-nial highlighter-rouge"><span class="nv">Mode</span></code> is present and has the value 1, it
turns trace on. Otherwise it turns trace off. The effect when the trace
mode is on is to trace the execution of the body of the operation
whenever the operation is executed.</p>

<p>The trace mechanism shows intermediate values in the evaluation of
expressions.</p>

<p>The operation returns the previous setting. If the result of
<code class="language-nial highlighter-rouge"><span class="kp">setdeftrace</span></code> is assigned to a variable, the previous setting can be
restored later.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">library</span> <span class="ss">"average</span>

     <span class="kp">setdeftrace</span> <span class="ss">"average</span>
<span class="mi">0</span>

     <span class="nv">average</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">...</span><span class="nv">trace</span> <span class="nv">call</span> <span class="nv">to</span> <span class="kp">operation</span>
<span class="o">...</span><span class="nv">average</span>
<span class="o">...</span><span class="nv">the</span> <span class="nv">arguments</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">opform</span> <span class="nv">are</span>
<span class="o">...</span><span class="nv">A</span>
<span class="o">...</span><span class="nv">A</span>
<span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">...</span><span class="nv">A</span>
<span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="o">...</span><span class="kp">sum</span> <span class="nv">A</span>
<span class="mi">12</span>
<span class="o">...</span><span class="kp">sum</span> <span class="nv">A</span> <span class="o">/</span> <span class="kp">tally</span> <span class="nv">A</span>
<span class="mf">4.</span>
<span class="o">...</span><span class="k">end</span> <span class="nv">of</span> <span class="kp">operation</span> <span class="nv">call</span>
<span class="mf">4.</span>
</code></pre></div></div>

<p>The tracing facility for expressions does not trace all intermediate
computations. Parentheses around an expression will force its result to
be shown during a trace.</p>

<h2 id="setformat">setformat</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setformat</span> <span class="kp">String</span></code></li>
  <li>See Also:<br />
<a href="#sketch">sketch</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setformat</span></code> controls the format used for picturing real
numbers. <code class="language-nial highlighter-rouge"><span class="kp">String</span></code> is a format specification for real numbers using the
conventions for the C library routine printf. There are three styles of
format:</p>

<table>
  <thead>
    <tr>
      <th>Control</th>
      <th>Effect</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>%f</td>
      <td>displays a fixed number of places after the decimal point in a fixed size space with no scaling of the number</td>
    </tr>
    <tr>
      <td>%e</td>
      <td>displays the number in scientific notation with an exponent scaling the number to have one digit before the decimal point</td>
    </tr>
    <tr>
      <td>%g</td>
      <td>displays the number in f format if possible but defaults to e format if the number is not within a suitable range</td>
    </tr>
  </tbody>
</table>

<p>A code can be inserted between the percent sign and the letter. Format
<code class="language-nial highlighter-rouge"><span class="s1">'%15.5f'</span></code> uses a field of width 15 to display a number in <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> format
with 5 decimal places. The first digit is the width of the field. For
<code class="language-nial highlighter-rouge"><span class="nv">f</span></code> format, the second digit gives the number of places after the
decimal while for <code class="language-nial highlighter-rouge"><span class="nv">e</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">g</span></code> it indicates the number of significant
digits to be displayed. Either digit can be omitted.</p>

<p>Q’Nial requires that the display of a real number includes a decimal
point and that the display of an integer does not include a decimal
point. In a <code class="language-nial highlighter-rouge"><span class="err">%</span><span class="nv">g</span></code> format, printf does not include a decimal point if the
real number matches an integer to the specified precision. In this case,
Q’Nial makes the field one space wider than that specified in order to
accommodate the decimal point. If an <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> format is not wide enough to
accommodate the number, it is widened so that the number is displayed.</p>

<p>If the result of an <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> format requires more than <code class="language-nial highlighter-rouge"><span class="mi">40</span></code> digits to the
left of the decimal point, it is converted to <code class="language-nial highlighter-rouge"><span class="nv">e</span></code> format.</p>

<p>The format <code class="language-nial highlighter-rouge"><span class="s1">'%.17g'</span></code> is used by operation display in depicting real
numbers as this format is accurate enough to reproduce the same number
when executed on most systems. The default format is <code class="language-nial highlighter-rouge"><span class="s1">'%g'</span></code>. It works as
in C except that a period may be added to distinguish the result from an
integer constant. If the argument to setformat is <code class="language-nial highlighter-rouge"><span class="s1">''</span></code> then it resets
the formatting to the default value.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setformat</span> <span class="s1">'%.5f'</span> <span class="p">;</span>
     <span class="kp">post</span> <span class="kp">exp</span> <span class="mf">10.</span> <span class="mf">80.</span> <span class="mf">90.</span> <span class="mf">100.</span>
                                  <span class="mf">22026.46579</span>
    <span class="mf">55406223843935098300000000000000000.00000</span>
    <span class="mf">1220403294317840830000000000000000000000.</span>
<span class="mf">2.688117141816135610000000000000000000000e+43</span>

     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">2</span> <span class="kp">reshape</span>  <span class="mf">9777.985</span> <span class="mf">4464784.692</span> <span class="mf">4070333.511</span> <span class="mf">0.079</span><span class="p">;</span>

     <span class="kp">setformat</span> <span class="s1">'%15.7f'</span> <span class="p">;</span> <span class="p">[</span><span class="kp">pass</span><span class="p">,</span><span class="kp">sqrt</span><span class="p">]</span> <span class="nv">X</span>
<span class="o">+-------------------------------+-------------------------------+</span>
<span class="o">|</span>   <span class="mf">9777.9850000</span> <span class="mf">4464784.6920000</span><span class="o">|</span>     <span class="mf">98.8836943</span>    <span class="mf">2113.0037132</span><span class="o">|</span>
<span class="o">|</span><span class="mf">4070333.5110000</span>       <span class="mf">0.0790000</span><span class="o">|</span>   <span class="mf">2017.5067561</span>       <span class="mf">0.2810694</span><span class="o">|</span>
<span class="o">+-------------------------------+-------------------------------+</span>
     <span class="kp">setformat</span>  <span class="s1">'%15.7g'</span> <span class="p">;</span> <span class="p">[</span><span class="kp">pass</span><span class="p">,</span><span class="kp">sqrt</span><span class="p">]</span> <span class="nv">X</span>
<span class="o">+---------------------------------+-------------------------------+</span>
<span class="o">|</span>        <span class="mf">9777.985</span>         <span class="mf">4464785.</span><span class="o">|</span>       <span class="mf">98.88369</span>        <span class="mf">2113.004</span><span class="o">|</span>
<span class="o">|</span>        <span class="mf">4070334.</span>            <span class="mf">0.079</span><span class="o">|</span>       <span class="mf">2017.507</span>       <span class="mf">0.2810694</span><span class="o">|</span>
<span class="o">+---------------------------------+-------------------------------+</span>
     <span class="kp">setformat</span> <span class="s1">'%15.7e'</span> <span class="p">;</span> <span class="p">[</span><span class="kp">pass</span><span class="p">,</span><span class="kp">sqrt</span><span class="p">]</span> <span class="nv">X</span>
<span class="o">+-------------------------------+-------------------------------+</span>
<span class="o">|</span>  <span class="mf">9.7779850e+03</span>   <span class="mf">4.4647847e+06</span><span class="o">|</span>  <span class="mf">9.8883694e+01</span>   <span class="mf">2.1130037e+03</span><span class="o">|</span>
<span class="o">|</span>  <span class="mf">4.0703335e+06</span>   <span class="mf">7.9000000e-02</span><span class="o">|</span>  <span class="mf">2.0175068e+03</span>   <span class="mf">2.8106939e-01</span><span class="o">|</span>
<span class="o">+-------------------------------+-------------------------------+</span>
</code></pre></div></div>

<h2 id="setinterrupts">setinterrupts</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setinterrupts</span> <span class="nv">Boolean</span></code></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setinterrupts</span></code> permits or prevents the interruption of
computation by the use of <code class="language-nial highlighter-rouge"><span class="o">&lt;</span><span class="nv">Ctrl</span> <span class="nv">C</span><span class="o">&gt;</span></code>. If the argument is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>,
interrupts are permitted. If it is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>, they are blocked. The
default value is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Setinterrupts</span></code> is used in a closed application to prevent the user from
interfering with a computation in process. This may be critical if a
file is being updated in a sequence of steps, which must all be
completed for the data base to remain consistent.</p>

<h2 id="setlogname">setlogname</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setlogname</span> <span class="nv">Filename</span></code></li>
  <li>See Also:<br />
<a href="#set">set</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setlogname</span></code> is used to set the name of the host file in
which a log of the session is recorded. The current log file is closed
and a new one opened. The argument <code class="language-nial highlighter-rouge"><span class="nv">Filename</span></code> must be a phrase or a
string.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setlogname</span> <span class="ss">"dec17pm</span>
</code></pre></div></div>

<p>The main purpose of <code class="language-nial highlighter-rouge"><span class="kp">setlogname</span></code> is to capture the history of part of a
session in a particular file for later use. The log file can produce
documentation, for example.</p>

<h2 id="setprofile">setprofile</h2>

<ul>
  <li>Class:<br />
<a href="#profiling-operation">profiling operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setprofile</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#profile">profile</a>, <a href="#clearprofile">clearprofile</a>,
<a href="#profiletable">profiletable</a>, <a href="#profiletree">profiletree</a>,
<a href="#profiling">profiling</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setprofile</span></code> is used to turn on or turn off the gathering
of profiling statistics. The calls must be made at the same scope level
in order for profiling to work correctly. This can either be at the top
level, or within the body of some expression or operation.</p>

<p>The argument is a boolean value: <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> starts the profiling process and
<code class="language-nial highlighter-rouge"><span class="kc">false</span></code> stops it. Profiling can be turned on and off several times
within one profiling session.</p>

<p>A detailed explanation of the profiling mechanism is given in the help
entry on <code class="language-nial highlighter-rouge"><span class="nv">profiling</span></code>.</p>

<p>Example of use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setprofile</span> <span class="kc">True</span>
<span class="mb">o</span>
</code></pre></div></div>

<h2 id="setprompt">setprompt</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setprompt</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#set">set</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setprompt</span></code> sets the Q’Nial prompt to be the string or
phrase S. The default prompt is the string with 5 blank spaces. The
maximum size of a prompt is forty characters. <code class="language-nial highlighter-rouge"><span class="kp">Setprompt</span></code> provides the
facility to set a visible prompt which can be distinguished from prompts
issued by other software.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setprompt</span> <span class="s1">'qnial&gt;'</span>
<span class="nv">qnial</span><span class="o">&gt;</span>
</code></pre></div></div>

<h2 id="settrigger">settrigger</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">settrigger</span> <span class="nv">Switch</span></code></li>
  <li>See Also:<br />
<a href="#quiet-fault">quiet_fault</a>, <a href="#fault">fault</a>, <a href="#fault-triggering">fault
triggering</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">settrigger</span></code> sets the action taken when a fault is
generated in an operation. If <code class="language-nial highlighter-rouge"><span class="nv">Switch</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>, whenever a fault is
generated, computation is interrupted, a message is displayed indicating
the fault that has occurred and the expression where it occurred. Then
the <code class="language-nial highlighter-rouge"><span class="kp">Callstack</span></code> is displayed and a loop is entered that allows you to
explore the cause of the fault. If you press <code class="language-nial highlighter-rouge"><span class="nv">Return</span></code> at the prompt,
control is sent to the top level loop.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">Switch</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>, fault triggering is turned off.</p>

<p>The default setting at the start of an interactive session is fault
triggering on. The triggering of an interrupt by fault generation is
turned off for a direct execution of Q’Nial.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">settrigger</span> <span class="mb">o</span>
<span class="mb">l</span>
</code></pre></div></div>

<h2 id="setwidth">setwidth</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">setwidth</span> <span class="nv">N</span></code></li>
  <li>See Also:<br />
<a href="#set">set</a>, <a href="#writescreen">writescreen</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">setwidth</span></code> sets the width of the display and log lines.
The argument is an integer <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. The result is the previous setting. The
default setting is 80.</p>

<p><code class="language-nial highlighter-rouge"><span class="kp">Setwidth</span></code> is useful in controlling the format of display on output
saved for documentation purposes. For example, a setting of 130 allows
wide Nial diagrams to be printed on a line printer even though they may
not display properly on the screen. Narrower settings are convenient for
use in reports.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">setwidth</span> <span class="mi">50</span>
<span class="mi">80</span>
</code></pre></div></div>

<h2 id="shape">shape</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">shape</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tally">tally</a>, <a href="#valence">valence</a>, <a href="#reshape">reshape</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">shape</span></code> returns an array that describes the rectangular
structure of array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. Every array has a shape. For a single, including
atoms, the shape is the empty list <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>. For a list, it is a solitary
holding the integer giving the length of the list. For a table or higher
valence array, it is a list of integers giving the extent (number of
items) along each axis.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">shape</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span>
<span class="mi">3</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span><span class="p">;</span>
     <span class="kp">shape</span> <span class="nv">A</span>
<span class="mi">2</span> <span class="mi">3</span>
     <span class="nv">B</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">0</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="mi">2</span> <span class="p">;</span>
     <span class="kp">shape</span> <span class="nv">B</span>
<span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">0</span> <span class="mi">2</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">shape</span></code> always returns a list whereas <code class="language-nial highlighter-rouge"><span class="kp">tally</span></code> returns an
integer. An empty array such as <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is one with a zero in its shape.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">product</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">tally</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">valence</span> <span class="nv">A</span>
   <span class="kp">list</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="simple">simple</h2>

<ul>
  <li>Class:<br />
<a href="#structure-testing-operation">structure testing operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">simple</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#atomic">atomic</a>, <a href="#twig">twig</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">simple</span></code> tests whether or not an array has all atomic
items or is an empty array. The result is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if the array is simple
and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> if it is not.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="p">(</span><span class="kp">simple</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="kp">simple</span> <span class="ss">"abc</span><span class="p">)</span>
<span class="mb">ll</span>

     <span class="kp">simple</span> <span class="kc">Null</span>
<span class="mb">l</span>

     <span class="kp">simple</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span>
<span class="mb">o</span>

     <span class="p">(</span><span class="kp">simple</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The first two examples show that a list of integers, an atom and the
empty list <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> are all simple arrays. The next two examples show that
a pair of lists and the result of a <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> are not simple.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">simple</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="nb">EACH</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">simple</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">atomic</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="sin">sin</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">sin</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#sinh">sinh</a>, <a href="#cos">cos</a>, <a href="#pi">pi</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sin</span></code> implements the sine function of mathematics. It
produces the following results when applied to atoms of the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>sine of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>sine of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>sine of angle A given in radians</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?sin</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?sin</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sin</span>  <span class="mb">l</span>  <span class="mi">-1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">0.841</span> <span class="mf">-0.841</span> <span class="mf">0.479</span> <span class="gr">?sin</span> <span class="gr">?sin</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">sin</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="kp">sin</span> <span class="nv">A</span>
   <span class="p">(</span><span class="kp">sin</span> <span class="nv">A</span> <span class="kp">power</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="kp">cos</span> <span class="nv">A</span> <span class="kp">power</span> <span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="mf">1.0</span>   <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="single">single</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">single</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#solitary">solitary</a>, <a href="#null">null</a>, <a href="#atomic">atomic</a>,
<a href="#reshape">reshape</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">single</span></code> returns an array with no axes holding <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as its
only item. The result is an array with shape <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code> and is said to be a
<strong>single</strong> .</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">single</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mb">o</span><span class="o">---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+</span>
     <span class="mi">3</span> <span class="o">=</span> <span class="kp">single</span> <span class="mi">3</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The first example illustrates that a single of a pair contains the pair
as its item. In both <code class="language-nial highlighter-rouge"><span class="kp">diagram</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">sketch</span></code> modes, the display of a
nonatomic single is decorated with an <code class="language-nial highlighter-rouge"><span class="mb">o</span></code> in the upper left corner. The
second example illustrates that the single of an atom is the atom
itself.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">single</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kc">Null</span> <span class="kp">reshape</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">first</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">shape</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">atomic</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span> <span class="kp">equal</span> <span class="nv">A</span>
   <span class="nb">EACH</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span>  <span class="kp">single</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="nb">EACHLEFT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="kp">single</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="nb">EACHRIGHT</span> <span class="nv">f</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span> <span class="nb">EACHBOTH</span> <span class="nv">f</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="sinh">sinh</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">sinh</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#cosh">cosh</a>, <a href="#tanh">tanh</a>, <a href="#sin">sin</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sinh</span></code> implements the hyperbolic sine function of
mathematics. It produces the following results when applied to atoms of
the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>hyperbolic sine of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>hyperbolic sine of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>hyperbolic sine of angle A given in radians</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?sinh</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?sinh</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sinh</span>  <span class="mb">l</span>  <span class="mi">-1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">1.1752</span> <span class="mf">-1.1752</span> <span class="mf">0.521095</span> <span class="gr">?sinh</span> <span class="gr">?sinh</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">sinh</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="kp">sinh</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="sketch">sketch</h2>

<ul>
  <li>Class:<br />
<a href="#picture-operation">picture operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">sketch</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#picture">picture</a>, <a href="#diagram">diagram</a>, <a href="#paste">paste</a>,
<a href="#positions">positions</a>, <a href="#display">display</a>, <a href="#set">set</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sketch</span></code> computes a character table that gives the picture
of the array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as it is displayed in <code class="language-nial highlighter-rouge"><span class="kp">sketch</span></code> mode. The details of the
display of atoms and empty arrays is affected by the setting of the
<code class="language-nial highlighter-rouge"><span class="nv">decor</span><span class="o">/</span><span class="nv">nodecor</span></code> switch.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sketch</span> <span class="kp">tell</span> <span class="mi">1</span> <span class="mi">3</span>
</code></pre></div></div>

<p>The sketch of an array provides an abbreviated display that often serves
as an adequate output format for data. The entry for <code class="language-nial highlighter-rouge"><span class="kp">picture</span></code> has a
more complete description of the picturing mechanism.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sketch</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="nv">Old_setting</span> <span class="p">:=</span> <span class="kp">set</span> <span class="ss">"sketch</span><span class="p">;</span>
        <span class="nv">Result</span> <span class="p">:=</span> <span class="kp">picture</span> <span class="nv">A</span><span class="p">;</span>
        <span class="kp">set</span> <span class="nv">Old_setting</span><span class="p">;</span>
        <span class="nv">Result</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">sketch</span> <span class="kp">sketch</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sketch</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="solitary">solitary</h2>

<ul>
  <li>Class:<br />
<a href="#construction-operation">construction operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">solitary</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#single">single</a>, <a href="#list">list</a>, <a href="#shape">shape</a>, <a href="#hitch">hitch</a>,
<a href="#link">link</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">solitary</span></code> returns a list of length one holding <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as its
only item. The result is said to be a <strong>solitary</strong> .</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">solitary</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+</span>

     <span class="kp">set</span> <span class="ss">"diagram</span><span class="p">;</span> <span class="kp">solitary</span> <span class="mi">3</span>
<span class="o">+-+</span>
<span class="o">|</span><span class="mi">3</span><span class="o">|</span>
<span class="o">+-+</span>

     <span class="kp">set</span> <span class="ss">"sketch</span><span class="p">;</span> <span class="kp">solitary</span> <span class="mi">3</span>
<span class="mi">3</span>
</code></pre></div></div>

<p>The first example illustrates that a solitary of a pair contains the
pair as its item. The second example illustrates that the solitary of an
atom is different from the atom itself. However, as the third example
shows, in sketch mode, the display of the solitary of an atom is not
framed and hence may have the same display as the atom.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">solitary</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kc">Null</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">first</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">hitch</span> <span class="kc">Null</span>
   <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span> <span class="kp">append</span> <span class="nv">A</span>
   <span class="kp">solitary</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="kp">solitary</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="solve">solve</h2>

<ul>
  <li>Class:<br />
<a href="#linear-algebra-operation">linear algebra operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">solve</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">solve</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#inverse">inverse</a>, <a href="#innerproduct">innerproduct</a>, <a href="#inner">inner</a>,
<a href="#outer">outer</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">solve</span></code> solves the set of linear equations described by
the equation <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="nv">x</span> <span class="o">=</span> <span class="nv">B</span></code> in matrix notation, where <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>
matrix and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a vector of length <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. Provided that the matrix <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>
is not singular, the result is the vector of length <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> satisfying the
equation (within roundoff error).</p>

<p>In the computation, a numerical estimate is made of the singularity of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> cannot be shown to be non-singular with a safe margin, the
result of the operation is the fault <code class="language-nial highlighter-rouge"><span class="gr">?singular</span></code>.</p>

<p>The operation is extended to solve more than one right hand side. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>
is an <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> matrix, columns of <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> are viewed as right hand sides
and the result is an <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> matrix with each column being the
solution of the corresponding column.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">seed</span> <span class="o">.</span><span class="mi">314159</span><span class="p">;</span>
     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">ceiling</span> <span class="p">(</span><span class="mf">100.</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">random</span> <span class="mi">9</span><span class="p">))</span>
 <span class="mi">8</span> <span class="mi">75</span> <span class="mi">24</span>
<span class="mi">63</span> <span class="mi">31</span> <span class="mi">99</span>
<span class="mi">20</span> <span class="mi">95</span> <span class="mi">48</span>

     <span class="nv">B</span> <span class="p">:=</span> <span class="kp">ceiling</span> <span class="p">(</span><span class="mf">10.</span> <span class="o">*</span>  <span class="kp">random</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">4</span> <span class="mi">9</span> <span class="mi">5</span>

     <span class="nv">X</span> <span class="p">:=</span> <span class="kp">solve</span> <span class="nv">A</span> <span class="nv">B</span>
<span class="mf">0.787745</span> <span class="mf">0.111836</span> <span class="mf">-0.445402</span>

     <span class="nv">A</span> <span class="kp">innerproduct</span> <span class="nv">X</span>
<span class="mf">4.</span> <span class="mf">9.</span> <span class="mf">5.</span>

     <span class="nv">I</span> <span class="p">:=</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="nb">OUTER</span> <span class="o">=</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="o">*</span> <span class="mf">1.0</span>
<span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span>
<span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.</span>
<span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">1.</span>

     <span class="nv">A</span> <span class="kp">solve</span> <span class="nv">I</span>
 <span class="mf">0.614865</span>   <span class="mf">0.102516</span> <span class="mf">-0.518872</span>
<span class="mf">0.0810811</span> <span class="mf">0.00745573</span> <span class="mf">-0.055918</span>
<span class="mf">-0.416667</span> <span class="mf">-0.0574713</span>  <span class="mf">0.347701</span>

     <span class="kp">inverse</span> <span class="nv">A</span>
 <span class="mf">0.614865</span>   <span class="mf">0.102516</span> <span class="mf">-0.518872</span>
<span class="mf">0.0810811</span> <span class="mf">0.00745573</span> <span class="mf">-0.055918</span>
<span class="mf">-0.416667</span> <span class="mf">-0.0574713</span>  <span class="mf">0.347701</span>

     <span class="nv">A</span> <span class="kp">solve</span> <span class="nv">I</span> <span class="o">=</span> <span class="kp">inverse</span> <span class="nv">A</span>
<span class="mb">l</span>
</code></pre></div></div>

<p>The final example shows that if the right hand side is set to the unit
matrix of size <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>, solving it with <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is equivalent to computing the
inverse.</p>

<p>For large examples, it is always faster and more accurate to solve a
system of equations directly using <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">solve</span> <span class="nv">B</span></code> than to compute the
inverse and do the inner product operation <code class="language-nial highlighter-rouge"><span class="kp">inverse</span> <span class="nv">A</span> <span class="kp">innerproduct</span> <span class="nv">B</span></code> .
The first form does about half as many arithmetic steps.</p>

<h2 id="sort">sort</h2>

<ul>
  <li>Class:<br />
<a href="#sorting-transformer">sorting transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">SORT</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#grade">grade</a>, <a href="#sortup">sortup</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">SORT</span></code> returns the list of items of array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> ordered
according to the comparator <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>. The comparator <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is the operation to
be used in comparisons. The operations <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> and <code class="language-nial highlighter-rouge"><span class="o">&gt;=</span></code> are the usual
comparators. If <code class="language-nial highlighter-rouge"><span class="o">&gt;=</span></code> is the comparator in <code class="language-nial highlighter-rouge"><span class="nb">SORT</span></code>, the items are returned
in decreasing order. If <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code> is the comparator in <code class="language-nial highlighter-rouge"><span class="nb">SORT</span></code>, the items are
returned in increasing order.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">SORT</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="kp">count</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">10</span> <span class="mi">9</span> <span class="mi">8</span> <span class="mi">7</span> <span class="mi">6</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span>

     <span class="nb">SORT</span> <span class="o">&lt;=</span><span class="p">(</span><span class="ss">"some</span> <span class="ss">"words</span> <span class="ss">"not</span> <span class="ss">"in</span> <span class="ss">"order</span><span class="p">)</span>
<span class="kp">in</span> <span class="kp">not</span> <span class="nv">order</span> <span class="nv">some</span> <span class="nv">words</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">SORT</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nb">GRADE</span> <span class="nv">f</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">SORT</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nv">N</span> <span class="nv">an</span> <span class="nv">integer</span> <span class="o">==&gt;</span> <span class="nb">SORT</span> <span class="o">&lt;=</span> <span class="kp">tell</span> <span class="nv">N</span> <span class="o">=</span> <span class="kp">tell</span> <span class="nv">N</span>
   <span class="nb">SORT</span> <span class="nv">f</span> <span class="p">(</span><span class="nb">SORT</span> <span class="nv">f</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="nb">SORT</span> <span class="nv">f</span> <span class="nv">A</span>
</code></pre></div></div>

<p>The sort is done internally using either a radix sort (on integers) or a
list merge sort algorithm from Knuth’s Vol 3 Searching and Sorting,
Algorithm 5.2.5-L, improved according to exercise 12.</p>

<h2 id="sortup">sortup</h2>

<ul>
  <li>Class:<br />
<a href="#sorting-operation">sorting operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">sortup</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#gradeup">gradeup</a>, <a href="#sort">sort</a>, <a href="#up">up</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sortup</span></code> returns the list of items of array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> ordered
according to the lexicographical ordering comparator <code class="language-nial highlighter-rouge"><span class="kp">up</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sortup</span> <span class="mi">3</span> <span class="mi">7</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">9</span> <span class="mi">8</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">6</span> <span class="mi">10</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span>

     <span class="kp">sortup</span> <span class="p">(</span><span class="ss">"some</span> <span class="ss">"words</span> <span class="ss">"not</span> <span class="ss">"in</span> <span class="ss">"order</span><span class="p">)</span>
<span class="kp">in</span> <span class="kp">not</span> <span class="nv">order</span> <span class="nv">some</span> <span class="nv">words</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sortup</span> <span class="k">IS</span> <span class="nb">SORT</span> <span class="kp">up</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">gradeup</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sortup</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="split">split</h2>

<ul>
  <li>Class:<br />
<a href="#nesting-restructuring-operation">nesting restructuring operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">I</span> <span class="kp">split</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="kp">split</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#blend">blend</a>, <a href="#raise">raise</a>, <a href="#rows">rows</a>, <a href="#cols">cols</a>,
<a href="#rank">rank</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">split</span></code> restructures array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> by partitioning the items
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> into arrays using the given axis numbers in <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> to determine the
partition. The axis numbers in <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> indicate the axes that are to become
axes of the items. The remaining axes are axes of the result. The
argument <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> must be an array of integers in <code class="language-nial highlighter-rouge"><span class="kp">tell</span> <span class="kp">valence</span> <span class="nv">A</span></code> without
duplicates.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">6</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>

     <span class="mi">1</span> <span class="kp">split</span> <span class="nv">A</span>
<span class="o">+-----+-----+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+-----+-----+</span>
     <span class="nv">B</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">24</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>   <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span>
<span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>   <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>   <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>
     <span class="mi">2</span> <span class="kp">split</span> <span class="nv">B</span>
<span class="o">+-----------+-----------+-----------+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>    <span class="o">|</span><span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span>    <span class="o">|</span><span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="o">|</span>
<span class="o">+-----------+-----------+-----------+</span>
<span class="o">|</span><span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span><span class="o">|</span><span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span><span class="o">|</span><span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span><span class="o">|</span>
<span class="o">+-----------+-----------+-----------+</span>
     <span class="mi">1</span> <span class="kp">split</span> <span class="nv">B</span>
<span class="o">+--------+--------+--------+--------+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span>   <span class="o">|</span><span class="mi">2</span> <span class="mi">6</span> <span class="mi">10</span>  <span class="o">|</span><span class="mi">3</span> <span class="mi">7</span> <span class="mi">11</span>  <span class="o">|</span><span class="mi">4</span> <span class="mi">8</span> <span class="mi">12</span>  <span class="o">|</span>
<span class="o">+--------+--------+--------+--------+</span>
<span class="o">|</span><span class="mi">13</span> <span class="mi">17</span> <span class="mi">21</span><span class="o">|</span><span class="mi">14</span> <span class="mi">18</span> <span class="mi">22</span><span class="o">|</span><span class="mi">15</span> <span class="mi">19</span> <span class="mi">23</span><span class="o">|</span><span class="mi">16</span> <span class="mi">20</span> <span class="mi">24</span><span class="o">|</span>
<span class="o">+--------+--------+--------+--------+</span>
     <span class="mi">1</span> <span class="mi">2</span> <span class="kp">split</span> <span class="nv">B</span>
<span class="o">+----------+-----------+</span>
<span class="o">|</span><span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span><span class="o">|</span><span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span><span class="o">|</span>
<span class="o">|</span><span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span><span class="o">|</span><span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span><span class="o">|</span>
<span class="o">|</span><span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="o">|</span><span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span><span class="o">|</span>
<span class="o">+----------+-----------+</span>
     <span class="mi">1</span> <span class="mi">0</span> <span class="kp">split</span> <span class="nv">B</span>
<span class="o">+----+-----+-----+-----+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">13</span><span class="o">|</span> <span class="mi">2</span> <span class="mi">14</span><span class="o">|</span> <span class="mi">3</span> <span class="mi">15</span><span class="o">|</span> <span class="mi">4</span> <span class="mi">16</span><span class="o">|</span>
<span class="o">|</span><span class="mi">5</span> <span class="mi">17</span><span class="o">|</span> <span class="mi">6</span> <span class="mi">18</span><span class="o">|</span> <span class="mi">7</span> <span class="mi">19</span><span class="o">|</span> <span class="mi">8</span> <span class="mi">20</span><span class="o">|</span>
<span class="o">|</span><span class="mi">9</span> <span class="mi">21</span><span class="o">|</span><span class="mi">10</span> <span class="mi">22</span><span class="o">|</span><span class="mi">11</span> <span class="mi">23</span><span class="o">|</span><span class="mi">12</span> <span class="mi">24</span><span class="o">|</span>
<span class="o">+----+-----+-----+-----+</span>
</code></pre></div></div>

<p>The first example shows that splitting along the last axis of an array
is equivalent to taking its <code class="language-nial highlighter-rouge"><span class="kp">rows</span></code>. The second example shows that the
<code class="language-nial highlighter-rouge"><span class="kp">split</span></code> of the middle axis of a trivalent array is a table, with its
shape given by the first and third axes. The last two examples
illustrate two axes being “pushed down”. The result is a list with
tables as items. The order of the axes in the item is determined by the
order of the items in <code class="language-nial highlighter-rouge"><span class="nv">I</span></code>.</p>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">blend</span></code> uses the same control argument to undo the effect
of a <code class="language-nial highlighter-rouge"><span class="kp">split</span></code>. A common requirement is to partition an array along its
axes, apply some operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to the resulting items and to rebuild the
result into its original form. Partition is used to do this without
computing all the intermediate structures.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">split</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">I</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">empty</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="kp">fault</span> <span class="s1">'?empty right arg in split'</span>
        <span class="k">ELSEIF</span> <span class="kp">not</span><span class="p">(</span><span class="nv">I</span> <span class="kp">allin</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">diverse</span> <span class="nv">I</span><span class="p">)</span> <span class="k">THEN</span>
           <span class="kp">fault</span> <span class="s1">'?invalid left arg in split'</span>
        <span class="k">ELSE</span>
          <span class="nv">J</span> <span class="k">gets</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">except</span> <span class="kp">link</span> <span class="nv">I</span><span class="p">;</span>
          <span class="kp">tally</span> <span class="nv">J</span> <span class="kp">raise</span> <span class="p">(</span><span class="nv">J</span> <span class="kp">link</span> <span class="nv">I</span> <span class="kp">fuse</span> <span class="nv">A</span><span class="p">)</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">valence</span> <span class="nv">A</span> <span class="o">~=</span> <span class="mi">0</span> <span class="o">==&gt;</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">-</span> <span class="mi">1</span> <span class="kp">split</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">rows</span> <span class="nv">A</span>
   <span class="kp">diverse</span> <span class="nv">I</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">allin</span> <span class="kp">tell</span> <span class="kp">valence</span> <span class="nv">A</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="kp">first</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">split</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">list</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="kp">shape</span> <span class="nv">A</span><span class="p">)</span>
   <span class="kp">diverse</span> <span class="nv">I</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">allin</span> <span class="kp">tell</span> <span class="kp">valence</span> <span class="nv">A</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">split</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">except</span> <span class="p">(</span><span class="nv">I</span> <span class="kp">choose</span> <span class="kp">shape</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="sqrt">sqrt</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">sqrt</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#exp">exp</a>, <a href="#ln">ln</a>, <a href="#log">log</a>, <a href="#abs">abs</a>, <a href="#power">power</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sqrt</span></code> implements the square root function of mathematics.
It produces the following results when applied to atoms of the six
types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>square root of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>square root of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>square root of A</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?sqrt</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?sqrt</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sqrt</span>  <span class="mb">o</span>  <span class="mi">1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.707107</span> <span class="gr">?sqrt</span> <span class="gr">?sqrt</span> <span class="gr">?error</span>

     <span class="kp">sqrt</span>  <span class="mf">4.0</span>
<span class="mf">2.</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sqrt</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">power</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">sqrt</span> <span class="nv">A</span> <span class="kp">power</span> <span class="mi">2</span> <span class="o">=</span> <span class="nv">A</span> <span class="p">(</span><span class="nv">within</span> <span class="nv">roundoff</span> <span class="nv">error</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="step">step</h2>

<ul>
  <li>Class:<br />
<a href="#debugging-command">debugging command</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">step</span></code></li>
  <li>See Also:<br />
<a href="#debugging">debugging</a>, <a href="#break">break</a>, <a href="#resume">resume</a>,
<a href="#next">next</a>, <a href="#toend">toend</a>, <a href="#stepin">stepin</a></li>
</ul>

<p>The command <code class="language-nial highlighter-rouge"><span class="nv">step</span></code> is used in debugging a definition that has been
suspended using Break or &lt;Ctrl B&gt;. The effect of <code class="language-nial highlighter-rouge"><span class="nv">step</span></code> is to execute
the next expression in an expression sequence and to suspend execution
again. If the current expression involves a call on a defined operation
or expression, execution is suspended on the first expression in its
body. If the current expression is the last one in the expression
sequence where the break began, the effect is the same as using
<code class="language-nial highlighter-rouge"><span class="nv">resume</span></code>.</p>

<p>The related command <code class="language-nial highlighter-rouge"><span class="nv">stepv</span></code> displays the result of the expression
executed on a step before displaying the next expression.</p>

<h2 id="stepin">stepin</h2>

<ul>
  <li>Class:<br />
<a href="#debugging-command">debugging command</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">stepin</span></code></li>
  <li>See Also:<br />
<a href="#debugging">debugging</a>, <a href="#break">break</a>, <a href="#resume">resume</a>,
<a href="#next">next</a>, <a href="#toend">toend</a>, <a href="#step">step</a></li>
</ul>

<p>The command <code class="language-nial highlighter-rouge"><span class="nv">stepin</span></code> is used in debugging a definition that has been
suspended using Break or &lt;Ctrl B&gt;. The effect of <code class="language-nial highlighter-rouge"><span class="nv">stepin</span></code> is to
execute the next expression in an expression sequence tracing the
intermediate values generated and to suspend execution again. If the
current expression involves a call on a defined operation or expression,
execution is suspended on the first expression in its body. If the
current expression is the last one in the expression sequence where the
break began, the effect is the same as using <code class="language-nial highlighter-rouge"><span class="nv">resume</span></code>.</p>

<h2 id="string">string</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">string</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#phrase">phrase</a>, <a href="#fault">fault</a>, <a href="#isstring">isstring</a>,
<a href="#char">char</a>, <a href="#charrep">charrep</a>, <a href="#tolower">tolower</a>,
<a href="#toupper">toupper</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">string</span></code> is used to convert an atom to a string that
corresponds to the display of the atom. The form of the string is not
sensitive to the setting of the <code class="language-nial highlighter-rouge"><span class="nv">decor</span><span class="o">/</span><span class="nv">nodecor</span></code> display mode, returning
the sketch of the undecorated atom. The string of a string is the string
itself.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"diagram</span> <span class="p">;</span> <span class="kp">string</span> <span class="ss">"abc</span>
<span class="o">+-+-+-+</span>
<span class="o">|</span><span class="nv">a</span><span class="o">|</span><span class="nv">b</span><span class="o">|</span><span class="nv">c</span><span class="o">|</span>
<span class="o">+-+-+-+</span>
     <span class="kp">string</span> <span class="s1">'abc'</span>
<span class="o">+-+-+-+</span>
<span class="o">|</span><span class="nv">a</span><span class="o">|</span><span class="nv">b</span><span class="o">|</span><span class="nv">c</span><span class="o">|</span>
<span class="o">+-+-+-+</span>

     <span class="kp">string</span> <span class="mf">2.35</span>
<span class="o">+-+-+-+-+</span>
<span class="o">|</span><span class="mi">2</span><span class="o">|.|</span><span class="mi">3</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span>
<span class="o">+-+-+-+-+</span>
</code></pre></div></div>

<p>The string of a phrase is the string of the message in the phrase. Thus,
<code class="language-nial highlighter-rouge"><span class="kp">string</span></code> is the left inverse of <code class="language-nial highlighter-rouge"><span class="kp">phrase</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">isstring</span> <span class="nv">S</span> <span class="o">==&gt;</span> <span class="kp">string</span> <span class="nv">S</span> <span class="o">=</span> <span class="nv">S</span>
   <span class="kp">isstring</span> <span class="nv">S</span> <span class="o">==&gt;</span> <span class="kp">string</span> <span class="kp">phrase</span> <span class="nv">S</span> <span class="o">=</span> <span class="nv">S</span>
   <span class="kp">list</span> <span class="kp">string</span> <span class="nv">S</span> <span class="o">=</span> <span class="kp">string</span> <span class="nv">S</span>
</code></pre></div></div>

<h2 id="string_split">string_split</h2>

<ul>
  <li>Class:<br />
<a href="#string-manipulation-operation">string manipulation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">string_split</span> <span class="nv">C</span> <span class="nv">S</span> <span class="p">[</span><span class="nv">N</span><span class="p">]</span></code></li>
  <li>See Also:<br />
<a href="#cut">cut</a>, <a href="#cutall">cutall</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="nv">string_split</span></code> is used to break string <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> into substrings
using the characters in <code class="language-nial highlighter-rouge"><span class="nv">C</span></code> as places to break the string. If two
characters in <code class="language-nial highlighter-rouge"><span class="nv">C</span></code> are adjacent in <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> then an empty string is placed in
the result. The optional third argument is an integer which limits the
number of substrings returned.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">string_split</span> <span class="s1">' .'</span> <span class="s1">'The quick brown fox.'</span>
<span class="o">+---+-----+-----+---+</span>
<span class="o">|</span><span class="nv">The</span><span class="o">|</span><span class="nv">quick</span><span class="o">|</span><span class="nv">brown</span><span class="o">|</span><span class="nv">fox</span><span class="o">|</span>
<span class="o">+---+-----+-----+---+</span>

     <span class="nv">string_split</span> <span class="s1">' .,'</span> <span class="s1">'The quick, brown fox.'</span>
<span class="o">+---+-----++-----+---+</span>
<span class="o">|</span><span class="nv">The</span><span class="o">|</span><span class="nv">quick</span><span class="o">||</span><span class="nv">brown</span><span class="o">|</span><span class="nv">fox</span><span class="o">|</span>
<span class="o">+---+-----++-----+---+</span>
</code></pre></div></div>

<p>The first example shows a string being broken on spaces and the period.
The second is also broken on a comma and results in an empty string as
one of the items of the result.</p>

<h2 id="string_translate">string_translate</h2>

<ul>
  <li>Class:<br />
<a href="#string-manipulation-operation">string manipulation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">string_translate</span> <span class="nv">C</span> <span class="nv">D</span> <span class="nv">S</span> <span class="p">[</span><span class="nv">O</span><span class="p">]</span></code></li>
  <li>See Also:<br />
<a href="#cut">cut</a>, <a href="#cutall">cutall</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="nv">string_translate</span></code> is used to translate characters in
string <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> based on mapping characters in <code class="language-nial highlighter-rouge"><span class="nv">C</span></code> to the corresponding ones
in <code class="language-nial highlighter-rouge"><span class="nv">D</span></code>. The optional control argument <code class="language-nial highlighter-rouge"><span class="nv">O</span></code> is a string or phrase where
<code class="language-nial highlighter-rouge"><span class="s1">'d'</span></code> deletes the characters in <code class="language-nial highlighter-rouge"><span class="nv">C</span></code>, ‘c’ complements characters by
replacing characters not in <code class="language-nial highlighter-rouge"><span class="nv">C</span></code> by the last character in <code class="language-nial highlighter-rouge"><span class="nv">D</span></code>, and <code class="language-nial highlighter-rouge"><span class="s1">'s'</span></code>
translates characters in <code class="language-nial highlighter-rouge"><span class="nv">C</span></code> to those in <code class="language-nial highlighter-rouge"><span class="nv">D</span></code> but also squeezes many
occurrences to one.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">string_translate</span> <span class="s1">'abc'</span> <span class="s1">'def'</span> <span class="s1">'hello able cats'</span>
<span class="nv">hello</span> <span class="nv">dele</span> <span class="nv">fdts</span>

     <span class="nv">string_translate</span> <span class="s1">' '</span> <span class="s1">'_'</span> <span class="s1">'a whole lot of     loving'</span> <span class="s1">'s'</span>
<span class="nv">a_whole_lot_of_loving</span>

     <span class="nv">string_translate</span> <span class="s1">'xz'</span> <span class="s1">''</span> <span class="s1">'extraneous zeal'</span> <span class="s1">'d'</span>
<span class="nv">etraneous</span> <span class="nv">eal</span>

     <span class="nv">string_translate</span> <span class="s1">'xz'</span> <span class="s1">'b'</span> <span class="s1">'extraneous zeal'</span> <span class="s1">'c'</span>
<span class="nv">bxbbbbbbbbbzbbb</span>
</code></pre></div></div>

<p>The first example illustrates the translation of characters directly.
The second shows translation with squeezing. The third example shows the
use the <code class="language-nial highlighter-rouge"><span class="s1">'d'</span></code> option to delete characters. Example four shows the use of
the complement option.</p>

<h2 id="sublist">sublist</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">sublist</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">sublist</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#cull">cull</a>, <a href="#except">except</a>, <a href="#front">front</a>, <a href="#rest">rest</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sublist</span></code> returns a list of items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> chosen according
to the list of booleans given in <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, selecting those items of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> where
the corresponding item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>. If the tally of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is not the
same as the tally of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, it is coerced to have the same tally as <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>
using <code class="language-nial highlighter-rouge"><span class="kp">reshape</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is not a list, the result is the same as
applying <code class="language-nial highlighter-rouge"><span class="kp">sublist</span></code> to the list of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The tally of the result is the
sum of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> after it has been extended, if necessary.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mb">lolloll</span> <span class="kp">sublist</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">5</span> <span class="mi">10</span> <span class="mi">6</span>
<span class="mi">2</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">10</span> <span class="mi">6</span>

     <span class="mb">lo</span> <span class="kp">sublist</span> <span class="s1">'hello world'</span>
<span class="nv">hlowrd</span>
</code></pre></div></div>

<p>The first example shows the use of <code class="language-nial highlighter-rouge"><span class="kp">sublist</span></code> to select the items of the
list that are even numbers. The second example uses the left argument
cyclically.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">sublist</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kp">sum</span> <span class="p">(</span><span class="kp">tally</span> <span class="nv">B</span> <span class="kp">reshape</span> <span class="nv">A</span><span class="p">)</span>
   <span class="kp">list</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">sublist</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">sublist</span> <span class="nv">B</span>
   <span class="nv">A</span> <span class="kp">sublist</span> <span class="kp">list</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">sublist</span> <span class="nv">B</span>
   <span class="mb">l</span> <span class="kp">sublist</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="mb">o</span> <span class="kp">sublist</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
</code></pre></div></div>

<h2 id="sum">sum</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Properties:<br />
multi pervasive, reductive</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">sum</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="o">+</span> <span class="nv">A</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">sum</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">+</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#plus">plus</a>, <a href="#minus">minus</a>, <a href="#times">times</a>, <a href="#divide">divide</a>,
<a href="#opposite">opposite</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code> adds the items of a simple array of numbers,
reducing them to a single number that is their sum. The type of the
result is the highest type of the items. The operation is extended to
non-simple arrays by the multi pervasive mechanism. For an empty simple
array, the result is 0. The symbol <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code> restricted to use on pairs.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">R</span> <span class="k">gets</span> <span class="mb">l</span> <span class="mi">2</span> <span class="mf">2.5</span> <span class="sc">`a</span> <span class="ss">"abc</span> <span class="gr">??error</span><span class="p">;</span>
     <span class="nv">R</span> <span class="nb">OUTER</span> <span class="o">+</span> <span class="nv">R</span>
     <span class="mi">2</span>       <span class="mi">3</span>     <span class="mf">3.5</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
     <span class="mi">3</span>       <span class="mi">4</span>     <span class="mf">4.5</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
   <span class="mf">3.5</span>     <span class="mf">4.5</span>      <span class="mf">5.</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>      <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?A</span>
<span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?error</span>  <span class="gr">?A</span>  <span class="gr">?A</span>  <span class="gr">?error</span>

     <span class="kp">sum</span> <span class="mf">3.</span> <span class="mf">45.</span> <span class="mf">23.</span> <span class="mf">18.</span> <span class="mf">3.5</span>
<span class="mf">92.5</span>

     <span class="kp">sum</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">6</span> <span class="mi">10</span> <span class="mi">12</span>

     <span class="kp">sum</span> <span class="kc">Null</span>
<span class="mi">0</span>
</code></pre></div></div>

<p>The first example shows the result of <code class="language-nial highlighter-rouge"><span class="kp">sum</span></code> on all combinations of types
of atoms. The second last example shows that pervasive extension of
<code class="language-nial highlighter-rouge"><span class="kp">sum</span></code> adds a list of triples in an item by item fashion. The last
example shows that the sum of an empty array is 0.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">A</span> <span class="kp">sum</span> <span class="nv">B</span> <span class="o">=</span> <span class="nv">B</span> <span class="kp">sum</span> <span class="nv">A</span>
   <span class="kp">sum</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">EACH</span> <span class="p">(</span><span class="kp">sum</span> <span class="kp">single</span><span class="p">)</span> <span class="nv">A</span>
   <span class="kp">sum</span> <span class="nb">EACH</span> <span class="kp">sum</span> <span class="nv">A</span> <span class="o">=</span><span class="nv">f</span><span class="o">=</span> <span class="kp">sum</span> <span class="kp">link</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">link</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">sum</span> <span class="nb">EACH</span> <span class="kp">tally</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="symbols">symbols</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">symbols</span> <span class="nv">Sw</span></code></li>
  <li>See Also:<br />
<a href="#status">status</a>, <a href="#exprs">exprs</a>, <a href="#ops">ops</a>, <a href="#trs">trs</a>,
<a href="#vars">vars</a>, <a href="#see">see</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">symbols</span></code> is used to get information on the use of names
in the workspace. If <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> is 0, the result is a list of pairs giving the
names and roles of all the user defined names. If <code class="language-nial highlighter-rouge"><span class="nv">Sw</span></code> is 1, the result
is the similar list for both system and user names. The roles and their
meaning are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Role</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ident</td>
      <td>identifier</td>
    </tr>
    <tr>
      <td>var</td>
      <td>variable</td>
    </tr>
    <tr>
      <td>expr</td>
      <td>expression</td>
    </tr>
    <tr>
      <td>op</td>
      <td>operation</td>
    </tr>
    <tr>
      <td>tr</td>
      <td>transformer</td>
    </tr>
    <tr>
      <td>res</td>
      <td>reserved word</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">A</span> <span class="p">:=</span> <span class="kp">count</span> <span class="mi">5</span><span class="p">;</span>

     <span class="nv">foo</span> <span class="k">IS</span> <span class="kp">first</span> <span class="kp">rest</span>

     <span class="kp">symbols</span> <span class="mi">0</span>
<span class="o">+-----+------+</span>
<span class="o">|</span><span class="nv">A</span> <span class="nv">var</span><span class="o">|</span><span class="nv">FOO</span> <span class="k">op</span><span class="o">|</span>
<span class="o">+-----+------+</span>
</code></pre></div></div>

<h2 id="take">take</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Property:<br />
<a href="#binary">binary</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">take</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">take</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#drop">drop</a>, <a href="#takeright">takeright</a>, <a href="#front">front</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">take</span></code> selects a number of items from <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> as indicated by
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a list and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a non-negative integer, the result is the
list formed from taking <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> items from the front of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is
negative, it takes items from the right end of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a table and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a pair of non-negative integers, the result
is the table formed by taking the number of rows and columns indicated
by <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> from the upper left corner of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If one or both of the items of
<code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are negative, the items are taken from the other end of the axis.</p>

<p>For higher dimensional arrays <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the tally of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> must equal the
valence of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and the result is obtained by taking from the front or
back of the extents along each axis according to the sign of the
corresponding item of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<p>In all of the above cases, if an item of <code class="language-nial highlighter-rouge"><span class="kp">abs</span> <span class="nv">A</span></code> is longer than the
extent along the corresponding axis in <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>, the corresponding positions
in the result are filled with the type of the first item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>
is empty then the result is filled with the fault value <code class="language-nial highlighter-rouge"><span class="gr">?fill</span></code>.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is a single, the result is an array of shape <code class="language-nial highlighter-rouge"><span class="kp">abs</span> <span class="nv">A</span></code>, with all
its items equal to the item of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="kp">take</span> <span class="ss">"Able</span> <span class="ss">"Baker</span> <span class="ss">"Charlie</span> <span class="ss">"Dog</span>
<span class="nv">Able</span> <span class="nv">Baker</span>

     <span class="nv">T1</span> <span class="p">:=</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>

     <span class="mi">1</span> <span class="mi">2</span> <span class="kp">take</span> <span class="nv">T1</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+</span>

     <span class="mi">3</span> <span class="mi">-5</span> <span class="kp">take</span> <span class="nv">T1</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span>
<span class="o">+---+---+---+---+---+</span>

     <span class="mi">2</span> <span class="mi">3</span> <span class="kp">take</span> <span class="kp">single</span> <span class="mi">3</span> <span class="mi">5</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span><span class="mi">3</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
</code></pre></div></div>

<p>The last example shows that taking from a single repeats the item of the
single in every item of the result.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">take</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">valence</span> <span class="nv">B</span> <span class="kp">and</span> <span class="p">(</span><span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">isinteger</span> <span class="nv">A</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="kp">shape</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">take</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="kp">list</span> <span class="kp">abs</span> <span class="nv">A</span>
   <span class="kp">valence</span> <span class="nv">B</span> <span class="o">=</span> <span class="mi">0</span> <span class="kp">and</span> <span class="p">(</span><span class="kp">and</span> <span class="nb">EACH</span> <span class="kp">isinteger</span> <span class="nv">A</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">take</span> <span class="nv">B</span> <span class="o">=</span> <span class="kp">abs</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="takeright">takeright</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">takeright</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">takeright</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#take">take</a>, <a href="#dropright">dropright</a>, <a href="#last">last</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">takeright</span></code> is an obsolete operation that takes items from
the ends of extents. It is provided to retain compatibility with earlier
versions of Q’Nial.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">takeright</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="nv">B</span> <span class="p">{</span><span class="err">­</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="kp">take</span> <span class="nv">B</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="tally">tally</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tally</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#shape">shape</a>, <a href="#valence">valence</a>, <a href="#grid">grid</a>, <a href="#list">list</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">tally</span></code> returns an integer indicating the number of items
of the array at the first level of nesting. This is called the tally of
the array. The tally of a single is 1. The tally of a list is the number
of items in it. The tally of a table is the product of the number of
rows and columns. In general, the tally of an array is the product of
its shape.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tally</span> <span class="ss">"abc</span>
<span class="mi">1</span>
     <span class="kp">tally</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mi">3</span>
     <span class="kp">tally</span> <span class="s1">'hello world'</span>
<span class="mi">11</span>
     <span class="kp">tally</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span>
<span class="mi">2</span>
     <span class="kp">tally</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mi">12</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tally</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="kp">product</span> <span class="kp">shape</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tally</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">first</span> <span class="kp">shape</span> <span class="kp">list</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">valence</span> <span class="nv">A</span>
   <span class="kp">tally</span> <span class="kp">tally</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">1</span>
   <span class="kp">tally</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="tan">tan</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tan</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#arctan">arctan</a>, <a href="#sin">sin</a>, <a href="#cos">cos</a>, <a href="#tanh">tanh</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">tan</span></code> implements the tangent function of mathematics. It
produces the following results when applied to atoms of the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>tangent of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>tangent of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>tangent of angle A given in radians</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tan</span>  <span class="mb">l</span>  <span class="mi">-1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">1.55741</span> <span class="mf">-1.55741</span> <span class="mf">0.546302</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tan</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="kp">sin</span> <span class="nv">A</span> <span class="kp">divide</span> <span class="kp">cos</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tan</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="kp">tan</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="tanh">tanh</h2>

<ul>
  <li>Class:<br />
<a href="#scientific-operation">scientific operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tanh</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tan">tan</a>, <a href="#arctan">arctan</a>, <a href="#sinh">sinh</a>, <a href="#cosh">cosh</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">tanh</span></code> implements the hyperbolic tangent function of
mathematics. It produces the following results when applied to atoms of
the six types:</p>

<table>
  <thead>
    <tr>
      <th>Atomic Type</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>hyperbolic tangent of the corresponding real</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>hyperbolic tangent of the corresponding real</td>
    </tr>
    <tr>
      <td>real</td>
      <td>hyperbolic tangent of angle A given in radians</td>
    </tr>
    <tr>
      <td>character</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>fault ?A</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>argument A</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tanh</span>  <span class="mb">l</span>  <span class="mi">-1</span>  <span class="mf">0.5</span>  <span class="sc">`a</span>  <span class="ss">"abc</span>  <span class="gr">??error</span>
<span class="mf">0.761594</span> <span class="mf">-0.761594</span> <span class="mf">0.462117</span> <span class="gr">?A</span> <span class="gr">?A</span> <span class="gr">?error</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tanh</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="kp">sinh</span> <span class="nv">A</span> <span class="kp">divide</span> <span class="kp">cosh</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tanh</span> <span class="kp">opposite</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">opposite</span> <span class="kp">tanh</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="team">team</h2>

<ul>
  <li>Class:<br />
<a href="#applicative-transformer">applicative transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">TEAM</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#each">each</a>, <a href="#eachboth">eachboth</a>, <a href="#eachall">eachall</a>,
<a href="#fold">fold</a>, <a href="#iterate">iterate</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">TEAM</span></code> applies the operations of atlas <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to
corresponding items in the list of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. There must be the same number of
items in <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> as there are operations in the atlas <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>. The result has
the shape of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> is an operation that is not an atlas, <code class="language-nial highlighter-rouge"><span class="nb">TEAM</span> <span class="nv">f</span>
<span class="nv">A</span></code> is the application of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">TEAM</span> <span class="p">[</span><span class="o">+</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="kp">max</span><span class="p">,</span><span class="kp">min</span><span class="p">]</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">2</span><span class="p">)(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">)(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">5</span> <span class="mi">20</span> <span class="mi">4</span> <span class="mi">2</span>

     <span class="nb">TEAM</span> <span class="p">[</span><span class="o">+</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="kp">max</span><span class="p">,</span><span class="kp">min</span><span class="p">]</span> <span class="kp">count</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="mi">2</span> <span class="mi">2</span>
<span class="mi">2</span> <span class="mi">2</span>

     <span class="nb">TEAM</span> <span class="kp">second</span> <span class="kp">count</span> <span class="mi">5</span>
<span class="mi">2</span>
</code></pre></div></div>

<h2 id="tell">tell</h2>

<ul>
  <li>Class:<br />
<a href="#array-generation-operation">array generation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tell</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#count">count</a>, <a href="#gage">gage</a>, <a href="#grid">grid</a>, <a href="#cart">cart</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> is used to generate an array of addresses from a
shape. For a non-negative integer <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>, it generates the list of integers
from 0 to <code class="language-nial highlighter-rouge"><span class="nv">N</span> <span class="o">-</span> <span class="mi">1</span></code>. For a list of non-negative integers, <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> generates
the array of all combinations of tell applied to the items of the list.
If <code class="language-nial highlighter-rouge"><span class="kp">list</span> <span class="nv">A</span></code> is not a shape, the result is the fault <code class="language-nial highlighter-rouge"><span class="gr">?shape</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tell</span> <span class="mi">5</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>

     <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">0</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">0</span><span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+---+</span>
</code></pre></div></div>

<p>The examples show <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> being applied to a shape and returning the
array of addresses.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">tell</span> <span class="kp">shape</span> <span class="nv">A</span> <span class="kp">choose</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">isinteger</span> <span class="nv">A</span> <span class="kp">or</span> <span class="nv">isshape</span> <span class="nv">A</span> <span class="o">==&gt;</span> <span class="kp">tell</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">cart</span> <span class="nb">EACH</span> <span class="kp">tell</span> <span class="nv">A</span>
   <span class="nv">N</span> <span class="nv">an</span> <span class="nv">integer</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">N</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="kp">tell</span> <span class="p">(</span><span class="nv">N</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="kp">tell</span> <span class="nv">N</span> <span class="kp">append</span> <span class="nv">N</span><span class="p">)</span>
   <span class="kp">tell</span> <span class="kc">Null</span> <span class="o">=</span> <span class="kp">single</span> <span class="kc">Null</span>
   <span class="kp">tell</span> <span class="mi">0</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">tell</span> <span class="mi">1</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="mi">0</span>
   <span class="kp">tell</span> <span class="kp">solitary</span> <span class="mi">1</span> <span class="o">=</span> <span class="kp">solitary</span> <span class="kp">solitary</span> <span class="mi">0</span>
</code></pre></div></div>

<h2 id="third">third</h2>

<ul>
  <li>Class:<br />
<a href="#selection-operation">selection operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">third</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#first">first</a>, <a href="#second">second</a>, <a href="#find">find</a>, <a href="#last">last</a>,
<a href="#pick">pick</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">third</span></code> returns the third of the items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. <code class="language-nial highlighter-rouge"><span class="kp">Third</span></code> is
defined in terms of <code class="language-nial highlighter-rouge"><span class="kp">pick</span></code> and its behaviour is affected by that of
<code class="language-nial highlighter-rouge"><span class="kp">pick</span></code>. The third of a triple is its last item. The third of a table is
the third item in the list of items in row major order. The third of an
array with two or fewer items is the fault <code class="language-nial highlighter-rouge"><span class="gr">?address</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">third</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">6</span>

     <span class="kp">third</span> <span class="kp">tell</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="mi">0</span> <span class="mi">2</span>

     <span class="kp">third</span> <span class="kc">Null</span>
<span class="mi">0</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">third</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="mi">2</span> <span class="kp">pick</span> <span class="kp">list</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">third</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">third</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="times">times</h2>

<ul>
  <li>Class:<br />
<a href="#arithmetic-operation">arithmetic operation</a></li>
  <li>Property:<br />
<a href="#binary-pervasive">binary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">times</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">times</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#product">product</a>, <a href="#divide">divide</a>, <a href="#reciprocal">reciprocal</a>,
<a href="#plus">plus</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">times</span></code> is the same as <code class="language-nial highlighter-rouge"><span class="kp">product</span></code> (and synonym <code class="language-nial highlighter-rouge"><span class="o">*</span></code>) except
that it enforces the rule that it must be applied to a pair. <code class="language-nial highlighter-rouge"><span class="kp">Product</span></code>
is multi pervasive and can add up any number of items.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">7</span> <span class="kp">times</span> <span class="mi">9</span>
<span class="mi">63</span>

     <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="kp">times</span> <span class="p">(</span><span class="mi">12</span> <span class="mi">22</span> <span class="mi">33</span><span class="p">)</span>
<span class="mi">24</span> <span class="mi">66</span> <span class="mi">132</span>

     <span class="kp">times</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
<span class="gr">?times</span> <span class="nv">expects</span> <span class="nv">a</span> <span class="kp">pair</span>
</code></pre></div></div>

<h2 id="toend">toend</h2>

<ul>
  <li>Class:<br />
<a href="#debugging-command">debugging command</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">toend</span></code></li>
  <li>See Also:<br />
<a href="#debugging">debugging</a>, <a href="#break">break</a>, <a href="#resume">resume</a>,
<a href="#next">next</a>, <a href="#step">step</a>, <a href="#stepin">stepin</a></li>
</ul>

<p>The command <code class="language-nial highlighter-rouge"><span class="nv">toend</span></code> is used in debugging a definition that has been
suspended using Break or &lt;Ctrl B&gt;. The effect of <code class="language-nial highlighter-rouge"><span class="nv">toend</span></code> is to execute
all the expressions to the end of the current loop or the end of the
definition. If there is a loop then execution suspends on the expression
following the loop. If the <code class="language-nial highlighter-rouge"><span class="nv">toend</span></code> is issued when not in a loop,
execution suspends on the expression being returned from the definition.</p>

<h2 id="tolower">tolower</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tolower</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#toupper">toupper</a>, <a href="#tonumber">tonumber</a>, <a href="#char">char</a>,
<a href="#charrep">charrep</a>, <a href="#phrase">phrase</a>, <a href="#string">string</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">tolower</span></code> is used to ensure that a string has all its
letters in lower case. Applied to a string <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, it results in a string
with all the upper case letters converted to lower case leaving all
other characters unchanged. It can also be used on a single character.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tolower</span> <span class="s1">'abcDE*?12xyZ'</span>
<span class="nv">abcde</span><span class="o">*</span><span class="gr">?12xyz</span>

     <span class="kp">tolower</span> <span class="s1">'STATEMENT IN LOWER CASE'</span>
<span class="nv">statement</span> <span class="kp">in</span> <span class="kp">lower</span> <span class="k">case</span>
</code></pre></div></div>

<h2 id="tonumber">tonumber</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">tonumber</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tolower">tolower</a>, <a href="#toupper">toupper</a>, <a href="#execute">execute</a>,
<a href="#char">char</a>, <a href="#charrep">charrep</a>, <a href="#string">string</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">tonumber</span></code> converts the string <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> holding a character
representation of a number to its corresponding numeric representation.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">tonumber</span> <span class="s1">'345'</span>
<span class="mi">345</span>

     <span class="kp">tonumber</span> <span class="s1">'37.456'</span>
<span class="mf">37.456</span>

     <span class="kp">tonumber</span> <span class="s1">'123456789012345'</span>
<span class="mf">1.23457e+14</span>

     <span class="kp">tonumber</span> <span class="s1">'l'</span>
<span class="mb">l</span>

     <span class="kp">tonumber</span> <span class="s1">'"abc'</span>
<span class="gr">?not</span> <span class="nv">a</span> <span class="nv">number</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">Numstr</span> <span class="nv">a</span> <span class="kp">string</span> <span class="nv">representing</span> <span class="nv">a</span> <span class="nv">number</span> <span class="o">==&gt;</span> <span class="nv">tostring</span> <span class="nv">Numstr</span> <span class="o">=</span> <span class="kp">execute</span> <span class="nv">Numstr</span>
</code></pre></div></div>

<h2 id="toraw">toraw</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">toraw</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#fromraw">fromraw</a>, <a href="#tonumber">tonumber</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">toraw</span></code> converts the simple array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> of real number,
integers, or characters to a boolean array corresponding to the internal
bit pattern for the data.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">toraw</span> <span class="s1">'abc'</span>
<span class="mb">olloooololloooloolloooll</span>

     <span class="kp">toraw</span> <span class="mi">345</span>
<span class="mb">ooooooooooooooooooooooololollool</span>

     <span class="kp">toraw</span> <span class="mf">34.5</span>
<span class="mb">olooooooolooooololoooooooooooooooooooooooooooooooooooooooooooooo</span>

     <span class="kp">toraw</span> <span class="mb">lollo</span>
<span class="mb">lollo</span>
</code></pre></div></div>

<p><strong>Equation</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">simple</span> <span class="nv">A</span> <span class="kp">and</span> <span class="kp">and</span> <span class="p">(</span><span class="kp">type</span> <span class="nv">A</span> <span class="kp">match</span> <span class="kp">type</span> <span class="kp">first</span> <span class="nv">A</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">fromraw</span> <span class="p">(</span><span class="kp">toraw</span> <span class="nv">A</span><span class="p">)</span> <span class="p">(</span><span class="kp">first</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="toupper">toupper</h2>

<ul>
  <li>Class:<br />
<a href="#conversion-operation">conversion operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">toupper</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#tolower">tolower</a>, <a href="#tonumber">tonumber</a>, <a href="#char">char</a>,
<a href="#charrep">charrep</a>, <a href="#string">string</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">toupper</span></code> is used to ensure that a string has all its
letters in upper case. Applied to a string <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>, it results in a string
with all the lower case letters converted to upper case leaving all
other characters unchanged. It can also be used on a single character.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">toupper</span> <span class="s1">'abcDE*?12xyZ'</span>
<span class="nv">ABCDE</span><span class="o">*</span><span class="gr">?12XYZ</span>

     <span class="kp">toupper</span> <span class="s1">'a statement in upper case'</span>
<span class="nv">A</span> <span class="nv">STATEMENT</span> <span class="kp">IN</span> <span class="nv">UPPER</span> <span class="k">CASE</span>
</code></pre></div></div>

<h2 id="transpose">transpose</h2>

<ul>
  <li>Class:<br />
<a href="#data-rearrangement-operation">data rearrangement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">transpose</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#fuse">fuse</a>, <a href="#reverse">reverse</a>, <a href="#pack">pack</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">transpose</span></code> is used to reverse the axes of a table or
array of higher valence. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is an <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> table, the transpose is
the <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> by <code class="language-nial highlighter-rouge"><span class="nv">M</span></code> table whose rows are the columns of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. <code class="language-nial highlighter-rouge"><span class="kp">Transpose</span></code> has
no effect on a single or a list.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">transpose</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span>
<span class="o">+---+---+</span>
<span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span>
<span class="o">+---+---+</span>

     <span class="nv">A</span> <span class="p">:=</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="kp">count</span> <span class="mi">24</span>
<span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>   <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span>
<span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>   <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span>
<span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>   <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>

     <span class="kp">transpose</span> <span class="nv">A</span>
<span class="mi">1</span> <span class="mi">13</span>    <span class="mi">2</span> <span class="mi">14</span>    <span class="mi">3</span> <span class="mi">15</span>    <span class="mi">4</span> <span class="mi">16</span>
<span class="mi">5</span> <span class="mi">17</span>    <span class="mi">6</span> <span class="mi">18</span>    <span class="mi">7</span> <span class="mi">19</span>    <span class="mi">8</span> <span class="mi">20</span>
<span class="mi">9</span> <span class="mi">21</span>   <span class="mi">10</span> <span class="mi">22</span>   <span class="mi">11</span> <span class="mi">23</span>   <span class="mi">12</span> <span class="mi">24</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">transpose</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span> <span class="kp">reverse</span> <span class="kp">tell</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="kp">fuse</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">transpose</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reverse</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="kp">transpose</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">reverse</span> <span class="kp">axes</span> <span class="nv">A</span> <span class="kp">fuse</span> <span class="nv">A</span>
   <span class="kp">transpose</span> <span class="kp">transpose</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">A</span>
   <span class="kp">transpose</span> <span class="kp">single</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">single</span> <span class="nv">A</span>
   <span class="kp">transpose</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="twig">twig</h2>

<ul>
  <li>Class:<br />
<a href="#distributive-transformer">distributive transformer</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nb">TWIG</span> <span class="nv">f</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#leaf">leaf</a>, <a href="#each">each</a></li>
</ul>

<p>The transformer <code class="language-nial highlighter-rouge"><span class="nb">TWIG</span></code> transforms an operation <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> into an operation
that applies <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to every simple array in the nested structure of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.
The resulting operation is called the <code class="language-nial highlighter-rouge"><span class="nb">TWIG</span></code> transform of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code>. The
result of applying the <code class="language-nial highlighter-rouge"><span class="nb">TWIG</span></code> transform of <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> to <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has the same shape
as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">f</span></code> maps simple arrays to simple arrays of the same shape,
the result has the same structure as <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">T1</span> <span class="p">:=</span> <span class="kp">count</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">|</span><span class="mi">1</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>
<span class="o">|</span><span class="mi">2</span> <span class="mi">1</span><span class="o">|</span><span class="mi">2</span> <span class="mi">2</span><span class="o">|</span><span class="mi">2</span> <span class="mi">3</span><span class="o">|</span>
<span class="o">+---+---+---+</span>

     <span class="nb">TWIG</span> <span class="kp">tally</span> <span class="nv">T1</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>

     <span class="nb">TWIG</span> <span class="kp">tell</span> <span class="nv">T1</span>
<span class="o">+-----+---------+-------------+</span>
<span class="o">|+---+|+---+---+|+---+---+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">||</span>
<span class="o">|+---+|+---+---+|+---+---+---+|</span>
<span class="o">+-----+---------+-------------+</span>
<span class="o">|+---+|+---+---+|+---+---+---+|</span>
<span class="o">||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">0</span> <span class="mi">0</span><span class="o">|</span><span class="mi">0</span> <span class="mi">1</span><span class="o">|</span><span class="mi">0</span> <span class="mi">2</span><span class="o">||</span>
<span class="o">|+---+|+---+---+|+---+---+---+|</span>
<span class="o">||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|||</span><span class="mi">1</span> <span class="mi">0</span><span class="o">|</span><span class="mi">1</span> <span class="mi">1</span><span class="o">|</span><span class="mi">1</span> <span class="mi">2</span><span class="o">||</span>
<span class="o">|+---+|+---+---+|+---+---+---+|</span>
<span class="o">+-----+---------+-------------+</span>
</code></pre></div></div>

<p>The first example shows that the result of applying a <code class="language-nial highlighter-rouge"><span class="nb">TWIG</span></code> transform
to a table is a table of the same shape. The items of <code class="language-nial highlighter-rouge"><span class="nv">T1</span></code> are simple
and hence have been mapped by tally to 2. In the second example, the
structure of the result is not preserved because <code class="language-nial highlighter-rouge"><span class="kp">tell</span></code> maps a pair to a
table of pairs.</p>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">TWIG</span> <span class="k">IS</span> <span class="kp">TRANSFORMER</span> <span class="nv">f</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span>
        <span class="k">IF</span> <span class="kp">simple</span> <span class="nv">A</span> <span class="k">THEN</span>
           <span class="nv">f</span> <span class="nv">A</span>
        <span class="k">ELSE</span>
           <span class="nb">EACH</span> <span class="p">(</span><span class="nb">TWIG</span> <span class="nv">f</span><span class="p">)</span> <span class="nv">A</span>
        <span class="k">ENDIF</span> <span class="p">}</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="nb">TWIG</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">shape</span> <span class="nv">A</span>
   <span class="nv">f</span> <span class="nv">unary</span> <span class="nv">pervasive</span> <span class="o">==&gt;</span> <span class="nb">TWIG</span> <span class="nv">f</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="p">(</span><span class="nb">TWIG</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">TWIG</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span> <span class="o">=</span> <span class="nb">TWIG</span> <span class="p">(</span><span class="nv">f</span> <span class="nv">g</span><span class="p">)</span> <span class="nv">A</span>
   <span class="nb">TWIG</span> <span class="nv">f</span> <span class="kp">list</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">list</span> <span class="nb">TWIG</span> <span class="nv">f</span> <span class="nv">A</span>
   <span class="nv">A</span> <span class="k">is</span> <span class="nv">a</span> <span class="kp">shape</span> <span class="o">==&gt;</span> <span class="nb">TWIG</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">A</span> <span class="kp">reshape</span> <span class="nv">B</span><span class="p">)</span> <span class="o">=</span> <span class="nv">A</span> <span class="kp">reshape</span> <span class="nb">TWIG</span> <span class="nv">f</span> <span class="nv">B</span>
</code></pre></div></div>

<h2 id="type">type</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Property:<br />
<a href="#unary-pervasive">unary pervasive</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">type</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#isboolean">isboolean</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">type</span></code> maps an atom <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to the representative value of the
corresponding atomic type. It is extended to arbitrary arrays by being
unary pervasive.</p>

<table>
  <thead>
    <tr>
      <th>Atomic type</th>
      <th>Representative atom</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>boolean</td>
      <td>o</td>
    </tr>
    <tr>
      <td>integer</td>
      <td>0</td>
    </tr>
    <tr>
      <td>real</td>
      <td>0.</td>
    </tr>
    <tr>
      <td>character</td>
      <td>&lt;blank&gt;</td>
    </tr>
    <tr>
      <td>phrase</td>
      <td>”</td>
    </tr>
    <tr>
      <td>fault</td>
      <td>?</td>
    </tr>
  </tbody>
</table>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">set</span> <span class="ss">"decor</span><span class="p">;</span>
     <span class="kp">type</span> <span class="mb">l</span>  <span class="mi">3</span>  <span class="mf">3.3</span>  <span class="sc">`3</span>  <span class="s1">'3.3'</span>  <span class="ss">"33</span>
<span class="o">+-+-+--+--+-----+--+</span>
<span class="o">|</span><span class="mb">o</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span><span class="mf">0.</span><span class="o">|</span><span class="sc">` </span><span class="o">|</span><span class="s1">'   '</span><span class="o">|</span><span class="ss">""|</span>
<span class="o">+-+-+--+--+-----+--+</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">type</span></code> is provided as a computational way of transforming
an array to a standard value, while preserving structure and type
information. Executing a type test predicate, <code class="language-nial highlighter-rouge"><span class="kp">isboolean</span></code>, isinteger ,
etc., is equivalent to testing that the type of an array is equal to the
corresponding representative atom.</p>

<h2 id="unequal">unequal</h2>

<ul>
  <li>Class:<br />
<a href="#logic-operation">logic operation</a></li>
  <li>Property:<br />
<a href="#predicate">predicate</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">unequal</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="o">~=</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">unequal</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#equal">equal</a>, <a href="#diverse">diverse</a>, <a href="#notin">notin</a></li>
</ul>

<p>The operation</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="o">~=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="mb">o</span>

     <span class="kc">Null</span> <span class="o">~=</span> <span class="s1">''</span>
<span class="mb">o</span>

     <span class="mi">2</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="o">~=</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">4</span>
<span class="mb">l</span>

     <span class="kp">unequal</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="mb">o</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">unequal</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">not</span> <span class="kp">equal</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="up">up</h2>

<ul>
  <li>Class:<br />
<a href="#comparison-operation">comparison operation</a></li>
  <li>Properties:<br />
binary, predicate</li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">A</span> <span class="kp">up</span> <span class="nv">B</span></code> <code class="language-nial highlighter-rouge"><span class="kp">up</span> <span class="nv">A</span> <span class="nv">B</span></code></li>
  <li>See Also:<br />
<a href="#lte">lte</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">up</span></code> is used to do a lexicographic comparison of two
arrays returning <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is lexicographically less than or equal
to <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> and <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> otherwise. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are atoms of the same type,
then their values are compared using <code class="language-nial highlighter-rouge"><span class="o">&lt;=</span></code>, otherwise <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is viewed as
less than <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> if <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> has a lower type than <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The types are ordered
lowest to highest by <code class="language-nial highlighter-rouge"><span class="nv">boolean</span></code>, integer, real, character, phrase , and
<code class="language-nial highlighter-rouge"><span class="kp">fault</span></code>.</p>

<p>If one of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> is not atomic then the list of items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are
compared lexicographically to those of <code class="language-nial highlighter-rouge"><span class="nv">B</span></code>. The comparison is based on
the first position where the items differ, and the result is the
lexicographic comparison of the two items. If the lists of items agree
up to the point where one is exhausted, then the array with the shorter
list precedes the longer one.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> and <code class="language-nial highlighter-rouge"><span class="nv">B</span></code> are arrays with the same list of items, then the
comparison is decided by comparing their shapes lexicographically.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="mi">2</span> <span class="kp">up</span> <span class="mf">1.5</span>
<span class="mb">l</span>

     <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="kp">up</span> <span class="mi">3</span>
<span class="mi">1</span>

     <span class="mi">5</span> <span class="kp">up</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span>
<span class="mb">o</span>

     <span class="kp">tell</span> <span class="mi">10</span> <span class="kp">up</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mb">l</span>

     <span class="p">(</span><span class="mi">2</span> <span class="mi">2</span> <span class="kp">reshape</span> <span class="s1">'abcd'</span><span class="p">)</span> <span class="kp">up</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">4</span> <span class="kp">reshape</span> <span class="s1">'abcd'</span><span class="p">)</span>
<span class="mb">o</span>
</code></pre></div></div>

<p>The first example indicates that 2 precedes 1.5 because the two atoms
are of different type and type integer precedes type real. The second
example is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code> because the lists of items differ in the first item,
and 2 precedes 3. In the third example the lists of items differ in the
first item and 5 does not precede 3. In the fourth example, the arrays
differ in the first item and the <code class="language-nial highlighter-rouge"><span class="kp">up</span></code> comparison of 0 and 0 0 is <code class="language-nial highlighter-rouge"><span class="kc">true</span></code>
because they agree in the first item and 0 is shorter. In the final
example, the result is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code> because the items are the same and the
<code class="language-nial highlighter-rouge"><span class="kp">up</span></code> comparison of 2 2 and 1 4 is <code class="language-nial highlighter-rouge"><span class="kc">false</span></code>.</p>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="p">(</span><span class="nv">A</span> <span class="kp">up</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">A</span> <span class="o">~=</span> <span class="nv">B</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="kp">not</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">up</span> <span class="nv">A</span><span class="p">)</span>
   <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span> <span class="o">==&gt;</span> <span class="nv">A</span> <span class="kp">up</span> <span class="nv">B</span>
   <span class="p">(</span><span class="nv">A</span> <span class="kp">up</span> <span class="nv">B</span><span class="p">)</span> <span class="kp">and</span> <span class="p">(</span><span class="nv">B</span> <span class="kp">up</span> <span class="nv">A</span><span class="p">)</span> <span class="o">&lt;==&gt;</span> <span class="nv">A</span> <span class="o">=</span> <span class="nv">B</span>
</code></pre></div></div>

<p><strong>Definitions</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">sortup</span> <span class="k">IS</span> <span class="nb">SORT</span> <span class="kp">up</span>

     <span class="kp">gradeup</span> <span class="k">IS</span> <span class="nb">GRADE</span> <span class="kp">up</span>
</code></pre></div></div>

<h2 id="update">update</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">update</span> <span class="nv">Nm</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#updateall">updateall</a>, <a href="#deepupdate">deepupdate</a>, <a href="#place">place</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">update</span></code> provides the semantics of the <code class="language-nial highlighter-rouge"><span class="nv">Nm</span><span class="o">@</span><span class="nv">I</span> <span class="p">:=</span> <span class="nv">A</span></code> form of
assignment expression. <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> must be an existing variable represented by
a string, phrase or a cast. <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is the address of the location to be
updated. <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the array to be placed in the variable.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">;</span> <span class="kp">update</span> <span class="ss">"X</span> <span class="mi">0</span> <span class="mi">8</span>
<span class="mi">8</span> <span class="mi">4</span> <span class="mi">5</span>
     <span class="kp">update</span> <span class="o">!</span><span class="nv">X</span> <span class="mi">2</span> <span class="ss">"goodbye</span>
<span class="mi">8</span> <span class="mi">4</span> <span class="nv">goodbye</span>
</code></pre></div></div>

<p>The major purpose of <code class="language-nial highlighter-rouge"><span class="kp">update</span></code> is to allow a selective update at one
location in the array associated with a global variable without forcing
a copy. By passing the name of the variable to the operation that is
using <code class="language-nial highlighter-rouge"><span class="kp">update</span></code>, rather than its value, no sharing of the internal data
is made and hence the update can be done in place.</p>

<h2 id="updateall">updateall</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">updateall</span> <span class="nv">Nm</span> <span class="nv">I</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#update">update</a>, <a href="#deepupdate">deepupdate</a>, <a href="#placeall">placeall</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">updateall</span></code> provides the semantics of the <code class="language-nial highlighter-rouge"><span class="nv">Nm</span><span class="o">#</span><span class="nv">I</span> <span class="p">:=</span> <span class="nv">A</span></code> form
of assignment expression. <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> must be an existing variable represented
by a string, phrase or a cast. <code class="language-nial highlighter-rouge"><span class="nv">I</span></code> is the array of addresses of the
locations to be updated. <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is the array of values to be placed in the
variable.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">;</span>
     <span class="kp">updateall</span> <span class="ss">"X</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="mi">8</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">8</span> <span class="mi">4</span> <span class="mi">10</span>
     <span class="kp">updateall</span> <span class="o">!</span><span class="nv">X</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="ss">"hello</span> <span class="ss">"goodbye</span><span class="p">)</span>
<span class="mi">8</span> <span class="nv">hello</span> <span class="nv">goodbye</span>
</code></pre></div></div>

<p>The major purpose of <code class="language-nial highlighter-rouge"><span class="kp">updateall</span></code> is to allow a selective update at
several locations in the array associated with a global variable without
forcing a copy. By passing the name of the variable to the operation
that is using <code class="language-nial highlighter-rouge"><span class="kp">update</span></code>, rather than its value, no sharing of the
internal data is made, and hence the update can be done in place.</p>

<h2 id="throw">throw</h2>

<ul>
  <li>Class:<br />
<a href="#controlflow-operation">control flow operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="nv">throw</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#catch">catch</a></li>
</ul>

<p>The control flow operation <code class="language-nial highlighter-rouge"><span class="nv">throw</span></code> is used to interrupt the execution of
a function and return a value as the result of a function call invoked
with the tranformer <code class="language-nial highlighter-rouge"><span class="nv">CATCH</span></code>. The catch-throw mechanism provides a way to
gracefully exit a computation when an unexpected occurence is
encountered. The value thrown to the point where <code class="language-nial highlighter-rouge"><span class="nv">CATCH</span></code> was invokded
can be used to provide a default value or to signal an specific error
condition using a fault.</p>

<p>The CATCH-throw mechanism was added in Version 7 of Q’Nial to provide a
dynamic mechanism for changing the flow of control when an exceptional
situation is encountered.</p>

<h2 id="vacate">vacate</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">vacate</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reshape">reshape</a>, <a href="#void">void</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">vacate</span></code> is a renaming of the operation <code class="language-nial highlighter-rouge"><span class="p">(</span><span class="mi">0</span> <span class="kp">reshape</span><span class="p">)</span></code>. It
is used in Version 4 of Array Theory to produce an empty array with the
same prototype as its argument. In Version 6 of Array Theory it always
returns <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">vacate</span> <span class="mi">3</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">)</span><span class="o">=</span> <span class="kc">Null</span>
<span class="mb">l</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kp">vacate</span> <span class="k">is</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span> <span class="mi">0</span> <span class="kp">reshape</span> <span class="nv">A</span> <span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">vacate</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">vacate</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">void</span> <span class="kp">first</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="valence">valence</h2>

<ul>
  <li>Class:<br />
<a href="#measurement-operation">measurement operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">valence</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#shape">shape</a>, <a href="#tally">tally</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">valence</span></code> returns an integer indicating the number of axes
of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> is a single, list or table, the result is 0, 1 or 2
respectively.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">valence</span> <span class="mi">3</span>
<span class="mi">0</span>

     <span class="kp">valence</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="mi">1</span>

     <span class="kp">valence</span> <span class="kp">tell</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="mi">2</span>

     <span class="kp">valence</span> <span class="p">(</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="kp">reshape</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">8</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">valence</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span><span class="kp">tally</span> <span class="kp">shape</span> <span class="nv">A</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">shape</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">tally</span> <span class="kp">valence</span> <span class="nv">A</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<h2 id="value">value</h2>

<ul>
  <li>Class:<br />
<a href="#evaluation-operation">evaluation operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">value</span> <span class="nv">Nm</span></code></li>
  <li>See Also:<br />
<a href="#assign">assign</a>, <a href="#eval">eval</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">value</span></code> provides the semantics of <code class="language-nial highlighter-rouge"><span class="kp">value</span> <span class="nv">of</span> <span class="nv">a</span> <span class="kp">variable</span></code>
that is implicit whenever a variable is used in a value context. The
argument <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> is either a string or phrase denoting a variable or it is
the cast of a variable. The result is the value of the variable. If <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code>
is a string or phrase, the value is sought in the environment at the
point of application of <code class="language-nial highlighter-rouge"><span class="kp">value</span></code>. If <code class="language-nial highlighter-rouge"><span class="nv">Nm</span></code> is a cast, the value is sought
in the environment where the cast was created. The major use of <code class="language-nial highlighter-rouge"><span class="kp">value</span></code>
is in conjunction with <code class="language-nial highlighter-rouge"><span class="kp">assign</span></code> which allows arbitrary variables to be
stored and later retrieved using <code class="language-nial highlighter-rouge"><span class="kp">value</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">X</span> <span class="p">:=</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="p">;</span> <span class="kp">value</span> <span class="ss">"X</span> <span class="o">=</span> <span class="kp">value</span> <span class="o">!</span><span class="nv">X</span>
<span class="mb">l</span>
</code></pre></div></div>

<h2 id="void">void</h2>

<ul>
  <li>Class:<br />
<a href="#reshaping-operation">reshaping operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">void</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#reshape">reshape</a>, <a href="#vacate">vacate</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">void</span></code> is an obsolete operation that has the same effect
as the operation <code class="language-nial highlighter-rouge"><span class="p">(</span><span class="mi">0</span> <span class="kp">reshape</span><span class="p">)</span></code>. It is used in Version 4 of Array Theory
to produce an empty array with A as its prototype. In Version 6 of Array
Theory it always returns <code class="language-nial highlighter-rouge"><span class="kc">Null</span></code>.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">void</span> <span class="mi">3</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="kc">Null</span>
<span class="mb">l</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kp">void</span> <span class="k">is</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">(</span> <span class="mi">0</span> <span class="kp">reshape</span> <span class="kp">solitary</span> <span class="nv">A</span> <span class="p">)</span>
</code></pre></div></div>

<p><strong>Equations</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kp">void</span> <span class="nv">A</span> <span class="o">=</span> <span class="kc">Null</span>
   <span class="kp">vacate</span> <span class="nv">A</span> <span class="o">=</span> <span class="kp">void</span> <span class="kp">first</span> <span class="nv">A</span>
</code></pre></div></div>

<h2 id="watch">watch</h2>

<ul>
  <li>Class:<br />
<a href="#system-operation">system operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">watch</span> <span class="nv">Var</span> <span class="nv">Expr</span></code></li>
  <li>See Also:<br />
<a href="#debugging">debugging</a>, <a href="#watchlist">watchlist</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">watch</span></code> provides a means to watch when a variable has its
value changed. The first argument to <code class="language-nial highlighter-rouge"><span class="kp">watch</span></code> is a variable reference
expressed as a cast. For a global variable <code class="language-nial highlighter-rouge"><span class="nv">X</span></code>, the cast is <code class="language-nial highlighter-rouge"><span class="o">!</span><span class="nv">X</span></code>; for a
local variable <code class="language-nial highlighter-rouge"><span class="nv">Y</span></code> in definition <code class="language-nial highlighter-rouge"><span class="nv">G</span></code>, the cast is <code class="language-nial highlighter-rouge"><span class="o">!</span><span class="nv">G</span><span class="p">:</span><span class="nv">Y</span></code>.</p>

<p>The second argument is a string of program text to be executed when the
variable is changed. If it is empty then it indicates that the watch
should be removed. The program text can display the value being set,
execute a break, or take some other action.</p>

<p>The result of <code class="language-nial highlighter-rouge"><span class="kp">watch</span></code> is the variable reference and the previous watch
expression if any. This can be used to restore the watch setting by
storing it and using it as the argument to <code class="language-nial highlighter-rouge"><span class="kp">watch</span></code> at a later time.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nv">X</span> <span class="k">gets</span> <span class="kp">count</span> <span class="mi">5</span><span class="p">;</span>

     <span class="kp">watch</span> <span class="o">!</span><span class="nv">x</span> <span class="s1">'write </span><span class="se">''</span><span class="s1">X changed to: </span><span class="se">''</span><span class="s1"> X'</span>
<span class="o">+------------------++</span>
<span class="o">|+---+------------+||</span>
<span class="o">||</span><span class="mi">100</span><span class="o">|</span><span class="mi">2</span> <span class="mi">7926</span> <span class="mi">42354</span><span class="o">|||</span>
<span class="o">|+---+------------+||</span>
<span class="o">+------------------++</span>

     <span class="nv">X</span> <span class="k">gets</span> <span class="s1">'abc'</span>
<span class="o">+--------------+---+</span>
<span class="o">|</span><span class="nv">X</span> <span class="nv">changed</span> <span class="nv">to</span><span class="p">:</span> <span class="o">|</span><span class="nv">abc</span><span class="o">|</span>
<span class="o">+--------------+---+</span>
<span class="nv">abc</span>

     <span class="nv">X</span> <span class="k">gets</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
<span class="o">+--------------+-------+</span>
<span class="o">|</span><span class="nv">X</span> <span class="nv">changed</span> <span class="nv">to</span><span class="p">:</span> <span class="o">|</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="o">|</span>
<span class="o">+--------------+-------+</span>
<span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>

     <span class="nv">foo</span> <span class="k">is</span> <span class="k">op</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="nv">B</span> <span class="k">gets</span> <span class="kp">count</span> <span class="nv">A</span><span class="p">;</span> <span class="kp">reverse</span> <span class="nv">B</span> <span class="p">}</span>

     <span class="kp">watch</span> <span class="o">!</span><span class="nv">foo</span><span class="p">:</span><span class="nv">b</span>  <span class="s1">'write </span><span class="se">''</span><span class="s1">B in foo changed to: </span><span class="se">''</span><span class="s1"> B'</span>
<span class="o">+--------------------------------------++</span>
<span class="o">|+---+--------------------------------+||</span>
<span class="o">||</span><span class="mi">100</span><span class="o">|+--+------------+--------------+|||</span>
<span class="o">||</span>   <span class="o">||</span><span class="mi">50</span><span class="o">|</span><span class="mi">2</span> <span class="mi">7926</span> <span class="mi">42470</span><span class="o">|</span><span class="mi">23</span> <span class="mi">7798</span> <span class="mi">7798</span> <span class="nv">B</span><span class="o">||||</span>
<span class="o">||</span>   <span class="o">|+--+------------+--------------+|||</span>
<span class="o">|+---+--------------------------------+||</span>
<span class="o">+--------------------------------------++</span>

     <span class="kp">watchlist</span>
<span class="o">+-----------------------------+----------------------------------------+</span>
<span class="o">|+--+------------------------+|+------+-------------------------------+|</span>
<span class="o">||!</span><span class="nv">X</span><span class="o">|</span><span class="kp">write</span> <span class="s1">'X changed to: '</span> <span class="nv">X</span><span class="o">|||!</span><span class="nv">FOO</span><span class="p">:</span><span class="nv">B</span><span class="o">|</span><span class="kp">write</span> <span class="s1">'B in foo changed to: '</span> <span class="nv">B</span><span class="o">||</span>
<span class="o">|+--+------------------------+|+------+-------------------------------+|</span>
<span class="o">+-----------------------------+----------------------------------------+</span>

     <span class="kp">watch</span> <span class="o">!</span><span class="nv">x</span> <span class="s1">''</span>
<span class="o">+------------------+------------------------+</span>
<span class="o">|+---+------------+|</span><span class="kp">write</span> <span class="s1">'X changed to: '</span> <span class="nv">X</span><span class="o">|</span>
<span class="o">||</span><span class="mi">100</span><span class="o">|</span><span class="mi">2</span> <span class="mi">7926</span> <span class="mi">42354</span><span class="o">||</span>                        <span class="o">|</span>
<span class="o">|+---+------------+|</span>                        <span class="o">|</span>
<span class="o">+------------------+------------------------+</span>

     <span class="kp">watchlist</span>
<span class="o">+----------------------------------------+</span>
<span class="o">|+------+-------------------------------+|</span>
<span class="o">||!</span><span class="nv">FOO</span><span class="p">:</span><span class="nv">B</span><span class="o">|</span><span class="kp">write</span> <span class="s1">'B in foo changed to: '</span> <span class="nv">B</span><span class="o">||</span>
<span class="o">|+------+-------------------------------+|</span>
<span class="o">+----------------------------------------+</span>
</code></pre></div></div>

<p>To clear all watches use:</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="nb">EACH</span> <span class="kp">first</span> <span class="kp">Watchlist</span> <span class="nb">EACHLEFT</span> <span class="kp">watch</span> <span class="s1">''</span>
</code></pre></div></div>

<h2 id="write">write</h2>

<ul>
  <li>Class:<br />
<a href="#interactive-input-output-operation">interactive input/output
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">write</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#writescreen">writescreen</a>, <a href="#writechars">writechars</a>,
<a href="#read">read</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">write</span></code> displays the picture of an array on the display
screen. The result is the no-expression fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>. The picture
displayed depends on the settings of the <code class="language-nial highlighter-rouge"><span class="kp">diagram</span><span class="o">/</span><span class="kp">sketch</span></code> and
<code class="language-nial highlighter-rouge"><span class="nv">decor</span><span class="o">/</span><span class="nv">nodecor</span></code> switches. The effect of <code class="language-nial highlighter-rouge"><span class="kp">write</span></code> is the same as applying
<code class="language-nial highlighter-rouge"><span class="kp">writescreen</span></code> to the picture of the array.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">write</span> <span class="mi">3</span> <span class="p">(</span><span class="mi">4</span> <span class="mi">5</span><span class="p">);</span>
<span class="o">+-+---+</span>
<span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">4</span> <span class="mi">5</span><span class="o">|</span>
<span class="o">+-+---+</span>
</code></pre></div></div>

<p><strong>Definition</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">write</span> <span class="k">IS</span> <span class="kp">OPERATION</span> <span class="nv">A</span> <span class="p">{</span><span class="err">­</span> <span class="kp">writescreen</span> <span class="kp">picture</span> <span class="nv">A</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="writearray">writearray</h2>

<ul>
  <li>Class:<br />
<a href="#nial-direct-access-file-operation">nial direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">writearray</span> <span class="nv">F</span> <span class="nv">N</span> <span class="nv">A</span></code></li>
  <li>See Also:<br />
<a href="#writerecord">writerecord</a>, <a href="#readarray">readarray</a>,
<a href="#readrecord">readrecord</a>, <a href="#eraserecord">eraserecord</a>,
<a href="#writefile">writefile</a>, <a href="#filetally">filetally</a>, <a href="#open">open</a>,
<a href="#close">close</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writearray</span></code> writes array <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> to the direct access file
designated by <code class="language-nial highlighter-rouge"><span class="nv">F</span></code> at component number <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. If a component already exists
at that component number and <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> can fit in the space taken by that
component, the existing one is overwritten. If not, the new component is
written at the end of the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file and the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> file is updated to
indicate the starting point for the new component. The space used by the
previous value is recorded for a future compression.</p>

<p>The second argument <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> can be a list of numbers, in which case the
items of <code class="language-nial highlighter-rouge"><span class="nv">A</span></code> are written to the components designated by the integers in
<code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. The file must be open for direct access. The other direct access
file operations, <code class="language-nial highlighter-rouge"><span class="kp">readrecord</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">writerecord</span></code>, must not be used on a
file that is created using <code class="language-nial highlighter-rouge"><span class="kp">writearray</span></code>. However, <code class="language-nial highlighter-rouge"><span class="kp">eraserecord</span></code> and
<code class="language-nial highlighter-rouge"><span class="kp">filetally</span></code> are used for both kinds of direct access files.</p>

<p>After a <code class="language-nial highlighter-rouge"><span class="kp">writearray</span></code> or <code class="language-nial highlighter-rouge"><span class="kp">writerecord</span></code>, if the total unused space is a
significant amount of the space occupied by the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file, the file is
compressed with the records being placed in order.</p>

<p>The content of an array component is placed in the file in a binary form
independent of the workspace in which it was created. Data that is
written to a direct access file, erased, and then read in again, may
take up more space in the workspace after this process due to lack of
sharing of internal representations.</p>

<h2 id="writechars">writechars</h2>

<ul>
  <li>Class:<br />
<a href="#interactive-input-output-operation">interactive input/output
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">writechars</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#writescreen">writescreen</a>, <a href="#write">write</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writechars</span></code> writes <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> to the screen at the current
cursor position, without supplying a trailing “new line” character.
Thus, the cursor is left at the position just after the text. <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> may be
a string, a phrase or a single character. The principal use of
<code class="language-nial highlighter-rouge"><span class="kp">writechars</span></code> is in applications where the display screen is managed as a
fixed object and scrolling must be avoided.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">writechars</span> <span class="s1">'hello world'</span>
</code></pre></div></div>

<h2 id="writefield">writefield</h2>

<ul>
  <li>Class:<br />
<a href="#unix-direct-access-file-operation">host direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">writefield</span> <span class="nv">Filename</span> <span class="nv">Start</span> <span class="nv">Str</span></code></li>
  <li>See Also:<br />
<a href="#readfield">readfield</a>, <a href="#filelength">filelength</a>,
<a href="#writerecord">writerecord</a>, <a href="#writearray">writearray</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writefield</span></code> is used to write a character string to a
portion of an existing host file. The first argument is the file name,
followed by the integer offset to the beginning of the field to be
written and by the string to be written. The result is the <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>
fault.</p>

<p><strong>Example</strong></p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">writefield</span> <span class="ss">"phonefile</span> <span class="mi">200</span> <span class="s1">'Mike Smith  389-4444'</span>
</code></pre></div></div>

<p>In the example, <code class="language-nial highlighter-rouge"><span class="kp">writefield</span></code> overwrites the contents of file <code class="language-nial highlighter-rouge"><span class="nv">phonefile</span></code>
starting at position 200 by the string given as the third argument.</p>

<h2 id="writefile">writefile</h2>

<ul>
  <li>Class:<br />
<a href="#file-operation">file operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">writefile</span> <span class="nv">N</span> <span class="nv">S</span></code> <code class="language-nial highlighter-rouge"><span class="kp">writefile</span> <span class="nv">N</span> <span class="nv">S</span> <span class="p">[</span><span class="nv">Eolsw</span><span class="p">]</span></code></li>
  <li>See Also:<br />
<a href="#readfile">readfile</a>, <a href="#putfile">putfile</a>, <a href="#open">open</a>,
<a href="#close">close</a>, <a href="#appendfile">appendfile</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code> is used to write the character array <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> to
the file designated by file designator <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. The file designator is an
integer returned by <code class="language-nial highlighter-rouge"><span class="kp">open</span></code>. The file must have been opened for writing,
appending or communication.</p>

<p>The argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> may be a character, a string, or an array of characters
of any valence. If it is a character or string, a single record is
written to the file. If it is a table, the rows of the table are written
as records to the file. The appropriate end-of-line indication is added
for each record written. If the argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> is empty, an empty record
is written.</p>

<p>If <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code> is successful, the result is the no-expression fault
<code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>. If the argument is not a character, string or character
table, the fault <code class="language-nial highlighter-rouge"><span class="gr">?not</span> <span class="nv">text</span> <span class="nv">data</span></code> is returned.</p>

<p>If the optional third argument is present, it is used to indicate
whether the end-of-line indication should be written. If the third
argument is <code class="language-nial highlighter-rouge"><span class="mb">o</span></code> or <code class="language-nial highlighter-rouge"><span class="mi">0</span></code> the indication is omitted; if it is <code class="language-nial highlighter-rouge"><span class="mb">l</span></code> or <code class="language-nial highlighter-rouge"><span class="mi">1</span></code>,
the indication is placed in the file. This form of <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code> is used
in communications mode to send information to a device driver on the
EXTDOS version.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">writefile</span> <span class="mi">5</span> <span class="s1">'a line of text'</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="writerecord">writerecord</h2>

<ul>
  <li>Class:<br />
<a href="#nial-direct-access-file-operation">nial direct access file
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">writerecord</span> <span class="nv">F</span> <span class="nv">N</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#readrecord">readrecord</a>, <a href="#writearray">writearray</a>,
<a href="#readarray">readarray</a>, <a href="#eraserecord">eraserecord</a>, <a href="#open">open</a>,
<a href="#close">close</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writerecord</span></code> writes string <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> to the direct access file
designated by <code class="language-nial highlighter-rouge"><span class="nv">F</span></code> at component number <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>.</p>

<p>If a component already exists at that component number and <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> can fit
in the space taken by that component, the existing one is overwritten.
If not, the new component is written at the end of the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file and
the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">ndx</span></code> file is updated to indicate the starting point for the new
component.</p>

<p>The second argument <code class="language-nial highlighter-rouge"><span class="nv">N</span></code> can be a list of numbers, in which case the
items of <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> must be strings and are written to the components
designated by the integers in <code class="language-nial highlighter-rouge"><span class="nv">N</span></code>. The file must be open for direct
access. The other direct access file operations, <code class="language-nial highlighter-rouge"><span class="kp">readarray</span></code> and
<code class="language-nial highlighter-rouge"><span class="kp">writearray</span></code>, must not be used on a file that is created using
<code class="language-nial highlighter-rouge"><span class="kp">writerecord</span></code>. However, <code class="language-nial highlighter-rouge"><span class="kp">eraserecord</span></code> and <code class="language-nial highlighter-rouge"><span class="kp">filetally</span></code> are used for both
kinds of direct access files.</p>

<p>The data written in the <code class="language-nial highlighter-rouge"><span class="o">.</span><span class="nv">rec</span></code> file by <code class="language-nial highlighter-rouge"><span class="kp">writerecord</span></code> does not contain
any end-of-line indications unless they explicitly are part of the
strings being written.</p>

<h2 id="writescreen">writescreen</h2>

<ul>
  <li>Class:<br />
<a href="#interactive-input-output-operation">interactive input/output
operation</a></li>
  <li>Usage:<br />
<code class="language-nial highlighter-rouge"><span class="kp">writescreen</span> <span class="nv">S</span></code></li>
  <li>See Also:<br />
<a href="#write">write</a>, <a href="#writechars">writechars</a>, <a href="#writefile">writefile</a>,
<a href="#readscreen">readscreen</a></li>
</ul>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writescreen</span></code> is used to write character data to the
display screen. The argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> may be a character, a string, or a
character table. If it is a character or string, a single line is
displayed. If it is a table, the rows of the table are written as lines.
If the argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> is empty, an empty line is displayed. In window
mode, the data is written within the bounds of the active window.</p>

<p>The result of the operation is the no-expression fault <code class="language-nial highlighter-rouge"><span class="gr">?noexpr</span></code>. If the
argument is not a character, string or character table, the fault <code class="language-nial highlighter-rouge"><span class="gr">?not</span>
<span class="nv">text</span> <span class="nv">data</span></code> is returned.</p>

<p>After the text is displayed, the cursor is placed on the line following
the last line written.</p>

<div class="language-nial highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="kp">writescreen</span>  <span class="s1">'End of Manual'</span> <span class="p">;</span>
</code></pre></div></div>

<p>The operation <code class="language-nial highlighter-rouge"><span class="kp">writescreen</span></code> is similar to the operation <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code>. For
most host systems, <code class="language-nial highlighter-rouge"><span class="kp">writefile</span></code> may be used with the <code class="language-nial highlighter-rouge"><span class="nv">standard</span> <span class="nv">output</span>
<span class="nv">device</span></code> to get the same effect as a <code class="language-nial highlighter-rouge"><span class="kp">writescreen</span></code>. The argument <code class="language-nial highlighter-rouge"><span class="nv">S</span></code> may
be a character, a string, or a character table.</p>


        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      

      
    </div>

    
  </article>

  
  


    <button id="totop">Return to Top ∧</button>
  
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li style="display:none"><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 John Gibbons. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>. Photo by <a href="https://unsplash.com/@thenata?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Anastasia Taioglou</a> on <a href="https://unsplash.com/s/photos/ocean?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
